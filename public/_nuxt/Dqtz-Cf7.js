import{_ as W}from"./B0LaQ5Ul.js";import{d as J,r as E,a as F,b as r,e as m,f as a,h as s,n as i,g as e,p as T,i as A,v as M,t as u,F as P,j as V,s as D,u as I,_ as L,k as Q,l as R,m as w,P as Z,x as S}from"./JBsVKZmo.js";import{_ as ee}from"./K_BULppg.js";import{d as te,e as se}from"./D__F487H.js";import{_ as oe}from"./B_RpyVAc.js";import{h as ae,e as O,f as U,r as ne}from"./CZ6eCgXt.js";import{r as G}from"./rvUhT-B_.js";import{r as le,a as ie}from"./T519L7Bv.js";import{Y as X,h as B,G as z,V as H,S as K}from"./BhnZKBDU.js";import{r as re}from"./5DhtzSAE.js";import{r as ce}from"./T2FA4oXX.js";import{_ as de}from"./Baf_jgBX.js";import{u as j}from"./CixKDeqk.js";import{u as ue}from"./B76wTae4.js";import{P as pe}from"./CrgnIM47.js";import{r as me}from"./DXJOBCvN.js";import{_ as _e}from"./VmwGiaas.js";import"./WJywbfjK.js";import"./BXOjIDzI.js";import"./n4_or2sV.js";import"./B_mMcxuE.js";import"./C61IPztP.js";import"./CSdLnFQ8.js";import"./DwzHQmZQ.js";const fe=e("div",{class:"fixed inset-0 bg-black bg-opacity-50"},null,-1),he={class:"fixed inset-0 overflow-y-auto"},xe={class:"flex min-h-full items-center justify-center p-4 text-center"},ge={class:"border-b px-3 py-3 flex items-center justify-between"},ye=e("img",{src:oe,class:"w-8 h-8 mr-2"},null,-1),ve={class:"flex items-center justify-center mx-auto my-20"},we={class:"space-y-3 px-5 py-5"},be={class:"w-full flex flex-col space-y-1"},Te=e("label",{class:"font-semibold text-lg"},"Name",-1),ke={class:"w-full flex flex-col space-y-1"},$e=e("label",{class:"font-semibold text-lg"},"Short Name",-1),Ce={class:"w-full flex flex-col space-y-1"},De=e("label",{class:"font-semibold text-lg"},"Laboratory Section",-1),Ie={class:"w-full flex flex-col space-y-1"},Ee=e("label",{class:"font-semibold text-lg"},"Specific Sex",-1),Pe={class:"w-full flex flex-col space-y-1"},Ve=e("label",{class:"font-semibold text-lg"},"Compatible Specimen",-1),Se={class:"flex flex-wrap gap-2"},je={class:"w-full flex flex-col space-y-1"},Be=e("label",{class:"font-semibold text-lg"},"Organisms",-1),Fe={class:"flex flex-wrap gap-2"},Le={key:0},Oe={class:"w-full flex flex-col space-y-1"},Ue=e("label",{class:"font-semibold text-lg"},"Measure",-1),qe={class:"w-full flex flex-col space-y-1"},Ne=e("label",{class:"font-semibold text-lg"},"Expected Turn Around Time",-1),Ae={class:"w-full flex flex-col space-y-1"},Me=e("label",{class:"font-semibold text-lg"},"Date Created",-1),Re=J({__name:"index",props:{data:{type:Object,required:!0}},setup(n){const l=n,_=le,c=E(!1),t=E(!1),o=E({}),d=F("token"),p=async()=>{f(),t.value=!0;const g={route:`${O.viewTestType}/${l.data.id}`,method:"GET",token:`${d.value}`},{data:h,error:y,pending:x}=await U(g);t.value=x,h.value&&(o.value=h.value,t.value=!1),y.value&&(t.value=!1,I().$toast.error("An error occurred, please try again!"))},f=()=>{c.value=!c.value};return(g,h)=>{const y=L,x=Q;return r(),m("div",null,[a(y,{click:p,color:"primary",text:"View",icon:s(_)},null,8,["icon"]),a(s(K),{appear:"",show:s(c),as:"template"},{default:i(()=>[a(s(X),{as:"div",class:"relative z-10"},{default:i(()=>[a(s(B),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[fe]),_:1}),e("div",he,[e("div",xe,[a(s(B),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[a(s(z),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>{var k,$,b,C,q,N;return[e("div",ge,[a(s(H),{as:"h3",class:"text-lg flex items-center font-semibold leading-6"},{default:i(()=>[ye,T(" Test Type Details ")]),_:1}),e("button",{onClick:h[0]||(h[0]=()=>{f()})},[a(s(G),{class:"w-5 h-5"})])]),A(e("div",ve,[a(x,{loading:s(t)},null,8,["loading"])],512),[[M,s(t)]]),A(e("div",we,[e("div",be,[Te,e("p",null,u((k=s(o))==null?void 0:k.name),1)]),e("div",ke,[$e,e("p",null,u(($=s(o))==null?void 0:$.short_name),1)]),e("div",Ce,[De,e("p",null,u((C=(b=s(o))==null?void 0:b.department)==null?void 0:C.id),1)]),e("div",Ie,[Ee,e("p",null,u(s(o).sex),1)]),e("div",Pe,[Ve,e("div",Se,[(r(!0),m(P,null,V(s(o).specimens,v=>(r(),m("p",{key:v},u(`${v.name}`),1))),128))])]),e("div",je,[Be,e("div",Fe,[(r(!0),m(P,null,V(s(o).organisms,(v,Y)=>(r(),m("p",{key:v},[T(u(`${v.name}`),1),Y!==s(o).organisms.length-1?(r(),m("span",Le,",")):D("",!0)]))),128))])]),e("div",Oe,[Ue,(r(!0),m(P,null,V(s(o).indicators,v=>(r(),m("p",{key:v},u(`${v.name}`),1))),128))]),e("div",qe,[Ne,e("p",null,u(`${(q=s(o).expected_turn_around_time)==null?void 0:q.value} ${(N=s(o).expected_turn_around_time)==null?void 0:N.unit}`),1)]),e("div",Ae,[Me,e("p",null,u(s(ae)(s(o).created_date).format("dateFormat"in g?g.dateFormat:s(te))),1)])],512),[[M,!s(t)]])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),Ge={components:{TransitionRoot:K,TransitionChild:B,Dialog:X,DialogPanel:z,DialogTitle:H,XMarkIcon:G,ExclamationTriangleIcon:re},data(){return{show:!1,deleteIcon:ce,loading:!1,cookie:F("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(n){this.loading=!0;const l={route:`${O.testTypes}/${n}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{data:_,error:c,pending:t}=await U(l);this.loading=t,_.value&&(this.handleClick(),I().$toast.success(`${this.data.name} test type deleted successfully!`),this.loading=!1,this.$emit("update",!0)),c.value&&(console.error(c.value),I().$toast.error(se),this.loading=!1)},handleClick(){this.show=!this.show}}},Xe=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ze={class:"fixed inset-0 overflow-y-auto"},He={class:"flex min-h-full items-center justify-center p-4 text-center"},Ke={class:"border-b px-3 py-3 flex items-center justify-between"},Ye={class:"mt-2 space-y-3 px-5"},We={class:"rounded px-2 py-2"},Je={class:"font-semibold text-red-500"},Qe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ze(n,l,_,c,t,o){const d=L,p=w("TransitionChild"),f=w("ExclamationTriangleIcon"),g=w("DialogTitle"),h=w("XMarkIcon"),y=w("FormKit"),x=w("DialogPanel"),k=w("Dialog"),$=w("TransitionRoot");return r(),m("div",null,[a(d,{click:o.handleClick,color:"error",text:"Delete",icon:t.deleteIcon},null,8,["click","icon"]),a($,{appear:"",show:t.show,as:"template"},{default:i(()=>[a(k,{as:"div",class:"relative z-10"},{default:i(()=>[a(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[Xe]),_:1}),e("div",ze,[e("div",He,[a(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[a(x,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[e("div",Ke,[a(g,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[a(f,{class:"h-5 w-5 mr-2"}),T(" Confirm delete ")]),_:1}),e("button",{onClick:l[0]||(l[0]=(...b)=>o.handleClick&&o.handleClick(...b))},[a(h,{class:"w-5 h-5"})])]),a(y,{type:"form","submit-label":"Update",onSubmit:l[2]||(l[2]=b=>o.deleteData(_.data.id)),actions:!1},{default:i(({value:b})=>[e("div",Ye,[e("div",We,[T(" Do you really want to delete "),e("span",Je,u(_.data.name),1),T("? Note that once this action is completed, it can not be undone ")]),a(y,{type:"textarea",label:"Reason",validation:"required",modelValue:t.reason,"onUpdate:modelValue":l[1]||(l[1]=C=>t.reason=C)},null,8,["modelValue"])]),e("div",Qe,[a(d,{loading:t.loading,type:"submit",click:()=>{},color:"error",icon:t.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const et=R(Ge,[["render",Ze]]),tt={components:{MagnifyingGlassIcon:me},setup(){ue({title:`${pe.name.toUpperCase()} - Test Types`})},data(){return{header:"Test Types",loading:!0,addIcon:ne,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],editIcon:ie,showEdit:!1,serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},search:"",testTypes:new Array,cookie:F("token"),headers:[{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"expected turn around time",value:"expected_turn_around_time"},{text:"actions",value:"actions"}],searchField:"name",searchValue:""}},created(){this.init(),(this._.provides[Z]||this.$route).query.create&&I().$toast.success("Test type created successfully!")},methods:{async init(){const{page:n,rowsPerPage:l}=this.serverOptions;this.loading=!0;const _={route:`${O.testTypes}?page=${n}&per_page=${l}&search=${this.search}`,method:"GET",token:`${this.cookie}`,body:{}};let{data:c,error:t,pending:o}=await U(_);this.loading=o,c.value&&(this.testTypes=c.value.test_types.map(d=>{var p,f;return{...d,expected_turn_around_time:`${d.expected_turn_around_time!==null?((p=d.expected_turn_around_time)==null?void 0:p.value)+" "+(d.expected_turn_around_time.unit==null?"":(f=d.expected_turn_around_time.unit)==null?void 0:f.toLowerCase()):""}`}}),this.serverItemsLength=c.value.meta.total_count),t.value&&console.error(t.value)},updateTestTypes(n){typeof n=="object"&&(this.serverOptions=n),this.init()},updateSearch(n){this.searchValue=n,this.search=n,this.updateTestTypes(!0)},edit(n){this.showEdit=!0},navigateToEdit(n){const l=n.name.trim().toLowerCase().replace(/[\s\W-]+/g,"-").replace(/^-+|-+$/g,"");this.$router.push(`/test-catalog/test-types/edit/${l}?testType=${n.id}`)},createTestType(){this.$router.push("/test-catalog/test-types/create")}}},st={class:"px-5 py-5"},ot={class:"flex items-center justify-between py-5"},at={class:"text-2xl font-semibold flex items-center uppercase"},nt=e("img",{src:_e,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),lt={class:"flex items-center space-x-3"},it={class:"flex justify-end w-full px-2 py-2 mb-2"},rt={class:"py-2 flex items-center space-x-2"};function ct(n,l,_,c,t,o){const d=W,p=L,f=ee,g=Re,h=et,y=de;return r(),m("div",st,[a(d,{pages:t.pages},null,8,["pages"]),e("div",ot,[e("div",at,[nt,T(" "+u(t.header),1)]),e("div",lt,[("usePermissions"in n?n.usePermissions:s(j))().can.manage("test_catalog")?(r(),S(p,{key:0,text:"Create Test Type",icon:t.addIcon,color:"primary",click:o.createTestType},null,8,["icon","click"])):D("",!0)])]),e("div",it,[("usePermissions"in n?n.usePermissions:s(j))().can.manage("test_catalog")?(r(),S(f,{key:0,search:t.search,onUpdate:o.updateSearch},null,8,["search","onUpdate"])):D("",!0)]),("usePermissions"in n?n.usePermissions:s(j))().can.manage("test_catalog")?(r(),S(y,{key:0,headers:t.headers,data:t.testTypes,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:o.updateTestTypes},{actions:i(({item:x})=>[e("div",rt,[a(g,{onEdit:o.edit,open:t.showEdit,data:x},null,8,["onEdit","open","data"]),a(p,{click:()=>{o.navigateToEdit(x)},color:"success",text:"Edit",icon:t.editIcon},null,8,["click","icon"]),a(h,{onUpdate:o.updateTestTypes,data:x},null,8,["onUpdate","data"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])):D("",!0)])}const Bt=R(tt,[["render",ct]]);export{Bt as default};

import{_ as L}from"./Breadcrumb.vue.6444e325.js";import{u as V,a as C,_ as $,f as i,o as w,c as b,d as t,b as e,g as c,h as I,e as U,w as O,v as z,t as D,F as H,r as W,z as J,A as Q}from"./entry.fa11db54.js";import{_ as Y}from"./Multiselect.db9712d1.js";import{_ as M}from"./OutlinedButton.00008a40.js";import{e as K}from"./constants.d5a76da2.js";import{r as Z,e as T,f as k,k as ee,a as te}from"./fetch.b54202be.js";import{r as A}from"./XMarkIcon.3a44566b.js";import{r as R}from"./UserIcon.2e46ffae.js";import{r as B}from"./WrenchScrewdriverIcon.717f2dd1.js";import{r as X}from"./ArrowDownTrayIcon.fe2e5990.js";import{r as G}from"./ArrowUturnLeftIcon.4bcaad17.js";import{S as q,h as j,U as F,G as N,V as E}from"./transition.b7892d15.js";import{_ as oe}from"./SearchBar.51c9c2a0.js";import{_ as se}from"./Loader.cc62e805.js";import{r as ne,a as ae}from"./PencilSquareIcon.17ae5386.js";import{r as le}from"./TrashIcon.7ebc397b.js";import{_ as ie}from"./Datatable.87a1d2fb.js";import{u as ce}from"./vue.f36acd1f.623e2c0e.js";import{P as re}from"./package.47b8853b.js";import{r as de}from"./MagnifyingGlassIcon.568661b7.js";import"./nuxt-link.288a2b47.js";import"./HomeIcon.5d2fad11.js";import"./PrinterIcon.0cb858a1.js";import"./hidden.c0a01a27.js";const ue={components:{TransitionRoot:q,TransitionChild:j,Dialog:F,DialogPanel:N,DialogTitle:E,XMarkIcon:A,UserIcon:R},data(){return{open:!1,driverIcon:B,addIcon:Z,saveIcon:X,clearIcon:G,wardSelected:null,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:V("token")}},created(){this.init()},methods:{async init(){const a={route:T.testTypes,method:"GET",token:`${this.cookie}`,body:{}};let o=await k(a);o.data.value&&(this.rawTestTypes=o.data.value.test_types,o.data.value.test_types.map(n=>{this.testTypes.push(n.name)})),o.error.value&&console.log(o.error.value)},async submitForm(){this.loading=!0;let a=new Array;this.testTypesSelected.map(r=>{this.rawTestTypes.filter(s=>{r==s.name&&a.push(s.id)})});const o={route:T.testPanels,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName,description:this.description,test_types:a}};let n=await k(o);this.loading=n.pending,n.data.value&&(this.handleClick(),C().$toast.success("Test panel created successfully!"),this.$emit("update",!0)),n.error.value&&(C().$toast.error(K),console.log(n.error.value),this.handleClick())},updateTestType(a){console.log(a),this.testTypesSelected=a},handleClick(){this.open=!this.open}}},pe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),me={class:"fixed inset-0 overflow-y-auto"},_e={class:"flex min-h-full items-center justify-center p-4 text-center"},he={class:"border-b px-3 py-3 flex items-center justify-between"},fe={class:"mt-2 space-y-3 px-5"},ye={class:"w-full flex"},ve={class:"w-full flex"},ge={class:"w-full"},xe={class:"w-full flex"},Te={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function we(a,o,n,r,s,l){const d=U,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=i("FormKit"),h=Y,g=M,_=i("DialogPanel"),f=i("Dialog"),S=i("TransitionRoot");return w(),b("div",null,[t("div",null,[e(d,{click:l.handleClick,text:"Create test panel",color:"primary",icon:s.addIcon},null,8,["click","icon"])]),e(S,{appear:"",show:s.open,as:"template"},{default:c(()=>[e(f,{as:"div",onClose:l.handleClick,class:"relative z-20"},{default:c(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[pe]),_:1}),t("div",me,[t("div",_e,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[e(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[t("div",he,[e(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[I(" Create Test Panel ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...x)=>l.handleClick&&l.handleClick(...x))},[e(v,{class:"w-5 h-5"})])]),e(u,{type:"form","submit-label":"Update",onSubmit:l.submitForm,actions:!1},{default:c(({value:x})=>[t("div",fe,[t("div",ye,[e(u,{type:"text",label:"Name",validation:"required",modelValue:s.name,"onUpdate:modelValue":o[1]||(o[1]=p=>s.name=p)},null,8,["modelValue"])]),t("div",ve,[e(u,{type:"text",label:"Short Name",validation:"required",modelValue:s.shortName,"onUpdate:modelValue":o[2]||(o[2]=p=>s.shortName=p)},null,8,["modelValue"])]),t("div",ge,[e(h,{onUpdate:l.updateTestType,label:"Select Test Types",items:s.testTypes,"items-selected":s.testTypesSelected,mode:"tags"},null,8,["onUpdate","items","items-selected"])]),t("div",xe,[e(u,{type:"textarea",label:"Description",validation:"required",modelValue:s.description,"onUpdate:modelValue":o[3]||(o[3]=p=>s.description=p)},null,8,["modelValue"])])]),t("div",Te,[e(g,{text:"Dismiss",type:"button",click:l.handleClick},null,8,["click"]),e(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const be=$(ue,[["render",we]]),ke={components:{TransitionRoot:q,TransitionChild:j,Dialog:F,DialogPanel:N,DialogTitle:E,XMarkIcon:A,UserIcon:R},data(){return{open:!1,driverIcon:B,viewIcon:ne,saveIcon:X,clearIcon:G,wardSelected:null,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,details:{id:0,name:"",short_name:"",description:"",test_types:[{id:0,name:""}]},cookie:V("token")}},props:{data:{required:!0,type:Object}},methods:{async init(){this.open=!0,this.loading=!0;const{pending:a,error:o,data:n}=await ee(`${T.testPanels}/${this.data.id}`,{method:"GET",headers:{Authorization:`${this.cookie}`}},"$zO6W2HBg68");n.value&&(this.details=n.value,this.loading=!1),o.value&&(console.log(o.value),this.loading=!1,C().$toast.error("An error occurred, please try again!"))},handleClick(){this.open=!this.open}}},Ce=""+new URL("emergency_post.45544db5.svg",import.meta.url).href;const P=a=>(J("data-v-b60b14cc"),a=a(),Q(),a),De=P(()=>t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)),Ie={class:"fixed inset-0 overflow-y-auto"},Pe={class:"flex min-h-full items-center justify-center p-4 text-center"},Se={class:"border-b px-3 py-3 flex items-center justify-between"},Ve=P(()=>t("img",{src:Ce,class:"w-8 h-8 mr-2"},null,-1)),$e={class:"flex items-center justify-center mx-auto my-20"},Ue={class:"space-y-3 px-5 py-5"},Ae={class:"w-full flex flex-col space-y-1"},qe=P(()=>t("label",{class:"font-semibold text-lg"},"Name",-1)),je={class:"underline"},Fe={class:"w-full flex flex-col space-y-1"},Ne=P(()=>t("label",{class:"font-semibold text-lg"},"Short Name",-1)),Ee={class:"underline"},Me={class:"w-full flex flex-col space-y-1"},Re=P(()=>t("label",{class:"font-semibold text-lg"},"Description",-1)),Be={class:"underline"},Xe={class:"w-full flex flex-col space-y-1"},Ge=P(()=>t("label",{class:"font-semibold list text-lg"},"Test Types",-1));function Oe(a,o,n,r,s,l){const d=U,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=se,h=i("DialogPanel"),g=i("Dialog"),_=i("TransitionRoot");return w(),b("div",null,[t("div",null,[e(d,{click:l.init,text:"View",color:"primary",icon:s.viewIcon},null,8,["click","icon"])]),e(_,{appear:"",show:s.open,as:"template"},{default:c(()=>[e(g,{as:"div",onClose:()=>{},class:"relative z-10"},{default:c(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[De]),_:1}),t("div",Ie,[t("div",Pe,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[e(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[t("div",Se,[e(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[Ve,I(" View Test Panel ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...f)=>l.handleClick&&l.handleClick(...f))},[e(v,{class:"w-5 h-5"})])]),O(t("div",$e,[e(u,{loading:s.loading},null,8,["loading"])],512),[[z,s.loading]]),O(t("div",Ue,[t("div",Ae,[qe,t("p",je,D(s.details.name),1)]),t("div",Fe,[Ne,t("p",Ee,D(s.details.short_name),1)]),t("div",Me,[Re,t("p",Be,D(s.details.description),1)]),t("div",Xe,[Ge,(w(!0),b(H,null,W(s.details.test_types,f=>(w(),b("div",{key:f.id,class:"flex flex-wrap underline"},D(f.name),1))),128))])],512),[[z,!s.loading]])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ze=$(ke,[["render",Oe],["__scopeId","data-v-b60b14cc"]]),Ke={components:{TransitionRoot:q,TransitionChild:j,Dialog:F,DialogPanel:N,DialogTitle:E,XMarkIcon:A,UserIcon:R},props:{data:{required:!0,type:Object}},data(){return{open:!1,driverIcon:B,editIcon:ae,saveIcon:X,clearIcon:G,wardSelected:null,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:V("token")}},methods:{async loadTestTypes(){const a={route:T.testTypes,method:"GET",token:`${this.cookie}`,body:{}},{data:o,error:n,pending:r}=await k(a);o.value&&(this.rawTestTypes=o.value.test_types,o.value.test_types.map(s=>{this.testTypes.push(s.name)})),n.value&&console.log(n.value)},async init(){this.open=!0,await this.loadTestTypes(),this.testTypesSelected=new Array;const a={route:`${T.testPanels}/${this.data.id}`,method:"GET",token:`${this.cookie}`,body:{}},{data:o,error:n,pending:r}=await k(a);o.value&&o.value.test_types.map(s=>{this.testTypesSelected.push(s.name)}),n.value&&console.log(n.value)},async submitForm(){this.loading=!0;let a=new Array;this.testTypesSelected.map(l=>{this.rawTestTypes.filter(d=>{l==d.name&&a.push(d.id)})}),this.data.test_types=a;const o={route:`${T.testPanels}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{data:n,error:r,pending:s}=await k(o);this.loading=s,n.value&&(this.open=!1,C().$toast.success("Test panel updated successfully!"),this.$emit("update",!0)),r.value&&(console.log(r.value),C().$toast.error(K))},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},Le=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),He={class:"fixed inset-0 overflow-y-auto"},We={class:"flex min-h-full items-center justify-center p-4 text-center"},Je={class:"border-b px-3 py-3 flex items-center justify-between"},Qe={class:"mt-2 space-y-3 px-5"},Ye={class:"w-full flex"},Ze={class:"w-full flex"},et={class:"w-full flex"},tt={class:"h-72 w-full flex flex-col space-y-2"},ot=t("label",{class:"font-medium"},"Select Test Types",-1),st={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function nt(a,o,n,r,s,l){const d=U,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=i("FormKit"),h=i("multi-select"),g=M,_=i("DialogPanel"),f=i("Dialog"),S=i("TransitionRoot");return w(),b("div",null,[t("div",null,[e(d,{click:l.init,text:"Edit",color:"success",icon:s.editIcon},null,8,["click","icon"])]),e(S,{appear:"",show:s.open,as:"template"},{default:c(()=>[e(f,{as:"div",onClose:l.handleClick,class:"relative z-10"},{default:c(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[Le]),_:1}),t("div",He,[t("div",We,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[e(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[t("div",Je,[e(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[I(" Edit Test Panel ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...x)=>l.handleClick&&l.handleClick(...x))},[e(v,{class:"w-5 h-5"})])]),e(u,{type:"form","submit-label":"Update",onSubmit:l.submitForm,actions:!1,id:"submitForm"},{default:c(({value:x})=>[t("div",Qe,[t("div",Ye,[e(u,{type:"text",label:"Name",validation:"required",modelValue:n.data.name,"onUpdate:modelValue":o[1]||(o[1]=p=>n.data.name=p)},null,8,["modelValue"])]),t("div",Ze,[e(u,{type:"text",label:"Short Name",validation:"required",modelValue:n.data.short_name,"onUpdate:modelValue":o[2]||(o[2]=p=>n.data.short_name=p)},null,8,["modelValue"])]),t("div",et,[e(u,{type:"textarea",label:"Description",validation:"required",modelValue:n.data.description,"onUpdate:modelValue":o[3]||(o[3]=p=>n.data.description=p)},null,8,["modelValue"])]),t("div",tt,[ot,e(h,{style:{"--ms-max-height":"none !important"},modelValue:s.testTypesSelected,"onUpdate:modelValue":o[4]||(o[4]=p=>s.testTypesSelected=p),options:s.testTypes,mode:"tags",clear:"",searchable:!0,required:!0,class:"outline-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",st,[e(g,{text:"Clear form",type:"button",click:()=>{l.clearForm()}},null,8,["click"]),e(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const at=$(Ke,[["render",nt]]),lt={components:{TransitionRoot:q,TransitionChild:j,Dialog:F,DialogPanel:N,DialogTitle:E,XMarkIcon:A,ExclamationTriangleIcon:te},data(){return{show:!1,deleteIcon:le,loading:!1,reason:""}},props:{data:{type:Object,required:!0}},setup(){return{cookie:V("token")}},methods:{async deleteData(a){this.loading=!0;const o={route:`${T.testPanels}/${a}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:n,error:r,data:s}=await k(o);this.loading=n,s.value&&(this.handleClick(),C().$toast.success("Test panel deleted successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(C().$toast.error("An error occurred, please try again!"),console.log(r.value),this.loading=!1)},handleClick(){this.show=!this.show}}},it=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ct={class:"fixed inset-0 overflow-y-auto"},rt={class:"flex min-h-full items-center justify-center p-4 text-center"},dt={class:"border-b px-3 py-3 flex items-center justify-between"},ut={class:"mt-2 space-y-3 px-5"},pt={class:"rounded px-2 py-2"},mt={class:"font-semibold text-red-500"},_t={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function ht(a,o,n,r,s,l){const d=U,m=i("TransitionChild"),y=i("ExclamationTriangleIcon"),v=i("DialogTitle"),u=i("XMarkIcon"),h=i("FormKit"),g=M,_=i("DialogPanel"),f=i("Dialog"),S=i("TransitionRoot");return w(),b("div",null,[e(d,{click:l.handleClick,color:"error",text:"Delete",icon:s.deleteIcon},null,8,["click","icon"]),e(S,{appear:"",show:s.show,as:"template"},{default:c(()=>[e(f,{as:"div",class:"relative z-10"},{default:c(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[it]),_:1}),t("div",ct,[t("div",rt,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[e(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[t("div",dt,[e(v,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[e(y,{class:"h-5 w-5 mr-2"}),I(" Confirm delete ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...x)=>l.handleClick&&l.handleClick(...x))},[e(u,{class:"w-5 h-5"})])]),e(h,{type:"form","submit-label":"Update",onSubmit:o[2]||(o[2]=x=>l.deleteData(n.data.id)),actions:!1},{default:c(({value:x})=>[t("div",ut,[t("div",pt,[I(" Do you really want to delete "),t("span",mt,D(n.data.name),1),I("? Note that once this action is completed, it can not be undone ")]),e(h,{type:"textarea",label:"Reason",validation:"required",modelValue:s.reason,"onUpdate:modelValue":o[1]||(o[1]=p=>s.reason=p)},null,8,["modelValue"])]),t("div",_t,[e(g,{type:"button",click:()=>{l.handleClick()},text:"Cancel"},null,8,["click"]),e(d,{loading:s.loading,type:"submit",click:()=>{},color:"error",icon:s.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ft=$(lt,[["render",ht]]),yt={setup(){ce({title:`${re.name.toUpperCase()} - Test Panels`})},components:{MagnifyingGlassIcon:de},data(){return{header:"Test Panels",testPanels:new Array,loading:!1,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],search:"",searchValue:"",cookie:V("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"description",value:"description",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(a){this.searchValue=a,this.search=a},async init(){this.loading=!0;const a={route:T.testPanels,method:"GET",token:`${this.cookie}`},{data:o,error:n,pending:r}=await k(a);this.loading=r,o.value&&(this.testPanels=o.value,this.loading=!1),n.value&&(console.error(n.value),this.loading=!1)},updateTestPanels(a){a&&this.init()}}},vt={class:"py-5 px-5"},gt={class:"flex items-center justify-between py-5"},xt={class:"text-2xl font-semibold"},Tt={class:"flex items-center space-x-3"},wt={class:"flex justify-end w-full px-2 py-2 mb-2"},bt={class:"py-2 flex items-center space-x-2"};function kt(a,o,n,r,s,l){const d=L,m=be,y=oe,v=ze,u=at,h=ft,g=ie;return w(),b("div",vt,[e(d,{pages:s.pages},null,8,["pages"]),t("div",gt,[t("h3",xt,D(s.header),1),t("div",Tt,[e(m,{onUpdate:l.updateTestPanels},null,8,["onUpdate"])])]),t("div",wt,[e(y,{search:s.search,"onUpdate:search":o[0]||(o[0]=_=>s.search=_),onUpdate:l.updateSearch},null,8,["search","onUpdate"])]),e(g,{headers:s.headers,data:s.testPanels,loading:s.loading,"search-value":s.searchValue,"search-field":"name"},{actions:c(({item:_})=>[t("div",bt,[e(v,{data:_},null,8,["data"]),e(u,{data:_,onUpdate:l.updateTestPanels},null,8,["data","onUpdate"]),e(h,{data:_,onUpdate:l.updateTestPanels},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const Wt=$(yt,[["render",kt]]);export{Wt as default};

import{_ as A}from"./Breadcrumb.b0c0412c.js";import{_ as B}from"./Dropdown.607d272b.js";import{u as I,a as C,_ as M,f as F,o as Q,c as j,b,d as e,g as L,t as o,h as T,F as E,r as H,e as J}from"./entry.791399ec.js";import{u as N}from"./vue.f36acd1f.8530d91e.js";import{e as R,f as S,_ as O}from"./fetch.b60ef317.js";import{u as V}from"./facility.0de3d21a.js";import{P as Y}from"./package.d411c004.js";import{r as P}from"./ArrowPathIcon.04123d3a.js";import{r as q}from"./ArrowUpTrayIcon.3f5194d1.js";import{_ as G}from"./logo.82e35264.js";import"./nuxt-link.1af0fd3d.js";import"./HomeIcon.bfaa9779.js";import"./listbox.e9c3a7ec.js";import"./hidden.63232384.js";import"./use-text-value.83d37c68.js";import"./CheckIcon.4b9566d6.js";import"./CheckCircleIcon.f3db3db8.js";import"./MagnifyingGlassIcon.4c928ac3.js";import"./constants.713ae7a7.js";import"./transition.f6288412.js";import"./XMarkIcon.235914cb.js";import"./PencilSquareIcon.ffacbd25.js";import"./PrinterIcon.9d4d78fd.js";const U={setup(){N({title:`${Y.name.toUpperCase()} - Biochemistry Report`})},data(){return{viewIcon:P,exportIcon:q,date:"",pages:[{name:"Home",link:"/home"},{name:"Reports",link:"#"},{name:"MoH Diagnistic Reports",link:"#"}],indicators:new Array,items:new Array,data:new Array,yearSelected:{name:"-- select year --"},years:new Array,cookie:I("token"),viewing:!1,facility:V(),json_fields:{fieldLabel:"indicator",anotherFieldLabel:{field:["indicator"],callback:c=>`formatted value ${c}`}},reportData:new Array}},created(){this.getYears(),this.getReportIndicators()},methods:{async getReportIndicators(){const c={route:`${R.reportIndicators}?department=Biochemistry`,method:"GET",token:`${this.cookie}`},{data:s,error:n,pending:x}=await S(c);s.value&&s.value.map(t=>{this.items.push({indicator:t,jan:"!",feb:"!",mar:"!",totalQ1:"!",apr:"!",may:"!",june:"!",totalQ2:"!",jul:"!",aug:"!",sept:"!",totalQ3:"!",oct:"!",nov:"!",dec:"!",totalQ4:"!",total:"!"})}),n.value&&console.error(n.value)},async getReportData(){if(this.yearSelected.name=="-- select year --")C().$toast.warning("Please select a year");else{this.viewing=!0;const c={route:`${R.mohReport}biochemistry?year=${this.yearSelected.name}`,method:"GET",token:`${this.cookie}`},{data:s,error:n,pending:x}=await S(c);if(this.viewing=x,s.value){let t=new Array;this.items.map(a=>{let l=s.value.january[a.indicator],d=s.value.february[a.indicator],i=s.value.march[a.indicator],p=s.value.april[a.indicator],r=s.value.may[a.indicator],y=s.value.june[a.indicator],f=s.value.july[a.indicator],g=s.value.august[a.indicator],k=s.value.september[a.indicator],v=s.value.october[a.indicator],w=s.value.november[a.indicator],D=s.value.december[a.indicator],m=l+d+i,_=p+r+y,h=f+g+k,u=v+w+D;t.push({indicator:a.indicator,jan:l,feb:d,mar:i,totalQ1:m,apr:p,may:r,june:y,totalQ2:_,jul:f,aug:g,sept:k,totalQ3:h,oct:v,nov:w,dec:D,totalQ4:u,total:m+_+h+u}),this.reportData.push({"Laboratory Service":a.indicator,January:l,February:d,March:i,"Total Q1":m,April:p,May:r,June:y,"Total Q2":_,July:f,August:g,September:k,"Total Q3":h,October:v,November:w,December:D,"Total Q4":u,Total:m+_+h+u})}),this.items=new Array,this.items.push(...t),this.viewing=!1}n.value&&(this.viewing=!1,console.error(n.value))}},getYears(){for(let c=new Date().getFullYear();c>=2e3;c--)this.years.push({name:c.toString(),id:c})}}},z={class:"px-5 py-5"},K=e("div",{class:"py-5"},[e("h3",{class:"text-xl font-semibold flex items-center"},[e("img",{src:O,class:"w-8 h-8 mr-2"}),T(" MoH Diagonistic Reports (Biochemistry) ")])],-1),W={class:"w-full flex justify-between py-5"},X={class:"flex items-center space-x-3"},Z={class:"border rounded"},$={class:"rounded-tr rounded-tl border-b px-5 py-5 flex items-center justify-between"},ee=e("img",{src:G,alt:"app-logo",class:"w-24 h-24 object-cover"},null,-1),te={class:"space-y-2"},re={class:"font-medium"},oe={class:"font-medium"},se={class:"font-medium"},ae=e("p",{class:"uppercase underline"},"Laboratory Report",-1),ce={class:"px-4 py-2.5"},ne={class:"font-semibold"},ie={class:"w-full rounded border-t"},le={class:"w-full"},de=e("thead",{class:"w-full border-b"},[e("tr",{class:"w-full bg-gray-50"},[e("th",{class:"px-4 py-2 border-r"},"Laboratory Service"),e("th",{class:"px-4 py-2 border-r"},"Jan"),e("th",{class:"px-4 py-2 border-r"},"Feb"),e("th",{class:"px-4 py-2"},"March"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q1"),e("th",{class:"px-4 py-2 border-r"},"Apr"),e("th",{class:"px-4 py-2 border-r"},"May"),e("th",{class:"px-4 py-2"},"Jun"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q2"),e("th",{class:"px-4 py-2 border-r"},"Jul"),e("th",{class:"px-4 py-2 border-r"},"Aug"),e("th",{class:"px-4 py-2"},"Sep"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q3"),e("th",{class:"px-4 py-2 border-r"},"Oct"),e("th",{class:"px-4 py-2 border-r"},"Nov"),e("th",{class:"px-4 py-2"},"Dev"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"},"Total Q4 "),e("th",{class:"px-4 py-2 bg-green-50 text-green-500 border border-green-100"},"Total")])],-1),pe={class:"px-4 py-2 text-left border-r border-b"},ye={class:"px-4 py-2 text-center border-r border-b"},be={class:"px-4 py-2 text-center border-r border-b"},me={class:"px-4 py-2 text-center border-b"},_e={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},he={class:"px-4 py-2 text-center border-r border-b"},ue={class:"px-4 py-2 text-center border-r border-b"},xe={class:"px-4 py-2 text-center border-b"},fe={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},ge={class:"px-4 py-2 text-center border-r border-b"},ke={class:"px-4 py-2 text-center border-r border-b"},ve={class:"px-4 py-2 text-center border-b"},we={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},De={class:"px-4 py-2 text-center border-r border-b"},Qe={class:"px-4 py-2 text-center border-r border-b"},je={class:"px-4 py-2 text-center border-b"},Re={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"},Se={class:"px-4 py-2 text-center bg-green-50 border text-green-500 border-green-100"};function Te(c,s,n,x,t,a){const l=A,d=B,i=J,p=F("excel");return Q(),j("div",z,[b(l,{pages:t.pages},null,8,["pages"]),K,e("div",W,[e("div",X,[b(d,{items:t.years,modelValue:t.yearSelected,"onUpdate:modelValue":s[0]||(s[0]=r=>t.yearSelected=r)},null,8,["items","modelValue"]),b(i,{loading:t.viewing,click:()=>{a.getReportData()},color:"primary",icon:t.viewIcon,text:"Generate report"},null,8,["loading","click","icon"])]),e("div",null,[b(p,{class:"btn btn-default",header:[`BIOCHEMISTRY MoH LABORATORY REPORT ${t.yearSelected.name}`,t.facility.details.name,t.facility.details.address,t.facility.details.phone],data:t.reportData,worksheet:"report-work-sheet",name:`moh_biochemistry_report_${t.yearSelected.name}.xls`},{default:L(()=>[b(i,{color:"success",click:()=>{console.log(t.reportData)},icon:t.exportIcon,text:"Export"},null,8,["click","icon"])]),_:1},8,["header","data","name"])])]),e("div",Z,[e("div",$,[ee,e("div",te,[e("p",re,o(t.facility.details.name),1),e("p",oe,o(t.facility.details.address),1),e("p",se,o(t.facility.details.phone),1),ae])]),e("div",null,[e("p",ce,[T("Data for the year: "),e("span",ne,o(t.yearSelected.name),1)])]),e("div",ie,[e("table",le,[de,e("tbody",null,[(Q(!0),j(E,null,H(t.items,(r,y)=>(Q(),j("tr",{class:"px-2",key:y},[e("td",pe,o(r.indicator),1),e("td",ye,o(r.jan),1),e("td",be,o(r.feb),1),e("td",me,o(r.mar),1),e("td",_e,o(r.totalQ1),1),e("td",he,o(r.apr),1),e("td",ue,o(r.may),1),e("td",xe,o(r.june),1),e("td",fe,o(r.totalQ2),1),e("td",ge,o(r.jul),1),e("td",ke,o(r.aug),1),e("td",ve,o(r.sept),1),e("td",we,o(r.totalQ3),1),e("td",De,o(r.oct),1),e("td",Qe,o(r.nov),1),e("td",je,o(r.dec),1),e("td",Re,o(r.totalQ4),1),e("td",Se,o(r.total),1)]))),128))])])])])])}const $e=M(U,[["render",Te]]);export{$e as default};

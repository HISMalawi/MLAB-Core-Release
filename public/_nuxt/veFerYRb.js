import{_ as G}from"./D-VwM6QD.js";import{a as T,u as k,l as C,m as n,b as v,e as D,g as t,f as e,n as s,p as w,_ as $,t as X,h as S,x as O,s as W}from"./Cg5p-McN.js";import{_ as q}from"./CqDTxBUP.js";import{e as E}from"./RKiNshLb.js";import{r as F,e as I,f as P}from"./DR38mcEF.js";import{r as V}from"./aBMXVFc4.js";import{r as Y}from"./l2E4azmA.js";import{r as N}from"./dK18VoWV.js";import{r as Z}from"./9hb_rdP4.js";import{S as U,h as j,Y as B,G as M,V as R}from"./D1U45QuX.js";import{_ as J}from"./DEY2neBq.js";import{r as Q,a as A}from"./Cjc4v2I0.js";import{r as ee}from"./D-clyhuy.js";import{r as K}from"./BOaR9eSM.js";import{_ as te}from"./ByuBovvP.js";import{u as L}from"./BbrJdZQo.js";import{u as oe}from"./DvxvG7cH.js";import{P as ae}from"./C2uaaNo-.js";import{r as ne}from"./CyrOhIst.js";import{r as se}from"./Dlw-jOj6.js";import"./sm8AiluA.js";import"./BAL5lcly.js";import"./3LKeHVyH.js";import"./BVCtdeh2.js";import"./84ogm7K5.js";import"./BQPGVMrX.js";import"./CGvpn_em.js";const ie={components:{TransitionRoot:U,TransitionChild:j,Dialog:B,DialogPanel:M,DialogTitle:R,XMarkIcon:V,UserIcon:Y},data(){return{open:!1,addIcon:F,saveIcon:N,clearIcon:Z,name:"",description:"",loading:!1,cookie:T("token")}},methods:{async submitForm(){this.loading=!0;let l={route:I.sections,method:"POST",token:`${this.cookie}`,body:{name:this.name}};const{pending:a,error:r,data:c}=await P(l);this.loading=a,c.value&&(this.handleClick(),k().$toast.success(`${this.name} ward created successfully!`),this.name="",this.loading=!1,this.$emit("update",!0)),r.value&&(this.handleClick(),console.log(r.value),k().$toast.success(E),this.loading=!1)},handleClick(){this.open=!this.open}}},le=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),re={class:"fixed inset-0 overflow-y-auto"},ce={class:"flex min-h-full items-center justify-center p-4 text-center"},de={class:"border-b px-3 py-3 flex items-center justify-between"},me={class:"mt-2 space-y-3"},ue={class:"w-full flex items-center px-5"},pe={class:"w-full flex flex-col space-y-2"},_e={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function fe(l,a,r,c,o,i){const u=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),p=n("FormKit"),_=q,g=n("DialogPanel"),m=n("Dialog"),b=n("TransitionRoot");return v(),D("div",null,[t("div",null,[e(u,{text:"Create ward",color:"primary",icon:o.addIcon,click:i.handleClick},null,8,["icon","click"])]),e(b,{appear:"",show:o.open,as:"template"},{default:s(()=>[e(m,{as:"div",onClose:i.handleClick,class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[le]),_:1}),t("div",re,[t("div",ce,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",de,[e(f,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:s(()=>[w(" Create ward ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...x)=>i.handleClick&&i.handleClick(...x))},[e(h,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:x})=>[t("div",me,[t("div",ue,[t("div",pe,[e(p,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":a[1]||(a[1]=y=>o.name=y)},null,8,["modelValue"])])]),t("div",_e,[e(_,{text:"Clear form",color:"error",type:"button",click:()=>{}}),e(u,{type:"submit",click:()=>{},color:"success",loading:o.loading,icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const he=C(ie,[["render",fe]]),H="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M41.7083%2023.794L24.0579%206.08569L6.29405%2023.7916C5.90289%2024.1815%205.90185%2024.8147%206.29174%2025.2059C6.68163%2025.597%207.31479%2025.5981%207.70595%2025.2082L11%2021.9249V40.9998C11%2041.5521%2011.4477%2041.9998%2012%2041.9998H19C19.5523%2041.9998%2020%2041.5521%2020%2040.9998V33C20%2031.8954%2020.8954%2031%2022%2031H26C27.1046%2031%2028%2031.8954%2028%2033V40.9998C28%2041.5521%2028.4477%2041.9998%2029%2041.9998H36C36.5523%2041.9998%2037%2041.5521%2037%2040.9998V21.9033L40.2917%2025.2059C40.6816%2025.597%2041.3148%2025.5981%2041.7059%2025.2082C42.0971%2024.8183%2042.0981%2024.1851%2041.7083%2023.794Z'%20fill='%23333333'/%3e%3c/svg%3e",ge={components:{TransitionRoot:U,TransitionChild:j,Dialog:B,DialogPanel:M,DialogTitle:R,XMarkIcon:V},data(){return{viewIcon:Q,show:!1,editIcon:A}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},ve=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),xe={class:"fixed inset-0 overflow-y-auto"},ye={class:"flex min-h-full items-center justify-center p-4 text-center"},we={class:"border-b px-3 py-3 flex items-center justify-between"},ke=t("img",{src:H,class:"w-8 h-8 mr-2"},null,-1),be={class:"px-5 py-5"},Ce={class:"w-full flex flex-col space-y-2"},De=t("label",{class:"font-medium"},"Name",-1),Te={class:"underline"};function $e(l,a,r,c,o,i){const u=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),p=n("DialogPanel"),_=n("Dialog"),g=n("TransitionRoot");return v(),D("div",null,[e(u,{click:i.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(g,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(_,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[ve]),_:1}),t("div",xe,[t("div",ye,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",we,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[ke,w(" View ward ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...m)=>i.handleClick&&i.handleClick(...m))},[e(h,{class:"w-5 h-5"})])]),t("div",be,[t("div",Ce,[De,t("p",Te,X(r.data.name),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ie=C(ge,[["render",$e]]),Pe={components:{TransitionRoot:U,TransitionChild:j,Dialog:B,DialogPanel:M,DialogTitle:R,XMarkIcon:V},data(){return{editIcon:A,show:!1,saveIcon:N,loading:!1,cookie:T("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;let l={route:`${I.sections}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data};const{pending:a,error:r,data:c}=await P(l);this.loading=a,c.value&&(this.handleClick(),k().$toast.success("Ward updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(k().$toast.success(E),this.handleClick(),console.log(r.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Ve=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ue={class:"fixed inset-0 overflow-y-auto"},je={class:"flex min-h-full items-center justify-center p-4 text-center"},Be={class:"border-b px-3 py-3 flex items-center justify-between"},Me=t("img",{src:H,class:"w-8 h-8 mr-2"},null,-1),Re={class:"mt-2 space-y-3"},Se={class:"w-full flex items-center px-5"},Oe={class:"w-full flex flex-col space-y-2"},We={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Le(l,a,r,c,o,i){const u=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),p=n("FormKit"),_=q,g=n("DialogPanel"),m=n("Dialog"),b=n("TransitionRoot");return v(),D("div",null,[e(u,{click:i.handleClick,text:"Edit",icon:o.editIcon,color:"success"},null,8,["click","icon"]),e(b,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(m,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Ve]),_:1}),t("div",Ue,[t("div",je,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Be,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[Me,w(" Edit ward ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...x)=>i.handleClick&&i.handleClick(...x))},[e(h,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:x})=>[t("div",Re,[t("div",Se,[t("div",Oe,[e(p,{type:"text",label:"Name",validation:"required",modelValue:r.data.name,"onUpdate:modelValue":a[1]||(a[1]=y=>r.data.name=y)},null,8,["modelValue"])])]),t("div",We,[e(_,{text:"Clear form",color:"error",type:"button",click:()=>{}}),e(u,{type:"submit",click:()=>{},color:"success",loading:o.loading,icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Xe=C(Pe,[["render",Le]]),qe={components:{TransitionRoot:U,TransitionChild:j,Dialog:B,DialogPanel:M,DialogTitle:R,XMarkIcon:V,ExclamationTriangleIcon:ee},data(){return{show:!1,deleteIcon:K,loading:!1,reason:""}},props:{data:{type:Object,required:!0}},setup(){return{cookie:T("token")}},methods:{async deleteData(l){this.loading=!0;let a={route:`${I.sections}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}};const{pending:r,error:c,data:o}=await P(a);this.loading=r,o.value&&(this.handleClick(),k().$toast.success("Ward deleted successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(k().$toast.success(E),console.log(c.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Ee=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Fe={class:"fixed inset-0 overflow-y-auto"},Ne={class:"flex min-h-full items-center justify-center p-4 text-center"},Ae={class:"border-b px-3 py-3 flex items-center justify-between"},Ke={class:"mt-2 space-y-3 px-5"},He={class:"rounded px-2 py-2"},ze={class:"font-semibold text-red-500"},Ge={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function Ye(l,a,r,c,o,i){const u=$,d=n("TransitionChild"),f=n("ExclamationTriangleIcon"),h=n("DialogTitle"),p=n("XMarkIcon"),_=n("FormKit"),g=q,m=n("DialogPanel"),b=n("Dialog"),x=n("TransitionRoot");return v(),D("div",null,[e(u,{click:i.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(x,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(b,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Ee]),_:1}),t("div",Fe,[t("div",Ne,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(m,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Ae,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[e(f,{class:"h-5 w-5 mr-2"}),w(" Confirm delete ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...y)=>i.handleClick&&i.handleClick(...y))},[e(p,{class:"w-5 h-5"})])]),e(_,{type:"form","submit-label":"Update",onSubmit:a[2]||(a[2]=y=>i.deleteData(r.data.id)),actions:!1},{default:s(({value:y})=>[t("div",Ke,[t("div",He,[w(" Do you really want to delete "),t("span",ze,X(r.data.name),1),w("? Note that once this action is completed, it can not be undone ")]),e(_,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":a[1]||(a[1]=z=>o.reason=z)},null,8,["modelValue"])]),t("div",Ge,[e(g,{text:"Cancel"}),e(u,{loading:o.loading,type:"submit",click:()=>{},color:"error",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ze=C(qe,[["render",Ye]]),Je={components:{MagnifyingGlassIcon:ne},setup(){oe({title:`${ae.name.toUpperCase()} - Wards`})},data(){return{header:"List of wards",pages:[{name:"Home",link:"/home"},{name:"Lab Configuration",link:"#"}],addIcon:F,deleteIcon:K,viewIcon:se,headers:[{text:"ID",value:"id",sortable:!0},{text:"Name",value:"name",sortable:!0},{text:"Actions",value:"actions"}],wards:new Array,cookie:T("token"),loading:!1,search:"",searchValue:"",searchField:"name",serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init()},methods:{async init(){this.loading=!0;const{page:l,rowsPerPage:a}=this.serverOptions,r={route:`${I.sections}?page=${l}&per_page=${a}&search=${this.search}`,method:"GET",token:`${this.cookie}`},{data:c,error:o,pending:i}=await P(r);this.loading=i,c.value&&(this.wards=c.value.data,this.loading=!1,this.serverItemsLength=c.value.meta.total_count),o.value&&(console.log(o.value),this.loading=!1)},updateWards(l){typeof l=="object"&&(this.serverOptions=l),this.init()},updateSearch(l){typeof l=="string"&&(this.search=l,this.searchValue=l,this.updateWards(!0))}}},Qe={class:"py-5 px-5"},et={class:"flex items-center justify-between py-5"},tt={class:"text-2xl font-semibold"},ot={class:"flex justify-end w-full px-2 py-2 mb-2"},at={class:"py-2 flex items-center space-x-2"};function nt(l,a,r,c,o,i){const u=G,d=he,f=J,h=Ie,p=Xe,_=Ze,g=te;return v(),D("div",Qe,[e(u,{pages:o.pages},null,8,["pages"]),t("div",et,[t("h3",tt,X(o.header),1),("usePermissions"in l?l.usePermissions:S(L))().can.manage("lab_configurations")?(v(),O(d,{key:0,onUpdate:i.updateWards},null,8,["onUpdate"])):W("",!0)]),t("div",ot,[("usePermissions"in l?l.usePermissions:S(L))().can.manage("lab_configurations")?(v(),O(f,{key:0,search:o.search,"onUpdate:search":a[0]||(a[0]=m=>o.search=m),onUpdate:i.updateSearch},null,8,["search","onUpdate"])):W("",!0)]),("usePermissions"in l?l.usePermissions:S(L))().can.manage("lab_configurations")?(v(),O(g,{key:0,headers:o.headers,data:o.wards,loading:o.loading,"search-value":o.searchValue,"search-field":"name",serverItemsLength:o.serverItemsLength,serverOptions:o.serverOptions,onUpdate:i.updateWards},{actions:s(({item:m})=>[t("div",at,[e(h,{data:m},null,8,["data"]),e(p,{data:m,onUpdate:i.updateWards},null,8,["data","onUpdate"]),e(_,{data:m,onUpdate:i.updateWards},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value","serverItemsLength","serverOptions","onUpdate"])):W("",!0)])}const jt=C(Je,[["render",nt]]);export{jt as default};

import{_ as H}from"./COwqssE_.js";import{S as $,p as U,Y as q,G as A,V as E,q as j,s as Y,a as I,l as k,m as w,u as D,E as z,x as S,y as i,b as T,e as b,g as t,f as o,z as r,j as C,_ as N,A as J,i as M,v as B,t as P,F as Q,k as W,n as Z,B as ee,D as te,h as X,L as G,K as O}from"./CdnNfM7G.js";import{_ as oe}from"./BEQb_3O8.js";import{_ as R}from"./5Ol-7slm.js";import{r as F}from"./ynzhhFTf.js";import{r as L}from"./OAgrSauV.js";import{_ as se}from"./k_xLN92M.js";import{_ as ne}from"./Co6rQh9N.js";import{r as ae}from"./wuVQGY1H.js";import{_ as le}from"./RzMDAWdt.js";import{u as K}from"./DdH3QGmO.js";import{P as ie}from"./Crjae1dH.js";import{u as re}from"./CHeiuEic.js";import{r as ce}from"./BAFQr4Vz.js";import{_ as de}from"./VmwGiaas.js";import"./CvehVmcI.js";import"./DHgaMDqz.js";import"./D2xmxaya.js";import"./ByNtb9Q5.js";const ue={components:{TransitionRoot:$,TransitionChild:U,Dialog:q,DialogPanel:A,DialogTitle:E,XMarkIcon:j,UserIcon:F},data(){return{open:!1,addIcon:Y,saveIcon:L,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:I("token")}},created(){this.init()},methods:{async init(){const l={route:k.testTypes,method:"GET",token:`${this.cookie}`},{data:e,error:a}=await w(l);if(e.value){const{test_types:c}=e.value;this.rawTestTypes=c,this.testTypes=c.map(s=>s.name)}a.value&&console.error(a.value)},async submitForm(){this.loading=!0;const l=this.testTypesSelected.map(n=>{const d=this.rawTestTypes.find(m=>m.name===n);return d?d.id:null}).filter(n=>n!==null),e={route:k.testPanels,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName,description:this.description,test_types:l}},{data:a,error:c,pending:s}=await w(e);this.loading=s,a.value&&(this.handleClick(),D().$toast.success("Test panel created successfully!"),this.$emit("update",!0)),c.value&&(D().$toast.error(z),console.error(c.value),this.handleClick())},handleClick(){this.open=!this.open}}},me={class:"fixed inset-0 overflow-y-auto"},pe={class:"flex min-h-full items-center justify-center p-4 text-center"},fe={class:"border-b px-3 py-3 flex items-center justify-between"},_e={class:"mt-2 space-y-3 px-5"},he={class:"w-full flex"},ye={class:"w-full flex"},ve={class:"w-full"},ge={class:"w-full flex"},xe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Te(l,e,a,c,s,n){const d=N,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),p=i("FormKit"),_=oe,g=R,f=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return T(),b("div",null,[t("div",null,[o(d,{click:n.handleClick,text:"Create test panel",color:"primary",icon:s.addIcon},null,8,["click","icon"])]),o(V,{appear:"",show:s.open,as:"template"},{default:r(()=>[o(h,{as:"div",onClose:n.handleClick,class:"relative z-20"},{default:r(()=>[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>e[5]||(e[5]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",me,[t("div",pe,[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(f,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",fe,[o(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>e[6]||(e[6]=[C(" Create Test Panel ")])),_:1}),t("button",{onClick:e[0]||(e[0]=(...x)=>n.handleClick&&n.handleClick(...x))},[o(v,{class:"w-5 h-5"})])]),o(p,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1},{default:r(({value:x})=>[t("div",_e,[t("div",he,[o(p,{type:"text",label:"Name",validation:"required",modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=u=>s.name=u)},null,8,["modelValue"])]),t("div",ye,[o(p,{type:"text",label:"Short Name",validation:"required",modelValue:s.shortName,"onUpdate:modelValue":e[2]||(e[2]=u=>s.shortName=u)},null,8,["modelValue"])]),t("div",ve,[o(_,{label:"Select Test Types",items:s.testTypes,"items-selected":s.testTypesSelected,"onUpdate:itemsSelected":e[3]||(e[3]=u=>s.testTypesSelected=u),mode:"tags"},null,8,["items","items-selected"])]),t("div",ge,[o(p,{type:"textarea",label:"Description",validation:"required",modelValue:s.description,"onUpdate:modelValue":e[4]||(e[4]=u=>s.description=u)},null,8,["modelValue"])])]),t("div",xe,[o(g,{text:"Dismiss",type:"button",click:n.handleClick},null,8,["click"]),o(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ke=S(ue,[["render",Te]]),we={components:{TransitionRoot:$,TransitionChild:U,Dialog:q,DialogPanel:A,DialogTitle:E,XMarkIcon:j,UserIcon:F},data(){return{open:!1,viewIcon:J,loading:!1,details:{},cookie:I("token")}},props:{data:{required:!0,type:Object}},methods:{async init(){this.open=!0,this.loading=!0;const{pending:l,error:e,data:a}=await w({route:`${k.testPanels}/${this.data.id}`,method:"GET",token:`${this.cookie}`});this.loading=l,a.value&&(this.details=a.value,this.loading=!1),e.value&&(console.error(e.value),this.loading=!1,D().$toast.error("An error occurred, please try again!"))},handleClick(){this.open=!this.open}}},be={class:"fixed inset-0 overflow-y-auto"},Ce={class:"flex min-h-full items-center justify-center p-4 text-center"},De={class:"border-b px-3 py-3 flex items-center justify-between"},Pe={class:"flex items-center justify-center mx-auto my-20"},Ve={class:"space-y-3 px-5 py-5"},Ie={class:"w-full flex flex-col space-y-1"},Se={class:"underline"},$e={class:"w-full flex flex-col space-y-1"},Ue={class:"underline"},qe={class:"w-full flex flex-col space-y-1"},Ae={class:"underline"},Ee={class:"w-full flex flex-col space-y-1"};function je(l,e,a,c,s,n){const d=N,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),p=Z,_=i("DialogPanel"),g=i("Dialog"),f=i("TransitionRoot");return T(),b("div",null,[t("div",null,[o(d,{click:n.init,text:"View",color:"primary",icon:s.viewIcon},null,8,["click","icon"])]),o(f,{appear:"",show:s.open,as:"template"},{default:r(()=>[o(g,{as:"div",onClose:()=>{},class:"relative z-10"},{default:r(()=>[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>e[1]||(e[1]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",be,[t("div",Ce,[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",De,[o(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>e[2]||(e[2]=[t("img",{src:ne,class:"w-8 h-8 mr-2"},null,-1),C(" View Test Panel ")])),_:1}),t("button",{onClick:e[0]||(e[0]=(...h)=>n.handleClick&&n.handleClick(...h))},[o(v,{class:"w-5 h-5"})])]),M(t("div",Pe,[o(p,{loading:s.loading},null,8,["loading"])],512),[[B,s.loading]]),M(t("div",Ve,[t("div",Ie,[e[3]||(e[3]=t("label",{class:"font-semibold text-lg"},"Name",-1)),t("p",Se,P(s.details.name),1)]),t("div",$e,[e[4]||(e[4]=t("label",{class:"font-semibold text-lg"},"Short Name",-1)),t("p",Ue,P(s.details.short_name),1)]),t("div",qe,[e[5]||(e[5]=t("label",{class:"font-semibold text-lg"},"Description",-1)),t("p",Ae,P(s.details.description),1)]),t("div",Ee,[e[6]||(e[6]=t("label",{class:"font-semibold list text-lg"},"Test Types",-1)),(T(!0),b(Q,null,W(s.details.test_types,h=>(T(),b("div",{key:h.id,class:"flex flex-wrap underline"},P(h.name),1))),128))])],512),[[B,!s.loading]])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ne=S(we,[["render",je]]),Re={components:{TransitionRoot:$,TransitionChild:U,Dialog:q,DialogPanel:A,DialogTitle:E,XMarkIcon:j,UserIcon:F},props:{data:{required:!0,type:Object}},data(){return{open:!1,editIcon:ee,saveIcon:L,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:I("token")}},methods:{async loadTestTypes(){const l={route:k.testTypes,method:"GET",token:`${this.cookie}`},{data:e,error:a}=await w(l);e.value&&(this.rawTestTypes=e.value.test_types,e.value.test_types.map(c=>{this.testTypes.push(c.name)})),a.value&&console.error(a.value)},async init(){this.open=!0,await this.loadTestTypes(),this.testTypesSelected=new Array;const l={route:`${k.testPanels}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:e,error:a}=await w(l);e.value&&e.value.test_types.map(c=>{this.testTypesSelected.push(c.name)}),a.value&&console.error(a.value)},async submitForm(){this.loading=!0;let l=new Array;this.testTypesSelected.map(n=>{this.rawTestTypes.filter(d=>{n==d.name&&l.push(d.id)})}),this.data.test_types=l;const e={route:`${k.testPanels}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{data:a,error:c,pending:s}=await w(e);this.loading=s,a.value&&(this.open=!1,D().$toast.success("Test panel updated successfully!"),this.$emit("update",!0)),c.value&&(console.error(c.value),D().$toast.error(z))},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},Fe={class:"fixed inset-0 overflow-y-auto"},Me={class:"flex min-h-full items-center justify-center p-4 text-center"},Be={class:"border-b px-3 py-3 flex items-center justify-between"},Xe={class:"mt-2 space-y-3 px-5"},Ge={class:"w-full flex"},Oe={class:"w-full flex"},Ke={class:"w-full flex"},ze={class:"h-72 w-full flex flex-col space-y-2"},Le={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function He(l,e,a,c,s,n){const d=N,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),p=i("FormKit"),_=i("multi-select"),g=R,f=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return T(),b("div",null,[t("div",null,[o(d,{click:n.init,text:"Edit",color:"success",icon:s.editIcon},null,8,["click","icon"])]),o(V,{appear:"",show:s.open,as:"template"},{default:r(()=>[o(h,{as:"div",onClose:n.handleClick,class:"relative z-10"},{default:r(()=>[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>e[5]||(e[5]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",Fe,[t("div",Me,[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(f,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",Be,[o(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>e[6]||(e[6]=[C(" Edit Test Panel ")])),_:1}),t("button",{onClick:e[0]||(e[0]=(...x)=>n.handleClick&&n.handleClick(...x))},[o(v,{class:"w-5 h-5"})])]),o(p,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"submitForm"},{default:r(({value:x})=>[t("div",Xe,[t("div",Ge,[o(p,{type:"text",label:"Name",validation:"required",modelValue:a.data.name,"onUpdate:modelValue":e[1]||(e[1]=u=>a.data.name=u)},null,8,["modelValue"])]),t("div",Oe,[o(p,{type:"text",label:"Short Name",validation:"required",modelValue:a.data.short_name,"onUpdate:modelValue":e[2]||(e[2]=u=>a.data.short_name=u)},null,8,["modelValue"])]),t("div",Ke,[o(p,{type:"textarea",label:"Description",validation:"required",modelValue:a.data.description,"onUpdate:modelValue":e[3]||(e[3]=u=>a.data.description=u)},null,8,["modelValue"])]),t("div",ze,[e[7]||(e[7]=t("label",{class:"font-medium"},"Select Test Types",-1)),o(_,{style:{"--ms-max-height":"none !important"},modelValue:s.testTypesSelected,"onUpdate:modelValue":e[4]||(e[4]=u=>s.testTypesSelected=u),options:s.testTypes,mode:"tags",clear:"",searchable:!0,required:!0,class:"outline-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",Le,[o(g,{text:"Clear form",type:"button",click:()=>{n.clearForm()}},null,8,["click"]),o(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const Ye=S(Re,[["render",He]]),Je={components:{TransitionRoot:$,TransitionChild:U,Dialog:q,DialogPanel:A,DialogTitle:E,XMarkIcon:j,ExclamationTriangleIcon:te},data(){return{show:!1,deleteIcon:ae,loading:!1,reason:"",cookie:I("token")}},props:{data:{type:Object,required:!0}},methods:{async deleteData(l){this.loading=!0;const e={route:`${k.testPanels}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:a,error:c,data:s}=await w(e);this.loading=a,s.value&&(this.handleClick(),D().$toast.success("Test panel deleted successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(D().$toast.error("An error occurred, please try again!"),console.error(c.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Qe={class:"fixed inset-0 overflow-y-auto"},We={class:"flex min-h-full items-center justify-center p-4 text-center"},Ze={class:"border-b px-3 py-3 flex items-center justify-between"},et={class:"mt-2 space-y-3 px-5"},tt={class:"rounded px-2 py-2"},ot={class:"font-semibold text-red-500"},st={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function nt(l,e,a,c,s,n){const d=N,m=i("TransitionChild"),y=i("ExclamationTriangleIcon"),v=i("DialogTitle"),p=i("XMarkIcon"),_=i("FormKit"),g=R,f=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return T(),b("div",null,[o(d,{click:n.handleClick,color:"error",text:"Delete",icon:s.deleteIcon},null,8,["click","icon"]),o(V,{appear:"",show:s.show,as:"template"},{default:r(()=>[o(h,{as:"div",class:"relative z-10"},{default:r(()=>[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>e[3]||(e[3]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",Qe,[t("div",We,[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(f,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",Ze,[o(v,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[o(y,{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=C(" Confirm delete "))]),_:1}),t("button",{onClick:e[0]||(e[0]=(...x)=>n.handleClick&&n.handleClick(...x))},[o(p,{class:"w-5 h-5"})])]),o(_,{type:"form","submit-label":"Update",onSubmit:e[2]||(e[2]=x=>n.deleteData(a.data.id)),actions:!1},{default:r(({value:x})=>[t("div",et,[t("div",tt,[e[5]||(e[5]=C(" Do you really want to delete ")),t("span",ot,P(a.data.name),1),e[6]||(e[6]=C("? Note that once this action is completed, it can not be undone "))]),o(_,{type:"textarea",label:"Reason",validation:"required",modelValue:s.reason,"onUpdate:modelValue":e[1]||(e[1]=u=>s.reason=u)},null,8,["modelValue"])]),t("div",st,[o(g,{type:"button",click:()=>{n.handleClick()},text:"Cancel"},null,8,["click"]),o(d,{loading:s.loading,type:"submit",click:()=>{},color:"error",icon:s.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const at=S(Je,[["render",nt]]),lt={setup(){re({title:`${ie.name.toUpperCase()} - Test Panels`})},components:{MagnifyingGlassIcon:ce},data(){return{header:"Test Panels",testPanels:new Array,loading:!1,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],search:"",searchValue:"",cookie:I("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"description",value:"description",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(l){this.searchValue=l,this.search=l},async init(){this.loading=!0;const l={route:k.testPanels,method:"GET",token:`${this.cookie}`},{data:e,error:a,pending:c}=await w(l);this.loading=c,e.value&&(this.testPanels=e.value,this.loading=!1),a.value&&(console.error(a.value),this.loading=!1)},updateTestPanels(l){l&&this.init()}}},it={class:"py-5 px-5"},rt={class:"flex items-center justify-between py-5"},ct={class:"text-2xl font-semibold flex items-center uppercase"},dt={class:"flex items-center space-x-3"},ut={class:"flex justify-end w-full px-2 py-2 mb-2"},mt={class:"py-2 flex items-center space-x-2"};function pt(l,e,a,c,s,n){const d=H,m=ke,y=se,v=Ne,p=Ye,_=at,g=le;return T(),b("div",it,[o(d,{pages:s.pages},null,8,["pages"]),t("div",rt,[t("div",ct,[e[1]||(e[1]=t("img",{src:de,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1)),C(" "+P(s.header),1)]),t("div",dt,[("usePermissions"in l?l.usePermissions:X(K))().can.manage("test_catalog")?(T(),G(m,{key:0,onUpdate:n.updateTestPanels},null,8,["onUpdate"])):O("",!0)])]),t("div",ut,[o(y,{search:s.search,"onUpdate:search":e[0]||(e[0]=f=>s.search=f),onUpdate:n.updateSearch},null,8,["search","onUpdate"])]),("usePermissions"in l?l.usePermissions:X(K))().can.manage("test_catalog")?(T(),G(g,{key:0,headers:s.headers,data:s.testPanels,loading:s.loading,"search-value":s.searchValue,"search-field":"name"},{actions:r(({item:f})=>[t("div",mt,[o(v,{data:f},null,8,["data"]),o(p,{data:f,onUpdate:n.updateTestPanels},null,8,["data","onUpdate"]),o(_,{data:f,onUpdate:n.updateTestPanels},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])):O("",!0)])}const qt=S(lt,[["render",pt]]);export{qt as default};

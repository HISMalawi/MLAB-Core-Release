import{_ as K}from"./BFE2e6qW.js";import{p as V,S as D,Y as T,G as I,V as $,q as H,a as M,l as P,m as F,u as k,E as R,s as b,x as n,b as x,e as C,g as o,f as t,y as s,j as w,_ as j,t as U,z,L as G,h as S,H as E,C as A}from"./DaR_ss44.js";import{r as B}from"./BTU_o6qE.js";import{r as O}from"./CxRsRgau.js";import{_ as Y}from"./B1bLn-Yy.js";import{r as J}from"./DfY9W-tc.js";import{r as X}from"./CZiYodP1.js";import{r as Q}from"./BfSjAygv.js";import{r as N}from"./CgdBYDbq.js";import{_ as W}from"./BCBnBcQ0.js";import{u as q}from"./Di-6L_Dx.js";import{P as ee}from"./CMtC_zcg.js";import{u as te}from"./CfS7LVlI.js";import{r as oe}from"./kwQtm3rv.js";import{r as ae}from"./-HTrhwCJ.js";import"./BW-thXDA.js";import"./jy5sGp16.js";const ne={components:{TransitionChild:V,TransitionRoot:D,Dialog:T,DialogPanel:I,DialogTitle:$,XMarkIcon:H},data(){return{addIcon:B,saveIcon:O,open:!1,loading:!1,cookie:M("token"),name:""}},methods:{async submitForm(){this.loading=!1;const l={route:P.facility,method:"POST",token:`${this.cookie}`,body:{name:this.name}},{data:e,error:r,pending:c}=await F(l);this.loading=c,e.value&&(k().$toast.success("Facility created successfully!"),this.$emit("update",!0),this.loading=!1,this.handleClick()),r.value&&(console.error(r.value),k().$toast.error(R),this.loading=!1)},handleClick(){this.open=!this.open}}},L="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23%2012L5%2012L5%2014L23%2014V12ZM23%2016H8H6V18V37H5C4.44772%2037%204%2037.4477%204%2038C4%2038.5523%204.44772%2039%205%2039H43C43.5523%2039%2044%2038.5523%2044%2038C44%2037.4477%2043.5523%2037%2043%2037H42V18V16H40H39V18H40V37H37V25H29V37H8V18H23V16ZM39%2014V12L43%2012V14L39%2014ZM26%2025H11V32H10V34L27%2034V32H26V25Z'%20fill='%23333333'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6%2018V13H8V18H6Z'%20fill='%23333333'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M40%2018V13H42V18H40Z'%20fill='%23333333'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M35%2010H27C25.8954%2010%2025%2010.8954%2025%2012V20C25%2021.1046%2025.8954%2022%2027%2022H35C36.1046%2022%2037%2021.1046%2037%2020V12C37%2010.8954%2036.1046%2010%2035%2010ZM32%2013V15H34V17H32V19H30V17H28V15H30V13H32Z'%20fill='%23333333'/%3e%3cpath%20d='M8%2014L23%2014V16H8V14Z'%20fill='%23333333'/%3e%3cpath%20d='M40%2014L39%2014V16H40V14Z'%20fill='%23333333'/%3e%3c/svg%3e",se={class:"fixed inset-0 overflow-y-auto"},ie={class:"flex min-h-full items-center justify-center p-4 text-center"},le={class:"border-b px-3 py-3 flex items-center justify-between"},re={class:"px-5 py-5"},ce={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function de(l,e,r,c,a,i){const d=j,u=n("TransitionChild"),_=n("DialogTitle"),h=n("XMarkIcon"),m=n("FormKit"),f=n("DialogPanel"),g=n("Dialog"),p=n("TransitionRoot");return x(),C("div",null,[o("div",null,[t(d,{click:i.handleClick,text:"Add facility",color:"primary",icon:a.addIcon},null,8,["click","icon"])]),t(p,{appear:"",show:a.open,as:"template"},{default:s(()=>[t(g,{as:"div",onClose:i.handleClick,class:"relative z-10"},{default:s(()=>[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>e[2]||(e[2]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",se,[o("div",ie,[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[t(f,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[o("div",le,[t(_,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>e[3]||(e[3]=[o("img",{src:L,class:"w-8 h-8 mr-2"},null,-1),w(" Add facility ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...v)=>i.handleClick&&i.handleClick(...v))},[t(h,{class:"w-5 h-5"})])]),t(m,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:v})=>[o("div",re,[t(m,{type:"text",label:"Name",validation:"required",modelValue:a.name,"onUpdate:modelValue":e[1]||(e[1]=y=>a.name=y)},null,8,["modelValue"]),o("div",ce,[t(d,{click:()=>{},type:"submit",color:"success",icon:a.saveIcon,text:"Save chages"},null,8,["icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ue=b(ne,[["render",de]]),me={components:{TransitionRoot:D,TransitionChild:V,Dialog:T,DialogPanel:I,DialogTitle:$,XMarkIcon:H},data(){return{viewIcon:J,show:!1,editIcon:X}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},pe={class:"fixed inset-0 overflow-y-auto"},fe={class:"flex min-h-full items-center justify-center p-4 text-center"},_e={class:"border-b px-3 py-3 flex items-center justify-between"},he={class:"px-5 py-5"},ge={class:"w-full flex flex-col space-y-2"},ve={class:"underline"};function ye(l,e,r,c,a,i){const d=j,u=n("TransitionChild"),_=n("DialogTitle"),h=n("XMarkIcon"),m=n("DialogPanel"),f=n("Dialog"),g=n("TransitionRoot");return x(),C("div",null,[t(d,{click:i.handleClick,color:"primary",text:"View",icon:a.viewIcon},null,8,["click","icon"]),t(g,{appear:"",show:a.show,as:"template"},{default:s(()=>[t(f,{as:"div",class:"relative z-10"},{default:s(()=>[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>e[1]||(e[1]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",pe,[o("div",fe,[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[t(m,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[o("div",_e,[t(_,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>e[2]||(e[2]=[o("img",{src:L,class:"w-8 h-8 mr-2"},null,-1),w(" View facility ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...p)=>i.handleClick&&i.handleClick(...p))},[t(h,{class:"w-5 h-5"})])]),o("div",he,[o("div",ge,[e[3]||(e[3]=o("label",{class:"font-medium"},"Name",-1)),o("p",ve,U(r.data.name),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const xe=b(me,[["render",ye]]),we={components:{TransitionRoot:D,TransitionChild:V,Dialog:T,DialogPanel:I,DialogTitle:$,XMarkIcon:H},data(){return{editIcon:X,show:!1,saveIcon:O,loading:!1,cookie:M("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const l={route:`${P.facility}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:e,error:r,data:c}=await F(l);this.loading=e,c.value&&(this.handleClick(),k().$toast.success("Specimen type updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(k().$toast.success(R),this.handleClick(),console.error(r.value),this.loading=!1)},handleClick(){this.show=!this.show}}},ke={class:"fixed inset-0 overflow-y-auto"},be={class:"flex min-h-full items-center justify-center p-4 text-center"},Ce={class:"border-b px-3 py-3 flex items-center justify-between"},Ve={class:"mt-2 space-y-3"},De={class:"w-full flex items-center px-5"},Te={class:"w-full flex flex-col space-y-2"},Ie={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function $e(l,e,r,c,a,i){const d=j,u=n("TransitionChild"),_=n("DialogTitle"),h=n("XMarkIcon"),m=n("FormKit"),f=n("DialogPanel"),g=n("Dialog"),p=n("TransitionRoot");return x(),C("div",null,[t(d,{click:i.handleClick,text:"Edit",icon:a.editIcon,color:"success"},null,8,["click","icon"]),t(p,{appear:"",show:a.show,as:"template"},{default:s(()=>[t(g,{as:"div",class:"relative z-10"},{default:s(()=>[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>e[2]||(e[2]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",ke,[o("div",be,[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[t(f,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[o("div",Ce,[t(_,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>e[3]||(e[3]=[o("img",{src:L,class:"w-8 h-8 mr-2"},null,-1),w(" Edit facility ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...v)=>i.handleClick&&i.handleClick(...v))},[t(h,{class:"w-5 h-5"})])]),t(m,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:v})=>[o("div",Ve,[o("div",De,[o("div",Te,[t(m,{type:"text",label:"Name",validation:"required",modelValue:r.data.name,"onUpdate:modelValue":e[1]||(e[1]=y=>r.data.name=y)},null,8,["modelValue"])])]),o("div",Ie,[t(d,{type:"submit",click:()=>{},color:"success",loading:a.loading,icon:a.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const He=b(we,[["render",$e]]),Me={components:{TransitionRoot:D,TransitionChild:V,Dialog:T,DialogPanel:I,DialogTitle:$,XMarkIcon:H,ExclamationTriangleIcon:Q},data(){return{show:!1,deleteIcon:N,loading:!1,cookie:M("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(l){this.loading=!0;const e={route:`${P.facility}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{data:r,error:c,pending:a}=await F(e);this.loading=a,r.value&&(this.handleClick(),k().$toast.success("Facility deleted successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(console.error(c.value),k().$toast.error(R),this.loading=!1)},handleClick(){this.show=!this.show}}},Pe={class:"fixed inset-0 overflow-y-auto"},Fe={class:"flex min-h-full items-center justify-center p-4 text-center"},je={class:"border-b px-3 py-3 flex items-center justify-between"},Re={class:"mt-2 space-y-3 px-5"},Ue={class:"rounded px-2 py-2"},Le={class:"font-semibold text-red-500"},Se={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ee(l,e,r,c,a,i){const d=j,u=n("TransitionChild"),_=n("ExclamationTriangleIcon"),h=n("DialogTitle"),m=n("XMarkIcon"),f=n("FormKit"),g=n("DialogPanel"),p=n("Dialog"),v=n("TransitionRoot");return x(),C("div",null,[t(d,{click:i.handleClick,color:"error",text:"Delete",icon:a.deleteIcon},null,8,["click","icon"]),t(v,{appear:"",show:a.show,as:"template"},{default:s(()=>[t(p,{as:"div",class:"relative z-10"},{default:s(()=>[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>e[3]||(e[3]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",Pe,[o("div",Fe,[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[t(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[o("div",je,[t(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[t(_,{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=w(" Confirm delete "))]),_:1}),o("button",{onClick:e[0]||(e[0]=(...y)=>i.handleClick&&i.handleClick(...y))},[t(m,{class:"w-5 h-5"})])]),t(f,{type:"form","submit-label":"Update",onSubmit:e[2]||(e[2]=y=>i.deleteData(r.data.id)),actions:!1},{default:s(({value:y})=>[o("div",Re,[o("div",Ue,[e[5]||(e[5]=w(" Do you really want to delete ")),o("span",Le,U(r.data.name),1),e[6]||(e[6]=w("? Note that once this action is completed, it can not be undone "))]),t(f,{type:"textarea",label:"Reason",validation:"required",modelValue:a.reason,"onUpdate:modelValue":e[1]||(e[1]=Z=>a.reason=Z)},null,8,["modelValue"])]),o("div",Se,[t(d,{loading:a.loading,type:"submit",click:()=>{},color:"error",icon:a.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ae=b(Me,[["render",Ee]]),qe={components:{MagnifyingGlassIcon:oe},setup(){te({title:`${ee.name.toUpperCase()} - Facilities`})},data(){return{header:"List of facilities",pages:[{name:"Home",link:"/home"},{name:"Lab Configuration",link:"#"}],addIcon:B,deleteIcon:N,viewIcon:ae,headers:[{text:"ID",value:"id",sortable:!0},{text:"Name",value:"name",sortable:!0},{text:"Date Created",value:"created_date"},{text:"Actions",value:"actions"}],facilities:new Array,cookie:M("token"),loading:!1,searchValue:"",search:"",serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init()},methods:{async init(){this.loading=!0;const{page:l,rowsPerPage:e}=this.serverOptions,r={route:`${P.facility}?page=${l}&per_page=${e}&search=${this.search}`,method:"GET",token:`${this.cookie}`},{data:c,error:a,pending:i}=await F(r);this.loading=i,c.value&&(this.facilities=c.value.data.map(d=>({...d,created_date:z(d.created_date).format(G)})),this.serverItemsLength=c.value.meta.total_count,this.loading=!1),a.value&&(console.error(a.value),this.loading=!1)},updateFacilites(l){typeof l=="object"&&(this.serverOptions=l),this.init()},updateSearch(l){typeof l=="string"&&(this.search=l,this.searchValue=l,this.updateFacilites(!0))}}},Be={class:"py-5 px-5"},Oe={class:"flex items-center justify-between py-5"},Xe={class:"text-2xl font-semibold"},Ne={class:"flex justify-end w-full px-2 py-2 mb-2"},Ze={class:"py-2 flex items-center space-x-2"};function Ke(l,e,r,c,a,i){const d=K,u=ue,_=Y,h=xe,m=He,f=Ae,g=W;return x(),C("div",Be,[t(d,{pages:a.pages},null,8,["pages"]),o("div",Oe,[o("h3",Xe,U(a.header),1),("usePermissions"in l?l.usePermissions:S(q))().can.manage("lab_configurations")?(x(),E(u,{key:0,onUpdate:i.updateFacilites},null,8,["onUpdate"])):A("",!0)]),o("div",Ne,[t(_,{search:a.search,onUpdate:i.updateSearch},null,8,["search","onUpdate"])]),("usePermissions"in l?l.usePermissions:S(q))().can.manage("lab_configurations")?(x(),E(g,{key:0,headers:a.headers,data:a.facilities,loading:a.loading,"search-value":a.searchValue,"search-field":"name",serverItemsLength:a.serverItemsLength,serverOptions:a.serverOptions,onUpdate:i.updateFacilites},{actions:s(({item:p})=>[o("div",Ze,[t(h,{data:p},null,8,["data"]),t(m,{data:p,onUpdate:i.updateFacilites},null,8,["data","onUpdate"]),t(f,{data:p,onUpdate:i.updateFacilites},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value","serverItemsLength","serverOptions","onUpdate"])):A("",!0)])}const ut=b(qe,[["render",Ke]]);export{ut as default};

import{_ as A}from"./Breadcrumb.vue.467d3dea.js";import{a as T,b,_ as w,g as n,o as C,c as D,e as t,d as e,h as s,i as v,f as $,t as R,u as O}from"./entry.d9fbdf98.js";import{_ as M}from"./OutlinedButton.53bb1747.js";import{e as B}from"./constants.bda0d9fe.js";import{r as K,e as I,f as V,a as z}from"./fetch.b6555f7e.js";import{r as S}from"./XMarkIcon.06a44024.js";import{r as G}from"./UserIcon.c1fdd820.js";import{r as X}from"./ArrowDownTrayIcon.b87720b9.js";import{r as H}from"./ArrowUturnLeftIcon.bb57dbf7.js";import{S as j,h as U,U as F,G as P,V as L}from"./transition.ce32fc16.js";import{_ as J}from"./SearchBar.c39296f5.js";import{r as Q,a as q}from"./PencilSquareIcon.e6142827.js";import{a as E,_ as W}from"./admissions.deb8a7a5.js";import{r as Y}from"./TrashIcon.e354fc95.js";import{_ as Z}from"./Datatable.03ba7a9a.js";import{P as ee}from"./package.fe63cea7.js";import"./nuxt-link.0006bab7.js";import"./HomeIcon.3d3415e6.js";import"./network.ebce3333.js";import"./PrinterIcon.03ed4c0e.js";import"./hidden.0846cadb.js";import"./Loader.fdf4df00.js";const te={components:{TransitionRoot:j,TransitionChild:U,Dialog:F,DialogPanel:P,DialogTitle:L,XMarkIcon:S,UserIcon:G},data(){return{open:!1,addIcon:K,saveIcon:X,clearIcon:H,name:"",description:"",loading:!1,cookie:T("token")}},methods:{async submitForm(){this.loading=!0;const c={route:I.departments,method:"POST",token:`${this.cookie}`,body:{name:this.name}},{pending:a,error:l,data:r}=await V(c);this.loading=a,r.value&&(this.adjustVisibility(),b().$toast.success(`${this.name} laboratory section created successfully!`),this.name="",this.loading=!1,this.$emit("update",!0)),l.value&&(this.adjustVisibility(),console.log(l.value),b().$toast.error(B),this.loading=!1)},adjustVisibility(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},oe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ae={class:"fixed inset-0 overflow-y-auto"},ne={class:"flex min-h-full items-center justify-center p-4 text-center"},se={class:"border-b px-3 py-3 flex items-center justify-between"},ie={class:"mt-2 space-y-3"},le={class:"w-full flex items-center px-5"},ce={class:"w-full flex flex-col space-y-2"},re={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function de(c,a,l,r,o,i){const m=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("FormKit"),p=M,x=n("DialogPanel"),_=n("Dialog"),k=n("TransitionRoot");return C(),D("div",null,[t("div",null,[e(m,{text:"New lab section",color:"primary",icon:o.addIcon,click:i.adjustVisibility},null,8,["icon","click"])]),e(k,{appear:"",show:o.open,as:"template"},{default:s(()=>[e(_,{as:"div",onClose:i.adjustVisibility,class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[oe]),_:1}),t("div",ae,[t("div",ne,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(x,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",se,[e(f,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:s(()=>[v(" Add new lab section ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...g)=>i.adjustVisibility&&i.adjustVisibility(...g))},[e(h,{class:"w-5 h-5"})])]),e(u,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1,id:"submitForm"},{default:s(({value:g})=>[t("div",ie,[t("div",le,[t("div",ce,[e(u,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":a[1]||(a[1]=y=>o.name=y)},null,8,["modelValue"])])])]),t("div",re,[e(p,{text:"Clear form",type:"button",click:()=>{i.clearForm()}},null,8,["click"]),e(m,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const me=w(te,[["render",de]]),ue={components:{TransitionRoot:j,TransitionChild:U,Dialog:F,DialogPanel:P,DialogTitle:L,XMarkIcon:S},data(){return{viewIcon:Q,show:!1,editIcon:q}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},_e=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25"},null,-1),pe={class:"fixed inset-0 overflow-y-auto"},fe={class:"flex min-h-full items-center justify-center p-4 text-center"},he={class:"border-b px-3 py-3 flex items-center justify-between"},xe=t("img",{src:E,class:"w-8 h-8 mr-2"},null,-1),ge={class:"space-y-3 px-5 py-5"},ye={class:"w-full flex flex-col space-y-1"},ve=t("label",{class:"font-semibold text-lg"},"Name",-1),be={class:"underline"};function ke(c,a,l,r,o,i){const m=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("DialogPanel"),p=n("Dialog"),x=n("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(x,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(p,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[_e]),_:1}),t("div",pe,[t("div",fe,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(u,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",he,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[xe,v(" View Laboratory Section ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(..._)=>i.handleClick&&i.handleClick(..._))},[e(h,{class:"w-5 h-5"})])]),t("div",ge,[t("div",ye,[ve,t("p",be,R(l.data.name),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const we=w(ue,[["render",ke]]),Ce={components:{TransitionRoot:j,TransitionChild:U,Dialog:F,DialogPanel:P,DialogTitle:L,XMarkIcon:S},data(){return{editIcon:q,show:!1,saveIcon:X,loading:!1,cookie:T("token"),name:this.data.name}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const c={route:`${I.departments}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.name},{data:a,error:l,pending:r}=await V(c);this.loading=r,a.value&&(this.handleClick(),b().$toast.success("Laboratory section updated successfully!"),this.loading=!1,this.$emit("update",!0)),l.value&&(this.handleClick(),b().$toast.error(B),console.error(l.value),this.loading=!1)},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("submitForm")}}},De=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Te={class:"fixed inset-0 overflow-y-auto"},$e={class:"flex min-h-full items-center justify-center p-4 text-center"},Ie={class:"border-b px-3 py-3 flex items-center justify-between"},Ve=t("img",{src:E,class:"w-8 h-8 mr-2"},null,-1),Se={class:"mt-2 space-y-3"},je={class:"w-full flex items-center px-5"},Ue={class:"w-full flex flex-col space-y-2"},Fe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Pe(c,a,l,r,o,i){const m=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("FormKit"),p=M,x=n("DialogPanel"),_=n("Dialog"),k=n("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,text:"Edit",color:"success",icon:o.editIcon},null,8,["click","icon"]),e(k,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(_,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[De]),_:1}),t("div",Te,[t("div",$e,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(x,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Ie,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[Ve,v(" Edit Laboratory Department ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...g)=>i.handleClick&&i.handleClick(...g))},[e(h,{class:"w-5 h-5"})])]),e(u,{id:"submitForm",type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:g})=>[t("div",Se,[t("div",je,[t("div",Ue,[e(u,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":a[1]||(a[1]=y=>o.name=y)},null,8,["modelValue"])])])]),t("div",Fe,[e(p,{text:"Clear form",type:"button",click:()=>{i.clearForm()}},null,8,["click"]),e(m,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Le=w(Ce,[["render",Pe]]),Re={components:{TransitionRoot:j,TransitionChild:U,Dialog:F,DialogPanel:P,DialogTitle:L,XMarkIcon:S,ExclamationTriangleIcon:z},data(){return{show:!1,deleteIcon:Y,loading:!1,reason:"",cookie:T("token")}},props:{data:{type:Object,required:!0}},methods:{async deleteData(c){this.loading=!0;const a={route:`${I.departments}/${c}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}};let{data:l,error:r,pending:o}=await V(a);this.loading=o,l.value&&(this.handleClick(),b().$toast.success("Laboratory section deleted successfully!"),this.$emit("update",!0)),r.value&&(b().$toast.error(B),this.handleClick(),console.error(r.value))},handleClick(){this.show=!this.show}}},Me=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Be={class:"fixed inset-0 overflow-y-auto"},Xe={class:"flex min-h-full items-center justify-center p-4 text-center"},qe={class:"border-b px-3 py-3 flex items-center justify-between"},Ee={class:"mt-2 space-y-3 px-5"},Ne={class:"rounded px-2 py-2"},Ae={class:"font-semibold text-red-500"},Oe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function Ke(c,a,l,r,o,i){const m=$,d=n("TransitionChild"),f=n("ExclamationTriangleIcon"),h=n("DialogTitle"),u=n("XMarkIcon"),p=n("FormKit"),x=M,_=n("DialogPanel"),k=n("Dialog"),g=n("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(g,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(k,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Me]),_:1}),t("div",Be,[t("div",Xe,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",qe,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[e(f,{class:"h-5 w-5 mr-2"}),v(" Confirm delete ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...y)=>i.handleClick&&i.handleClick(...y))},[e(u,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:a[2]||(a[2]=y=>i.deleteData(l.data.id)),actions:!1},{default:s(({value:y})=>[t("div",Ee,[t("div",Ne,[v(" Do you really want to delete "),t("span",Ae,R(l.data.name),1),v("? Note that once this action is completed, it can not be undone ")]),e(p,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":a[1]||(a[1]=N=>o.reason=N)},null,8,["modelValue"])]),t("div",Oe,[e(x,{type:"button",click:()=>{i.handleClick()},text:"Cancel"},null,8,["click"]),e(m,{loading:o.loading,type:"submit",click:()=>{},color:"error",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ze=w(Re,[["render",Ke]]),Ge={setup(){O({title:`${ee.name.toUpperCase()} - Laboratory Sections`})},data(){return{header:"Laboratory Sections",departments:new Array,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],loading:!1,search:"",searchValue:"",cookie:T("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(c){this.searchValue=c,this.search=c},async init(){this.loading=!0;const c={route:I.departments,method:"GET",token:`${this.cookie}`},{pending:a,error:l,data:r}=await V(c);this.loading=a,r.value&&(this.loading=!1,this.departments=r.value),l.value&&(this.loading=!1,console.log(l.value))},updateLabSections(c){c&&this.init()}}},He={class:"py-5 px-5"},Je={class:"flex items-center justify-between py-5"},Qe={class:"text-2xl font-semibold flex items-center uppercase"},We=t("img",{src:W,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),Ye={class:"flex items-center space-x-3"},Ze={class:"flex justify-end w-full px-2 py-2 mb-2"},et={class:"py-2 flex items-center space-x-2"};function tt(c,a,l,r,o,i){const m=A,d=me,f=J,h=we,u=Le,p=ze,x=Z;return C(),D("div",He,[e(m,{pages:o.pages},null,8,["pages"]),t("div",Je,[t("div",Qe,[We,v(" "+R(o.header),1)]),t("div",Ye,[e(d,{onUpdate:i.updateLabSections},null,8,["onUpdate"])])]),t("div",Ze,[e(f,{search:o.search,onUpdate:i.updateSearch},null,8,["search","onUpdate"])]),e(x,{headers:o.headers,data:o.departments,loading:o.loading,"search-value":o.searchValue,"search-field":"name"},{actions:s(({item:_})=>[t("div",et,[e(h,{data:_},null,8,["data"]),e(u,{data:_,onUpdate:i.updateLabSections},null,8,["data","onUpdate"]),e(p,{data:_,onUpdate:i.updateLabSections},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const Ct=w(Ge,[["render",tt]]);export{Ct as default};

import{_ as D}from"./Breadcrumb.b0c0412c.js";import{_ as y,f as d,o as b,c as w,b as a,g as r,d as e,h as I,t as s,e as k,u as S}from"./entry.791399ec.js";import{_ as B}from"./SearchBar.3bd38df9.js";import{r as V}from"./XMarkIcon.235914cb.js";import{r as x,a as L}from"./PencilSquareIcon.ffacbd25.js";import{S as P,h as U,U as M,G as O,V as R}from"./transition.f6288412.js";import{_ as j}from"./ambulance.396b0a08.js";import{_ as A}from"./Datatable.3b86044c.js";import{u as q}from"./vue.f36acd1f.8530d91e.js";import{d as v}from"./constants.713ae7a7.js";import{S as N}from"./stock.5a2e33ca.js";import{h as g}from"./fetch.b60ef317.js";import{P as X}from"./package.d411c004.js";import"./nuxt-link.1af0fd3d.js";import"./HomeIcon.bfaa9779.js";import"./hidden.63232384.js";import"./Loader.0e90c75f.js";import"./PrinterIcon.9d4d78fd.js";const E={components:{TransitionRoot:P,TransitionChild:U,Dialog:M,DialogPanel:O,DialogTitle:R,XMarkIcon:V},data(){return{viewIcon:x,show:!1,editIcon:L}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},F=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),G={class:"fixed inset-0 overflow-y-auto"},H={class:"flex min-h-full items-center justify-center p-4 text-center"},z={class:"border-b px-3 py-3 flex items-center justify-between"},Q=e("img",{src:j,class:"w-8 h-8 mr-2"},null,-1),J={class:"py-5 space-y-3 px-5"},K={class:"w-full flex flex-col space-y-1"},W=e("label",{class:"font-semibold text-lg"},"Name",-1),Y={class:"w-full flex flex-col space-y-1"},Z=e("label",{class:"font-semibold text-lg"},"Description",-1),$={class:"w-full flex flex-col space-y-1"},ee=e("label",{class:"font-semibold text-lg"},"Location",-1),te={class:"w-full flex flex-col space-y-1"},oe=e("label",{class:"font-semibold text-lg"},"Transaction Type",-1),se={class:"w-full flex flex-col space-y-1"},ae=e("label",{class:"font-semibold text-lg"},"Sender",-1),ne={class:"w-full flex flex-col space-y-1"},le=e("label",{class:"font-semibold text-lg"},"Receiver",-1),ie={class:"w-full flex flex-col space-y-1"},ce=e("label",{class:"font-semibold text-lg"},"Batch",-1),re={class:"w-full flex flex-col space-y-1"},de=e("label",{class:"font-semibold text-lg"},"Lot",-1),_e={class:"w-full flex flex-col space-y-1"},me=e("label",{class:"font-semibold text-lg"},"Quantity",-1),fe={class:"w-full flex flex-col space-y-1"},ue=e("label",{class:"font-semibold text-lg"},"Available Balance",-1),pe={class:"w-full flex flex-col space-y-1"},he=e("label",{class:"font-semibold text-lg"},"Remaining Balance After Transaction",-1),xe={class:"w-full flex flex-col space-y-1"},ve=e("label",{class:"font-semibold text-lg"},"Expirty Date",-1),ge={class:"w-full flex flex-col space-y-1"},ye=e("label",{class:"font-semibold text-lg"},"Transaction Date",-1);function be(n,c,t,f,o,l){const _=k,i=d("TransitionChild"),u=d("DialogTitle"),p=d("XMarkIcon"),h=d("DialogPanel"),m=d("Dialog"),T=d("TransitionRoot");return b(),w("div",null,[a(_,{click:l.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),a(T,{appear:"",show:o.show,as:"template"},{default:r(()=>[a(m,{as:"div",class:"relative z-10"},{default:r(()=>[a(i,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[F]),_:1}),e("div",G,[e("div",H,[a(i,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[a(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",z,[a(u,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[Q,I(" View Stock Transaction ")]),_:1}),e("button",{onClick:c[0]||(c[0]=(...C)=>l.handleClick&&l.handleClick(...C))},[a(p,{class:"w-5 h-5"})])]),e("div",J,[e("div",K,[W,e("p",null,s(t.data.name),1)]),e("div",Y,[Z,e("p",null,s(t.data.description),1)]),e("div",$,[ee,e("p",null,s(t.data.stock_location),1)]),e("div",te,[oe,e("p",null,s(t.data.transaction_type),1)]),e("div",se,[ae,e("p",null,s(t.data.sending_to),1)]),e("div",ne,[le,e("p",null,s(t.data.receiving_from),1)]),e("div",ie,[ce,e("p",null,s(t.data.batch),1)]),e("div",re,[de,e("p",null,s(t.data.lot),1)]),e("div",_e,[me,e("p",null,s(t.data.transacted_quantity),1)]),e("div",fe,[ue,e("p",null,s(t.data.consolidated_available_balance),1)]),e("div",pe,[he,e("p",null,s(t.data.after_transaction_remaining_balance),1)]),e("div",xe,[ve,e("p",null,s(t.data.expiry_date),1)]),e("div",ge,[ye,e("p",null,s(t.data.transaction_date),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const we=y(E,[["render",be]]),ke={setup(){q({title:`${X.name.toUpperCase()} - Stock Transactions`})},data(){return{header:"Stock Transactions",search:"",loading:!1,transferIcon:x,viewIcon:x,pages:[{name:"Home",link:"/home"},{name:"Stock Management",link:"#"}],headers:[{text:"item",value:"name",sortable:!0},{text:"type",value:"transaction_type"},{text:"sender",value:"receiving_from"},{text:"receiver",value:"sending_to"},{text:"batch",value:"batch"},{text:"lot",value:"lot"},{text:"expiry date",value:"expiry_date",sortable:!0},{text:"quantity",value:"transacted_quantity",sortable:!0},{text:"transaction date",value:"transaction_date",sortable:!0},{text:"actions",value:"actions"}],transactions:new Array,cookie:S("token"),serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init(this.search)},computed:{filteredTransactions(){return this.transactions.map(n=>({...n,expiry_date:g(n.expiry_date).format(v),transaction_date:g(n.transaction_date).format(v),sending_to:n.sending_to==null?"Laboratory Store":n.sending_to,receiving_from:n.receiving_from==null?"Laboratory Store":n.receiving_from}))}},methods:{async init(n){this.loading=!0;const c=new N,{page:t,rowsPerPage:f}=this.serverOptions,o=`search=${n}&page=${t}&per_page=${f}`,{data:l,pending:_,error:i}=await c.getStockTransactions(`${this.cookie}`,o);this.loading=_,l.value&&(this.transactions=l.value.data,this.loading=!1,this.serverItemsLength=l.value.meta.total_count),i.value&&(console.error(i.value),this.loading=!1)}}},Te={class:"px-5 py-5"},Ce={class:"flex items-center justify-between py-5"},De={class:"text-2xl font-semibold"},Ie={class:"flex items-center space-x-3"},Se={class:"flex items-center justify-end py-5"},Be={class:"py-2 flex items-center space-x-2"};function Ve(n,c,t,f,o,l){const _=D,i=k,u=B,p=we,h=A;return b(),w("div",Te,[a(_,{pages:o.pages},null,8,["pages"]),e("div",Ce,[e("h3",De,s(o.header),1),e("div",Ie,[a(i,{text:"Receive stock",type:"button",color:"warning",icon:o.transferIcon,click:()=>n.$router.push("/stock-management/transactions/receive-stock")},null,8,["icon","click"]),a(i,{text:"Transfer stock",type:"button",color:"success",icon:o.transferIcon,click:()=>n.$router.push("/stock-management/transactions/transfer-stock")},null,8,["icon","click"])])]),e("div",Se,[a(u,{search:o.search,"onUpdate:search":c[0]||(c[0]=m=>o.search=m),onUpdate:l.init},null,8,["search","onUpdate"])]),e("div",null,[a(h,{headers:o.headers,data:l.filteredTransactions,loading:o.loading,searchField:"name",searchValue:o.search,serverItemsLength:o.serverItemsLength,serverOptions:o.serverOptions,onUpdate:l.init},{actions:r(({item:m})=>[e("div",Be,[a(p,{data:m},null,8,["data"])])]),_:1},8,["headers","data","loading","searchValue","serverItemsLength","serverOptions","onUpdate"])])])}const Ke=y(ke,[["render",Ve]]);export{Ke as default};

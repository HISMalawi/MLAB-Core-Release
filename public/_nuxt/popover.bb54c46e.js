import{m as H,o as l,E as W,u as B,g as ue,l as N,y as re,i as se,j as ie,H as V,t as T,f as M,a as A,p as ve,b as X,d as k,P as I,N as w,T as G}from"./hidden.a9fd55b4.js";import{b as pe}from"./use-text-value.cb6830ee.js";import{a as ce,p as de,E as fe,n as Y,d as F}from"./transition.5b1867a1.js";import{m as q,C as E,L as h,ab as z,aa as Q,O as C,Q as J,a5 as Z,F as _,ac as R}from"./entry.64b6b942.js";var be=(v=>(v[v.Open=0]="Open",v[v.Closed=1]="Closed",v))(be||{});let ee=Symbol("PopoverContext");function U(v){let g=R(ee,null);if(g===null){let S=new Error(`<${v} /> is missing a parent <${Se.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,U),S}return g}let Pe=Symbol("PopoverGroupContext");function te(){return R(Pe,null)}let le=Symbol("PopoverPanelContext");function ge(){return R(le,null)}let Se=q({name:"Popover",props:{as:{type:[Object,String],default:"div"}},setup(v,{slots:g,attrs:S,expose:j}){var o;let e=E(null);j({el:e,$el:e});let b=E(1),d=E(null),O=E(null),m=E(null),f=E(null),$=h(()=>H(e)),x=h(()=>{var t,a;if(!l(d)||!l(f))return!1;for(let L of document.querySelectorAll("body > *"))if(Number(L==null?void 0:L.contains(l(d)))^Number(L==null?void 0:L.contains(l(f))))return!0;let r=W(),P=r.indexOf(l(d)),K=(P+r.length-1)%r.length,oe=(P+1)%r.length,ne=r[K],ae=r[oe];return!((t=l(f))!=null&&t.contains(ne))&&!((a=l(f))!=null&&a.contains(ae))}),c={popoverState:b,buttonId:E(null),panelId:E(null),panel:f,button:d,isPortalled:x,beforePanelSentinel:O,afterPanelSentinel:m,togglePopover(){b.value=B(b.value,{[0]:1,[1]:0})},closePopover(){b.value!==1&&(b.value=1)},close(t){c.closePopover();let a=(()=>t?t instanceof HTMLElement?t:t.value instanceof HTMLElement?l(t):l(c.button):l(c.button))();a==null||a.focus()}};z(ee,c),ue(h(()=>B(b.value,{[0]:N.Open,[1]:N.Closed})));let D={buttonId:c.buttonId,panelId:c.panelId,close(){c.closePopover()}},y=te(),s=y==null?void 0:y.registerPopover,[p,u]=ce(),n=de({portals:p,defaultContainers:[d,f]});function i(){var t,a,r,P;return(P=y==null?void 0:y.isFocusWithinPopoverGroup())!=null?P:((t=$.value)==null?void 0:t.activeElement)&&(((a=l(d))==null?void 0:a.contains($.value.activeElement))||((r=l(f))==null?void 0:r.contains($.value.activeElement)))}return Q(()=>s==null?void 0:s(D)),fe((o=$.value)==null?void 0:o.defaultView,"focus",t=>{var a,r;t.target!==window&&t.target instanceof HTMLElement&&b.value===0&&(i()||d&&f&&(n.contains(t.target)||(a=l(c.beforePanelSentinel))!=null&&a.contains(t.target)||(r=l(c.afterPanelSentinel))!=null&&r.contains(t.target)||c.closePopover()))},!0),re(n.resolveContainers,(t,a)=>{var r;c.closePopover(),se(a,ie.Loose)||(t.preventDefault(),(r=l(d))==null||r.focus())},h(()=>b.value===0)),()=>{let t={open:b.value===0,close:c.close};return C(u,{},()=>V({theirProps:{...v,...S},ourProps:{ref:e},slot:t,slots:g,attrs:S,name:"Popover"}))}}}),$e=q({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${T()}`}},inheritAttrs:!1,setup(v,{attrs:g,slots:S,expose:j}){let o=U("PopoverButton"),e=h(()=>H(o.button));j({el:o.button,$el:o.button}),J(()=>{o.buttonId.value=v.id}),Z(()=>{o.buttonId.value=null});let b=te(),d=b==null?void 0:b.closeOthers,O=ge(),m=h(()=>O===null?!1:O.value===o.panelId.value),f=E(null),$=`headlessui-focus-sentinel-${T()}`;m.value||Q(()=>{o.button.value=f.value});let x=pe(h(()=>({as:v.as,type:g.type})),f);function c(n){var i,t,a,r,P;if(m.value){if(o.popoverState.value===1)return;switch(n.key){case k.Space:case k.Enter:n.preventDefault(),(t=(i=n.target).click)==null||t.call(i),o.closePopover(),(a=l(o.button))==null||a.focus();break}}else switch(n.key){case k.Space:case k.Enter:n.preventDefault(),n.stopPropagation(),o.popoverState.value===1&&(d==null||d(o.buttonId.value)),o.togglePopover();break;case k.Escape:if(o.popoverState.value!==0)return d==null?void 0:d(o.buttonId.value);if(!l(o.button)||(r=e.value)!=null&&r.activeElement&&!((P=l(o.button))!=null&&P.contains(e.value.activeElement)))return;n.preventDefault(),n.stopPropagation(),o.closePopover();break}}function D(n){m.value||n.key===k.Space&&n.preventDefault()}function y(n){var i,t;v.disabled||(m.value?(o.closePopover(),(i=l(o.button))==null||i.focus()):(n.preventDefault(),n.stopPropagation(),o.popoverState.value===1&&(d==null||d(o.buttonId.value)),o.togglePopover(),(t=l(o.button))==null||t.focus()))}function s(n){n.preventDefault(),n.stopPropagation()}let p=Y();function u(){let n=l(o.panel);if(!n)return;function i(){B(p.value,{[F.Forwards]:()=>I(n,w.First),[F.Backwards]:()=>I(n,w.Last)})===G.Error&&I(W().filter(t=>t.dataset.headlessuiFocusGuard!=="true"),B(p.value,{[F.Forwards]:w.Next,[F.Backwards]:w.Previous}),{relativeTo:l(o.button)})}i()}return()=>{let n=o.popoverState.value===0,i={open:n},{id:t,...a}=v,r=m.value?{ref:f,type:x.value,onKeydown:c,onClick:y}:{ref:f,id:t,type:x.value,"aria-expanded":o.popoverState.value===0,"aria-controls":l(o.panel)?o.panelId.value:void 0,disabled:v.disabled?!0:void 0,onKeydown:c,onKeyup:D,onClick:y,onMousedown:s};return C(_,[V({ourProps:r,theirProps:{...g,...a},slot:i,attrs:g,slots:S,name:"PopoverButton"}),n&&!m.value&&o.isPortalled.value&&C(M,{id:$,features:A.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:u})])}}}),we=q({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${T()}`}},inheritAttrs:!1,setup(v,{attrs:g,slots:S,expose:j}){let{focus:o}=v,e=U("PopoverPanel"),b=h(()=>H(e.panel)),d=`headlessui-focus-sentinel-before-${T()}`,O=`headlessui-focus-sentinel-after-${T()}`;j({el:e.panel,$el:e.panel}),J(()=>{e.panelId.value=v.id}),Z(()=>{e.panelId.value=null}),z(le,e.panelId),Q(()=>{var s,p;if(!o||e.popoverState.value!==0||!e.panel)return;let u=(s=b.value)==null?void 0:s.activeElement;(p=l(e.panel))!=null&&p.contains(u)||I(l(e.panel),w.First)});let m=ve(),f=h(()=>m!==null?(m.value&N.Open)===N.Open:e.popoverState.value===0);function $(s){var p,u;switch(s.key){case k.Escape:if(e.popoverState.value!==0||!l(e.panel)||b.value&&!((p=l(e.panel))!=null&&p.contains(b.value.activeElement)))return;s.preventDefault(),s.stopPropagation(),e.closePopover(),(u=l(e.button))==null||u.focus();break}}function x(s){var p,u,n,i,t;let a=s.relatedTarget;a&&l(e.panel)&&((p=l(e.panel))!=null&&p.contains(a)||(e.closePopover(),((n=(u=l(e.beforePanelSentinel))==null?void 0:u.contains)!=null&&n.call(u,a)||(t=(i=l(e.afterPanelSentinel))==null?void 0:i.contains)!=null&&t.call(i,a))&&a.focus({preventScroll:!0})))}let c=Y();function D(){let s=l(e.panel);if(!s)return;function p(){B(c.value,{[F.Forwards]:()=>{var u;I(s,w.First)===G.Error&&((u=l(e.afterPanelSentinel))==null||u.focus())},[F.Backwards]:()=>{var u;(u=l(e.button))==null||u.focus({preventScroll:!0})}})}p()}function y(){let s=l(e.panel);if(!s)return;function p(){B(c.value,{[F.Forwards]:()=>{let u=l(e.button),n=l(e.panel);if(!u)return;let i=W(),t=i.indexOf(u),a=i.slice(0,t+1),r=[...i.slice(t+1),...a];for(let P of r.slice())if(P.dataset.headlessuiFocusGuard==="true"||n!=null&&n.contains(P)){let K=r.indexOf(P);K!==-1&&r.splice(K,1)}I(r,w.First,{sorted:!1})},[F.Backwards]:()=>{var u;I(s,w.Previous)===G.Error&&((u=l(e.button))==null||u.focus())}})}p()}return()=>{let s={open:e.popoverState.value===0,close:e.close},{id:p,focus:u,...n}=v,i={ref:e.panel,id:p,onKeydown:$,onFocusout:o&&e.popoverState.value===0?x:void 0,tabIndex:-1};return V({ourProps:i,theirProps:{...g,...n},attrs:g,slot:s,slots:{...S,default:(...t)=>{var a;return[C(_,[f.value&&e.isPortalled.value&&C(M,{id:d,ref:e.beforePanelSentinel,features:A.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:D}),(a=S.default)==null?void 0:a.call(S,...t),f.value&&e.isPortalled.value&&C(M,{id:O,ref:e.afterPanelSentinel,features:A.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:y})])]}},features:X.RenderStrategy|X.Static,visible:f.value,name:"PopoverPanel"})}}});export{we as W,Se as g,$e as j};

import{_ as L}from"./Breadcrumb.vue.a39ffbdc.js";import{a as $,b as D,_ as V,g as i,o as w,c as b,e,d as t,h as c,i as k,f as U,w as O,v as z,t as I,F as H,r as W,A as J,B as Q,u as Y}from"./entry.fea207a2.js";import{_ as Z}from"./Multiselect.e6015d9b.js";import{_ as M}from"./OutlinedButton.042bcafd.js";import{e as K}from"./constants.d775b389.js";import{r as ee,e as T,f as C,j as te,a as oe}from"./fetch.fde8799b.js";import{r as A}from"./XMarkIcon.c02e9f86.js";import{r as R}from"./UserIcon.d18f1772.js";import{r as B}from"./WrenchScrewdriverIcon.21f85233.js";import{r as X}from"./ArrowDownTrayIcon.6cb6f3f8.js";import{r as G}from"./ArrowUturnLeftIcon.971fd748.js";import{S as q,h as j,U as F,G as N,V as E}from"./transition.848bec43.js";import{_ as se}from"./SearchBar.295d3c83.js";import{_ as ne}from"./Loader.bca8454f.js";import{r as ae,a as le}from"./PencilSquareIcon.9dc286fc.js";import{r as ie}from"./TrashIcon.be9aa2b6.js";import{_ as ce}from"./Datatable.57903568.js";import{P as re}from"./package.2170dd03.js";import{r as de}from"./MagnifyingGlassIcon.27827b85.js";import{_ as ue}from"./ui_folder.5e58587f.js";import"./nuxt-link.14636546.js";import"./HomeIcon.b687b7f0.js";import"./PrinterIcon.177ee18a.js";import"./hidden.d08f7e65.js";const pe={components:{TransitionRoot:q,TransitionChild:j,Dialog:F,DialogPanel:N,DialogTitle:E,XMarkIcon:A,UserIcon:R},data(){return{open:!1,driverIcon:B,addIcon:ee,saveIcon:X,clearIcon:G,wardSelected:null,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:$("token")}},created(){this.init()},methods:{async init(){const a={route:T.testTypes,method:"GET",token:`${this.cookie}`,body:{}};let o=await C(a);o.data.value&&(this.rawTestTypes=o.data.value.test_types,o.data.value.test_types.map(n=>{this.testTypes.push(n.name)})),o.error.value&&console.log(o.error.value)},async submitForm(){this.loading=!0;let a=new Array;this.testTypesSelected.map(r=>{this.rawTestTypes.filter(s=>{r==s.name&&a.push(s.id)})});const o={route:T.testPanels,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName,description:this.description,test_types:a}};let n=await C(o);this.loading=n.pending,n.data.value&&(this.handleClick(),D().$toast.success("Test panel created successfully!"),this.$emit("update",!0)),n.error.value&&(D().$toast.error(K),console.log(n.error.value),this.handleClick())},updateTestType(a){console.log(a),this.testTypesSelected=a},handleClick(){this.open=!this.open}}},me=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),_e={class:"fixed inset-0 overflow-y-auto"},he={class:"flex min-h-full items-center justify-center p-4 text-center"},fe={class:"border-b px-3 py-3 flex items-center justify-between"},ye={class:"mt-2 space-y-3 px-5"},ve={class:"w-full flex"},ge={class:"w-full flex"},xe={class:"w-full"},Te={class:"w-full flex"},we={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function be(a,o,n,r,s,l){const d=U,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=i("FormKit"),h=Z,g=M,_=i("DialogPanel"),f=i("Dialog"),S=i("TransitionRoot");return w(),b("div",null,[e("div",null,[t(d,{click:l.handleClick,text:"Create test panel",color:"primary",icon:s.addIcon},null,8,["click","icon"])]),t(S,{appear:"",show:s.open,as:"template"},{default:c(()=>[t(f,{as:"div",onClose:l.handleClick,class:"relative z-20"},{default:c(()=>[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[me]),_:1}),e("div",_e,[e("div",he,[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[e("div",fe,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[k(" Create Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...x)=>l.handleClick&&l.handleClick(...x))},[t(v,{class:"w-5 h-5"})])]),t(u,{type:"form","submit-label":"Update",onSubmit:l.submitForm,actions:!1},{default:c(({value:x})=>[e("div",ye,[e("div",ve,[t(u,{type:"text",label:"Name",validation:"required",modelValue:s.name,"onUpdate:modelValue":o[1]||(o[1]=p=>s.name=p)},null,8,["modelValue"])]),e("div",ge,[t(u,{type:"text",label:"Short Name",validation:"required",modelValue:s.shortName,"onUpdate:modelValue":o[2]||(o[2]=p=>s.shortName=p)},null,8,["modelValue"])]),e("div",xe,[t(h,{onUpdate:l.updateTestType,label:"Select Test Types",items:s.testTypes,"items-selected":s.testTypesSelected,mode:"tags"},null,8,["onUpdate","items","items-selected"])]),e("div",Te,[t(u,{type:"textarea",label:"Description",validation:"required",modelValue:s.description,"onUpdate:modelValue":o[3]||(o[3]=p=>s.description=p)},null,8,["modelValue"])])]),e("div",we,[t(g,{text:"Dismiss",type:"button",click:l.handleClick},null,8,["click"]),t(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ke=V(pe,[["render",be]]),Ce={components:{TransitionRoot:q,TransitionChild:j,Dialog:F,DialogPanel:N,DialogTitle:E,XMarkIcon:A,UserIcon:R},data(){return{open:!1,driverIcon:B,viewIcon:ae,saveIcon:X,clearIcon:G,wardSelected:null,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,details:{id:0,name:"",short_name:"",description:"",test_types:[{id:0,name:""}]},cookie:$("token")}},props:{data:{required:!0,type:Object}},methods:{async init(){this.open=!0,this.loading=!0;const{pending:a,error:o,data:n}=await te(`${T.testPanels}/${this.data.id}`,{method:"GET",headers:{Authorization:`${this.cookie}`}},"$zO6W2HBg68");n.value&&(this.details=n.value,this.loading=!1),o.value&&(console.log(o.value),this.loading=!1,D().$toast.error("An error occurred, please try again!"))},handleClick(){this.open=!this.open}}},De=""+new URL("emergency_post.45544db5.svg",import.meta.url).href;const P=a=>(J("data-v-b60b14cc"),a=a(),Q(),a),Ie=P(()=>e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)),Pe={class:"fixed inset-0 overflow-y-auto"},Se={class:"flex min-h-full items-center justify-center p-4 text-center"},$e={class:"border-b px-3 py-3 flex items-center justify-between"},Ve=P(()=>e("img",{src:De,class:"w-8 h-8 mr-2"},null,-1)),Ue={class:"flex items-center justify-center mx-auto my-20"},Ae={class:"space-y-3 px-5 py-5"},qe={class:"w-full flex flex-col space-y-1"},je=P(()=>e("label",{class:"font-semibold text-lg"},"Name",-1)),Fe={class:"underline"},Ne={class:"w-full flex flex-col space-y-1"},Ee=P(()=>e("label",{class:"font-semibold text-lg"},"Short Name",-1)),Me={class:"underline"},Re={class:"w-full flex flex-col space-y-1"},Be=P(()=>e("label",{class:"font-semibold text-lg"},"Description",-1)),Xe={class:"underline"},Ge={class:"w-full flex flex-col space-y-1"},Oe=P(()=>e("label",{class:"font-semibold list text-lg"},"Test Types",-1));function ze(a,o,n,r,s,l){const d=U,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=ne,h=i("DialogPanel"),g=i("Dialog"),_=i("TransitionRoot");return w(),b("div",null,[e("div",null,[t(d,{click:l.init,text:"View",color:"primary",icon:s.viewIcon},null,8,["click","icon"])]),t(_,{appear:"",show:s.open,as:"template"},{default:c(()=>[t(g,{as:"div",onClose:()=>{},class:"relative z-10"},{default:c(()=>[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[Ie]),_:1}),e("div",Pe,[e("div",Se,[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[t(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[e("div",$e,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[Ve,k(" View Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...f)=>l.handleClick&&l.handleClick(...f))},[t(v,{class:"w-5 h-5"})])]),O(e("div",Ue,[t(u,{loading:s.loading},null,8,["loading"])],512),[[z,s.loading]]),O(e("div",Ae,[e("div",qe,[je,e("p",Fe,I(s.details.name),1)]),e("div",Ne,[Ee,e("p",Me,I(s.details.short_name),1)]),e("div",Re,[Be,e("p",Xe,I(s.details.description),1)]),e("div",Ge,[Oe,(w(!0),b(H,null,W(s.details.test_types,f=>(w(),b("div",{key:f.id,class:"flex flex-wrap underline"},I(f.name),1))),128))])],512),[[z,!s.loading]])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ke=V(Ce,[["render",ze],["__scopeId","data-v-b60b14cc"]]),Le={components:{TransitionRoot:q,TransitionChild:j,Dialog:F,DialogPanel:N,DialogTitle:E,XMarkIcon:A,UserIcon:R},props:{data:{required:!0,type:Object}},data(){return{open:!1,driverIcon:B,editIcon:le,saveIcon:X,clearIcon:G,wardSelected:null,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:$("token")}},methods:{async loadTestTypes(){const a={route:T.testTypes,method:"GET",token:`${this.cookie}`,body:{}},{data:o,error:n,pending:r}=await C(a);o.value&&(this.rawTestTypes=o.value.test_types,o.value.test_types.map(s=>{this.testTypes.push(s.name)})),n.value&&console.log(n.value)},async init(){this.open=!0,await this.loadTestTypes(),this.testTypesSelected=new Array;const a={route:`${T.testPanels}/${this.data.id}`,method:"GET",token:`${this.cookie}`,body:{}},{data:o,error:n,pending:r}=await C(a);o.value&&o.value.test_types.map(s=>{this.testTypesSelected.push(s.name)}),n.value&&console.log(n.value)},async submitForm(){this.loading=!0;let a=new Array;this.testTypesSelected.map(l=>{this.rawTestTypes.filter(d=>{l==d.name&&a.push(d.id)})}),this.data.test_types=a;const o={route:`${T.testPanels}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{data:n,error:r,pending:s}=await C(o);this.loading=s,n.value&&(this.open=!1,D().$toast.success("Test panel updated successfully!"),this.$emit("update",!0)),r.value&&(console.log(r.value),D().$toast.error(K))},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},He=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),We={class:"fixed inset-0 overflow-y-auto"},Je={class:"flex min-h-full items-center justify-center p-4 text-center"},Qe={class:"border-b px-3 py-3 flex items-center justify-between"},Ye={class:"mt-2 space-y-3 px-5"},Ze={class:"w-full flex"},et={class:"w-full flex"},tt={class:"w-full flex"},ot={class:"h-72 w-full flex flex-col space-y-2"},st=e("label",{class:"font-medium"},"Select Test Types",-1),nt={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function at(a,o,n,r,s,l){const d=U,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=i("FormKit"),h=i("multi-select"),g=M,_=i("DialogPanel"),f=i("Dialog"),S=i("TransitionRoot");return w(),b("div",null,[e("div",null,[t(d,{click:l.init,text:"Edit",color:"success",icon:s.editIcon},null,8,["click","icon"])]),t(S,{appear:"",show:s.open,as:"template"},{default:c(()=>[t(f,{as:"div",onClose:l.handleClick,class:"relative z-10"},{default:c(()=>[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[He]),_:1}),e("div",We,[e("div",Je,[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[e("div",Qe,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[k(" Edit Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...x)=>l.handleClick&&l.handleClick(...x))},[t(v,{class:"w-5 h-5"})])]),t(u,{type:"form","submit-label":"Update",onSubmit:l.submitForm,actions:!1,id:"submitForm"},{default:c(({value:x})=>[e("div",Ye,[e("div",Ze,[t(u,{type:"text",label:"Name",validation:"required",modelValue:n.data.name,"onUpdate:modelValue":o[1]||(o[1]=p=>n.data.name=p)},null,8,["modelValue"])]),e("div",et,[t(u,{type:"text",label:"Short Name",validation:"required",modelValue:n.data.short_name,"onUpdate:modelValue":o[2]||(o[2]=p=>n.data.short_name=p)},null,8,["modelValue"])]),e("div",tt,[t(u,{type:"textarea",label:"Description",validation:"required",modelValue:n.data.description,"onUpdate:modelValue":o[3]||(o[3]=p=>n.data.description=p)},null,8,["modelValue"])]),e("div",ot,[st,t(h,{style:{"--ms-max-height":"none !important"},modelValue:s.testTypesSelected,"onUpdate:modelValue":o[4]||(o[4]=p=>s.testTypesSelected=p),options:s.testTypes,mode:"tags",clear:"",searchable:!0,required:!0,class:"outline-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),e("div",nt,[t(g,{text:"Clear form",type:"button",click:()=>{l.clearForm()}},null,8,["click"]),t(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const lt=V(Le,[["render",at]]),it={components:{TransitionRoot:q,TransitionChild:j,Dialog:F,DialogPanel:N,DialogTitle:E,XMarkIcon:A,ExclamationTriangleIcon:oe},data(){return{show:!1,deleteIcon:ie,loading:!1,reason:""}},props:{data:{type:Object,required:!0}},setup(){return{cookie:$("token")}},methods:{async deleteData(a){this.loading=!0;const o={route:`${T.testPanels}/${a}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:n,error:r,data:s}=await C(o);this.loading=n,s.value&&(this.handleClick(),D().$toast.success("Test panel deleted successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(D().$toast.error("An error occurred, please try again!"),console.log(r.value),this.loading=!1)},handleClick(){this.show=!this.show}}},ct=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),rt={class:"fixed inset-0 overflow-y-auto"},dt={class:"flex min-h-full items-center justify-center p-4 text-center"},ut={class:"border-b px-3 py-3 flex items-center justify-between"},pt={class:"mt-2 space-y-3 px-5"},mt={class:"rounded px-2 py-2"},_t={class:"font-semibold text-red-500"},ht={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function ft(a,o,n,r,s,l){const d=U,m=i("TransitionChild"),y=i("ExclamationTriangleIcon"),v=i("DialogTitle"),u=i("XMarkIcon"),h=i("FormKit"),g=M,_=i("DialogPanel"),f=i("Dialog"),S=i("TransitionRoot");return w(),b("div",null,[t(d,{click:l.handleClick,color:"error",text:"Delete",icon:s.deleteIcon},null,8,["click","icon"]),t(S,{appear:"",show:s.show,as:"template"},{default:c(()=>[t(f,{as:"div",class:"relative z-10"},{default:c(()=>[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[ct]),_:1}),e("div",rt,[e("div",dt,[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[e("div",ut,[t(v,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[t(y,{class:"h-5 w-5 mr-2"}),k(" Confirm delete ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...x)=>l.handleClick&&l.handleClick(...x))},[t(u,{class:"w-5 h-5"})])]),t(h,{type:"form","submit-label":"Update",onSubmit:o[2]||(o[2]=x=>l.deleteData(n.data.id)),actions:!1},{default:c(({value:x})=>[e("div",pt,[e("div",mt,[k(" Do you really want to delete "),e("span",_t,I(n.data.name),1),k("? Note that once this action is completed, it can not be undone ")]),t(h,{type:"textarea",label:"Reason",validation:"required",modelValue:s.reason,"onUpdate:modelValue":o[1]||(o[1]=p=>s.reason=p)},null,8,["modelValue"])]),e("div",ht,[t(g,{type:"button",click:()=>{l.handleClick()},text:"Cancel"},null,8,["click"]),t(d,{loading:s.loading,type:"submit",click:()=>{},color:"error",icon:s.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const yt=V(it,[["render",ft]]),vt={setup(){Y({title:`${re.name.toUpperCase()} - Test Panels`})},components:{MagnifyingGlassIcon:de},data(){return{header:"Test Panels",testPanels:new Array,loading:!1,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],search:"",searchValue:"",cookie:$("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"description",value:"description",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(a){this.searchValue=a,this.search=a},async init(){this.loading=!0;const a={route:T.testPanels,method:"GET",token:`${this.cookie}`},{data:o,error:n,pending:r}=await C(a);this.loading=r,o.value&&(this.testPanels=o.value,this.loading=!1),n.value&&(console.error(n.value),this.loading=!1)},updateTestPanels(a){a&&this.init()}}},gt={class:"py-5 px-5"},xt={class:"flex items-center justify-between py-5"},Tt={class:"text-2xl font-semibold flex items-center uppercase"},wt=e("img",{src:ue,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),bt={class:"flex items-center space-x-3"},kt={class:"flex justify-end w-full px-2 py-2 mb-2"},Ct={class:"py-2 flex items-center space-x-2"};function Dt(a,o,n,r,s,l){const d=L,m=ke,y=se,v=Ke,u=lt,h=yt,g=ce;return w(),b("div",gt,[t(d,{pages:s.pages},null,8,["pages"]),e("div",xt,[e("div",Tt,[wt,k(" "+I(s.header),1)]),e("div",bt,[t(m,{onUpdate:l.updateTestPanels},null,8,["onUpdate"])])]),e("div",kt,[t(y,{search:s.search,"onUpdate:search":o[0]||(o[0]=_=>s.search=_),onUpdate:l.updateSearch},null,8,["search","onUpdate"])]),t(g,{headers:s.headers,data:s.testPanels,loading:s.loading,"search-value":s.searchValue,"search-field":"name"},{actions:c(({item:_})=>[e("div",Ct,[t(v,{data:_},null,8,["data"]),t(u,{data:_,onUpdate:l.updateTestPanels},null,8,["data","onUpdate"]),t(h,{data:_,onUpdate:l.updateTestPanels},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const Qt=V(vt,[["render",Dt]]);export{Qt as default};

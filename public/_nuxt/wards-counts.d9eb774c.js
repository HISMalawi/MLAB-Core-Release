import{m as U,C as u,a as V,L as A,g as x,o as m,c as p,e,d as a,h as w,l as t,i as R,E as F,t as l,F as T,r as C,b as E,f as I}from"./entry.97d0b54e.js";import{_ as O}from"./ExportButton.vue.4fdcd0b0.js";import{_ as B}from"./Address.vue.fb5f2755.js";import{e as W}from"./constants.0c4e4d21.js";import{_ as L}from"./logo.e661b2c6.js";import{h as r,e as P,f as j}from"./fetch.e0862392.js";import{u as q}from"./facility.288f2472.js";import{r as G}from"./FunnelIcon.d7b83064.js";import{r as K}from"./ArrowPathIcon.c9420c22.js";import"./transition.24037afa.js";import"./hidden.a4deafd9.js";import"./XMarkIcon.14e83439.js";import"./PencilSquareIcon.5fdb3ab6.js";import"./PrinterIcon.068c8bcd.js";const Y={class:"w-full flex items-center justify-between mb-10"},z={class:"flex items-center space-x-5"},H={class:"bg-gray-100 pl-2.5 rounded flex items-center text-zinc-500"},J={class:"w-56 ml-2"},Q={class:"w-48"},X={class:"rounded border"},Z={class:"rounded-tr rounded-tl border-b px-5 py-5 flex items-center justify-between"},ee=e("div",{class:"flex flex-col space-y-2"},[e("img",{src:L,alt:"app-logo",class:"w-24 h-24 object-cover"}),e("h3",{class:"text-xl font-semibold"},"CULTURE & SENSITIVITY WARDS COUNTS REPORT ")],-1),te={class:"px-4 mt-2 font-medium"},oe={class:"font-normal"},se={id:"print-container"},ae={class:"w-full mt-3",ref:"table"},re={class:"w-full border-b border-t bg-gray-50 rounded-t"},ne={class:"w-full"},le={class:"px-2 py-2 border-r"},ce={class:"px-2 py-2 border-r"},de={class:"px-2 py-2 border-r"},ie={class:"px-2 py-2"},Ee=U({__name:"wards-counts",setup(ue){const o=u("");u("");const g=u([{name:"Ward Name"},{name:"Ward Type"},{name:"Period"},{name:"Total Count"}]),k=V("token"),c=u(!1),f=u([]),y=q(),M=()=>{o.value=""},N=A(()=>g.value.flatMap(h=>f.value.map(s=>({WARD:s.ward,ENCOUNTER:s.encounter,"DATE PERIOD":r(o.value).format("MMMM-yyyy"),COUNT:s.count}))));async function S(){c.value=!0;let h=r(o.value).format("M"),s=r(o.value).format("yyyy");const v={route:`${P.aggregateReports}culture/wards_based_counts?year=${s}&month=${h}`,method:"GET",token:`${k.value}`},{data:d,error:_,pending:b}=await j(v);c.value=b,d.value&&(f.value=d.value.data,c.value=!1,console.log(d.value),E().$toast.success("Report data generated successfully")),_.value&&(console.error(_.value),c.value=!1,E().$toast.error(W))}return(h,s)=>{const v=x("datepicker"),d=I,_=x("FormKit"),b=O,$=x("excel"),D=B;return m(),p("div",null,[e("div",Y,[a(_,{type:"form","submit-label":"Update",onSubmit:S,actions:!1},{default:w(({value:n})=>[e("div",z,[e("div",H,[a(t(G),{class:"w-5 h-5 mr-2"}),R(" Filter By Date Range "),e("div",J,[a(v,{onCleared:M,required:"",position:"left",placeholder:"select month & year",range:!1,"input-class-name":"datepicker",modelValue:t(o),"onUpdate:modelValue":s[0]||(s[0]=i=>F(o)?o.value=i:null),format:"M/yyyy"},null,8,["modelValue"])])]),e("div",Q,[a(d,{type:"submit",color:"primary",text:"Generate Report",icon:t(K),click:()=>{},loading:t(c)},null,8,["icon","loading"])])])]),_:1}),e("div",null,[a($,{class:"btn btn-default",header:[`CULTURE & SENSITIVITY WARDS COUNTS REPORT ${t(r)(t(o)).format("M/yyyy")}`,t(y).details.name,t(y).details.address,t(y).details.phone],data:t(N),worksheet:"report-work-sheet",name:`culture_sensitivity_wards_counts_report_${t(r)(t(o)).format("M_yyyy")}.xls`},{default:w(()=>[a(b,{text:"Export Excel"})]),_:1},8,["header","data","name"])])]),e("div",X,[e("div",Z,[ee,a(D)]),e("div",null,[e("h3",te,[R("Data for period: "),e("span",oe,l(t(o)==""?"":t(r)(t(o)).format("M/yyyy")),1)])]),e("div",se,[e("table",ae,[e("thead",re,[e("tr",ne,[(m(!0),p(T,null,C(t(g),(n,i)=>(m(),p("th",{class:"px-2 py-2 border-r",key:i},l(n.name),1))),128))])]),e("tbody",null,[(m(!0),p(T,null,C(t(f),(n,i)=>(m(),p("tr",{key:i,class:"border-b border-l border-r"},[e("td",le,l(n.ward),1),e("td",ce,l(n.encounter),1),e("td",de,l(t(r)(t(o)).format("MMMM-yyyy")),1),e("td",ie,l(n.count),1)]))),128))])],512)])])])}}});export{Ee as default};

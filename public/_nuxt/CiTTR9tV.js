import{_ as D}from"./CUGREwii.js";import{S as I,p as S,Y as B,G as V,V as L,q as P,A as x,B as A,x as y,y as d,b,e as w,f as o,z as r,g as e,k as O,t as a,_ as k,a as M,C as v,O as g}from"./JEpZiKDn.js";import{_ as R}from"./ptOfu_GX.js";import{_ as U}from"./BM3s60a1.js";import{_ as j}from"./eLgep5E_.js";import{u as q}from"./Bl4Rx-lb.js";import{S as N}from"./DyLJy2jF.js";import{P as E}from"./DObdreHM.js";import"./DGM4Jn_4.js";import"./Cd90EHgg.js";import"./Drn6De9M.js";const X={components:{TransitionRoot:I,TransitionChild:S,Dialog:B,DialogPanel:V,DialogTitle:L,XMarkIcon:P},data(){return{viewIcon:x,show:!1,editIcon:A}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},z=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),F={class:"fixed inset-0 overflow-y-auto"},G={class:"flex min-h-full items-center justify-center p-4 text-center"},H={class:"border-b px-3 py-3 flex items-center justify-between"},Y=e("img",{src:U,class:"w-8 h-8 mr-2"},null,-1),Q={class:"py-5 space-y-3 px-5"},J={class:"w-full flex flex-col space-y-1"},K=e("label",{class:"font-semibold text-lg"},"Name",-1),W={class:"w-full flex flex-col space-y-1"},Z=e("label",{class:"font-semibold text-lg"},"Description",-1),$={class:"w-full flex flex-col space-y-1"},ee=e("label",{class:"font-semibold text-lg"},"Location",-1),te={class:"w-full flex flex-col space-y-1"},se=e("label",{class:"font-semibold text-lg"},"Transaction Type",-1),ae={class:"w-full flex flex-col space-y-1"},oe=e("label",{class:"font-semibold text-lg"},"Sender",-1),ne={class:"w-full flex flex-col space-y-1"},le=e("label",{class:"font-semibold text-lg"},"Receiver",-1),ie={class:"w-full flex flex-col space-y-1"},ce=e("label",{class:"font-semibold text-lg"},"Batch",-1),re={class:"w-full flex flex-col space-y-1"},de=e("label",{class:"font-semibold text-lg"},"Lot",-1),_e={class:"w-full flex flex-col space-y-1"},fe=e("label",{class:"font-semibold text-lg"},"Quantity",-1),ue={class:"w-full flex flex-col space-y-1"},me=e("label",{class:"font-semibold text-lg"},"Available Balance",-1),pe={class:"w-full flex flex-col space-y-1"},he=e("label",{class:"font-semibold text-lg"},"Remaining Balance After Transaction",-1),xe={class:"w-full flex flex-col space-y-1"},ve=e("label",{class:"font-semibold text-lg"},"Expirty Date",-1),ge={class:"w-full flex flex-col space-y-1"},ye=e("label",{class:"font-semibold text-lg"},"Transaction Date",-1);function be(n,c,t,u,s,l){const _=k,i=d("TransitionChild"),m=d("DialogTitle"),p=d("XMarkIcon"),h=d("DialogPanel"),f=d("Dialog"),T=d("TransitionRoot");return b(),w("div",null,[o(_,{click:l.handleClick,color:"primary",text:"View",icon:s.viewIcon},null,8,["click","icon"]),o(T,{appear:"",show:s.show,as:"template"},{default:r(()=>[o(f,{as:"div",class:"relative z-10"},{default:r(()=>[o(i,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[z]),_:1}),e("div",F,[e("div",G,[o(i,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",H,[o(m,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[Y,O(" View Stock Transaction ")]),_:1}),e("button",{onClick:c[0]||(c[0]=(...C)=>l.handleClick&&l.handleClick(...C))},[o(p,{class:"w-5 h-5"})])]),e("div",Q,[e("div",J,[K,e("p",null,a(t.data.name),1)]),e("div",W,[Z,e("p",null,a(t.data.description),1)]),e("div",$,[ee,e("p",null,a(t.data.stock_location),1)]),e("div",te,[se,e("p",null,a(t.data.transaction_type),1)]),e("div",ae,[oe,e("p",null,a(t.data.sending_to),1)]),e("div",ne,[le,e("p",null,a(t.data.receiving_from),1)]),e("div",ie,[ce,e("p",null,a(t.data.batch),1)]),e("div",re,[de,e("p",null,a(t.data.lot),1)]),e("div",_e,[fe,e("p",null,a(t.data.transacted_quantity),1)]),e("div",ue,[me,e("p",null,a(t.data.consolidated_available_balance),1)]),e("div",pe,[he,e("p",null,a(t.data.after_transaction_remaining_balance),1)]),e("div",xe,[ve,e("p",null,a(t.data.expiry_date),1)]),e("div",ge,[ye,e("p",null,a(t.data.transaction_date),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const we=y(X,[["render",be]]),ke={setup(){q({title:`${E.name.toUpperCase()} - Stock Transactions`})},data(){return{header:"Stock Transactions",search:"",loading:!1,transferIcon:x,viewIcon:x,pages:[{name:"Home",link:"/home"},{name:"Stock Management",link:"#"}],headers:[{text:"item",value:"name",sortable:!0},{text:"type",value:"transaction_type"},{text:"sender",value:"receiving_from"},{text:"receiver",value:"sending_to"},{text:"batch",value:"batch"},{text:"lot",value:"lot"},{text:"expiry date",value:"expiry_date",sortable:!0},{text:"quantity",value:"transacted_quantity",sortable:!0},{text:"transaction date",value:"transaction_date",sortable:!0},{text:"actions",value:"actions"}],transactions:new Array,cookie:M("token"),serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init(this.search)},computed:{filteredTransactions(){return this.transactions.map(n=>({...n,expiry_date:v(n.expiry_date).format(g),transaction_date:v(n.transaction_date).format(g),sending_to:n.sending_to==null?"Laboratory Store":n.sending_to,receiving_from:n.receiving_from==null?"Laboratory Store":n.receiving_from}))}},methods:{async init(n){this.loading=!0;const c=new N,{page:t,rowsPerPage:u}=this.serverOptions,s=`search=${n}&page=${t}&per_page=${u}`,{data:l,pending:_,error:i}=await c.getStockTransactions(`${this.cookie}`,s);this.loading=_,l.value&&(this.transactions=l.value.data,this.loading=!1,this.serverItemsLength=l.value.meta.total_count),i.value&&(console.error(i.value),this.loading=!1)}}},Te={class:"px-5 py-5"},Ce={class:"flex items-center justify-between py-5"},De={class:"text-2xl font-semibold"},Ie={class:"flex items-center space-x-3"},Se={class:"flex items-center justify-end py-5"},Be={class:"py-2 flex items-center space-x-2"};function Ve(n,c,t,u,s,l){const _=D,i=k,m=R,p=we,h=j;return b(),w("div",Te,[o(_,{pages:s.pages},null,8,["pages"]),e("div",Ce,[e("h3",De,a(s.header),1),e("div",Ie,[o(i,{text:"Receive stock",type:"button",color:"warning",icon:s.transferIcon,click:()=>n.$router.push("/stock-management/transactions/receive-stock")},null,8,["icon","click"]),o(i,{text:"Transfer stock",type:"button",color:"success",icon:s.transferIcon,click:()=>n.$router.push("/stock-management/transactions/transfer-stock")},null,8,["icon","click"])])]),e("div",Se,[o(m,{search:s.search,"onUpdate:search":c[0]||(c[0]=f=>s.search=f),onUpdate:l.init},null,8,["search","onUpdate"])]),e("div",null,[o(h,{headers:s.headers,data:l.filteredTransactions,loading:s.loading,searchField:"name",searchValue:s.search,serverItemsLength:s.serverItemsLength,serverOptions:s.serverOptions,onUpdate:l.init},{actions:r(({item:f})=>[e("div",Be,[o(p,{data:f},null,8,["data"])])]),_:1},8,["headers","data","loading","searchValue","serverItemsLength","serverOptions","onUpdate"])])])}const Xe=y(ke,[["render",Ve]]);export{Xe as default};

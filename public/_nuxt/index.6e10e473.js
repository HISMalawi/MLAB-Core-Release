import{_ as Ze}from"./Breadcrumb.vue.c95f637a.js";import{o as T,c as A,d as t,l as fe,B as j,K as N,ae as De,a2 as _e,N as B,F as z,P as Oe,a9 as Ee,af as ve,_ as Q,f as w,t as S,w as Y,v as W,b as i,n as je,u as le,a as F,g as I,h as X,e as ie,k as oe,r as re,j as q,ap as Je,aq as Qe,p as G}from"./entry.71c9e4aa.js";import{r as et,_ as tt}from"./Dropdown.5ab9507a.js";import{_ as st}from"./SearchBar.091eea13.js";import{r as ee}from"./XMarkIcon.aea27e1b.js";import{_ as ot}from"./Loader.5b27d560.js";import{_ as Ne}from"./OutlinedButton.d218fc71.js";import{e as J,d as de}from"./constants.b3aab3f3.js";import{u as ue,e as O,f as E,l as nt,m as rt,n as at,h as K,r as Fe,o as Le,P as Pe,i as be,d as Ue,s as lt,S as it}from"./fetch.ad8fdb43.js";import{r as Be}from"./UserIcon.b22dd97b.js";import{a as ge,r as ct}from"./PencilSquareIcon.9ee104ee.js";import{r as Me}from"./ArrowDownTrayIcon.af57a52a.js";import{r as qe}from"./ArrowUturnLeftIcon.b12ad941.js";import{a as dt,p as ut,E as pt,n as Ve,d as L,S as ye,h as xe,U as we,G as ke,V as Se}from"./transition.fb9320ab.js";import{r as mt}from"./PrinterIcon.be7f4d4c.js";import{_ as ht}from"./Datatable.379264ce.js";import{u as ft}from"./vue.f36acd1f.04a7f7a9.js";import{P as _t}from"./package.c708cd85.js";import{r as vt}from"./MagnifyingGlassIcon.05b953ff.js";import{r as bt}from"./ChevronDownIcon.5bb98b65.js";import{r as gt}from"./CheckIcon.9aa54248.js";import{m as Te,o as u,E as Ce,u as H,g as yt,l as ae,y as xt,i as wt,j as kt,H as Ie,t as Z,f as pe,a as me,p as St,d as Re,b as M,P as V,N as U,T as he}from"./hidden.295c025e.js";import{b as Tt}from"./use-text-value.f88e0f84.js";import{r as Ct}from"./CheckCircleIcon.1627fe1e.js";import{r as It}from"./FunnelIcon.a3c15e2b.js";import{r as Ae}from"./SquaresPlusIcon.ada573fd.js";import{r as $t}from"./AdjustmentsVerticalIcon.ccaa3810.js";import{r as ce}from"./CheckBadgeIcon.bd558b5d.js";import{a as Pt,r as Rt}from"./ChevronRightIcon.e90e8cbb.js";import{r as At}from"./ArchiveBoxXMarkIcon.4d4670fe.js";import{r as ne}from"./HandThumbDownIcon.2743cd62.js";import{r as Dt}from"./ArrowPathIcon.1190bac1.js";import{B as Ot,N as Et,K as jt,H as Nt,U as Ft}from"./listbox.36379e19.js";import{M as Lt,R as Ut,h as Bt,y as Mt}from"./menu.c60871a2.js";import"./nuxt-link.f7bb8acd.js";import"./HomeIcon.a65c875c.js";function qt(s,o){return T(),A("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12.97 3.97a.75.75 0 011.06 0l7.5 7.5a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 11-1.06-1.06l6.22-6.22H3a.75.75 0 010-1.5h16.19l-6.22-6.22a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}function Vt(s,o){return T(),A("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M14.47 2.47a.75.75 0 011.06 0l6 6a.75.75 0 010 1.06l-6 6a.75.75 0 11-1.06-1.06l4.72-4.72H9a5.25 5.25 0 100 10.5h3a.75.75 0 010 1.5H9a6.75 6.75 0 010-13.5h10.19l-4.72-4.72a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}function zt(s,o){return T(),A("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z","clip-rule":"evenodd"})])}var Gt=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(Gt||{});let ze=Symbol("PopoverContext");function $e(s){let o=ve(ze,null);if(o===null){let r=new Error(`<${s} /> is missing a parent <${Xe.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,$e),r}return o}let Ht=Symbol("PopoverGroupContext");function Ge(){return ve(Ht,null)}let He=Symbol("PopoverPanelContext");function Xt(){return ve(He,null)}let Xe=fe({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(s,{slots:o,attrs:r,expose:l}){var e;let n=j(null);l({el:n,$el:n});let p=j(1),m=j(null),P=j(null),k=j(null),f=j(null),$=N(()=>Te(n)),_=N(()=>{var d,g;if(!u(m)||!u(f))return!1;for(let se of document.querySelectorAll("body > *"))if(Number(se==null?void 0:se.contains(u(m)))^Number(se==null?void 0:se.contains(u(f))))return!0;let x=Ce(),D=x.indexOf(u(m)),te=(D+x.length-1)%x.length,Ke=(D+1)%x.length,Ye=x[te],We=x[Ke];return!((d=u(f))!=null&&d.contains(Ye))&&!((g=u(f))!=null&&g.contains(We))}),v={popoverState:p,buttonId:j(null),panelId:j(null),panel:f,button:m,isPortalled:_,beforePanelSentinel:P,afterPanelSentinel:k,togglePopover(){p.value=H(p.value,{[0]:1,[1]:0})},closePopover(){p.value!==1&&(p.value=1)},close(d){v.closePopover();let g=(()=>d?d instanceof HTMLElement?d:d.value instanceof HTMLElement?u(d):u(v.button):u(v.button))();g==null||g.focus()}};De(ze,v),yt(N(()=>H(p.value,{[0]:ae.Open,[1]:ae.Closed})));let R={buttonId:v.buttonId,panelId:v.panelId,close(){v.closePopover()}},y=Ge(),a=y==null?void 0:y.registerPopover,[c,b]=dt(),h=ut({mainTreeNodeRef:y==null?void 0:y.mainTreeNodeRef,portals:c,defaultContainers:[m,f]});function C(){var d,g,x,D;return(D=y==null?void 0:y.isFocusWithinPopoverGroup())!=null?D:((d=$.value)==null?void 0:d.activeElement)&&(((g=u(m))==null?void 0:g.contains($.value.activeElement))||((x=u(f))==null?void 0:x.contains($.value.activeElement)))}return _e(()=>a==null?void 0:a(R)),pt((e=$.value)==null?void 0:e.defaultView,"focus",d=>{var g,x;d.target!==window&&d.target instanceof HTMLElement&&p.value===0&&(C()||m&&f&&(h.contains(d.target)||(g=u(v.beforePanelSentinel))!=null&&g.contains(d.target)||(x=u(v.afterPanelSentinel))!=null&&x.contains(d.target)||v.closePopover()))},!0),xt(h.resolveContainers,(d,g)=>{var x;v.closePopover(),wt(g,kt.Loose)||(d.preventDefault(),(x=u(m))==null||x.focus())},N(()=>p.value===0)),()=>{let d={open:p.value===0,close:v.close};return B(z,[B(b,{},()=>Ie({theirProps:{...s,...r},ourProps:{ref:n},slot:d,slots:o,attrs:r,name:"Popover"})),B(h.MainTreeNode)])}}}),Kt=fe({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${Z()}`}},inheritAttrs:!1,setup(s,{attrs:o,slots:r,expose:l}){let e=$e("PopoverButton"),n=N(()=>Te(e.button));l({el:e.button,$el:e.button}),Oe(()=>{e.buttonId.value=s.id}),Ee(()=>{e.buttonId.value=null});let p=Ge(),m=p==null?void 0:p.closeOthers,P=Xt(),k=N(()=>P===null?!1:P.value===e.panelId.value),f=j(null),$=`headlessui-focus-sentinel-${Z()}`;k.value||_e(()=>{e.button.value=f.value});let _=Tt(N(()=>({as:s.as,type:o.type})),f);function v(h){var C,d,g,x,D;if(k.value){if(e.popoverState.value===1)return;switch(h.key){case M.Space:case M.Enter:h.preventDefault(),(d=(C=h.target).click)==null||d.call(C),e.closePopover(),(g=u(e.button))==null||g.focus();break}}else switch(h.key){case M.Space:case M.Enter:h.preventDefault(),h.stopPropagation(),e.popoverState.value===1&&(m==null||m(e.buttonId.value)),e.togglePopover();break;case M.Escape:if(e.popoverState.value!==0)return m==null?void 0:m(e.buttonId.value);if(!u(e.button)||(x=n.value)!=null&&x.activeElement&&!((D=u(e.button))!=null&&D.contains(n.value.activeElement)))return;h.preventDefault(),h.stopPropagation(),e.closePopover();break}}function R(h){k.value||h.key===M.Space&&h.preventDefault()}function y(h){var C,d;s.disabled||(k.value?(e.closePopover(),(C=u(e.button))==null||C.focus()):(h.preventDefault(),h.stopPropagation(),e.popoverState.value===1&&(m==null||m(e.buttonId.value)),e.togglePopover(),(d=u(e.button))==null||d.focus()))}function a(h){h.preventDefault(),h.stopPropagation()}let c=Ve();function b(){let h=u(e.panel);if(!h)return;function C(){H(c.value,{[L.Forwards]:()=>V(h,U.First),[L.Backwards]:()=>V(h,U.Last)})===he.Error&&V(Ce().filter(d=>d.dataset.headlessuiFocusGuard!=="true"),H(c.value,{[L.Forwards]:U.Next,[L.Backwards]:U.Previous}),{relativeTo:u(e.button)})}C()}return()=>{let h=e.popoverState.value===0,C={open:h},{id:d,...g}=s,x=k.value?{ref:f,type:_.value,onKeydown:v,onClick:y}:{ref:f,id:d,type:_.value,"aria-expanded":e.popoverState.value===0,"aria-controls":u(e.panel)?e.panelId.value:void 0,disabled:s.disabled?!0:void 0,onKeydown:v,onKeyup:R,onClick:y,onMousedown:a};return B(z,[Ie({ourProps:x,theirProps:{...o,...g},slot:C,attrs:o,slots:r,name:"PopoverButton"}),h&&!k.value&&e.isPortalled.value&&B(pe,{id:$,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:b})])}}}),Yt=fe({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${Z()}`}},inheritAttrs:!1,setup(s,{attrs:o,slots:r,expose:l}){let{focus:e}=s,n=$e("PopoverPanel"),p=N(()=>Te(n.panel)),m=`headlessui-focus-sentinel-before-${Z()}`,P=`headlessui-focus-sentinel-after-${Z()}`;l({el:n.panel,$el:n.panel}),Oe(()=>{n.panelId.value=s.id}),Ee(()=>{n.panelId.value=null}),De(He,n.panelId),_e(()=>{var a,c;if(!e||n.popoverState.value!==0||!n.panel)return;let b=(a=p.value)==null?void 0:a.activeElement;(c=u(n.panel))!=null&&c.contains(b)||V(u(n.panel),U.First)});let k=St(),f=N(()=>k!==null?(k.value&ae.Open)===ae.Open:n.popoverState.value===0);function $(a){var c,b;switch(a.key){case M.Escape:if(n.popoverState.value!==0||!u(n.panel)||p.value&&!((c=u(n.panel))!=null&&c.contains(p.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),n.closePopover(),(b=u(n.button))==null||b.focus();break}}function _(a){var c,b,h,C,d;let g=a.relatedTarget;g&&u(n.panel)&&((c=u(n.panel))!=null&&c.contains(g)||(n.closePopover(),((h=(b=u(n.beforePanelSentinel))==null?void 0:b.contains)!=null&&h.call(b,g)||(d=(C=u(n.afterPanelSentinel))==null?void 0:C.contains)!=null&&d.call(C,g))&&g.focus({preventScroll:!0})))}let v=Ve();function R(){let a=u(n.panel);if(!a)return;function c(){H(v.value,{[L.Forwards]:()=>{var b;V(a,U.First)===he.Error&&((b=u(n.afterPanelSentinel))==null||b.focus())},[L.Backwards]:()=>{var b;(b=u(n.button))==null||b.focus({preventScroll:!0})}})}c()}function y(){let a=u(n.panel);if(!a)return;function c(){H(v.value,{[L.Forwards]:()=>{let b=u(n.button),h=u(n.panel);if(!b)return;let C=Ce(),d=C.indexOf(b),g=C.slice(0,d+1),x=[...C.slice(d+1),...g];for(let D of x.slice())if(D.dataset.headlessuiFocusGuard==="true"||h!=null&&h.contains(D)){let te=x.indexOf(D);te!==-1&&x.splice(te,1)}V(x,U.First,{sorted:!1})},[L.Backwards]:()=>{var b;V(a,U.Previous)===he.Error&&((b=u(n.button))==null||b.focus())}})}c()}return()=>{let a={open:n.popoverState.value===0,close:n.close},{id:c,focus:b,...h}=s,C={ref:n.panel,id:c,onKeydown:$,onFocusout:e&&n.popoverState.value===0?_:void 0,tabIndex:-1};return Ie({ourProps:C,theirProps:{...o,...h},attrs:o,slot:a,slots:{...r,default:(...d)=>{var g;return[B(z,[f.value&&n.isPortalled.value&&B(pe,{id:m,ref:n.beforePanelSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:R}),(g=r.default)==null?void 0:g.call(r,...d),f.value&&n.isPortalled.value&&B(pe,{id:P,ref:n.afterPanelSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:y})])]}},features:Re.RenderStrategy|Re.Static,visible:f.value,name:"PopoverPanel"})}}});const Wt={props:{value:{type:Object,required:!0},close:{type:Boolean,required:!0},color:{required:!1,type:String,default:"green"},icon:{required:!1,type:Object}},methods:{removeLabel(){this.$emit("update",this.value)}},components:{XMarkIcon:ee}},Zt={class:"text-sm"};function Jt(s,o,r,l,e,n){const p=w("XMarkIcon");return T(),A("button",{class:je(["flex items-center space-x-2 px-2 py-1 text-white rounded",`bg-${r.color}-500`])},[t("p",Zt,S(r.value.text),1),Y(t("button",{onClick:o[0]||(o[0]=(...m)=>n.removeLabel&&n.removeLabel(...m))},[i(p,{class:"w-4 h-4"})],512),[[W,r.close]])],2)}const Qt=Q(Wt,[["render",Jt]]),es={components:{TransitionRoot:ye,TransitionChild:xe,Dialog:we,DialogPanel:ke,DialogTitle:Se,XMarkIcon:ee,UserIcon:Be},props:{item:{required:!0,type:Object}},data(){return{open:!1,editIcon:ge,saveIcon:Me,clearIcon:qe,name:"",description:"",testTypesSelected:[],loading:!1,testTypes:new Array,rawTestTypes:new Array,departments:new Array,selectedDepartment:"-- select department",cookie:le("token"),authStore:ue(),departmentId:0}},methods:{async init(){this.handleClick();const s=this.authStore.department,o=this.authStore.user.departments.find(r=>r.name===s);o&&(this.departmentId=o.id),this.selectedDepartment=s,this.departments=this.authStore.user.departments,await this.getTestTypes(this.departmentId)},async getTestTypes(s){const o={route:`${O.specimenTestTypes}?department_id=${s}&specimen_id=${this.item.specimen_id}`,method:"GET",token:`${this.cookie}`},{error:r,data:l}=await E(o);l.value&&(this.rawTestTypes=l.value,this.testTypes=l.value),r.value&&console.error("error: ",r.value)},async submitForm(){this.loading=!0;let s=this.testTypesSelected.map(e=>({specimen:this.item.specimen_id,test_type:e}));const o={route:`${O.addTestOrder}`,method:"POST",token:`${this.cookie}`,body:{order_id:this.item.order_id,tests:s}},{data:r,error:l}=await E(o);r.value&&(this.handleClick(),F().$toast.success("Tests added to current order successfully!"),this.loading=!1,this.$emit("update",!0)),l.value&&(this.handleClick(),console.error("error: ",l.value),F().$toast.error(J),this.loading=!1)},handleClick(){this.open=!this.open},resetForm(){this.testTypesSelected=new Array}},watch:{selectedDepartment(s,o){if(s!==o){const r=this.authStore.user.departments.find(l=>l.name===s);r&&(this.departmentId=r.id,this.getTestTypes(this.departmentId))}}}},ts=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ss={class:"fixed inset-0 overflow-y-auto"},os={class:"flex min-h-full items-center justify-center p-4 text-center"},ns={class:"border-b px-3 py-3 flex items-center justify-between"},rs={class:"mt-2 space-y-3 pb-40"},as={class:"w-full flex flex-col space-y-2 px-5"},ls=t("label",{class:"font-medium"},"Department",-1),is={class:"w-full flex flex-col space-y-2 px-5"},cs=t("label",{class:"font-medium"},"Tests",-1),ds={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function us(s,o,r,l,e,n){const p=ie,m=w("TransitionChild"),P=w("DialogTitle"),k=w("XMarkIcon"),f=w("multi-select"),$=Ne,_=w("FormKit"),v=w("DialogPanel"),R=w("Dialog"),y=w("TransitionRoot");return T(),A("div",null,[t("div",null,[i(p,{text:"Add test to current order",color:"warning",icon:e.editIcon,click:n.init},null,8,["icon","click"])]),i(y,{appear:"",show:e.open,as:"template"},{default:I(()=>[i(R,{as:"div",onClose:n.handleClick,class:"relative z-10"},{default:I(()=>[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:I(()=>[ts]),_:1}),t("div",ss,[t("div",os,[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:I(()=>[i(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:I(()=>[t("div",ns,[i(P,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:I(()=>[X(" Add Test To Current Order ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...a)=>n.handleClick&&n.handleClick(...a))},[i(k,{class:"w-5 h-5"})])]),i(_,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"submitForm"},{default:I(({value:a})=>[t("div",rs,[t("div",as,[ls,i(f,{style:{"--ms-max-height":"none !important"},modelValue:e.selectedDepartment,"onUpdate:modelValue":o[1]||(o[1]=c=>e.selectedDepartment=c),options:e.departments.map(c=>c.name),searchable:!0,required:!0,clear:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])]),t("div",is,[cs,i(f,{style:{"--ms-max-height":"none !important"},modelValue:e.testTypesSelected,"onUpdate:modelValue":o[2]||(o[2]=c=>e.testTypesSelected=c),options:e.testTypes,mode:"tags",searchable:!0,required:!0,clear:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",ds,[i($,{type:"button",click:()=>n.resetForm(),text:"Clear form"},null,8,["click"]),i(p,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ps=Q(es,[["render",us]]),ms={components:{TransitionRoot:ye,TransitionChild:xe,Dialog:we,DialogPanel:ke,DialogTitle:Se,XMarkIcon:ee,PhoneIcon:nt,EnvelopeIcon:rt,MapPinIcon:at},data(){return{moment:K,viewIcon:ct,show:this.open,addIcon:Fe,editIcon:ge,acceptIcon:Le,printerIcon:mt,cookie:le("token"),details:{},loading:!1,zebraPrinting:!1}},props:{data:{type:Object,required:!0},open:{type:Boolean,required:!1}},methods:{async init(){this.loading=!0;const s={route:`${O.tests}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:o,error:r,pending:l}=await E(s);this.loading=l,o.value&&(this.details=o.value,typeof this.details=="object"&&this.handleClick(),console.log(this.details)),r.value&&(this.loading=!1,console.error(r.value),F().$toast.error(J))},async printBBResults(){const s={route:O.printOutZebra,method:"POST",token:`${this.cookie}`,body:{order_id:this.details.order_id,tests:[this.details]}},{data:o,error:r,pending:l}=await E(s);if(this.zebraPrinting=l,o.value){this.zebraPrinting=!1;const e=new FileReader;e.onload=()=>{const n=URL.createObjectURL(o.value),p=document.createElement("a");p.href=n,p.setAttribute("download",`${Date.now()}.lbl`),p.click(),URL.revokeObjectURL(n)},e.readAsText(o.value),F().$toast.success("Results printed successfully!")}r.value&&(this.zebraPrinting=!1,F().$toast.error(J),console.error(r.value))},updateChanges(){this.show=!1,this.$emit("update",!0)},handleClick(){this.show=!this.show},printAccessionNumber(){return Pe.printSpecimenLabel(this.details.accession_number)},printTrackingNumber(){return Pe.printTrackingNumber(this.details.tracking_number)},viewReport(){return this.$router.push(`/reports/daily/patient-report/${this.details.client.id}?order_id=${this.details.order_id}`)},getRequestedBy(s){let o="";return s.forEach(r=>{r.status.name==="pending"&&(o=`${r.initiator.first_name} ${r.initiator.last_name}`)}),be(o)}}},hs=""+new URL("prescription_document.18f957e1.svg",import.meta.url).href,fs=""+new URL("test_tube.2b522cf2.svg",import.meta.url).href,_s=""+new URL("i_exam_qualification.dd473ba6.svg",import.meta.url).href,vs=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),bs={class:"fixed inset-0 overflow-y-auto"},gs={class:"flex min-h-full items-center justify-center text-center"},ys={class:"border-b px-3 py-3 flex items-center justify-between"},xs=t("img",{src:hs,class:"w-8 h-8 mr-2"},null,-1),ws={class:"flex items-center justify-center mx-auto my-20"},ks={class:"grid grid-cols-3 gap-4 px-5 py-5"},Ss={class:"rounded border"},Ts=t("div",{class:"px-2 py-2 bg-gray-50 border-b rounded-t"},[t("h3",{class:"text-lg font-semibold text-black flex items-center"},[t("img",{src:Je,class:"w-7 h-7 mr-1"}),X(" Patient ")])],-1),Cs={class:"w-full space-y-2 py-2"},Is={class:"w-full flex justify-between px-4 py-1"},$s=t("h3",{class:"font-semibold"},"Patient Number",-1),Ps={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Rs=t("h3",{class:"font-semibold"},"Name",-1),As={class:"w-full flex justify-between px-4 py-1"},Ds=t("h3",{class:"font-semibold"},"Sex",-1),Os={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Es=t("h3",{class:"font-semibold"},"Age",-1),js={class:"rounded border"},Ns=t("div",{class:"px-2 py-2 bg-gray-50 border-b rounded-t"},[t("h3",{class:"text-lg font-semibold text-black flex items-center"},[t("img",{src:fs,class:"w-7 h-7 mr-1"}),X(" Specimen ")])],-1),Fs={class:"w-full space-y-2 py-2"},Ls={class:"w-full flex justify-between px-4 py-1"},Us=t("h3",{class:"font-semibold"},"Specimen Type",-1),Bs={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Ms=t("h3",{class:"font-semibold"},"Tracking Number",-1),qs={class:"w-full flex justify-between px-4 py-1"},Vs=t("h3",{class:"font-semibold"},"Accession Number",-1),zs={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Gs=t("h3",{class:"font-semibold"},"Status",-1),Hs={class:"rounded border max-h-72 overflow-y-auto"},Xs=t("div",{class:"px-2 py-2 bg-gray-50 border-b rounded-t flex items-center"},[t("img",{src:_s,class:"w-7 h-7 mr-1"}),t("h3",{class:"text-lg font-semibold text-black"},"Test")],-1),Ks={class:"w-full space-y-2 py-2"},Ys={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Ws=t("h3",{class:"font-semibold"},"Name",-1),Zs={class:"w-full flex justify-between px-4 py-1"},Js=t("h3",{class:"font-semibold"},"Date Registered",-1),Qs={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},eo=t("h3",{class:"font-semibold"},"Receipt Date",-1),to={class:"w-full flex justify-between px-4 py-1"},so=t("h3",{class:"font-semibold"},"Test Status",-1),oo={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},no=t("h3",{class:"font-semibold"},"Ward/Location",-1),ro={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},ao=t("h3",{class:"font-semibold"},"Request Origin",-1),lo={class:"w-full flex justify-between px-4 py-1"},io=t("h3",{class:"font-semibold"},"Registered By",-1),co={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},uo=t("h3",{class:"font-semibold"},"Requested By",-1),po={class:"mx-5 rounded border mb-5"},mo={class:"flex items-center justify-between bg-gray-50 px-4 py-2 border-b rounded-t"},ho=t("h3",{class:"text-lg font-semibold text-black"},"Results",-1),fo={class:"justify-end flex items-center space-x-3"},_o=["innerHTML"],vo={key:0,class:"px-2.5 py-2.5 border-t"};function bo(s,o,r,l,e,n){const p=ie,m=w("TransitionChild"),P=w("DialogTitle"),k=w("XMarkIcon"),f=ot,$=ps,_=w("DialogPanel"),v=w("Dialog"),R=w("TransitionRoot");return T(),A("div",null,[i(p,{click:n.init,color:"primary",text:"View",icon:e.viewIcon},null,8,["click","icon"]),i(R,{appear:"",show:e.show,as:"template"},{default:I(()=>[i(v,{as:"div",class:"relative z-10"},{default:I(()=>[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:I(()=>[vs]),_:1}),t("div",bs,[t("div",gs,[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:I(()=>[i(_,{class:"w-full max-w-7xl m-20 transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:I(()=>[t("div",ys,[i(P,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:I(()=>[xs,X(" View Test ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...y)=>n.handleClick&&n.handleClick(...y))},[i(k,{class:"w-5 h-5"})])]),Y(t("div",ws,[i(f,{loading:e.loading},null,8,["loading"])],512),[[W,e.loading]]),t("div",ks,[t("div",Ss,[Ts,t("div",Cs,[t("div",Is,[$s,t("p",null,S(e.details.client.id),1)]),t("div",Ps,[Rs,t("p",null,S(("capitalize"in s?s.capitalize:oe(be))(`${e.details.client.first_name} ${e.details.client.middle_name!==null?e.details.client.middle_name:""} ${e.details.client.last_name}`)),1)]),t("div",As,[Ds,t("p",null,S(e.details.client.sex),1)]),t("div",Os,[Es,t("p",null,S(("calculateAge"in s?s.calculateAge:oe(Ue))(e.details.client.date_of_birth)),1)])])]),t("div",js,[Ns,t("div",Fs,[t("div",Ls,[Us,t("p",null,S(e.details.specimen_type),1)]),t("div",Bs,[Ms,t("p",null,S(e.details.tracking_number),1)]),t("div",qs,[Vs,t("p",null,S(e.details.accession_number),1)]),t("div",zs,[Gs,t("p",null,S(e.details.status),1)])])]),t("div",Hs,[Xs,t("div",Ks,[t("div",Ys,[Ws,t("p",null,S(e.details.test_type_name),1)]),t("div",Zs,[Js,t("p",null,S(e.moment(e.details.created_date).format("dateFormat"in s?s.dateFormat:oe(de))),1)]),t("div",Qs,[eo,t("p",null,S(e.moment(e.details.updated_date).format("dateFormat"in s?s.dateFormat:oe(de))),1)]),t("div",to,[so,t("p",null,S(e.details.status),1)]),t("div",oo,[no,t("p",null,S(e.details.requesting_ward),1)]),t("div",ro,[ao,t("p",null,S(e.details.request_origin),1)]),t("div",lo,[io,t("p",null,S(n.getRequestedBy(e.details.status_trail)),1)]),t("div",co,[uo,t("p",null,S(e.details.requested_by),1)])])])]),t("div",po,[t("div",mo,[ho,t("div",fo,[i(p,{icon:e.viewIcon,text:"View Report",click:n.viewReport,color:"primary"},null,8,["icon","click"]),i($,{item:e.details,onUpdate:n.updateChanges,color:"primary"},null,8,["item","onUpdate"]),i(p,{icon:e.printerIcon,text:"Print Accession Number",click:n.printAccessionNumber,color:"primary"},null,8,["icon","click"]),i(p,{icon:e.printerIcon,color:"success",text:"Print Tracking Number",click:n.printTrackingNumber},null,8,["icon","click"])])]),(T(!0),A(z,null,re(e.details.indicators,(y,a)=>(T(),A("div",{class:je(e.details.indicators.length!==a+1?"w-full px-5 py-2 border-b border-dotted flex justify-between items-center":"w-full px-5 py-2 flex justify-between items-center"),key:a},[t("h3",null,S(y.name),1),t("div",null,[y.result?(T(),A("p",{key:0,innerHTML:y.result.value?y.result.value:"Not done"},null,8,_o)):q("",!0)])],2))),128)),e.details.test_type_name=="Cross-match"&&e.details.status.toLowerCase()=="verified"?(T(),A("div",vo,[i(p,{loading:e.zebraPrinting,click:()=>{n.printBBResults()},text:"Print results",color:"primary",icon:e.printerIcon},null,8,["loading","click","icon"])])):q("",!0)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const go=Q(ms,[["render",bo]]),yo={components:{TransitionRoot:ye,TransitionChild:xe,Dialog:we,DialogPanel:ke,DialogTitle:Se,XMarkIcon:ee,UserIcon:Be},data(){return{open:!1,addIcon:Fe,saveIcon:Me,clearIcon:qe,name:"",description:"",loading:!1,cookie:le("token"),reasons:new Array,reasonsSelected:"",rawReasons:new Array}},props:{item:{required:!0,type:Object},text:{type:String,required:!0},action:{type:String,required:!0},icon:{type:[Object,Function],required:!0}},methods:{async init(){this.handleClick();const s={route:O.rejectionReasons,method:"GET",token:`${this.cookie}`},{error:o,data:r}=await E(s);r.value&&(this.rawReasons=r.value,r.value.map(l=>{this.reasons.push(l.description)})),o.value&&console.error(o.value)},async submitForm(){this.loading=!0;let s=null;this.rawReasons.map(n=>{n.description===this.reasonsSelected&&(s=n.id)});const o={route:`${O.testStatus}/${this.item.id}/${this.action}?status_reason_id=${s}&person_talked_to=${this.name}`,method:"PUT",token:`${this.cookie}`,body:{}},{data:r,error:l,pending:e}=await E(o);this.loading=e,r.value&&(F().$toast.success(`Test action "${this.text}" done successfully!`),this.handleClick(),this.loading=!1,this.$emit("update",!0)),l.value&&(console.error(l.value),F().$toast.error(J),this.loading=!1)},handleClick(){this.open=!this.open},resetForm(){this.reasonsSelected="",this.$formkit.reset("rejectionForm")}}},xo=""+new URL("rdt_result_no_test.6a8034c1.svg",import.meta.url).href,wo=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ko={class:"fixed inset-0 overflow-y-auto"},So={class:"flex min-h-full items-center justify-center p-4 text-center"},To={class:"border-b px-3 py-3 flex items-center justify-between"},Co=t("img",{src:xo,class:"w-8 h-8 mr-2"},null,-1),Io={class:"mt-2 space-y-3 px-5 py-5"},$o={class:"space-y-2"},Po=t("h3",{class:"font-medium"},"Test Type",-1),Ro={class:"border-b border-dotted text-gray-600"},Ao={class:"space-y-2"},Do=t("h3",{class:"font-medium"},"Specimen",-1),Oo={class:"border-b border-dotted text-gray-600"},Eo={class:"space-y-2"},jo=t("h3",{class:"font-medium"},"Accession Number",-1),No={class:"border-b border-dotted text-gray-600"},Fo={class:"w-full flex items-center"},Lo={class:"w-full flex flex-col space-y-2"},Uo={class:"w-full flex flex-col space-y-2 pb-40"},Bo=t("label",{class:"font-medium"},"Select Reason(s)",-1),Mo={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function qo(s,o,r,l,e,n){const p=ie,m=w("TransitionChild"),P=w("DialogTitle"),k=w("XMarkIcon"),f=w("FormKit"),$=w("multi-select"),_=Ne,v=w("DialogPanel"),R=w("Dialog"),y=w("TransitionRoot");return T(),A("div",null,[t("div",null,[i(p,{text:r.text,color:"error",icon:r.icon,click:n.init},null,8,["text","icon","click"])]),i(y,{appear:"",show:e.open,as:"template"},{default:I(()=>[i(R,{as:"div",onClose:n.handleClick,class:"relative z-10"},{default:I(()=>[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:I(()=>[wo]),_:1}),t("div",ko,[t("div",So,[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:I(()=>[i(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:I(()=>[t("div",To,[i(P,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:I(()=>[Co,X(" "+S(r.text.charAt(0).toUpperCase()+r.text.slice(1))+" Reason ",1)]),_:1}),t("button",{onClick:o[0]||(o[0]=(...a)=>n.handleClick&&n.handleClick(...a))},[i(k,{class:"w-5 h-5"})])]),i(f,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"rejectionForm"},{default:I(({value:a})=>[t("div",Io,[t("div",$o,[Po,t("p",Ro,S(r.item.test_type_name),1)]),t("div",Ao,[Do,t("p",Oo,S(r.item.specimen_type),1)]),t("div",Eo,[jo,t("p",No,S(r.item.accession_number),1)]),t("div",Fo,[t("div",Lo,[i(f,{type:"text",label:"Person Talked To",validation:"required",modelValue:e.name,"onUpdate:modelValue":o[1]||(o[1]=c=>e.name=c)},null,8,["modelValue"])])]),t("div",Uo,[Bo,i($,{style:{"--ms-max-height":"none !important"},modelValue:e.reasonsSelected,"onUpdate:modelValue":o[2]||(o[2]=c=>e.reasonsSelected=c),options:e.reasons,searchable:!0,required:!0,clear:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",Mo,[i(_,{type:"button",text:"Clear form",click:n.resetForm},null,8,["click"]),i(p,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const Vo=Q(yo,[["render",qo]]),zo={components:{MagnifyingGlassIcon:vt,Listbox:Ot,ListboxButton:Et,ListboxLabel:jt,ListboxOptions:Nt,ListboxOption:Ft,ChevronUpDownIcon:et,ArrowRightIcon:qt,ChevronDownIcon:bt,Menu:Lt,MenuButton:Ut,MenuItems:Bt,MenuItem:Mt,CheckIcon:gt,PopoverButton:Kt,Popover:Xe,PopoverPanel:Yt,XMarkIcon:ee,CheckCircleIcon:Ct,FunnelIcon:It},setup(){const s=ue();ft({title:`${_t.name.toUpperCase()} - ${s.department} Tests`})},data(){return{moment:K,addIcon:Ae,filterIcon:$t,applyIcon:Vt,acceptIcon:Le,moreActions:!1,okIcon:ce,moreIcon:Pt,lessIcon:Rt,clearIcon:At,dropIcon:ne,editIcon:ge,refreshIcon:Dt,dateRange:[],search:"",header:"Tests Lists",pages:[{name:"Home",link:"/home"}],headers:[{text:"PATIENT NO",value:"client.id",sortable:!0},{text:"PATIENT NAME",value:"name",sortable:!0},{text:"ACCESSION NO",value:"accession_number",sortable:!0},{text:"TEST",value:"test_type_name",sortable:!0},{text:"LOCATION",value:"requesting_ward",sortable:!0},{text:"ORDER STATUS",value:"order_status",sortable:!0},{text:"STATUS",value:"status",sortable:!0},{text:"DATE REGISTERED",value:"created_date",sortable:!0},{text:"ACTIONS",value:"actions"}],statuses:[{text:"Results",color:"primary",icon:Ae,status:"completed",show:"started"},{text:"Accept",color:"success",icon:ce,status:"pending",show:"not-collected"},{text:"Start",color:"warning",icon:zt,status:"started",show:"pending"},{text:"Authorize",color:"success",status:"verified",icon:ce,show:"completed"}],rejectStatuses:[{name:"Reject",icon:ne,action:"rejected"},{name:"Void",icon:ne,action:"voided"},{name:"Not-done",icon:ne,action:"not_done"}],changing:!1,data:new Array,statusSelected:{name:"select status"},searchField:"accession_number",searchValue:"",cookie:le("token"),loading:!1,serverItemsLength:0,serverOptions:{page:1,rowsPerPage:10,sortBy:"name"},authStore:ue(),testStatuses:new Array,filters:new Array,i18n:Qe()}},created(){this.init()},methods:{async searchNlims(s){this.loading=!0;const o={route:`${O.nlimsTestSearch}?tracking_number=${s.replace(/\$$/,"")}`,method:"GET",token:`${this.cookie}`},{data:r,error:l}=await E(o);r.value&&(lt(r.value),this.loading=!1),l.value&&(console.error(l.value),F().$toast.error(`${l.value.data.error}`),this.loading=!1)},async init(){this.loadStatuses(),this.loading=!0;const{t:s}=this.i18n;for(var o=0;o<this.headers.length;++o)switch(this.headers[o].text){case"PATIENT":this.headers[o].text=s("patient");break;case"ACCESSION NO":this.headers[o].text=s("ACCESSION_NO");break;case"TEST":this.headers[o].text=s("TEST");break;case"LOCATION":this.headers[o].text=s("LOCATION");break;case"ORDER STATUS":this.headers[o].text=s("ORDER_STATUS");break;case"STATUS":this.headers[o].text=s("STATUS");break;case"DATE REGISTERED":this.headers[o].text=s("DATE_REGISTERED");break;case"ACTIONS":this.headers[o].text=s("ACTIONS");break}this.statusSelected.name==="select status"&&(this.statusSelected.name=s("select_status"));const{page:r,rowsPerPage:l}=this.serverOptions;let e=this.getIdFromName(this.authStore.user.departments,this.authStore.department),n=this.statusSelected.name==="select status"?"":this.statusSelected.name;const p=this.dateRange!==null&&this.dateRange.length>0?K(this.dateRange[0]).format("YYYY-MM-DD"):"",m=this.dateRange!==null&&this.dateRange.length>1?K(this.dateRange[1]).format("YYYY-MM-DD"):"",P={route:`${O.tests}?minimal=true&page=${r}&per_page=${l}&status=${n.toLowerCase()}&search=${this.search}&department_id=${e}&start_date=${p}&end_date=${m}`,method:"GET",token:`${this.cookie}`},{data:k,error:f,pending:$}=await E(P);this.loading=$,k.value&&(this.data=k.value.data.map(_=>{var v,R,y,a;return{..._,name:`${be(`${(v=_.client)==null?void 0:v.first_name} ${((R=_.client)==null?void 0:R.middle_name)!==null?_.client.middle_name:""} ${(y=_.client)==null?void 0:y.last_name}`)} (${_.client.sex}, ${Ue((a=_.client)==null?void 0:a.date_of_birth)} yrs)`,order_status:`${_.order_status!==null?(_.order_status.charAt(0).toUpperCase()+_.order_status.slice(1)).split("-").join(" "):""}`,status:`${_.status!==null?_.status.charAt(0).toUpperCase()+_.status.slice(1):""}`,created_date:K(_.created_date).utcOffset(2).format(de)}}),this.serverItemsLength=k.value.meta.total_count,this.loading=!1),f.value&&(console.error(f.value.data),F().$toast.error(J),this.loading=!1)},async loadStatuses(){const s={route:`${O.testStatus}/all`,method:"GET",token:`${this.cookie}`},{data:o,error:r}=await E(s);o.value&&(this.testStatuses=o.value.map(l=>({id:l.id,name:l.name.charAt(0).toUpperCase()+l.name.slice(1)}))),r.value&&console.error(r.value)},async changeStatus(s,o){this.loading=!0;const r={route:`${O.testStatus}/${o}/${s}`,method:"PUT",token:`${this.cookie}`,body:{}},{data:l,error:e,pending:n}=await E(r);this.loading=n,l.value&&(this.init(),this.loading=!1),e.value&&(console.error(e.value),this.loading=!1)},async changeOrderStatus(s,o){this.loading=!0;const r={route:`${O.orderStatus}/${s}`,method:"PUT",token:`${this.cookie}`,body:{order_id:o}},{data:l,error:e,pending:n}=await E(r);this.loading=n,l.value&&(this.init(),this.loading=!1),e.value&&(console.error(e.value),this.loading=!1)},checkStatus(s,o){s.status==="completed"?o.test_type_name.toLowerCase().includes("culture")?this.redirect(o,`/tests/result/culture-sensitivity?accession_number=${o.accession_number}&test_id=${o.id}`):this.redirect(o,`/tests/result?accession_number=${o.accession_number}&test_id=${o.id}`):s.status!==""?this.changeStatus(s.status,o.id):this.printTest(o)},printTest(s){print()},statusList(s,o){for(var r="",l=0;l<s.length;++l)r=it(s[l].name,o),s[l].name=r;return s},chaStatusSelected(s,o){s.name==="select status"?this.statusSelected.name=o("select_status"):this.statusSelected=s},getIdFromName(s,o){const r=s.find(l=>l.name===o);return r?r.id:null},updateTests(s){typeof s=="object"&&(this.serverOptions=s),this.init(),this.moreActions=!1},refreshTests(){this.searchValue="",this.search="",this.init()},update(s){this.search=s,this.searchValue=s,s!==""?this.checkTrackingNumber(s)?this.searchNlims(s):this.updateTests(s):this.init()},handleClick(){this.moreActions=!this.moreActions},redirect(s,o){this.$router.push(o)},checkTrackingNumber(s){return/^(x|l).*\d/.test(s.toLowerCase())},updateOnStatus(s){if(s.name!=="select status"){const o=this.filters.find(r=>r.origin==="statuses");o?o.value=s.name:this.filters.push({origin:"statuses",value:s.name})}this.statusSelected=s,this.init()},removeFilter(s){s.origin==="statuses"&&this.statusSelected.name!=="select status"&&this.updateOnStatus({name:"select status"});const o=this.filters.findIndex(r=>r.origin===s.origin);o!==-1&&this.filters.splice(o,1),this.init()},isCompletedByCurrentUserOrSuperAdmin(s){const o=this.authStore.user,r=s.completed_by;if(r){if(r.id!==o.id)return!0;if(r.is_super_admin===!0)return!0}return!1},shouldDisplayButton(s,o){const r=s.status.toLowerCase(),l=o.show.toLowerCase();if(r===l){const e=this.isCompletedByCurrentUserOrSuperAdmin(s);return r==="pending"&&s.order_status.toLowerCase()==="specimen not collected"?!1:e}return!1},hideRejectActions(s){return!["voided","test-rejected","verified"].includes(s.toLowerCase())}},watch:{authStore:{handler(){this.init()},deep:!0},dateRange:{handler(){this.init()},deep:!0},statusSelected:{handler(s){this.updateOnStatus(s)},deep:!0}}},Go=""+new URL("experiment-results.d7dc2871.png",import.meta.url).href,Ho={class:"py-5 px-5"},Xo=t("div",{class:"flex items-center space-x-2 py-5"},[t("img",{src:Go,alt:"experiment-results-icon",class:"w-auto h-8"}),t("h3",{class:"text-2xl font-semibold uppercase"},"Tests List")],-1),Ko={class:"flex justify-between items-center w-full py-2 mb-2"},Yo={class:"flex items-center space-x-2"},Wo={class:"relative z-10 w-40"},Zo={class:"pt-1"},Jo={class:"bg-gray-100 pl-2.5 rounded flex items-center text-zinc-500"},Qo={class:"w-72 ml-2"},en={class:"py-3 flex items-center space-x-3"},tn={class:"py-2 flex items-center"},sn={class:"w-full flex items-center justify-between space-x-2"},on={class:"flex items-center space-x-2"},nn={key:0,class:"flex items-center space-x-2"},rn=t("div",{id:"tests-container"},null,-1);function an(s,o,r,l,e,n){const p=Ze,m=ie,P=tt,k=w("FunnelIcon"),f=w("datepicker"),$=st,_=Qt,v=go,R=Vo,y=ht;return T(),A("div",Ho,[i(p,{pages:e.pages},null,8,["pages"]),Xo,t("div",Ko,[t("div",Yo,[i(m,{text:"Refresh",color:"warning",icon:e.refreshIcon,click:()=>{n.refreshTests()},loading:e.loading},null,8,["icon","click","loading"]),t("div",Wo,[i(P,{items:n.statusList(e.testStatuses,s.$t),modelValue:e.statusSelected,"onUpdate:modelValue":o[0]||(o[0]=a=>e.statusSelected=a)},null,8,["items","modelValue"])]),t("div",Zo,[t("div",Jo,[i(k,{class:"w-5 h-5 mr-2"}),X(" Filter By Date Range "),t("div",Qo,[i(f,{required:"",position:"left",placeholder:"select start & end date",range:!0,format:"dd/MM/yyyy","input-class-name":"datepicker",modelValue:e.dateRange,"onUpdate:modelValue":o[1]||(o[1]=a=>e.dateRange=a)},null,8,["modelValue"])])])])]),i($,{onUpdate:n.update,search:e.search},null,8,["onUpdate","search"])]),t("div",en,[(T(!0),A(z,null,re(e.filters,(a,c)=>(T(),G(_,{value:{origin:"statuses",text:a.value},close:"",color:"green",key:c,onUpdate:n.removeFilter},null,8,["value","onUpdate"]))),128))]),i(y,{headers:e.headers,data:e.data,loading:e.loading,searchField:e.searchField,searchValue:e.searchValue,serverItemsLength:e.serverItemsLength,serverOptions:e.serverOptions,onUpdate:n.updateTests},{actions:I(({item:a})=>[t("div",tn,[t("div",sn,[Y(t("div",on,[i(v,{data:a,onUpdate:n.updateTests},null,8,["data","onUpdate"]),a.status.toLowerCase()==="completed"?(T(),G(m,{key:0,click:()=>{n.checkStatus({status:"completed"},a)},text:"Edit",color:"success",icon:e.editIcon},null,8,["click","icon"])):q("",!0),(T(!0),A(z,null,re(e.statuses,(c,b)=>Y((T(),G(m,{color:c.color,text:c.text,icon:c.icon,click:()=>{n.checkStatus(c,a)},key:b},null,8,["color","text","icon","click"])),[[W,n.shouldDisplayButton(a,c)]])),128)),a.status.toLowerCase()!=="test-rejected"&&a.order_status.toLowerCase()==="specimen not collected"?(T(),G(m,{key:1,color:"success",text:"Accept",icon:e.acceptIcon,click:()=>n.changeOrderStatus("accepted",a.order_id)},null,8,["icon","click"])):q("",!0)],512),[[W,!e.moreActions]]),n.hideRejectActions(a.status)?(T(),G(m,{key:0,click:n.handleClick,color:"",text:"",icon:e.moreActions==!0?e.lessIcon:e.moreIcon},null,8,["click","icon"])):q("",!0)]),n.hideRejectActions(a.status)?Y((T(),A("div",nn,[n.hideRejectActions(a.status)?(T(!0),A(z,{key:0},re(e.rejectStatuses,(c,b)=>(T(),G(R,{item:a,key:b,text:c.name,icon:c.icon,action:c.action,onUpdate:n.updateTests},null,8,["item","text","icon","action","onUpdate"]))),128)):q("",!0)],512)),[[W,e.moreActions]]):q("",!0)])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"]),rn])}const zn=Q(zo,[["render",an]]);export{zn as default};

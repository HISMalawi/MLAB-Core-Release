import{_ as K}from"./BBiETNY7.js";import{_ as O}from"./Cj-RTcTe.js";import{_ as G}from"./DRMfFlf3.js";import{a as I,u as k,l as P,m as i,b as f,e as A,f as e,n as l,g as t,p as v,_ as S,t as z,ay as H,h as b,x as C,s as T}from"./Br_iYJbE.js";import{_ as U}from"./BWngzJgz.js";import{e as Y,d as L}from"./D_g9DqRP.js";import{e as E,f as V,h as J}from"./Dog3sDT3.js";import{r as F}from"./BoyxTlis.js";import{a as Q}from"./BxXqpYSD.js";import{r as W}from"./Br7KoB9m.js";import{S as j,h as B,Y as R,G as q,V as M}from"./a0kEX_gA.js";import{_ as N}from"./CTr6doq4.js";import{r as Z}from"./AtAlRHB5.js";import{r as ee}from"./2u3kVXwJ.js";import{_ as te}from"./_RoJ7CPk.js";import{u as $}from"./Dm23Mrta.js";import{u as oe}from"./C7tJ_rpQ.js";import{P as se}from"./CsuZ4PXZ.js";import"./C3HP_w3b.js";import"./CsEX3TnJ.js";import"./tiZpgdZ8.js";import"./CKyme56o.js";import"./2-4F2Czp.js";import"./CLSVoOUE.js";import"./BIfGgD6z.js";const ae={components:{TransitionRoot:j,TransitionChild:B,Dialog:R,DialogPanel:q,DialogTitle:M,XMarkIcon:F},data(){return{editIcon:Q,show:!1,saveIcon:W,name:this.data.name,description:this.data.description,drugSelected:new Array,drugs:new Array,rawDrugs:new Array,loading:!1,cookie:I("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const o={route:`${E.disease.edit}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:s,error:r,data:c}=await V(o);this.loading=s,c.value&&(this.show=!1,k().$toast.success("Disease updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(this.show=!1,console.error(r.value),this.loading=!1,k().$toast.error(Y))},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("editForm")}}},ne=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25"},null,-1),ie={class:"fixed inset-0 overflow-y-auto"},le={class:"flex min-h-full items-center justify-center p-4 text-center"},re={class:"border-b px-3 py-3 flex items-center justify-between"},ce=t("img",{src:N,class:"w-8 h-8 mr-2"},null,-1),de={class:"mt-2 space-y-3"},me={class:"w-full flex items-center px-5"},ue={class:"w-full flex flex-col space-y-2"},pe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function _e(o,s,r,c,a,n){const d=S,m=i("TransitionChild"),h=i("DialogTitle"),g=i("XMarkIcon"),u=i("FormKit"),p=U,_=i("DialogPanel"),D=i("Dialog"),w=i("TransitionRoot");return f(),A("div",null,[e(d,{click:n.handleClick,text:"Edit",color:"success",icon:a.editIcon},null,8,["click","icon"]),e(w,{appear:"",show:a.show,as:"template"},{default:l(()=>[e(D,{as:"div",class:"relative z-10"},{default:l(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[ne]),_:1}),t("div",ie,[t("div",le,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[e(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[t("div",re,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[ce,v(" Edit Disease ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...y)=>n.handleClick&&n.handleClick(...y))},[e(g,{class:"w-5 h-5"})])]),e(u,{id:"editForm",type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1},{default:l(({value:y})=>[t("div",de,[t("div",me,[t("div",ue,[e(u,{type:"text",label:"Name",validation:"required",modelValue:r.data.name,"onUpdate:modelValue":s[1]||(s[1]=x=>r.data.name=x)},null,8,["modelValue"])])])]),t("div",pe,[e(p,{text:"Clear form",type:"button",click:()=>{n.clearForm()}},null,8,["click"]),e(d,{loading:a.loading,type:"submit",click:()=>{},color:"success",icon:a.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const fe=P(ae,[["render",_e]]),he={components:{TransitionRoot:j,TransitionChild:B,Dialog:R,DialogPanel:q,DialogTitle:M,XMarkIcon:F,ExclamationTriangleIcon:Z},data(){return{show:!1,deleteIcon:ee,loading:!1,cookie:I("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(o){this.loading=!0;const s={route:`${E.disease.delete}/${o}`,method:"DELETE",token:`${this.cookie}`,body:{voided_reason:this.reason}},{pending:r,error:c,data:a}=await V(s);this.loading=r,a.value&&(this.handleClick(),k().$toast.success("Disease deleted successfully!"),this.reason="",this.loading=!1,this.$emit("update",!0)),c.value&&(console.log(c.value),k().$toast.error("An error occurred, please try again!"),this.loading=!1)},handleClick(){this.show=!this.show}}},ge=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),xe={class:"fixed inset-0 overflow-y-auto"},ve={class:"flex min-h-full items-center justify-center p-4 text-center"},ye={class:"border-b px-3 py-3 flex items-center justify-between"},ke={class:"mt-2 space-y-3 px-5"},De={class:"rounded px-2 py-2"},we={class:"font-semibold text-red-500"},be={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ce(o,s,r,c,a,n){const d=S,m=i("TransitionChild"),h=i("ExclamationTriangleIcon"),g=i("DialogTitle"),u=i("XMarkIcon"),p=i("FormKit"),_=U,D=i("DialogPanel"),w=i("Dialog"),y=i("TransitionRoot");return f(),A("div",null,[e(d,{click:n.handleClick,color:"error",text:"Delete",icon:a.deleteIcon},null,8,["click","icon"]),e(y,{appear:"",show:a.show,as:"template"},{default:l(()=>[e(w,{as:"div",class:"relative z-10"},{default:l(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[ge]),_:1}),t("div",xe,[t("div",ve,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[e(D,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[t("div",ye,[e(g,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[e(h,{class:"h-5 w-5 mr-2"}),v(" Confirm delete ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...x)=>n.handleClick&&n.handleClick(...x))},[e(u,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:s[2]||(s[2]=x=>n.deleteData(r.data.id)),actions:!1},{default:l(({value:x})=>[t("div",ke,[t("div",De,[v(" Do you really want to delete "),t("span",we,z(r.data.name),1),v("? Note that once this action is completed, it can not be undone ")]),e(p,{type:"textarea",label:"Reason",validation:"required",modelValue:a.reason,"onUpdate:modelValue":s[1]||(s[1]=X=>a.reason=X)},null,8,["modelValue"])]),t("div",be,[e(_,{click:()=>{},type:"button",text:"Cancel"}),e(d,{loading:a.loading,type:"submit",click:()=>{},color:"error",icon:a.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Te=P(he,[["render",Ce]]),$e={setup(){oe({title:`${se.name.toUpperCase()} - Diseases`})},data(){return{header:"Diseases",pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],headers:[{text:"ID",value:"id",sortable:!0},{text:"NAME",value:"name",sortable:!0},{text:"DATE CREATED",value:"created_date"},{text:"Actions",value:"actions"}],diseases:new Array,cookie:I("token"),search:"",searchValue:"",loading:!1}},created(){this.init()},computed:{filteredDiseases(){return this.diseases.map(o=>({...o,created_date:J(o.created_date).format(L)}))}},methods:{async init(){this.loading=!0;const o={route:E.disease.index,method:"GET",token:`${this.cookie}`},{data:s,error:r,pending:c}=await V(o);this.loading=c,s.value&&(this.diseases=s.value,this.loading=!1),r.value&&(console.log(r.value),this.loading=!1)},updateSearch(o){H&&(this.searchValue=o,this.search=o)},updateDiseases(o){this.init()}}},Ie={class:"px-5 py-5"},Pe={class:"flex items-center justify-between py-5"},Ae=t("div",{class:"text-2xl font-semibold flex items-center uppercase"},[t("img",{src:N,alt:"report-icon",class:"w-8 h-8 mr-2"}),v(" Diseases ")],-1),Ee={class:"flex items-center space-x-3"},Ve={class:"flex justify-end w-full px-2 py-2 mb-2"},Se={class:"py-2 flex items-center space-x-2"};function Ue(o,s,r,c,a,n){const d=K,m=O,h=G,g=fe,u=Te,p=te;return f(),A("div",Ie,[e(d,{pages:a.pages},null,8,["pages"]),t("div",Pe,[Ae,t("div",Ee,[("usePermissions"in o?o.usePermissions:b($))().can.manage("test_catalog")?(f(),C(m,{key:0,onActionCompleted:n.updateDiseases},null,8,["onActionCompleted"])):T("",!0)])]),t("div",Ve,[("usePermissions"in o?o.usePermissions:b($))().can.manage("test_catalog")?(f(),C(h,{key:0,search:a.search,onUpdate:n.updateSearch},null,8,["search","onUpdate"])):T("",!0)]),("usePermissions"in o?o.usePermissions:b($))().can.manage("test_catalog")?(f(),C(p,{key:0,headers:a.headers,data:n.filteredDiseases,loading:a.loading,"search-value":a.searchValue,"search-field":"name"},{actions:l(({item:_})=>[t("div",Se,[e(g,{data:_,onUpdate:n.updateDiseases},null,8,["data","onUpdate"]),e(u,{data:_,onUpdate:n.updateDiseases},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])):T("",!0)])}const it=P($e,[["render",Ue]]);export{it as default};

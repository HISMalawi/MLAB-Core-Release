import{_ as E}from"./Breadcrumb.vue.8ff2b6d4.js";import{_ as N}from"./SearchBar.4042456b.js";import{l as U,B as n,u as B,f as q,o as L,c as P,b as a,k as e,g as p,d as t,h as F,t as y,w as D,v as I,p as O,j as z,a as k,e as K,G as M}from"./entry.ad4aba20.js";import{e as C,f as j,k as H,g as R}from"./fetch.5019f737.js";import{e as G}from"./constants.060e48ac.js";import{_ as J}from"./clinical_fe.56ca8763.js";import{a as Q}from"./PencilSquareIcon.d20f2125.js";import{r as W}from"./XMarkIcon.81c841af.js";import{r as X}from"./ArrowDownTrayIcon.45995613.js";import{U as Y,h as V,G as Z,V as ee,S as te}from"./transition.bf38d962.js";import{_ as se}from"./Datatable.0c6449b1.js";import{u as ae}from"./index.b6be8133.js";import{P as ne}from"./package.00b14c4a.js";import"./nuxt-link.5507b38f.js";import"./HomeIcon.d2a4a580.js";import"./PrinterIcon.a64525c6.js";import"./hidden.d4abb7ca.js";import"./Loader.04cfad00.js";import"./vue.f36acd1f.bf45fb5c.js";const oe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ie={class:"fixed inset-0 overflow-y-auto"},le={class:"flex min-h-full items-center justify-center p-4 text-center"},ce={class:"border-b px-3 py-3 flex items-center justify-between"},re=t("img",{src:J,class:"w-8 h-8 mr-2"},null,-1),pe={class:"mt-2 space-y-3 px-5 py-5"},me={class:"w-full flex flex-col space-y-1"},de=t("label",{class:"font-semibold text-lg"},y("Specimen Name"),-1),ue={class:"underline"},_e={class:"w-full flex flex-col space-y-1"},fe=t("label",{class:"font-semibold text-lg"},y("Test Type"),-1),ve={class:"underline"},he={class:"mt-2 space-y-3"},ye={class:"w-full grid grid-1 items-center px-5 space-x-3"},xe={class:"w-full grid grid-1 items-center px-5 space-x-3"},ge={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"},be=U({__name:"index",props:{id:{}},emits:["action-completed"],setup(T,{emit:b}){const u=b,x=T,_=n(!1),r=n(!1),f=B("token"),o=n({life_span:"",life_span_units:""}),v=n({specimen_name:"",test_type_name:"",life_span:"",life_span_units:""}),$=n([{label:"mins",value:"mins"},{label:"hours",value:"hours"},{label:"days",value:"days"},{label:"months",value:"months"}]),h=async()=>{r.value=!0;const m={route:`${C.specimensLifespan.edit}/${x.id}`,method:"GET",token:`${f.value}`},s=await j(m);if(s.data.value){const l=s.data.value;o.value.life_span=l.life_span,o.value.life_span_units=l.life_span_units,v.value.specimen_name=l.specimen.name,v.value.test_type_name=l.test_type.name,_.value=!0}r.value=!1,s.error.value&&(r.value=!1,k().$toast.error(`${G}`))},S=async()=>{r.value=!0;const m=await H(`${C.specimensLifespan.update}/${x.id}`,{method:"PUT",headers:{Authorization:`${f.value}`},body:o},"$x31dFGojBG");m.data.value&&(g(),u("action-completed",!0),k().$toast.success("Specimen lifespan updated successfully!")),m.error.value&&(k().$toast.success("An error occurred, please try again!"),g())},g=()=>{_.value=!_.value,r.value=!1};return(m,s)=>{const l=K,d=q("FormKit");return L(),P("div",null,[a(l,{click:h,color:"success",text:"Edit",icon:e(Q)},null,8,["icon"]),a(e(te),{appear:"",show:e(_),as:"template"},{default:p(()=>[a(e(Y),{as:"div",class:"relative z-10"},{default:p(()=>[a(e(V),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[oe]),_:1}),t("div",ie,[t("div",le,[a(e(V),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:p(()=>[a(e(Z),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:p(()=>[t("div",ce,[a(e(ee),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:p(()=>[re,F(" "+y("Edit Specimen Lifespan"))]),_:1}),t("button",{onClick:g},[a(e(W),{class:"w-5 h-5"})])]),D(t("div",pe,[t("div",me,[de,t("p",ue,y(e(v).specimen_name),1)]),t("div",_e,[fe,t("p",ve,y(e(v).test_type_name),1)])],512),[[I,!e(r)]]),a(d,{type:"form","submit-label":"Update",onSubmit:S,actions:!1},{default:p(({})=>[t("div",he,[t("div",ye,[a(d,{class:"w-full",type:"number",label:"Lifespan",validation:"required",modelValue:e(o).life_span,"onUpdate:modelValue":s[0]||(s[0]=c=>e(o).life_span=c)},null,8,["modelValue"])]),t("div",xe,[e($).length?(L(),O(d,{key:0,type:"select",label:"Test Type",modelValue:e(o).life_span_units,"onUpdate:modelValue":s[1]||(s[1]=c=>e(o).life_span_units=c),placeholder:"Select disease",validation:"required",options:e($)},null,8,["modelValue","options"])):z("",!0)]),t("div",ge,[a(l,{type:"submit",click:()=>{},color:"success",loading:e(r),icon:e(X),text:"Save changes"},null,8,["loading","icon"])])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),$e={class:"px-5 py-5"},we={class:"flex items-center justify-between py-5"},ke={class:"text-2xl font-semibold"},Se={class:"flex justify-end w-full px-2 py-2 mb-2"},Le={class:"py-2 flex items-center space-x-2"},He=U({__name:"specimen-lifespan",setup(T){ae({title:`${ne.name.toUpperCase()} - Specimen Lifespan`});const b=n(0),u=n(!1),x=n([]),_=B("token"),r=n("Specimen Lifespan"),f=n(""),o=n({page:1,rowsPerPage:10,sortBy:"name"}),v=n([{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}]),$=n([{text:"Specimen Type",value:"specimen_name",sortable:!0},{text:"Test Type",value:"test_type_name"},{text:"Lifesapn",value:"specimen_life_span"},{text:"Actions",value:"actions"}]),h=async()=>{u.value=!0;const{page:s,rowsPerPage:l}=o.value,d={route:R(C.specimensLifespan.index,{page:s,per_page:l,search:f.value}),method:"GET",token:`${_.value}`},c=await j(d);if(c.data.value){const w=c.data.value.data;x.value=w?w.map(i=>({id:i.id,specimen_name:i.specimen_name,test_type_name:i.test_type_name,specimen_life_span:i.life_span&&i.life_span_units?`${i.life_span} ${i.life_span_units}`:"--",life_span:i.life_span,life_span_unit:i.life_span_units})):[],b.value=c.data.value.meta.total_count??0}u.value=!1,c.error.value&&(u.value=!1,k().$toast.error(`${G}`))},S=s=>{f.value=s,h()},g=s=>o.value=s;h(),M(o,()=>h());const m=async()=>{h()};return(s,l)=>{const d=E,c=N,w=be,i=se;return L(),P("div",$e,[a(d,{pages:e(v)},null,8,["pages"]),t("div",we,[t("h3",ke,y(e(r)),1)]),t("div",Se,[a(c,{search:e(f),onUpdate:S},null,8,["search"])]),a(i,{headers:e($),data:e(x),serverOptions:e(o),loading:e(u),serverItemsLength:e(b),onUpdate:g},{actions:p(({item:A})=>[t("div",Le,[a(w,{onActionCompleted:m,id:A.id},null,8,["id"])])]),_:1},8,["headers","data","serverOptions","loading","serverItemsLength"])])}}});export{He as default};

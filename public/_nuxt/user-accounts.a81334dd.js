import{_ as W}from"./Breadcrumb.vue.b9cfed89.js";import{o as f,c as h,e as t,a as S,b as T,_ as A,g as d,d as o,h as c,i as U,w as I,j as q,f as R,v as X,t as w,F as G,r as z,k as K,u as Z}from"./entry.e1d9d70a.js";import{_ as M}from"./OutlinedButton.7839e719.js";import{e as H}from"./constants.6abaa2d3.js";import{r as Y,e as x,f as y,h as ee,a as te}from"./fetch.460ac344.js";import{r as B}from"./XMarkIcon.332d6584.js";import{r as L}from"./UserIcon.784e0667.js";import{r as J}from"./ArrowDownTrayIcon.ed7f2b0c.js";import{r as E}from"./ArrowUturnLeftIcon.587606e3.js";import{S as $,h as F,U as P,G as j,V as N}from"./transition.de7727c0.js";import{_ as se}from"./SearchBar.e27a22b7.js";import{_ as oe}from"./Loader.a4719967.js";import{r as le,a as Q}from"./PencilSquareIcon.cfbf69bc.js";import{_ as ae}from"./Datatable.3897ab93.js";import{P as ne}from"./package.9e3c13b5.js";import{r as ie}from"./MagnifyingGlassIcon.185d2005.js";import"./nuxt-link.f439798e.js";import"./HomeIcon.890769d8.js";import"./PrinterIcon.86777378.js";import"./hidden.85117a1f.js";function re(l,s){return f(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z","clip-rule":"evenodd"})])}const de={components:{TransitionRoot:$,TransitionChild:F,Dialog:P,DialogPanel:j,DialogTitle:N,XMarkIcon:B,UserIcon:L},data(){return{open:!1,addIcon:Y,saveIcon:J,clearIcon:E,departmentSelected:null,departments:new Array,rawDepartments:new Array,cookie:S("token"),roles:new Array,rawRoles:new Array,roleSelected:null,firstName:"",middleName:"",lastName:"",username:"",sex:"",password:"",confirmPassword:"",dateOfBirth:"",loading:!1,maxDate:(()=>{const l=new Date;return l.setFullYear(l.getFullYear()-14),l.setDate(l.getDate()+1),l})()}},methods:{async loadRoles(){const l={route:x.roles,method:"GET",token:`${this.cookie}`},{data:s,error:i}=await y(l);s.value&&(this.rawRoles=s.value,s.value.map(u=>{this.roles.push(u.name)})),i.value&&console.error(i.value)},async loadDepartments(){const l={route:x.departments,method:"GET",token:`${this.cookie}`},{data:s,error:i}=await y(l);s.value&&(this.rawDepartments=s.value,s.value.map(u=>{this.departments.push(u.name)})),i.value&&console.error(i.value)},async submitForm(){this.loading=!0;let l=new Array,s=new Array;this.departmentSelected!=null&&this.departmentSelected.map(m=>{this.rawDepartments.filter(r=>{m==r.name&&l.push(r.id)})}),this.roleSelected!=null&&this.roleSelected.map(m=>{this.rawRoles.filter(r=>{m==r.name&&s.push(r.id)})});const i={route:x.users,method:"POST",token:`${this.cookie}`,body:{person:{first_name:this.firstName,middle_name:this.middleName,last_name:this.lastName,sex:this.sex,date_of_birth:this.dateOfBirth},user:{username:this.username,password:this.password},roles:s,departments:l}},{data:u,error:e,pending:a}=await y(i);this.loading=a,u.value&&(this.handleClick(),T().$toast.success("User created successfully!"),this.$emit("update",!0),this.loading=!1),e.value&&(this.handleClick(),T().$toast.error(H),this.loading=!1,console.error(e.value))},async init(){await this.loadDepartments(),await this.loadRoles(),this.handleClick()},clearForm(){this.$formkit.reset("submitForm")},handleClick(){this.open=!this.open}}},O=""+new URL("person.534f8b85.svg",import.meta.url).href,ce=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ue={class:"fixed inset-0 overflow-y-auto"},me={class:"flex min-h-full items-center justify-center p-4 text-center"},pe={class:"border-b px-3 py-3 flex items-center justify-between"},_e=t("img",{src:O,class:"w-8 h-8 mr-2"},null,-1),fe={class:"mt-2 space-y-3 px-5"},he={class:"grid grid-cols-2 gap-4"},ve={class:"grid grid-cols-2 gap-4"},ge={class:"grid grid-cols-2 gap-4"},xe={class:"flex items-center"},ye=t("label",{class:"mr-5 font-medium text-lg"},"Sex",-1),we={class:"flex items-center"},be=t("span",{class:"ml-2"},"Male",-1),ke={class:"flex items-center ml-2"},Ve=t("span",{class:"ml-2"},"Female",-1),Ce={class:"w-full flex flex-col"},De={class:"w-full flex flex-col space-y-2"},Ue=t("label",{class:"font-medium"},"Select Role(s)",-1),Te={class:"w-full flex flex-col"},Ie={class:"w-full flex flex-col space-y-2"},Se=t("label",{class:"font-medium"},"Select Lab Section(s)",-1),Ae={class:"px-5"},qe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Re(l,s,i,u,e,a){const m=R,r=d("TransitionChild"),b=d("DialogTitle"),k=d("XMarkIcon"),p=d("FormKit"),_=d("multi-select"),V=M,v=d("DialogPanel"),g=d("Dialog"),C=d("TransitionRoot");return f(),h("div",null,[t("div",null,[o(m,{text:"Add user",color:"primary",icon:e.addIcon,click:a.init},null,8,["icon","click"])]),o(C,{appear:"",show:e.open,as:"template"},{default:c(()=>[o(g,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:c(()=>[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[ce]),_:1}),t("div",ue,[t("div",me,[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[o(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[t("div",pe,[o(b,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:c(()=>[_e,U(" Add user ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...D)=>a.handleClick&&a.handleClick(...D))},[o(k,{class:"w-5 h-5"})])]),o(p,{type:"form",id:"submitForm","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:c(({value:D})=>[t("div",fe,[t("div",he,[o(p,{type:"text",label:"Username",validation:"required",modelValue:e.username,"onUpdate:modelValue":s[1]||(s[1]=n=>e.username=n)},null,8,["modelValue"]),o(p,{type:"text",label:"First name",modelValue:e.firstName,"onUpdate:modelValue":s[2]||(s[2]=n=>e.firstName=n),validation:"required"},null,8,["modelValue"])]),t("div",ve,[o(p,{type:"text",label:"Middle name",modelValue:e.middleName,"onUpdate:modelValue":s[3]||(s[3]=n=>e.middleName=n)},null,8,["modelValue"]),o(p,{type:"text",label:"Last name",validation:"required",modelValue:e.lastName,"onUpdate:modelValue":s[4]||(s[4]=n=>e.lastName=n)},null,8,["modelValue"])]),o(p,{type:"group"},{default:c(()=>[t("div",ge,[o(p,{type:"password",label:"Password",name:"password",validation:"required",modelValue:e.password,"onUpdate:modelValue":s[5]||(s[5]=n=>e.password=n),"validation-visibility":"live"},null,8,["modelValue"]),o(p,{type:"password",label:"Confirm password",name:"password_confirm",validation:"required|confirm","validation-label":"Password confirmation","validation-visibility":"live"})])]),_:1}),t("div",xe,[ye,t("label",we,[I(t("input",{required:"","onUpdate:modelValue":s[6]||(s[6]=n=>e.sex=n),type:"radio",value:"M",name:"gender",class:"w-4 h-4 rounded-full bg-sky-500 border-sky-800 text-sky-500 focus:ring-sky-800"},null,512),[[q,e.sex]]),be]),t("label",ke,[I(t("input",{required:"","onUpdate:modelValue":s[7]||(s[7]=n=>e.sex=n),type:"radio",value:"F",name:"gender",class:"w-4 h-4 rounded-full bg-sky-500 border-sky-800 text-sky-500 focus:ring-sky-800"},null,512),[[q,e.sex]]),Ve])]),t("div",Ce,[t("div",De,[Ue,o(_,{style:{"--ms-max-height":"none !important"},modelValue:e.roleSelected,"onUpdate:modelValue":s[8]||(s[8]=n=>e.roleSelected=n),options:e.roles,mode:"tags",searchable:!0,required:!0,clear:"",class:"outline-none focus:ring-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",Te,[t("div",Ie,[Se,o(_,{style:{"--ms-max-height":"none !important"},modelValue:e.departmentSelected,"onUpdate:modelValue":s[9]||(s[9]=n=>e.departmentSelected=n),options:e.departments,mode:"tags",searchable:!0,required:!0,clear:"",class:"outline-none focus:ring-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])])]),t("div",Ae,[o(p,{type:"date",label:"Date of birth",modelValue:e.dateOfBirth,"onUpdate:modelValue":s[10]||(s[10]=n=>e.dateOfBirth=n)},null,8,["modelValue"])]),t("div",qe,[o(V,{type:"button",click:()=>{a.clearForm()},text:"Clear form"},null,8,["click"]),o(m,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.saveIcon,text:"Save Changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const $e=A(de,[["render",Re]]),Fe={components:{TransitionRoot:$,TransitionChild:F,Dialog:P,DialogPanel:j,DialogTitle:N,XMarkIcon:B,UserIcon:L},props:{data:{required:!0,type:Object}},data(){return{moment:ee,open:!1,addIcon:Y,viewIcon:le,editIcon:Q,clearIcon:E,details:{id:"",username:"",first_name:"",last_name:"",middle_name:"",sex:"",date_of_birth:"",roles:new Array,departments:new Array},loading:!1,cookie:S("token")}},methods:{async init(){this.loading=!0;const l={route:`${x.users}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:s,error:i,pending:u}=await y(l);this.loading=u,s.value&&(this.details=s.value,this.loading=!1,this.adjustVisibility()),i.value&&(console.error(i.value),this.loading=!1)},adjustVisibility(){this.open=!this.open}}},Pe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),je={class:"fixed inset-0 overflow-y-auto"},Ne={class:"flex min-h-full items-center justify-center p-4 text-center"},Me={class:"border-b px-3 py-3 flex items-center justify-between"},Be=t("img",{src:O,class:"w-6 h-6 mr-2"},null,-1),Le={class:"flex items-center justify-center mx-auto my-20"},Ee={class:"space-y-3 px-5 py-5"},Oe={class:"w-full flex flex-col space-y-1"},Xe=t("label",{class:"font-semibold text-lg"},"Username",-1),Ge={class:"underline"},ze={class:"w-full flex flex-col space-y-1"},Ke=t("label",{class:"font-semibold text-lg"},"First name",-1),He={class:"underline"},Ye={class:"w-full flex flex-col space-y-1"},Je=t("label",{class:"font-semibold text-lg"},"Last name",-1),Qe={class:"underline"},We={class:"w-full flex flex-col space-y-1"},Ze=t("label",{class:"font-semibold text-lg"},"Date of birth",-1),et={class:"underline"},tt={class:"w-full flex flex-col space-y-1"},st=t("label",{class:"font-semibold text-lg"},"Roles",-1),ot={class:"w-full flex flex-col space-y-1"},lt=t("label",{class:"font-semibold text-lg"},"Departments",-1);function at(l,s,i,u,e,a){const m=R,r=d("TransitionChild"),b=d("DialogTitle"),k=d("XMarkIcon"),p=oe,_=d("DialogPanel"),V=d("Dialog"),v=d("TransitionRoot");return f(),h("div",null,[t("div",null,[o(m,{text:"View",color:"primary",icon:e.viewIcon,click:a.init},null,8,["icon","click"])]),o(v,{appear:"",show:e.open,as:"template"},{default:c(()=>[o(V,{as:"div",onClose:a.adjustVisibility,class:"relative z-10"},{default:c(()=>[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[Pe]),_:1}),t("div",je,[t("div",Ne,[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[o(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[t("div",Me,[o(b,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:c(()=>[Be,U(" View User Account ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...g)=>a.adjustVisibility&&a.adjustVisibility(...g))},[o(k,{class:"w-5 h-5"})])]),I(t("div",Le,[o(p,{loading:e.loading},null,8,["loading"])],512),[[X,e.loading]]),I(t("div",Ee,[t("div",Oe,[Xe,t("p",Ge,w(e.details.username),1)]),t("div",ze,[Ke,t("p",He,w(e.details.first_name),1)]),t("div",Ye,[Je,t("p",Qe,w(e.details.last_name),1)]),t("div",We,[Ze,t("p",et,w(e.details.date_of_birth),1)]),t("div",tt,[st,(f(!0),h(G,null,z(e.details.roles,(g,C)=>(f(),h("p",{class:"underline",key:C},w(g.role_name),1))),128))]),t("div",ot,[lt,(f(!0),h(G,null,z(e.details.departments,(g,C)=>(f(),h("p",{class:"underline",key:C},w(g.name),1))),128))])],512),[[X,!e.loading]])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const nt=A(Fe,[["render",at]]),it={components:{TransitionRoot:$,TransitionChild:F,Dialog:P,DialogPanel:j,DialogTitle:N,XMarkIcon:B,UserIcon:L},data(){return{open:!1,editIcon:Q,saveIcon:J,clearIcon:E,departmentSelected:null,departments:new Array,rawDepartments:new Array,cookie:S("token"),roles:new Array,rawRoles:new Array,roleSelected:null,firstName:"",middleName:"",lastName:"",username:"",sex:"",password:"",confirmPassword:"",dateOfBirth:"",loading:!1,details:{id:"",username:"",first_name:"",last_name:"",middle_name:"",old_password:"",new_password:"",sex:"",date_of_birth:"",roles:new Array,departments:new Array}}},props:{data:{required:!0,type:Object}},methods:{async init(){this.open=!0,this.loading=!0,await this.loadRoles(),await this.loadDepartments();const l={route:`${x.users}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:s,error:i,pending:u}=await y(l);if(this.loading=u,s.value){this.details=s.value,this.loading=!1;let e=new Array;s.value.roles.map(m=>{this.rawRoles.map(r=>{m.role_name==r.name&&e.push(r.name)})}),this.roleSelected=e;let a=new Array;s.value.departments.map(m=>{this.rawDepartments.map(r=>{m.name==r.name&&a.push(r.name)})}),this.departmentSelected=a}i.value&&(console.error(i.value),this.loading=!1)},async loadRoles(){const l={route:x.roles,method:"GET",token:`${this.cookie}`},{data:s,error:i}=await y(l);s.value&&(this.rawRoles=s.value,s.value.map(u=>{this.roles.push(u.name)})),i.value&&console.error(i.value)},async loadDepartments(){const l={route:x.departments,method:"GET",token:`${this.cookie}`},{data:s,error:i}=await y(l);s.value&&(this.rawDepartments=s.value,s.value.map(u=>{this.departments.push(u.name)})),i.value&&console.error(i.value)},async submitForm(){this.loading=!0;let l=new Array,s=new Array;this.departmentSelected!=null&&this.departmentSelected.map(m=>{this.rawDepartments.filter(r=>{m==r.name&&l.push(r.id)})}),this.roleSelected!=null&&this.roleSelected.map(m=>{this.rawRoles.filter(r=>{m==r.name&&s.push(r.id)})}),this.details.roles=s,this.details.departments=l;const i={route:`${x.users}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:{person:{first_name:this.details.first_name,middle_name:this.details.middle_name,last_name:this.details.last_name,sex:this.details.sex,date_of_birth:this.details.date_of_birth},user:{username:this.details.username,old_password:this.details.old_password,password:this.details.new_password},roles:s,departments:l}},{data:u,error:e,pending:a}=await y(i);this.loading=a,u.value&&(this.handleClick(),T().$toast.success("User updated successfully!"),this.loading=!1,this.$emit("update",!0)),e.value&&(console.error(e.value),this.handleClick(),T().$toast.error(H),this.loading=!1)},handleClick(){this.open=!this.open}}},rt=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),dt={class:"fixed inset-0 overflow-y-auto"},ct={class:"flex min-h-full items-center justify-center p-4 text-center"},ut={class:"border-b px-3 py-3 flex items-center justify-between"},mt=t("img",{src:O,class:"w-8 h-8 mr-2"},null,-1),pt={class:"mt-2 space-y-3 px-5 py-5"},_t={class:"grid grid-cols-2 gap-4"},ft={class:"grid grid-cols-2 gap-4"},ht={class:"grid grid-cols-2 gap-4"},vt={class:"w-full flex flex-col space-y-2"},gt={class:"w-full flex flex-col space-y-2"},xt={class:"flex items-center"},yt=t("label",{class:"mr-5 font-medium text-lg"},"Sex",-1),wt={class:"flex items-center"},bt=t("span",{class:"ml-2"},"Male",-1),kt={class:"flex items-center ml-2"},Vt=t("span",{class:"ml-2"},"Female",-1),Ct={class:"w-full flex flex-col"},Dt={class:"w-full flex flex-col space-y-2"},Ut=t("label",{class:"font-medium"},"Select Role(s)",-1),Tt={class:"w-full flex flex-col"},It={class:"w-full flex flex-col space-y-2"},St=t("label",{class:"font-medium"},"Select Lab Section(s)",-1),At={class:"px-5"},qt={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Rt(l,s,i,u,e,a){const m=R,r=d("TransitionChild"),b=d("DialogTitle"),k=d("XMarkIcon"),p=d("FormKit"),_=d("multi-select"),V=M,v=d("DialogPanel"),g=d("Dialog"),C=d("TransitionRoot");return f(),h("div",null,[t("div",null,[o(m,{text:"Edit",color:"primary",icon:e.editIcon,click:a.init},null,8,["icon","click"])]),o(C,{appear:"",show:e.open,as:"template"},{default:c(()=>[o(g,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:c(()=>[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[rt]),_:1}),t("div",dt,[t("div",ct,[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[o(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[t("div",ut,[o(b,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:c(()=>[mt,U(" Edit user ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...D)=>a.handleClick&&a.handleClick(...D))},[o(k,{class:"w-5 h-5"})])]),o(p,{type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:c(({value:D})=>[t("div",pt,[t("div",_t,[o(p,{type:"text",label:"Username",validation:"required",modelValue:e.details.username,"onUpdate:modelValue":s[1]||(s[1]=n=>e.details.username=n)},null,8,["modelValue"]),o(p,{type:"text",label:"First name",modelValue:e.details.first_name,"onUpdate:modelValue":s[2]||(s[2]=n=>e.details.first_name=n),validation:"required"},null,8,["modelValue"])]),t("div",ft,[o(p,{type:"text",label:"Middle name",modelValue:e.details.middle_name,"onUpdate:modelValue":s[3]||(s[3]=n=>e.details.middle_name=n)},null,8,["modelValue"]),o(p,{type:"text",label:"Last name",validation:"required",modelValue:e.details.last_name,"onUpdate:modelValue":s[4]||(s[4]=n=>e.details.last_name=n)},null,8,["modelValue"])]),o(p,{type:"group"},{default:c(()=>[t("div",ht,[t("div",vt,[o(p,{type:"password",label:"New password",name:"password",modelValue:e.details.new_password,"onUpdate:modelValue":s[5]||(s[5]=n=>e.details.new_password=n),"validation-visibility":"live"},null,8,["modelValue"])]),t("div",gt,[o(p,{type:"password",label:"Confirm new password",name:"password_confirm",validation:e.details.new_password&&"required|confirm","validation-label":"Password confirmation","validation-visibility":"live"},null,8,["validation"])])])]),_:1}),t("div",xt,[yt,t("label",wt,[I(t("input",{required:"","onUpdate:modelValue":s[6]||(s[6]=n=>e.details.sex=n),type:"radio",value:"M",name:"gender",class:"w-4 h-4 rounded-full bg-sky-500 border-sky-800 text-sky-500 focus:ring-sky-800"},null,512),[[q,e.details.sex]]),bt]),t("label",kt,[I(t("input",{required:"","onUpdate:modelValue":s[7]||(s[7]=n=>e.details.sex=n),type:"radio",value:"F",name:"gender",class:"w-4 h-4 rounded-full bg-sky-500 border-sky-800 text-sky-500 focus:ring-sky-800"},null,512),[[q,e.details.sex]]),Vt])]),t("div",Ct,[t("div",Dt,[Ut,o(_,{style:{"--ms-max-height":"none !important"},modelValue:e.roleSelected,"onUpdate:modelValue":s[8]||(s[8]=n=>e.roleSelected=n),options:e.roles,mode:"tags",searchable:!0,required:!0,clear:"",class:"outline-none focus:ring-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",Tt,[t("div",It,[St,o(_,{style:{"--ms-max-height":"none !important"},modelValue:e.departmentSelected,"onUpdate:modelValue":s[9]||(s[9]=n=>e.departmentSelected=n),options:e.departments,mode:"tags",searchable:!0,required:!0,clear:"",class:"outline-none focus:ring-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])])]),t("div",At,[o(p,{type:"date",label:"Date of birth",modelValue:e.details.date_of_birth,"onUpdate:modelValue":s[10]||(s[10]=n=>e.details.date_of_birth=n)},null,8,["modelValue"])]),t("div",qt,[o(V,{type:"button",click:()=>{},text:"Clear form"}),o(m,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.saveIcon,text:"Save Changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const $t=A(it,[["render",Rt]]),Ft={components:{TransitionRoot:$,TransitionChild:F,Dialog:P,DialogPanel:j,DialogTitle:N,ExclamationTriangleIcon:te},data(){return{show:!1,disableIcon:re,loading:!1,reason:""}},props:{data:{type:Object,required:!0}},setup(){return{cookie:S("token")}},methods:{async deleteData(l){this.loading=!0;const s={route:`${x.users}/${l}`,method:"DELETE",token:`${this.cookie}`},{pending:i,error:u,data:e}=await y(s);this.loading=i,e.value&&(this.handleClick(),T().$toast.success(`${e.value.message}`),this.loading=!1,this.$emit("update",!0),this.reason=""),u.value&&(console.log(e.value),this.loading=!1)},async activate(l){this.loading=!0;const s={route:`${x.users}/activate/${l}`,method:"PUT",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:i,error:u,data:e}=await y(s);this.loading=i,e.value&&(this.handleClick(),T().$toast.success(`${e.value.message}`),this.loading=!1,this.$emit("update",!0),this.reason=""),u.value&&(console.log(e.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Pt={key:0},jt={key:1},Nt=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Mt={class:"fixed inset-0 overflow-y-auto"},Bt={class:"flex min-h-full items-center justify-center p-4 text-center"},Lt={class:"border-b px-3 py-3 flex items-center justify-between"},Et={class:"mt-2 space-y-3 px-5"},Ot={class:"rounded px-2 py-2"},Xt={class:"font-semibold text-red-500"},Gt={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function zt(l,s,i,u,e,a){const m=R,r=d("TransitionChild"),b=d("ExclamationTriangleIcon"),k=d("DialogTitle"),p=d("XMarkIcon"),_=d("FormKit"),V=M,v=d("DialogPanel"),g=d("Dialog"),C=d("TransitionRoot");return f(),h("div",null,[t("div",null,[i.data.is_active?(f(),h("div",Pt,[o(m,{click:a.handleClick,color:"error",text:"Disable",icon:e.disableIcon},null,8,["click","icon"])])):K("",!0),i.data.is_active?K("",!0):(f(),h("div",jt,[o(m,{click:a.handleClick,color:"success",text:"Enable",icon:e.disableIcon},null,8,["click","icon"])]))]),o(C,{appear:"",show:e.show,as:"template"},{default:c(()=>[o(g,{as:"div",class:"relative z-10"},{default:c(()=>[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[Nt]),_:1}),t("div",Mt,[t("div",Bt,[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[o(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[t("div",Lt,[o(k,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>[o(b,{class:"h-5 w-5 mr-2"}),U(" "+w(i.data.is_active?"Confirm disable":"Confirm activate"),1)]),_:1}),t("button",{onClick:s[0]||(s[0]=(...D)=>a.handleClick&&a.handleClick(...D))},[o(p,{class:"w-5 h-5"})])]),o(_,{type:"form","submit-label":"Update",onSubmit:s[2]||(s[2]=D=>i.data.is_active?a.deleteData(i.data.id):a.activate(i.data.id)),actions:!1},{default:c(({value:D})=>[t("div",Et,[t("div",Ot,[U(" Do you want to "+w(i.data.is_active?"disable":"activate")+" ",1),t("span",Xt,w(i.data.username),1),U(" account? Note that once this action is completed, it can not be undone ")]),o(_,{type:"textarea",label:"Reason",validation:"required",modelValue:e.reason,"onUpdate:modelValue":s[1]||(s[1]=n=>e.reason=n)},null,8,["modelValue"])]),t("div",Gt,[o(V,{click:a.handleClick,type:"button",text:"Cancel"},null,8,["click"]),o(m,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.disableIcon,text:"Continue"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Kt=A(Ft,[["render",zt]]),Ht={components:{MagnifyingGlassIcon:ie},setup(){Z({title:`${ne.name.toUpperCase()} - User Accounts`})},data(){return{header:"List of Users",headers:[{text:"id",value:"id",sortable:!0},{text:"username",value:"username",sortable:!0},{text:"full name",value:"fullname",sortable:!0},{text:"sex",value:"sex",sortable:!0},{text:"actions",value:"actions"}],users:new Array,cookie:S("token"),loading:!1,search:"",searchValue:"",pages:[{name:"Home",link:"/home"},{name:"Access Controls",link:"#"}],serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init()},methods:{updateSearch(l){this.searchValue=l,this.search=l,this.updateUsers(l)},async init(){this.loading=!0;const{page:l,rowsPerPage:s}=this.serverOptions,i={route:`${x.users}?page=${l}&per_page=${s}&search=${this.search}`,method:"GET",token:`${this.cookie}`},{data:u,error:e,pending:a}=await y(i);this.loading=a,u.value&&(this.users=u.value.data,this.loading=!1,this.serverItemsLength=u.value.meta.total_count),e.value&&(console.error(e.value),this.loading=!1)},updateUsers(l){typeof l=="object"&&(this.serverOptions=l),this.init()}},computed:{filteredUsers(){return this.users.map(l=>({id:l.id,is_active:l.is_active,username:l.username.charAt(0).toUpperCase()+l.username.slice(1),fullname:`${l.first_name} ${l.last_name}`,sex:l.sex}))}}},Yt={class:"py-5 px-5"},Jt={class:"flex items-center justify-between py-5"},Qt={class:"text-2xl font-semibold"},Wt={class:"flex justify-end w-full px-2 py-2 mb-2"},Zt={class:"py-2 flex items-center space-x-2"};function es(l,s,i,u,e,a){const m=W,r=$e,b=se,k=nt,p=$t,_=Kt,V=ae;return f(),h("div",Yt,[o(m,{pages:e.pages},null,8,["pages"]),t("div",Jt,[t("h3",Qt,w(e.header),1),o(r,{onUpdate:a.init},null,8,["onUpdate"])]),t("div",Wt,[o(b,{search:e.search,onUpdate:a.updateSearch},null,8,["search","onUpdate"])]),o(V,{headers:e.headers,data:a.filteredUsers,loading:e.loading,searchField:"username",searchValue:e.searchValue,serverItemsLength:e.serverItemsLength,serverOptions:e.serverOptions,onUpdate:a.updateUsers},{actions:c(({item:v})=>[t("div",Zt,[o(k,{data:v},null,8,["data"]),o(p,{data:v,onUpdate:a.init},null,8,["data","onUpdate"]),o(_,{data:v,onUpdate:a.init},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","searchValue","serverItemsLength","serverOptions","onUpdate"])])}const ws=A(Ht,[["render",es]]);export{ws as default};

import{_ as L}from"./Breadcrumb.e138cb28.js";import{u as D,a as w,_ as b,f as n,o as k,c as C,d as t,b as e,g as s,h as x,e as T,t as S}from"./entry.48ba65aa.js";import{e as M,d as N}from"./constants.98aafb61.js";import{r as q,e as I,f as $,a as K,h as z}from"./fetch.cb0296d9.js";import{r as F}from"./XMarkIcon.eee5e108.js";import{r as E}from"./ArrowDownTrayIcon.109df054.js";import{h as U,S as P,U as V,G as j,V as R}from"./transition.2eedb22c.js";import{_ as G}from"./SearchBar.44ad0ab2.js";import{r as H,a as A}from"./PencilSquareIcon.18bd21fa.js";import{r as B}from"./TrashIcon.37de27fe.js";import{_ as J}from"./Datatable.78b77106.js";import{u as Q}from"./vue.f36acd1f.1a7f5e18.js";import{P as W}from"./package.d411c004.js";import{r as Y}from"./MagnifyingGlassIcon.ef999c61.js";import{r as Z}from"./ArrowUpOnSquareIcon.eeb61b80.js";import"./nuxt-link.94dc0b4e.js";import"./HomeIcon.763152e2.js";import"./PrinterIcon.0d937996.js";import"./hidden.487babbc.js";import"./Loader.06662df2.js";const ee={components:{TransitionChild:U,TransitionRoot:P,Dialog:V,DialogPanel:j,DialogTitle:R,XMarkIcon:F},data(){return{addIcon:q,saveIcon:E,open:!1,loading:!1,cookie:D("token"),name:""}},methods:{async submitForm(){this.loading=!1;const l={route:I.facility,method:"POST",token:`${this.cookie}`,body:{name:this.name}},{data:a,error:c,pending:r}=await $(l);this.loading=r,a.value&&(w().$toast.success("Facility created successfully!"),this.$emit("update",!0),this.loading=!1,this.handleClick()),c.value&&(console.error(c.value),w().$toast.error(M),this.loading=!1)},handleClick(){this.open=!this.open}}},X=""+new URL("rural_post.92bf3f00.svg",import.meta.url).href,te=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),oe={class:"fixed inset-0 overflow-y-auto"},ae={class:"flex min-h-full items-center justify-center p-4 text-center"},ne={class:"border-b px-3 py-3 flex items-center justify-between"},se=t("img",{src:X,class:"w-8 h-8 mr-2"},null,-1),ie={class:"px-5 py-5"},le={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ce(l,a,c,r,o,i){const d=T,m=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("FormKit"),_=n("DialogPanel"),g=n("Dialog"),p=n("TransitionRoot");return k(),C("div",null,[t("div",null,[e(d,{click:i.handleClick,text:"Add facility",color:"primary",icon:o.addIcon},null,8,["click","icon"])]),e(p,{appear:"",show:o.open,as:"template"},{default:s(()=>[e(g,{as:"div",onClose:i.handleClick,class:"relative z-10"},{default:s(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[te]),_:1}),t("div",oe,[t("div",ae,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",ne,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[se,x(" Add facility ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...v)=>i.handleClick&&i.handleClick(...v))},[e(h,{class:"w-5 h-5"})])]),e(u,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:v})=>[t("div",ie,[e(u,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":a[1]||(a[1]=y=>o.name=y)},null,8,["modelValue"]),t("div",le,[e(d,{click:()=>{},type:"submit",color:"success",icon:o.saveIcon,text:"Save chages"},null,8,["icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const re=b(ee,[["render",ce]]),de={components:{TransitionRoot:P,TransitionChild:U,Dialog:V,DialogPanel:j,DialogTitle:R,XMarkIcon:F},data(){return{viewIcon:H,show:!1,editIcon:A}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},me=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ue={class:"fixed inset-0 overflow-y-auto"},pe={class:"flex min-h-full items-center justify-center p-4 text-center"},_e={class:"border-b px-3 py-3 flex items-center justify-between"},fe=t("img",{src:X,class:"w-8 h-8 mr-2"},null,-1),he={class:"px-5 py-5"},ge={class:"w-full flex flex-col space-y-2"},ve=t("label",{class:"font-medium"},"Name",-1),ye={class:"underline"};function xe(l,a,c,r,o,i){const d=T,m=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("DialogPanel"),_=n("Dialog"),g=n("TransitionRoot");return k(),C("div",null,[e(d,{click:i.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(g,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(_,{as:"div",class:"relative z-10"},{default:s(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[me]),_:1}),t("div",ue,[t("div",pe,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(u,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",_e,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[fe,x(" View facility ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...p)=>i.handleClick&&i.handleClick(...p))},[e(h,{class:"w-5 h-5"})])]),t("div",he,[t("div",ge,[ve,t("p",ye,S(c.data.name),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const we=b(de,[["render",xe]]),be={components:{TransitionRoot:P,TransitionChild:U,Dialog:V,DialogPanel:j,DialogTitle:R,XMarkIcon:F},data(){return{editIcon:A,show:!1,saveIcon:E,loading:!1,cookie:D("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const l={route:`${I.facility}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:a,error:c,data:r}=await $(l);this.loading=a,r.value&&(this.handleClick(),w().$toast.success("Specimen type updated successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(w().$toast.success(M),this.handleClick(),console.error(c.value),this.loading=!1)},handleClick(){this.show=!this.show}}},ke=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ce={class:"fixed inset-0 overflow-y-auto"},De={class:"flex min-h-full items-center justify-center p-4 text-center"},Te={class:"border-b px-3 py-3 flex items-center justify-between"},Ie=t("img",{src:X,class:"w-8 h-8 mr-2"},null,-1),$e={class:"mt-2 space-y-3"},Fe={class:"w-full flex items-center px-5"},Ue={class:"w-full flex flex-col space-y-2"},Pe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ve(l,a,c,r,o,i){const d=T,m=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("FormKit"),_=n("DialogPanel"),g=n("Dialog"),p=n("TransitionRoot");return k(),C("div",null,[e(d,{click:i.handleClick,text:"Edit",icon:o.editIcon,color:"success"},null,8,["click","icon"]),e(p,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(g,{as:"div",class:"relative z-10"},{default:s(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[ke]),_:1}),t("div",Ce,[t("div",De,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Te,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[Ie,x(" Edit facility ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...v)=>i.handleClick&&i.handleClick(...v))},[e(h,{class:"w-5 h-5"})])]),e(u,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:v})=>[t("div",$e,[t("div",Fe,[t("div",Ue,[e(u,{type:"text",label:"Name",validation:"required",modelValue:c.data.name,"onUpdate:modelValue":a[1]||(a[1]=y=>c.data.name=y)},null,8,["modelValue"])])]),t("div",Pe,[e(d,{type:"submit",click:()=>{},color:"success",loading:o.loading,icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const je=b(be,[["render",Ve]]),Re={components:{TransitionRoot:P,TransitionChild:U,Dialog:V,DialogPanel:j,DialogTitle:R,XMarkIcon:F,ExclamationTriangleIcon:K},data(){return{show:!1,deleteIcon:B,loading:!1,cookie:D("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(l){this.loading=!0;const a={route:`${I.facility}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{data:c,error:r,pending:o}=await $(a);this.loading=o,c.value&&(this.handleClick(),w().$toast.success("Facility deleted successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(console.error(r.value),w().$toast.error(M),this.loading=!1)},handleClick(){this.show=!this.show}}},Se=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Me={class:"fixed inset-0 overflow-y-auto"},Xe={class:"flex min-h-full items-center justify-center p-4 text-center"},qe={class:"border-b px-3 py-3 flex items-center justify-between"},Ee={class:"mt-2 space-y-3 px-5"},Ae={class:"rounded px-2 py-2"},Be={class:"font-semibold text-red-500"},Oe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Le(l,a,c,r,o,i){const d=T,m=n("TransitionChild"),f=n("ExclamationTriangleIcon"),h=n("DialogTitle"),u=n("XMarkIcon"),_=n("FormKit"),g=n("DialogPanel"),p=n("Dialog"),v=n("TransitionRoot");return k(),C("div",null,[e(d,{click:i.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(v,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(p,{as:"div",class:"relative z-10"},{default:s(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Se]),_:1}),t("div",Me,[t("div",Xe,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",qe,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[e(f,{class:"h-5 w-5 mr-2"}),x(" Confirm delete ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...y)=>i.handleClick&&i.handleClick(...y))},[e(u,{class:"w-5 h-5"})])]),e(_,{type:"form","submit-label":"Update",onSubmit:a[2]||(a[2]=y=>i.deleteData(c.data.id)),actions:!1},{default:s(({value:y})=>[t("div",Ee,[t("div",Ae,[x(" Do you really want to delete "),t("span",Be,S(c.data.name),1),x("? Note that once this action is completed, it can not be undone ")]),e(_,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":a[1]||(a[1]=O=>o.reason=O)},null,8,["modelValue"])]),t("div",Oe,[e(d,{loading:o.loading,type:"submit",click:()=>{},color:"error",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ne=b(Re,[["render",Le]]),Ke={components:{MagnifyingGlassIcon:Y},setup(){Q({title:`${W.name.toUpperCase()} - Facilities`})},data(){return{header:"List of facilities",pages:[{name:"Home",link:"/home"},{name:"Lab Configuration",link:"#"}],addIcon:q,deleteIcon:B,viewIcon:Z,headers:[{text:"ID",value:"id",sortable:!0},{text:"Name",value:"name",sortable:!0},{text:"Date Created",value:"created_date"},{text:"Actions",value:"actions"}],facilities:new Array,cookie:D("token"),loading:!1,searchValue:"",search:"",serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init()},methods:{async init(){this.loading=!0;const{page:l,rowsPerPage:a}=this.serverOptions,c={route:`${I.facility}?page=${l}&per_page=${a}&search=${this.search}`,method:"GET",token:`${this.cookie}`},{data:r,error:o,pending:i}=await $(c);this.loading=i,r.value&&(this.facilities=r.value.data.map(d=>({...d,created_date:z(d.created_date).format(N)})),this.serverItemsLength=r.value.meta.total_count,this.loading=!1),o.value&&(console.error(o.value),this.loading=!1)},updateFacilites(l){typeof l=="object"&&(this.serverOptions=l),this.init()},updateSearch(l){typeof l=="string"&&(this.search=l,this.searchValue=l,this.updateFacilites(!0))}}},ze={class:"py-5 px-5"},Ge={class:"flex items-center justify-between py-5"},He={class:"text-2xl font-semibold"},Je={class:"flex justify-end w-full px-2 py-2 mb-2"},Qe={class:"py-2 flex items-center space-x-2"};function We(l,a,c,r,o,i){const d=L,m=re,f=G,h=we,u=je,_=Ne,g=J;return k(),C("div",ze,[e(d,{pages:o.pages},null,8,["pages"]),t("div",Ge,[t("h3",He,S(o.header),1),e(m,{onUpdate:i.updateFacilites},null,8,["onUpdate"])]),t("div",Je,[e(f,{search:o.search,onUpdate:i.updateSearch},null,8,["search","onUpdate"])]),e(g,{headers:o.headers,data:o.facilities,loading:o.loading,"search-value":o.searchValue,"search-field":"name",serverItemsLength:o.serverItemsLength,serverOptions:o.serverOptions,onUpdate:i.updateFacilites},{actions:s(({item:p})=>[t("div",Qe,[e(h,{data:p},null,8,["data"]),e(u,{data:p,onUpdate:i.updateFacilites},null,8,["data","onUpdate"]),e(_,{data:p,onUpdate:i.updateFacilites},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value","serverItemsLength","serverOptions","onUpdate"])])}const vt=b(Ke,[["render",We]]);export{vt as default};

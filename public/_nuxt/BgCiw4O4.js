import{b as u,e as f,g as e,d as F,r as n,R as H,y as G,f as o,h as t,z as i,Y as O,p as j,G as R,V as Y,j as K,q as W,H as Z,S as J,_ as Q,o as X,t as h,W as ee,F as te,k as oe,L as ae,O as q,K as se,m as U,u as ne,l as A}from"./DnTf3NWd.js";import{_ as le}from"./CARPZD_v.js";import{r as re}from"./DFUnnXAW.js";import{_ as ie}from"./DoMwqXpy.js";import{_ as ce}from"./DSytGDlh.js";import{_ as ue}from"./ZfS1jsdp.js";import{u as de}from"./7r6JrniE.js";import{u as me}from"./BVRlufMU.js";import{P as L}from"./BoMgRSy8.js";import{u as pe}from"./Bvzx1zWI.js";import{I as fe,j as ve,A as _e,F as xe}from"./WltjxLmA.js";import{u as ye}from"./mHvkefY9.js";import"./BhIICg8V.js";import"./h7knjDhA.js";import"./BLLOd8LX.js";import"./1eaZyNWU.js";import"./yvghsNpl.js";function ge(v,c){return u(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.47 2.47a.75.75 0 0 1 1.06 0l8.407 8.407a1.125 1.125 0 0 1 1.186 1.186l1.462 1.461a3.001 3.001 0 0 0-.464-3.645.75.75 0 1 1 1.061-1.061 4.501 4.501 0 0 1 .486 5.79l1.072 1.072a6.001 6.001 0 0 0-.497-7.923.75.75 0 0 1 1.06-1.06 7.501 7.501 0 0 1 .505 10.05l1.064 1.065a9 9 0 0 0-.508-12.176.75.75 0 0 1 1.06-1.06c3.923 3.922 4.093 10.175.512 14.3l1.594 1.594a.75.75 0 1 1-1.06 1.06l-2.106-2.105-2.121-2.122h-.001l-4.705-4.706a.747.747 0 0 1-.127-.126L2.47 3.53a.75.75 0 0 1 0-1.061Zm1.189 4.422a.75.75 0 0 1 .326 1.01 9.004 9.004 0 0 0 1.651 10.462.75.75 0 1 1-1.06 1.06C1.27 16.12.63 11.165 2.648 7.219a.75.75 0 0 1 1.01-.326ZM5.84 9.134a.75.75 0 0 1 .472.95 6 6 0 0 0 1.444 6.159.75.75 0 0 1-1.06 1.06A7.5 7.5 0 0 1 4.89 9.606a.75.75 0 0 1 .95-.472Zm2.341 2.653a.75.75 0 0 1 .848.638c.088.62.37 1.218.849 1.696a.75.75 0 0 1-1.061 1.061 4.483 4.483 0 0 1-1.273-2.546.75.75 0 0 1 .637-.848Z","clip-rule":"evenodd"})])}function T(v,c){return u(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.636 4.575a.75.75 0 0 1 0 1.061 9 9 0 0 0 0 12.728.75.75 0 1 1-1.06 1.06c-4.101-4.1-4.101-10.748 0-14.849a.75.75 0 0 1 1.06 0Zm12.728 0a.75.75 0 0 1 1.06 0c4.101 4.1 4.101 10.75 0 14.85a.75.75 0 1 1-1.06-1.061 9 9 0 0 0 0-12.728.75.75 0 0 1 0-1.06ZM7.757 6.697a.75.75 0 0 1 0 1.06 6 6 0 0 0 0 8.486.75.75 0 0 1-1.06 1.06 7.5 7.5 0 0 1 0-10.606.75.75 0 0 1 1.06 0Zm8.486 0a.75.75 0 0 1 1.06 0 7.5 7.5 0 0 1 0 10.606.75.75 0 0 1-1.06-1.06 6 6 0 0 0 0-8.486.75.75 0 0 1 0-1.06ZM9.879 8.818a.75.75 0 0 1 0 1.06 3 3 0 0 0 0 4.243.75.75 0 1 1-1.061 1.061 4.5 4.5 0 0 1 0-6.364.75.75 0 0 1 1.06 0Zm4.242 0a.75.75 0 0 1 1.061 0 4.5 4.5 0 0 1 0 6.364.75.75 0 0 1-1.06-1.06 3 3 0 0 0 0-4.243.75.75 0 0 1 0-1.061ZM10.875 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z","clip-rule":"evenodd"})])}function we(v,c){return u(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function he(v,c){return u(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z","clip-rule":"evenodd"})])}const be={class:"fixed inset-0 overflow-y-auto"},Ce={class:"flex min-h-full items-center justify-center p-4 text-center"},ke={class:"border-b px-3 py-3 flex items-center justify-between"},Ve={class:"mt-2 space-y-3 px-5"},$e={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"},Ze=F({__name:"index",props:{isConnected:{required:!0,type:Boolean,default:!1}},setup(v){const c=n(!1),_=n(!1),{updateNetwork:d,ip:x,port:k}=H(),y=v,g=n(x),b=n(k),w=()=>{_.value=!_.value},B=async()=>{await d(g.value,b.value),w(),window.location.reload()};return(V,s)=>{const m=Q,C=G("FormKit"),P=le;return u(),f("div",null,[o(m,{text:"Network Configuration",color:y.isConnected?"success":"error",icon:V.$props.isConnected?t(T):t(ge),click:w},null,8,["color","icon"]),o(t(J),{appear:"",show:t(_),as:"template"},{default:i(()=>[o(t(O),{as:"div",class:"relative z-10"},{default:i(()=>[o(t(j),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>s[2]||(s[2]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),e("div",be,[e("div",Ce,[o(t(j),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[o(t(R),{class:"w-full max-w-xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[e("div",ke,[o(t(Y),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[o(t(T),{class:"h-5 w-5 mr-2"}),s[3]||(s[3]=K(" Configure Network "))]),_:1}),e("button",{onClick:w},[o(t(W),{class:"w-5 h-5"})])]),o(C,{type:"form","submit-label":"Update",onSubmit:B,actions:!1},{default:i(({value:M})=>[e("div",Ve,[s[4]||(s[4]=e("div",{class:"px-3 py-3 border-l-4 border-sky-500 shadow"}," Please make sure you enter the correct IBLIS API IP Address and the port that it is running. This page will refresh after updating changes. ",-1)),o(C,{type:"text",label:"IP Address",modelValue:t(g),"onUpdate:modelValue":s[0]||(s[0]=$=>Z(g)?g.value=$:null),validation:"required|string"},null,8,["modelValue"]),o(C,{type:"number",label:"Port",modelValue:t(b),"onUpdate:modelValue":s[1]||(s[1]=$=>Z(b)?b.value=$:null),validation:"required|number"},null,8,["modelValue"])]),e("div",$e,[o(P,{type:"button",click:()=>{w()},text:"Cancel"},null,8,["click"]),o(m,{loading:t(c),type:"submit",click:()=>{},color:"success",icon:t(re),text:"Update"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),Be={class:"my-20"},Ie={class:"mx-auto max-w-sm bg-white border rounded mt-10"},Le={class:"px-2 py-2 flex items-center justify-between"},Pe={class:"rounded bg-gray-100 py-1 px-2.5 border border-gray-50 text-sm flex items-center text-gray-500"},Se={class:"px-16 py-5 flex flex-col items-center"},Ue={class:"mt-5 w-full text-3xl font-bold text-sky-500 text-center uppercase"},Ae={class:"mt-3 text-xl font-medium text-center"},Fe={class:"space-y-2 px-5 py-3"},Me={class:"space-y-2 px-5 mb-5"},Ne={class:"relative mt-1"},je={class:"block truncate"},qe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Te={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-sky-600"},Ge={class:"px-5 mb-5"},Ke={class:"mt-5 flex flex-col space-y-2 items-center justify-center"},De={class:"text-center text-gray-500"},Ee=F({__name:"Login",emits:["connection"],setup(v,{emit:c}){const _=n(L.name),d=n(""),x=n(""),k=n(!1),y=n(!1),g=n(""),b=n(L.version),w=n("-:-"),B=n(new Array),{start:V,finish:s}=pe(),m=n({name:"select department",id:0}),C=c,P=(l,a)=>{l.props.suffixIcon=l.props.suffixIcon==="eyeClosed"?"eyeOpen":"eyeClosed",l.props.type=l.props.type==="password"?"text":"password"};async function M(){const{fetchFacility:l,details:a}=me(),r={route:A.global,method:"GET"},{data:I,error:S}=await U(r);S.value&&console.error(S.value),I.value&&(l(I.value),g.value=a.name)}async function $(){V();const l={route:`${A.global}/current_api_tag`,method:"GET"},{data:a,error:r}=await U(l);a.value&&(w.value=a.value.git_tag,C("connection",!0),s()),r.value&&(console.error(r.value),C("connection",!1),s())}async function D(){V();const l={route:A.departments,method:"GET"},{data:a,error:r}=await U(l);a.value&&(B.value=a.value,s()),r.value&&(console.error(r.value),s())}async function E(){V();const{authenticateUser:l,removeUser:a}=de();a();let r={username:d.value,password:x.value,department:m.value.name};m.value.name!=="select department"?(y.value=!0,await l(r),y.value=!1,s()):(ne().$toast.warning("Please select a department!"),s())}return X(async()=>{await $(),await D(),await M()}),(l,a)=>{const r=G("FormKit"),I=ie;return u(),f("div",Be,[e("div",Ie,[e("div",null,[e("div",Le,[e("div",Pe,[a[3]||(a[3]=e("img",{src:ce,class:"w-5 h-5 text-red-500",alt:"git-tag-icon/"},null,-1)),K(" "+h(t(b))+" / "+h(t(w)),1)])]),e("div",Se,[a[4]||(a[4]=e("img",{src:ue,alt:"app-logo",class:"w-28 h-28 object-cover"},null,-1)),e("div",Ue,h(t(_)),1),e("h3",Ae,h(t(g)),1)]),o(r,{type:"form","submit-label":"Update",onSubmit:E,actions:!1},{default:i(({value:S})=>[e("div",Fe,[o(r,{type:"text",label:"Username",modelValue:t(d),"onUpdate:modelValue":a[0]||(a[0]=p=>Z(d)?d.value=p:null),validation:"required"},null,8,["modelValue"]),o(r,{type:t(k)?"text":"password",label:"Password",modelValue:t(x),"onUpdate:modelValue":a[1]||(a[1]=p=>Z(x)?x.value=p:null),validation:"required","suffix-icon":"eyeClosed",onSuffixIconClick:P,"suffix-icon-class":"hover:text-blue-500",classes:{label:"font-medium formkit-invalid:text-red-500 mb-4",input:"w-full text-gray-600 border px-1.5 py-1.5 rounded focus:ring-none focus:outline-none mt-2",message:"text-red-500 text-sm mt-1",outer:"w-full",inner:"relative",suffixIcon:"w-6 h-6 absolute right-2 top-7 transform -translate-y-1/2 text-gray-400"}},null,8,["type","modelValue"])]),e("div",Me,[a[5]||(a[5]=e("label",{class:"font-medium text-base"}," Laboratory Section ",-1)),o(t(fe),{modelValue:t(m),"onUpdate:modelValue":a[2]||(a[2]=p=>Z(m)?m.value=p:null)},{default:i(()=>[e("div",Ne,[o(t(ve),{class:"relative w-full cursor-default rounded border py-2.5 pl-3 pr-10 text-left focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-none sm:text-sm"},{default:i(()=>[e("span",je,h(t(m).name),1),e("span",qe,[o(t(he),{class:"h-5 w-5 text-gray-500","aria-hidden":"true"})])]),_:1}),o(ee,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[o(t(_e),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-2 text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(u(!0),f(te,null,oe(t(B),p=>(u(),ae(t(xe),{key:p.name,value:p,as:"template"},{default:i(({active:z,selected:N})=>[e("li",{class:q([z?"bg-gray-50":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[e("span",{class:q([N?"font-medium":"font-normal","block truncate"])},h(p.name),3),N?(u(),f("span",Te,[o(t(we),{class:"h-5 w-5","aria-hidden":"true"})])):se("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),e("div",Ge,[o(I,{color:"primary",type:"submit",text:"Login",loading:t(y)},null,8,["loading"])])]),_:1})])]),e("div",Ke,[e("p",De," Malawi Ministry of Health © "+h(new Date().getFullYear()),1)])])}}}),ze={class:"w-full flex items-center justify-end p-3"},ct=F({__name:"index",setup(v){ye({title:`${L.name.toUpperCase()} - ${L.version}`});const c=n(!1),_=d=>{c.value=d};return(d,x)=>{const k=Ze,y=Ee;return u(),f("div",null,[e("div",ze,[o(k,{isConnected:t(c)},null,8,["isConnected"])]),o(y,{onConnection:_})])}}});export{ct as default};

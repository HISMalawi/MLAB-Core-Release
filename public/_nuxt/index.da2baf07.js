import{_ as re}from"./Breadcrumb.vue.67061972.js";import{u as M,a as E,_ as P,f as c,o as p,c as f,d as e,b as s,g as d,h as R,w as O,U as H,v as $,F as I,r as S,t as y,T as ce,p as J,n as Q,j as U,k as Z,e as F}from"./entry.439009d7.js";import{r as de,_ as ue}from"./Dropdown.6f9d5012.js";import{_ as me}from"./OutlinedButton.1cdc8a8d.js";import{e as ee,s as pe,d as _e}from"./constants.b3411291.js";import{r as he,e as C,f as D,c as Y,h as fe,a as ge}from"./fetch.82daa61e.js";import{r as j}from"./XMarkIcon.7a9343f0.js";import{r as xe}from"./UserIcon.e2d9539b.js";import{r as ye}from"./CheckCircleIcon.81c437c8.js";import{r as ve}from"./InformationCircleIcon.de2983f8.js";import{r as be}from"./ArrowDownTrayIcon.700e0c75.js";import{r as we}from"./ArrowUturnLeftIcon.3335e10b.js";import{S as B,h as W,U as G,G as X,V as K}from"./transition.f2756ed4.js";import{B as ke,K as Te,N as Ve,H as Ce,U as De}from"./listbox.1ba3a145.js";import{_ as te}from"./cone_test_on_nets.51c450f2.js";import{_ as Ue}from"./SearchBar.f97a2703.js";import{_ as Ie}from"./Loader.fdcb8d74.js";import{r as Se,a as Re}from"./PencilSquareIcon.03aeeb33.js";import{r as Ae}from"./TrashIcon.76dcbe10.js";import{_ as Le}from"./Datatable.d04cc546.js";import{u as qe}from"./vue.f36acd1f.fa639f1e.js";import{P as Oe}from"./package.47b8853b.js";import{r as Ee}from"./MagnifyingGlassIcon.dfe70d0e.js";import"./nuxt-link.a9a7724a.js";import"./HomeIcon.658f0e90.js";import"./CheckIcon.56eab11f.js";import"./PrinterIcon.29534f2c.js";import"./hidden.3f41b6c9.js";import"./use-text-value.129f4b02.js";const Me={components:{TransitionRoot:B,TransitionChild:W,Dialog:G,DialogPanel:X,DialogTitle:K,Listbox:ke,ListboxLabel:Te,ListboxButton:Ve,ListboxOptions:Ce,ListboxOption:De,XMarkIcon:j,UserIcon:xe,CheckCircleIcon:ye,InformationCircleIcon:ve,ChevronUpDownIcon:de},data(){return{open:!1,addIcon:he,saveIcon:be,clearIcon:we,loadingSpecimens:!1,showMeasures:!1,measures:1,ranges:0,indicators:[{name:"",test_indicator_type:0,unit:"",description:"",indicator_ranges:new Array}],numericRange:{id:0,max_age:0,min_age:0,lower_range:0,upper_range:0,gender:{name:"-- select gender --"},interpretation:""},autocompleteRange:{id:1,value:"",interpretation:""},name:"",shortName:"",turnAroundTime:"",measureTypes:Array(),measureSelected:{name:"-- Select measure --",id:0},loading:!1,rawOrganisms:new Array,organisms:new Array,organismsSelected:new Array,cookie:M("token"),rawSpecimens:new Array,specimens:new Array,specimensSelected:new Array,departments:new Array,measureType:"",selectedDepartment:"-- select department --",showCultureWorksheet:!1,shouldPrintResults:!1,timeTypes:new Array({name:"Month"},{name:"Weeks"},{name:"Days"},{name:"Hours"},{name:"Minutes"}),timeType:{name:"-- select value --"}}},methods:{async init(){await this.loadDepartments(),await this.loadTestTypeIndicators(),await this.loadOrganisms(),this.handleClick();const n={route:C.specimens,method:"GET",token:`${this.cookie}`,body:{}};let{data:o,error:r,pending:u}=await D(n);this.loadingSpecimens=u,o.value&&(this.rawSpecimens=o.value,o.value.map(t=>{this.specimens.push(t.name)})),r.value&&console.error(r.value)},async loadDepartments(){const n={route:C.departments,method:"GET",token:`${this.cookie}`};let{data:o,error:r,pending:u}=await D(n);o.value&&(this.departments=o.value),r.value&&console.error(r.value)},async loadOrganisms(){const n={route:C.organisms,method:"GET",token:`${this.cookie}`};let{data:o,error:r}=await D(n);o.value&&(this.rawOrganisms=o.value,o.value.map(u=>{this.organisms.push(u.name)})),r.value&&console.error(r.value)},async loadTestTypeIndicators(){const n={route:`${C.testTypes}/test_indicator_types/`,method:"GET",token:`${this.cookie}`};let{data:o,error:r,pending:u}=await D(n);o.value&&(this.measureTypes=o.value,this.measureType=this.measureSelected.name),r.value&&console.error(r.value)},handleClick(){this.open=!this.open},getEmitedDepartment(n){this.selectedDepartment=n.name},addMeasure(){this.indicators.push({name:"",test_indicator_type:0,unit:"",description:"",indicator_ranges:[],value:"",id:""})},addRange(n){try{const r=this.indicators[n].indicator_ranges;let u=0;if(r.length>0){const _=r.length-1;u=r[_].id}const a={id:u&&u+1,interpretation:""};this.measureSelected.name.toLowerCase().includes("numeric")?(a.age_max=0,a.age_min=0,a.upper_range=0,a.lower_range=0,a.gender={name:"-- select gender --"}):(this.measureSelected.name.toLowerCase()=="auto complete"||this.measureSelected.name.toLowerCase().includes("alpha"))&&(a.value=""),r.push(a)}catch(o){console.error("Error: ",o)}},removeRange(n,o){this.indicators[n].indicator_ranges.splice(o,1)},async submitForm(){this.loading=!0;const n=this.indicators.map(g=>{const v=g.indicator_ranges.map(x=>{if(x.hasOwnProperty("gender")){const{gender:m,...w}=x;return{...w,sex:m.name}}else return x});return{...g,indicator_ranges:v}}),o=this.departments.find(g=>g.name===this.selectedDepartment),r=o?o.id:void 0,u={route:C.testTypes,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName,expected_turn_around_time:{value:this.turnAroundTime,unit:this.timeType.name},print_device:this.shouldPrintResults,department_id:r,specimens:Y(this.rawSpecimens,this.specimensSelected),indicators:n,organisms:Y(this.rawOrganisms,this.organismsSelected)}},{data:t,error:a,pending:_}=await D(u);this.loading=_,t.value&&(this.handleClick(),E().$toast.success("Test type created successfully!"),this.invalidateForm(),this.$emit("update",!0)),a.value&&(console.error(a.value),E().$toast.error(ee),this.handleClick())},addNumericRange(n){n.name.toLowerCase()=="numeric"&&this.indicators.map(o=>{o.indicator_ranges.push(this.numericRange)})},addAutocompleteRange(n){n.name.toLowerCase()==="auto complete"&&this.indicators.map(o=>{o.indicator_ranges.push(this.autocompleteRange)})},invalidateForm(){this.$formkit.reset("submitForm")}},watch:{measureSelected:{handler(n){n.name=="Auto Complete"?this.addAutocompleteRange(n):this.addNumericRange(n)},deep:!0}}},Pe=e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50"},null,-1),Fe={class:"fixed inset-0 overflow-y-auto"},Ne={class:"flex min-h-full items-center justify-center p-4 text-center"},$e={class:"border-b px-3 py-3 flex items-center justify-between"},je=e("img",{src:te,class:"w-8 h-8 mr-2"},null,-1),Be={class:"mt-2 space-y-3"},We={class:"grid grid-cols-2 gap-4 px-5"},Ge={class:"w-full flex px-5"},Xe={class:"py-1 ml-2"},Ke=e("label",{class:"font-medium text-base"},"Duration",-1),ze={class:"w-full px-5 flex items-center space-x-2"},He=e("label",{for:"showCultureWorksheet"},"Show Culture Worksheet?",-1),Je={class:"w-full flex flex-col space-y-2 px-5"},Qe=e("label",{class:"font-medium"},"Organisms",-1),Ye={class:"w-full flex flex-col space-y-2 px-5"},Ze=e("label",{class:"font-medium"},"Specimens",-1),et={class:"w-full px-5 flex items-center space-x-2"},tt=e("label",{for:"shouldPrintResults"},"Print Results On Small Label?",-1),ot={class:"w-full flex items-center px-5"},st={class:"w-full flex flex-col space-y-2"},nt=e("label",{class:"font-medium"},"Lab section",-1),at={class:"w-full flex px-5"},lt={class:"py-3 flex items-center justify-between"},it={class:"text-lg text-grameasuresy-700 font-semibold"},rt=["onClick"],ct={class:"grid grid-cols-4 gap-2 mb-3"},dt=e("label",{class:"font-medium pb-2"},"Type",-1),ut={hidden:""},mt={class:"relative mt-1"},pt={class:"block truncate"},_t={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},ht={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-500"},ft={class:"flex items-center justify-center space-x-3"},gt={class:"grid grid-cols-2 gap-2"},xt={class:""},yt=e("label",{class:"mb-2 text-lg font-semibold text-gray-600"},"Age Range",-1),vt={class:"grid grid-cols-2 gap-2"},bt={class:""},wt=e("label",{class:"mb-2 text-lg font-semibold text-gray-600"},"Measure Range",-1),kt={class:"grid grid-cols-2 gap-2"},Tt=["onClick"],Vt={class:"w-full flex items-center justify-center space-x-2"},Ct={class:"w-full grid grid-cols-2 gap-4"},Dt=["onClick"],Ut={key:3,class:"flex items-center px-3 py-3 rounded bg-sky-50 mt-3 text-sky-500"},It={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function St(n,o,r,u,t,a){const _=F,g=c("TransitionChild"),v=c("DialogTitle"),x=c("XMarkIcon"),m=c("FormKit"),w=ue,k=c("multi-select"),T=c("ChevronUpDownIcon"),A=c("ListboxButton"),V=c("CheckCircleIcon"),b=c("ListboxOption"),N=c("ListboxOptions"),oe=c("Listbox"),se=c("InformationCircleIcon"),ne=me,ae=c("DialogPanel"),le=c("Dialog"),ie=c("TransitionRoot");return p(),f("div",null,[e("div",null,[s(_,{text:"New test type",color:"primary",icon:t.addIcon,click:a.init},null,8,["icon","click"])]),s(ie,{appear:"",show:t.open,as:"template"},{default:d(()=>[s(le,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:d(()=>[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[Pe]),_:1}),e("div",Fe,[e("div",Ne,[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[s(ae,{class:"w-full max-w-5xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[e("div",$e,[s(v,{as:"h3",class:"text-lg text-black flex items-center font-semibold leading-6"},{default:d(()=>[je,R(" Create Test Type ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...z)=>a.handleClick&&a.handleClick(...z))},[s(x,{class:"w-5 h-5"})])]),s(m,{id:"submitForm",type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:d(({value:z})=>[e("div",Be,[e("div",We,[s(m,{type:"text",label:"Name",validation:"required",modelValue:t.name,"onUpdate:modelValue":o[1]||(o[1]=l=>t.name=l)},null,8,["modelValue"]),s(m,{type:"text",label:"Short name",validation:"required",modelValue:t.shortName,"onUpdate:modelValue":o[2]||(o[2]=l=>t.shortName=l)},null,8,["modelValue"])]),e("div",Ge,[s(m,{type:"number",label:"Expected Turn Around Time",validation:"required|number",modelValue:t.turnAroundTime,"onUpdate:modelValue":o[3]||(o[3]=l=>t.turnAroundTime=l)},null,8,["modelValue"]),e("div",Xe,[Ke,s(w,{items:t.timeTypes,modelValue:t.timeType,"onUpdate:modelValue":o[4]||(o[4]=l=>t.timeType=l)},null,8,["items","modelValue"])])]),e("div",ze,[O(e("input",{id:"showCultureWorksheet",name:"showCultureWorksheet",type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=l=>t.showCultureWorksheet=l)},null,512),[[H,t.showCultureWorksheet]]),He]),O(e("div",Je,[Qe,s(k,{style:{"--ms-max-height":"none !important"},modelValue:t.organismsSelected,"onUpdate:modelValue":o[6]||(o[6]=l=>t.organismsSelected=l),options:t.organisms,mode:"tags",required:!1,clear:"",searchable:"",class:"focus:ring-none focus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])],512),[[$,t.showCultureWorksheet]]),e("div",Ye,[Ze,s(k,{style:{"--ms-max-height":"none !important"},modelValue:t.specimensSelected,"onUpdate:modelValue":o[7]||(o[7]=l=>t.specimensSelected=l),options:t.specimens,mode:"tags",required:"",searchable:"",clear:"",class:"focus:ring-none focus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])]),e("div",et,[O(e("input",{id:"shouldPrintResults",name:"shouldPrintResults",type:"checkbox","onUpdate:modelValue":o[8]||(o[8]=l=>t.shouldPrintResults=l)},null,512),[[H,t.shouldPrintResults]]),tt]),e("div",ot,[e("div",st,[nt,s(k,{style:{"--ms-max-height":"none !important"},modelValue:t.selectedDepartment,"onUpdate:modelValue":o[9]||(o[9]=l=>t.selectedDepartment=l),options:t.departments.map(l=>l.name),single:"",required:"",searchable:"",clear:"",class:"focus:ring-none focus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),e("div",at,[s(_,{click:()=>{a.addMeasure()},color:"primary",text:"Add Measure",icon:t.addIcon},null,8,["click","icon"])]),t.indicators.length!=0?(p(!0),f(I,{key:0},S(t.indicators,(l,L)=>(p(),f("div",{key:L,class:"border px-5 mx-5 py-3 rounded"},[e("div",lt,[e("h3",it," Measures ("+y(L+1)+") ",1),e("button",{onClick:()=>{t.indicators.splice(L,1)}},[s(x,{class:"w-5 h-5"})],8,rt)]),e("div",ct,[s(m,{type:"text",label:"Name",validation:"required",modelValue:l.name,"onUpdate:modelValue":i=>l.name=i},null,8,["modelValue","onUpdate:modelValue"]),e("div",null,[dt,e("div",ut,y(l.test_indicator_type=t.measureSelected.id),1),s(oe,{modelValue:t.measureSelected,"onUpdate:modelValue":o[10]||(o[10]=i=>t.measureSelected=i)},{default:d(()=>[e("div",mt,[s(A,{class:"relative w-full cursor-default rounded border py-2 pl-3 pr-10 text-left focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-none sm:text-sm"},{default:d(()=>[e("span",pt,y(t.measureSelected.name),1),e("span",_t,[s(T,{class:"h-5 w-5 text-gray-500","aria-hidden":"true"})])]),_:1}),s(ce,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:d(()=>[s(N,{style:{"z-index":"10000"},class:"absolute mt-1 w-full max-h-96 overflow-auto rounded-md bg-white py-1 text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm drop-shadow-md divide-y divide-slate-100"},{default:d(()=>[(p(!0),f(I,null,S(t.measureTypes,i=>(p(),J(b,{key:i.name,value:i,as:"template"},{default:d(({active:q,selected:h})=>[e("li",{class:Q([q?"bg-green-100 text-green-500":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[e("span",{class:Q([h?"font-medium":"font-normal","block truncate"])},y(i.name),3),h?(p(),f("span",ht,[s(V,{class:"h-5 w-5","aria-hidden":"true"})])):U("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),s(m,{type:"text",label:"Unit",modelValue:l.unit,"onUpdate:modelValue":i=>l.unit=i},null,8,["modelValue","onUpdate:modelValue"]),s(m,{type:"text",label:"Description",modelValue:l.description,"onUpdate:modelValue":i=>l.description=i},null,8,["modelValue","onUpdate:modelValue"])]),t.measureSelected.name!=="Free Text"?(p(),J(_,{key:0,type:"button",click:()=>{a.addRange(L)},color:"primary",text:"Add New Range",icon:t.addIcon},null,8,["click","icon"])):U("",!0),l.indicator_ranges.length>0&&t.measureSelected.name==="Numeric"?(p(!0),f(I,{key:1},S(l.indicator_ranges,(i,q)=>(p(),f("div",{class:"px-3 py-3",key:i.id},[e("div",ft,[e("div",gt,[e("div",xt,[yt,e("div",vt,[s(m,{type:"number",label:"Minimum",validation:"required",modelValue:i.min_age,"onUpdate:modelValue":h=>i.min_age=h},null,8,["modelValue","onUpdate:modelValue"]),s(m,{type:"number",label:"Maximum",validation:"required",modelValue:i.max_age,"onUpdate:modelValue":h=>i.max_age=h},null,8,["modelValue","onUpdate:modelValue"]),s(w,{modelValue:i.gender,"onUpdate:modelValue":h=>i.gender=h,items:"sex"in n?n.sex:Z(pe)},null,8,["modelValue","onUpdate:modelValue","items"])])]),e("div",bt,[wt,e("div",kt,[s(m,{type:"number",number:"",step:"any",label:"Minimum",validation:"required|required",modelValue:i.upper_range,"onUpdate:modelValue":h=>i.upper_range=h},null,8,["modelValue","onUpdate:modelValue"]),s(m,{type:"number",number:"",step:"any",label:"Maximum",validation:"required|required",modelValue:i.lower_range,"onUpdate:modelValue":h=>i.lower_range=h},null,8,["modelValue","onUpdate:modelValue"])])]),s(m,{type:"text",label:"Interpretation",validation:"required",modelValue:i.interpretation,"onUpdate:modelValue":h=>i.interpretation=h},null,8,["modelValue","onUpdate:modelValue"])]),e("button",{onClick:h=>a.removeRange(L,q)},[s(x,{class:"w-5 h-5"})],8,Tt)])]))),128)):U("",!0),l.indicator_ranges.length>0&&t.measureSelected.name=="Auto Complete"||t.measureSelected.name==="Alpha Numeric"?(p(!0),f(I,{key:2},S(l.indicator_ranges,(i,q)=>(p(),f("div",{class:"px-3 py-3",key:i.id},[e("div",Vt,[e("div",Ct,[s(m,{type:"text",label:"Value",validation:"required",modelValue:i.value,"onUpdate:modelValue":h=>i.value=h},null,8,["modelValue","onUpdate:modelValue"]),s(m,{type:"text",label:"Interpretation",validation:"required",modelValue:i.interpretation,"onUpdate:modelValue":h=>i.interpretation=h},null,8,["modelValue","onUpdate:modelValue"])]),e("button",{onClick:h=>a.removeRange(L,q),class:"h-full bg-red-500 flex items-center justify-center rounded text-white px-4 py-2 mt-2"},[s(x,{class:"w-5 h-5"})],8,Dt)])]))),128)):U("",!0),t.measureSelected.name==="Free Text"?(p(),f("div",Ut,[s(se,{class:"w-5 h-5 mr-2"}),R(" A text box will appear for results entry ")])):U("",!0)]))),128)):U("",!0)]),e("div",It,[s(ne,{type:"button",click:()=>{a.invalidateForm()},text:"Clear form"},null,8,["click"]),s(_,{type:"submit",click:()=>{},loading:t.loading,color:"success",icon:t.saveIcon,text:"Save Changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const Rt=P(Me,[["render",St]]),At={components:{TransitionRoot:B,TransitionChild:W,Dialog:G,DialogPanel:X,DialogTitle:K,XMarkIcon:j},data(){return{viewIcon:Se,show:!1,moment:fe,loading:!1,details:{name:"",short_name:"",department_id:{id:0,name:""},specimens:{id:0,name:"",expected_turn_around_time:"",created_date:""}}}},setup(){return{cookie:M("token")}},props:{data:{type:Object,required:!0}},methods:{async init(){this.handleClick(),this.loading=!0;const n={route:`${C.viewTestType}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:o,error:r,pending:u}=await D(n);this.loading=u,o.value&&(this.details=o.value,this.loading=!1),r.value&&(this.loading=!1,E().$toast.error("An error occurred, please try again!"))},handleClick(){this.show=!this.show}}},Lt=e("div",{class:"fixed inset-0 bg-black bg-opacity-50"},null,-1),qt={class:"fixed inset-0 overflow-y-auto"},Ot={class:"flex min-h-full items-center justify-center p-4 text-center"},Et={class:"border-b px-3 py-3 flex items-center justify-between"},Mt=e("img",{src:te,class:"w-8 h-8 mr-2"},null,-1),Pt={class:"flex items-center justify-center mx-auto my-20"},Ft={class:"space-y-3 px-5 py-5"},Nt={class:"w-full flex flex-col space-y-1"},$t=e("label",{class:"font-semibold text-lg"},"Name",-1),jt={class:"w-full flex flex-col space-y-1"},Bt=e("label",{class:"font-semibold text-lg"},"Short Name",-1),Wt={class:"w-full flex flex-col space-y-1"},Gt=e("label",{class:"font-semibold text-lg"},"Laboratory Section",-1),Xt={class:"w-full flex flex-col space-y-1"},Kt=e("label",{class:"font-semibold text-lg"},"Compatible Specimen",-1),zt={class:"flex flex-wrap gap-2"},Ht={class:"w-full flex flex-col space-y-1"},Jt=e("label",{class:"font-semibold text-lg"},"Organisms",-1),Qt={class:"flex flex-wrap gap-2"},Yt={key:0},Zt={class:"w-full flex flex-col space-y-1"},eo=e("label",{class:"font-semibold text-lg"},"Measure",-1),to={class:"w-full flex flex-col space-y-1"},oo=e("label",{class:"font-semibold text-lg"},"Expected Turn Around Time",-1),so={class:"w-full flex flex-col space-y-1"},no=e("label",{class:"font-semibold text-lg"},"Date Created",-1);function ao(n,o,r,u,t,a){const _=F,g=c("TransitionChild"),v=c("DialogTitle"),x=c("XMarkIcon"),m=Ie,w=c("DialogPanel"),k=c("Dialog"),T=c("TransitionRoot");return p(),f("div",null,[s(_,{click:a.init,color:"primary",text:"View",icon:t.viewIcon},null,8,["click","icon"]),s(T,{appear:"",show:t.show,as:"template"},{default:d(()=>[s(k,{as:"div",class:"relative z-10"},{default:d(()=>[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[Lt]),_:1}),e("div",qt,[e("div",Ot,[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[s(w,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>{var A,V;return[e("div",Et,[s(v,{as:"h3",class:"text-lg flex items-center font-semibold leading-6"},{default:d(()=>[Mt,R(" Test Type Details ")]),_:1}),e("button",{onClick:o[0]||(o[0]=()=>{a.handleClick()})},[s(x,{class:"w-5 h-5"})])]),O(e("div",Pt,[s(m,{loading:t.loading},null,8,["loading"])],512),[[$,t.loading]]),O(e("div",Ft,[e("div",Nt,[$t,e("p",null,y(t.details.name),1)]),e("div",jt,[Bt,e("p",null,y(t.details.short_name),1)]),e("div",Wt,[Gt,e("p",null,y(t.details.department_id.name),1)]),e("div",Xt,[Kt,e("div",zt,[(p(!0),f(I,null,S(t.details.specimens,b=>(p(),f("p",{key:b},y(`${b.name}`),1))),128))])]),e("div",Ht,[Jt,e("div",Qt,[(p(!0),f(I,null,S(t.details.organisms,(b,N)=>(p(),f("p",{key:b},[R(y(`${b.name}`),1),N!==t.details.organisms.length-1?(p(),f("span",Yt,",")):U("",!0)]))),128))])]),e("div",Zt,[eo,(p(!0),f(I,null,S(t.details.indicators,b=>(p(),f("p",{key:b},y(`${b.name}`),1))),128))]),e("div",to,[oo,e("p",null,y(`${(A=t.details.expected_turn_around_time)==null?void 0:A.value} ${(V=t.details.expected_turn_around_time)==null?void 0:V.unit}`),1)]),e("div",so,[no,e("p",null,y(t.moment(t.details.created_date).format("dateFormat"in n?n.dateFormat:Z(_e))),1)])],512),[[$,!t.loading]])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const lo=P(At,[["render",ao]]),io={components:{TransitionRoot:B,TransitionChild:W,Dialog:G,DialogPanel:X,DialogTitle:K,XMarkIcon:j,ExclamationTriangleIcon:ge},data(){return{show:!1,deleteIcon:Ae,loading:!1,cookie:M("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(n){this.loading=!0;const o={route:`${C.testTypes}/${n}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{data:r,error:u,pending:t}=await D(o);this.loading=t,r.value&&(this.handleClick(),E().$toast.success(`${this.data.name} test type deleted successfully!`),this.loading=!1,this.$emit("update",!0)),u.value&&(console.error(u.value),E().$toast.error(ee),this.loading=!1)},handleClick(){this.show=!this.show}}},ro=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),co={class:"fixed inset-0 overflow-y-auto"},uo={class:"flex min-h-full items-center justify-center p-4 text-center"},mo={class:"border-b px-3 py-3 flex items-center justify-between"},po={class:"mt-2 space-y-3 px-5"},_o={class:"rounded px-2 py-2"},ho={class:"font-semibold text-red-500"},fo={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function go(n,o,r,u,t,a){const _=F,g=c("TransitionChild"),v=c("ExclamationTriangleIcon"),x=c("DialogTitle"),m=c("XMarkIcon"),w=c("FormKit"),k=c("DialogPanel"),T=c("Dialog"),A=c("TransitionRoot");return p(),f("div",null,[s(_,{click:a.handleClick,color:"error",text:"Delete",icon:t.deleteIcon},null,8,["click","icon"]),s(A,{appear:"",show:t.show,as:"template"},{default:d(()=>[s(T,{as:"div",class:"relative z-10"},{default:d(()=>[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[ro]),_:1}),e("div",co,[e("div",uo,[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[s(k,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[e("div",mo,[s(x,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:d(()=>[s(v,{class:"h-5 w-5 mr-2"}),R(" Confirm delete ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...V)=>a.handleClick&&a.handleClick(...V))},[s(m,{class:"w-5 h-5"})])]),s(w,{type:"form","submit-label":"Update",onSubmit:o[2]||(o[2]=V=>a.deleteData(r.data.id)),actions:!1},{default:d(({value:V})=>[e("div",po,[e("div",_o,[R(" Do you really want to delete "),e("span",ho,y(r.data.name),1),R("? Note that once this action is completed, it can not be undone ")]),s(w,{type:"textarea",label:"Reason",validation:"required",modelValue:t.reason,"onUpdate:modelValue":o[1]||(o[1]=b=>t.reason=b)},null,8,["modelValue"])]),e("div",fo,[s(_,{loading:t.loading,type:"submit",click:()=>{},color:"error",icon:t.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const xo=P(io,[["render",go]]),yo={components:{MagnifyingGlassIcon:Ee},setup(){qe({title:`${Oe.name.toUpperCase()} - Test Types`})},data(){return{header:"List Of Test Types",loading:!0,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],editIcon:Re,showEdit:!1,serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},search:"",testTypes:new Array,cookie:M("token"),headers:[{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"expected turn around time",value:"expected_turn_around_time"},{text:"actions",value:"actions"}],searchField:"name",searchValue:""}},created(){this.init()},methods:{async init(){const{page:n,rowsPerPage:o}=this.serverOptions;this.loading=!0;const r={route:`${C.testTypes}?page=${n}&per_page=${o}&search=${this.search}`,method:"GET",token:`${this.cookie}`,body:{}};let{data:u,error:t,pending:a}=await D(r);this.loading=a,u.value&&(this.testTypes=u.value.test_types.map(_=>{var g,v;return{..._,expected_turn_around_time:`${_.expected_turn_around_time!==null?((g=_.expected_turn_around_time)==null?void 0:g.value)+" "+(_.expected_turn_around_time.unit==null?"":(v=_.expected_turn_around_time.unit)==null?void 0:v.toLowerCase()):""}`}}),this.serverItemsLength=u.value.meta.total_count),t.value&&console.error(t.value)},updateTestTypes(n){typeof n=="object"&&(this.serverOptions=n),this.init()},updateSearch(n){this.searchValue=n,this.search=n,this.updateTestTypes(!0)},edit(n){this.showEdit=!0},navigateToEdit(n){const o=n.name.trim().toLowerCase().replace(/[\s\W-]+/g,"-").replace(/^-+|-+$/g,"");this.$router.push(`/test-catalog/test-types/edit/${o}?testType=${n.id}`)}}},vo={class:"px-5 py-5"},bo={class:"flex items-center justify-between py-5"},wo={class:"text-2xl font-semibold"},ko={class:"flex items-center space-x-3"},To={class:"flex justify-end w-full px-2 py-2 mb-2"},Vo={class:"py-2 flex items-center space-x-2"};function Co(n,o,r,u,t,a){const _=re,g=Rt,v=Ue,x=lo,m=F,w=xo,k=Le;return p(),f("div",vo,[s(_,{pages:t.pages},null,8,["pages"]),e("div",bo,[e("h3",wo,y(t.header),1),e("div",ko,[s(g,{onUpdate:a.updateTestTypes},null,8,["onUpdate"])])]),e("div",To,[s(v,{search:t.search,onUpdate:a.updateSearch},null,8,["search","onUpdate"])]),s(k,{headers:t.headers,data:t.testTypes,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:a.updateTestTypes},{actions:d(({item:T})=>[e("div",Vo,[s(x,{onEdit:a.edit,open:t.showEdit,data:T},null,8,["onEdit","open","data"]),s(m,{click:()=>{a.navigateToEdit(T)},color:"success",text:"Edit",icon:t.editIcon},null,8,["click","icon"]),s(w,{onUpdate:a.updateTestTypes,data:T},null,8,["onUpdate","data"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])])}const os=P(yo,[["render",Co]]);export{os as default};

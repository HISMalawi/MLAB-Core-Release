import{_ as O}from"./DnQNH6n5.js";import{a as j,P as d,u as h,l as R,m as v,b as c,e as u,f as l,g as o,t as k,p as C,F as g,j as y,i as S,v as q,x as B,s as x,_ as N}from"./CFJLM_Ie.js";import{_ as U,a as F}from"./C1wmcx4V.js";import{S as p}from"./H0ovi7Hy.js";import{r as M}from"./BSEQICol.js";import{r as T}from"./1TxO0rPq.js";import{r as A}from"./8rPwGYnr.js";import{r as D}from"./B0QhTN3f.js";import{r as L}from"./DOSvFRNE.js";import"./0YTBxEWP.js";import"./BoZExIdM.js";import"./B4k1OJQ0.js";import"./Zs5V9wEc.js";import"./Dhp4HNmj.js";import"./BwWK-syC.js";import"./CXlG2fUz.js";import"./B307KWXK.js";import"./D72LMua3.js";import"./NSQCzdgw.js";import"./C6QRH5hM.js";import"./BmAKWF52.js";import"./ccM_rzRE.js";const K={components:{TicketIcon:M},data(){return{header:"Verify Stock Order",checkIcon:T,allIcon:A,rejectIcon:D,pages:[{name:"Home",link:"/home"},{name:"Stock Orders",link:"/stock-management/orders"}],cookie:j("token"),deleteicon:L,loading:!1,verifying:!1,requisitions:new Array,voidReason:""}},created(){this.init()},methods:{async init(){this.loading=!0;const e=new p,{data:i,error:r,pending:n}=await e.getStockOrder(`${this.cookie}`,`${(this._.provides[d]||this.$route).query.order_id}`);this.loading=n,i.value&&(this.requisitions=i.value.stock_requisitions,this.loading=!1),r.value&&(console.error(r.value),this.loading=!1)},async verifyStockRequisition(e){this.loading=!0;const i=new p,r={stock_order_id:`${(this._.provides[d]||this.$route).query.order_id}`,stock_requisition_id:e.id},{data:n,error:t,pending:a}=await i.verifyStockOrderRequisition(`${this.cookie}`,r);this.loading=a,n.value&&(h().$toast.success("Stock order requisition verified successfully!"),this.init(),this.loading=!1),t.value&&(console.error(t.value),this.loading=!1)},async verifyStockOrder(){this.verifying=!0;const e=new p,i={stock_order_id:`${(this._.provides[d]||this.$route).query.order_id}`,stock_requisition_ids:this.requisitions.map(a=>a.id)},{data:r,error:n,pending:t}=await e.verifyStockOrder(`${this.cookie}`,i);this.verifying=t,r.value&&(h().$toast.success("Stock order verified successfully!"),this.$router.push("/stock-management/orders"),this.verifying=!1),n.value&&(console.error(n.value),this.verifying=!1)},deleteStockItem(e){e>=0&&e<this.requisitions.length&&this.requisitions.splice(e,1)}}},P={class:"px-5 py-5"},E={class:"py-5 flex items-center justify-between"},H={class:"text-2xl font-semibold"},Q={class:"px-4 py-2 bg-gray-50 flex items-center justify-between"},z={class:"flex items-center space-x-2"},G={class:"flex items-center space-x-3 justify-end"},J={key:0,class:"grid grid-cols-4 gap-4 mt-5"},W={class:"flex flex-col space-y-2"},X={key:0,class:"mt-8 flex space-x-2.5 items-center"},Y=o("div",{class:"w-1/4 bg-gray-100 rounded animate-pulse h-10 mt"},null,-1),Z=o("div",{class:"w-1/4 bg-gray-100 rounded animate-pulse h-10"},null,-1),ee=o("div",{class:"w-1/4 bg-gray-100 rounded animate-pulse h-10"},null,-1),oe=o("div",{class:"w-1/4 bg-gray-100 rounded animate-pulse h-10"},null,-1),te=[Y,Z,ee,oe];function se(e,i,r,n,t,a){const I=O,w=v("TicketIcon"),_=N,b=U,f=v("FormKit"),$=F;return c(),u("div",P,[l(I,{pages:t.pages},null,8,["pages"]),o("div",E,[o("h3",H,k(t.header),1)]),o("div",Q,[o("div",z,[l(w,{class:"h-5 w-5"}),o("p",null,[C("Voucher Number: "),o("strong",null,k((e._.provides[d]||e.$route).params.voucherId),1)])]),o("div",G,[l(_,{loading:t.verifying,icon:t.allIcon,text:"Verify all",color:"success",click:a.verifyStockOrder},null,8,["loading","icon","click"]),l(b,{stockId:`${(e._.provides[d]||e.$route).query.order_id}`,orderId:`${(e._.provides[d]||e.$route).params.voucherId}`},null,8,["stockId","orderId"])])]),o("div",null,[(c(!0),u(g,null,y(t.requisitions,(s,V)=>S((c(),u("div",{class:"flex flex-col space-y-3",key:V},[s.requisition_status.toLowerCase()!=="rejected"?(c(),u("div",J,[o("div",W,[l(f,{label:"Stock item",disabled:!0,modelValue:s.item.name,"onUpdate:modelValue":m=>s.item.name=m},null,8,["modelValue","onUpdate:modelValue"])]),l(f,{label:"Quantity requested",type:"number",validation:"required",modelValue:s.quantity_requested,"onUpdate:modelValue":m=>s.quantity_requested=m},null,8,["modelValue","onUpdate:modelValue"]),s.requisition_status.toLowerCase()!=="requested"?(c(),u("div",X,[(c(),B(_,{key:s.id,icon:t.checkIcon,text:"Verify",color:"success",click:()=>{a.verifyStockRequisition(s)}},null,8,["icon","click"])),l($,{onUpdate:a.init,data:s,orderId:`${(e._.provides[d]||e.$route).params.voucherId}`},null,8,["onUpdate","data","orderId"])])):x("",!0)])):x("",!0)])),[[q,!t.loading]])),128)),S(o("div",null,[(c(),u(g,null,y(5,s=>o("div",{class:"flex items-center space-x-3 mb-3",key:s},te)),64))],512),[[q,t.loading]])])])}const be=R(K,[["render",se]]);export{be as default};

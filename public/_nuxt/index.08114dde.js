import{_ as h}from"./Breadcrumb.vue.6444e325.js";import{_}from"./SearchBar.51c9c2a0.js";import{u,a as f,_ as g,o as v,c as x,b as o,d as i,g as b,e as y}from"./entry.fa11db54.js";import{_ as k}from"./Datatable.87a1d2fb.js";import{u as w}from"./vue.f36acd1f.623e2c0e.js";import{d as P,e as C}from"./constants.d5a76da2.js";import{h as I,e as V,f as B}from"./fetch.b54202be.js";import{P as O}from"./package.47b8853b.js";import{r as R}from"./MagnifyingGlassIcon.568661b7.js";import{r as U}from"./PencilSquareIcon.17ae5386.js";import"./nuxt-link.288a2b47.js";import"./HomeIcon.5d2fad11.js";import"./XMarkIcon.3a44566b.js";import"./Loader.cc62e805.js";import"./transition.b7892d15.js";import"./hidden.c0a01a27.js";import"./PrinterIcon.0cb858a1.js";const $={setup(){w({title:`${O.name.toUpperCase()} - Patient Report`})},components:{MagnifyingGlassIcon:R},data(){return{headers:[{text:"patient id",value:"client_id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"sex",value:"sex",sortable:!0},{text:"date of birth",value:"date_of_birth",sortable:!0},{text:"actions",value:"actions"}],patients:new Array,pages:[{name:"Home",link:"/home"},{name:"Reports",link:"#"}],search:"",loading:!1,viewIcon:U,cookie:u("token"),serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},searchField:"name",searchValue:""}},created(){this.init()},computed:{filteredPatients(){return this.patients.map(e=>({...e,name:`${e.first_name} ${e.middle_name} ${e.last_name}`.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),date_of_birth:I(e.date_of_birth).format(P)}))}},methods:{updateSearch(e){this.searchValue=e,this.search=e,this.updatePatients(!0)},updatePatients(e){typeof e=="object"&&(this.serverOptions=e),this.init()},async init(){this.loading=!0;const{page:e,rowsPerPage:r}=this.serverOptions,n={route:`${V.clients}?page=${e}&per_page=${r}&search=${this.search}`,method:"GET",token:`${this.cookie}`,body:{}};let{data:a,error:t,pending:s}=await B(n);this.loading=s,a.value&&(this.patients=a.value.clients,this.serverItemsLength=a.value.meta.total_count),t.value&&(console.log(t.value.data),f().$toast.error(`${C}`))},async viewReport(e){this.$router.push(`/reports/daily/patient-report/${e.client_id}`)}}},F={class:"px-5 py-5"},L=i("div",{class:"flex items-center justify-between py-5"},[i("h3",{class:"text-2xl font-semibold"},"Patient reports")],-1),j={class:"flex justify-end w-full px-2 py-2 mb-2"},A={class:"py-2 flex items-center space-x-2"};function N(e,r,n,a,t,s){const c=h,p=_,l=y,m=k;return v(),x("div",F,[o(c,{pages:t.pages},null,8,["pages"]),L,i("div",j,[o(p,{search:t.search,onUpdate:s.updateSearch},null,8,["search","onUpdate"])]),o(m,{headers:t.headers,data:s.filteredPatients,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:s.updatePatients},{actions:b(({item:d})=>[i("div",A,[o(l,{click:()=>s.viewReport(d),color:"primary",text:"View Report",icon:t.viewIcon},null,8,["click","icon"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])])}const te=g($,[["render",N]]);export{te as default};

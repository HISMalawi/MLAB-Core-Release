import{_ as G}from"./Breadcrumb.vue.9bbb2936.js";import{a as I,b as y,_ as w,g as n,o as D,c as C,e,d as t,h as l,i as T,f as U,t as V,l as K,u as z}from"./entry.b3d74578.js";import{_ as M}from"./OutlinedButton.5ebf0ee2.js";import{e as B,d as R}from"./constants.2679ef94.js";import{r as H,e as k,f as b,h as X}from"./fetch.75d5a027.js";import{r as N}from"./XMarkIcon.5a35fdf0.js";import{r as L}from"./UserIcon.99c502a8.js";import{r as A}from"./ArrowDownTrayIcon.0db7f7e4.js";import{r as J}from"./ArrowUturnLeftIcon.b86c3216.js";import{S as F,h as S,U as P,G as j,V as q}from"./transition.bc1cf2e0.js";import{_ as Q}from"./SearchBar.5ffd6806.js";import{r as W,a as E}from"./PencilSquareIcon.eb25b68b.js";import{_ as O}from"./medicines.b8782189.js";import{_ as Y}from"./Datatable.f78b15ac.js";import{P as Z}from"./package.4d4d8135.js";import{r as ee}from"./MagnifyingGlassIcon.55f03146.js";import"./nuxt-link.40e970ec.js";import"./HomeIcon.995f982f.js";import"./PrinterIcon.9b201651.js";import"./hidden.56a45a06.js";import"./Loader.2d23a95b.js";const te={components:{TransitionRoot:F,TransitionChild:S,Dialog:P,DialogPanel:j,DialogTitle:q,XMarkIcon:N,UserIcon:L},data(){return{open:!1,addIcon:H,saveIcon:A,clearIcon:J,loading:!1,name:"",shortName:"",cookie:I("token")}},methods:{async submitForm(){this.loading=!0;const i={route:k.drugs,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName}},{pending:s,error:r,data:c}=await b(i);this.loading=s,c.value&&(this.handleClick(),y().$toast.success(`${this.name} drug created successfully!`),this.loading=!1,this.shortName="",this.name="",this.$emit("update",!0)),r.value&&(this.handleClick(),console.error(r.value),y().$toast.error(B),this.loading=!1)},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},oe=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),se={class:"fixed inset-0 overflow-y-auto"},ae={class:"flex min-h-full items-center justify-center p-4 text-center"},ne={class:"border-b px-3 py-3 flex items-center justify-between"},le={class:"mt-2 space-y-3"},ie={class:"w-full flex items-center px-5"},re={class:"w-full flex flex-col space-y-2"},ce={class:"w-full flex items-center px-5 space-x-3"},de={class:"w-full flex flex-col space-y-2"},me={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ue(i,s,r,c,o,a){const _=U,u=n("TransitionChild"),p=n("DialogTitle"),h=n("XMarkIcon"),m=n("FormKit"),f=M,g=n("DialogPanel"),d=n("Dialog"),$=n("TransitionRoot");return D(),C("div",null,[e("div",null,[t(_,{text:"Create drug",color:"primary",icon:o.addIcon,click:a.handleClick},null,8,["icon","click"])]),t($,{appear:"",show:o.open,as:"template"},{default:l(()=>[t(d,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:l(()=>[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[oe]),_:1}),e("div",se,[e("div",ae,[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[t(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",ne,[t(p,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:l(()=>[T(" Create drug ")]),_:1}),e("button",{onClick:s[0]||(s[0]=(...v)=>a.handleClick&&a.handleClick(...v))},[t(h,{class:"w-5 h-5"})])]),t(m,{type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1,id:"submitForm"},{default:l(({value:v})=>[e("div",le,[e("div",ie,[e("div",re,[t(m,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":s[1]||(s[1]=x=>o.name=x)},null,8,["modelValue"])])]),e("div",ce,[e("div",de,[t(m,{type:"text",label:"Short Name",validation:"required",modelValue:o.shortName,"onUpdate:modelValue":s[2]||(s[2]=x=>o.shortName=x)},null,8,["modelValue"])])])]),e("div",me,[t(f,{type:"button",click:()=>{a.clearForm()},text:"Clear form"},null,8,["click"]),t(_,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const _e=w(te,[["render",ue]]),pe={components:{TransitionRoot:F,TransitionChild:S,Dialog:P,DialogPanel:j,DialogTitle:q,XMarkIcon:N},data(){return{viewIcon:W,show:!1,editIcon:E,moment:X}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},he=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),fe={class:"fixed inset-0 overflow-y-auto"},ge={class:"flex min-h-full items-center justify-center p-4 text-center"},xe={class:"border-b px-3 py-3 flex items-center justify-between"},ve=e("img",{src:O,class:"w-8 h-8 mr-2"},null,-1),ye={class:"space-y-3 px-5 py-5"},ke={class:"w-full flex flex-col space-y-1"},be=e("label",{class:"font-semibold text-lg"},"Name",-1),we={class:"underline"},De={class:"w-full flex flex-col space-y-1"},Ce=e("label",{class:"font-semibold text-lg"},"Short Name",-1),Te={class:"underline"},$e={class:"w-full flex flex-col space-y-1"},Ve=e("label",{class:"font-semibold text-lg"},"Date Created",-1),Ie={class:"underline"};function Ue(i,s,r,c,o,a){const _=U,u=n("TransitionChild"),p=n("DialogTitle"),h=n("XMarkIcon"),m=n("DialogPanel"),f=n("Dialog"),g=n("TransitionRoot");return D(),C("div",null,[t(_,{click:a.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),t(g,{appear:"",show:o.show,as:"template"},{default:l(()=>[t(f,{as:"div",class:"relative z-10"},{default:l(()=>[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[he]),_:1}),e("div",fe,[e("div",ge,[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[t(m,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",xe,[t(p,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[ve,T(" View drug ")]),_:1}),e("button",{onClick:s[0]||(s[0]=(...d)=>a.handleClick&&a.handleClick(...d))},[t(h,{class:"w-5 h-5"})])]),e("div",ye,[e("div",ke,[be,e("p",we,V(r.data.name),1)]),e("div",De,[Ce,e("p",Te,V(r.data.short_name),1)]),e("div",$e,[Ve,e("p",Ie,V(o.moment(r.data.created_date).format("dateFormat"in i?i.dateFormat:K(R))),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ne=w(pe,[["render",Ue]]),Fe={components:{TransitionRoot:F,TransitionChild:S,Dialog:P,DialogPanel:j,DialogTitle:q,XMarkIcon:N},data(){return{editIcon:E,show:!1,saveIcon:A,name:"",shortName:"",loading:!1,cookie:I("token")}},props:{data:{type:Object,required:!0}},methods:{async init(){this.handleClick(),this.loading=!0;const i={route:`${k.drugs}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{pending:s,error:r,data:c}=await b(i);this.loading=s,c.value&&(this.shortName=c.value.short_name,this.name=c.value.name),r.value&&console.log(r.value)},async submitForm(){this.loading=!0;const i={route:`${k.drugs}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName}},{pending:s,error:r,data:c}=await b(i);this.loading=s,c.value&&(this.handleClick(),y().$toast.success("Drug updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(this.handleClick(),y().$toast.error(B),console.log(r.value),this.loading=!1)},clearForm(){this.$formkit.reset("editForm")},handleClick(){this.show=!this.show}}},Se=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Pe={class:"fixed inset-0 overflow-y-auto"},je={class:"flex min-h-full items-center justify-center p-4 text-center"},qe={class:"border-b px-3 py-3 flex items-center justify-between"},Me={class:"mt-2 space-y-3"},Be={class:"w-full flex items-center px-5"},Re={class:"w-full flex flex-col space-y-2"},Xe={class:"w-full flex items-center px-5 space-x-3"},Ae={class:"w-full flex flex-col space-y-2"},Ee={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Oe(i,s,r,c,o,a){const _=U,u=n("TransitionChild"),p=n("DialogTitle"),h=n("XMarkIcon"),m=n("FormKit"),f=M,g=n("DialogPanel"),d=n("Dialog"),$=n("TransitionRoot");return D(),C("div",null,[t(_,{click:a.init,text:"Edit",color:"success",icon:o.editIcon},null,8,["click","icon"]),t($,{appear:"",show:o.show,as:"template"},{default:l(()=>[t(d,{as:"div",class:"relative z-10"},{default:l(()=>[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[Se]),_:1}),e("div",Pe,[e("div",je,[t(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[t(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",qe,[t(p,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[T(" Edit drug ")]),_:1}),e("button",{onClick:s[0]||(s[0]=(...v)=>a.handleClick&&a.handleClick(...v))},[t(h,{class:"w-5 h-5"})])]),t(m,{type:"form",id:"editForm","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:l(({value:v})=>[e("div",Me,[e("div",Be,[e("div",Re,[t(m,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":s[1]||(s[1]=x=>o.name=x)},null,8,["modelValue"])])]),e("div",Xe,[e("div",Ae,[t(m,{type:"text",label:"Short Name",validation:"required",modelValue:o.shortName,"onUpdate:modelValue":s[2]||(s[2]=x=>o.shortName=x)},null,8,["modelValue"])])])]),e("div",Ee,[t(f,{type:"button",click:()=>{a.clearForm()},text:"Clear form"},null,8,["click"]),t(_,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ge=w(Fe,[["render",Oe]]),Ke={setup(){z({title:`${Z.name.toUpperCase()} - Drugs`})},data(){return{header:"List Of Drugs",drugs:new Array,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],loading:!1,search:"",searchValue:"",cookie:I("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"date created",value:"created_date"},{text:"actions",value:"actions"}]}},components:{MagnifyingGlassIcon:ee},created(){this.init()},methods:{updateSearch(i){this.searchValue=i,this.search=i},async init(){this.loading=!0;const i={route:k.drugs,method:"GET",token:`${this.cookie}`},{pending:s,error:r,data:c}=await b(i);this.loading=s,c.value&&(this.drugs=c.value.map(o=>({...o,created_date:X(o.created_date).format(R)})),this.loading=!1),r.value&&(console.log(r.value),this.loading=!1)},updateDrugs(i){i&&(this.search="",this.searchValue="",this.init())}}},ze={class:"py-5 px-5"},He={class:"flex items-center justify-between py-5"},Le=e("div",{class:"text-2xl font-semibold flex items-center uppercase"},[e("img",{src:O,alt:"report-icon",class:"w-8 h-8 mr-2"}),T(" Drugs ")],-1),Je={class:"flex items-center space-x-3"},Qe={class:"flex justify-end w-full px-2 py-2 mb-2"},We={class:"py-2 flex items-center space-x-2"};function Ye(i,s,r,c,o,a){const _=G,u=_e,p=Q,h=Ne,m=Ge,f=n("DrugsDeleteDialog"),g=Y;return D(),C("div",ze,[t(_,{pages:o.pages},null,8,["pages"]),e("div",He,[Le,e("div",Je,[t(u,{onUpdate:a.updateDrugs},null,8,["onUpdate"])])]),e("div",Qe,[t(p,{search:o.search,"onUpdate:search":s[0]||(s[0]=d=>o.search=d),onUpdate:a.updateSearch,modelValue:o.search,"onUpdate:modelValue":s[1]||(s[1]=d=>o.search=d)},null,8,["search","onUpdate","modelValue"])]),t(g,{headers:o.headers,data:o.drugs,loading:o.loading,"search-value":o.searchValue,"search-field":"name"},{actions:l(({item:d})=>[e("div",We,[t(h,{data:d},null,8,["data"]),t(m,{data:d,onUpdate:a.updateDrugs},null,8,["data","onUpdate"]),t(f,{data:d,onUpdate:a.updateDrugs},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const yt=w(Ke,[["render",Ye]]);export{yt as default};

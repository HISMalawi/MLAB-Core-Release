import{_ as Ze}from"./Breadcrumb.vue.172b08a1.js";import{o as w,c as R,d as t,l as _e,z as F,H as U,ae as je,a0 as ve,K as M,F as G,M as Ae,a7 as Oe,af as be,_ as ee,f as x,t as k,w as W,v as Z,b as a,n as Fe,u as ie,a as B,g as C,h as K,e as ce,k as H,p as q,j as L,r as re,ap as Je}from"./entry.29d75565.js";import{r as Qe,_ as et}from"./Dropdown.17f845b1.js";import{_ as tt}from"./SearchBar.a5f96cb3.js";import{r as te}from"./XMarkIcon.87dc4c8a.js";import{_ as st}from"./Loader.870f4231.js";import{_ as Le}from"./OutlinedButton.a686485f.js";import{e as Q,d as ue}from"./constants.8021834b.js";import{u as pe,e as A,f as O,m as ot,n as nt,o as rt,h as Y,r as Ue,p as Be,P as Pe,j as le,i as Ee,c as lt,s as at}from"./fetch.c4499ad2.js";import{r as Ne}from"./UserIcon.be636996.js";import{a as ge,r as it}from"./PencilSquareIcon.7e2db42f.js";import{r as Me}from"./ArrowDownTrayIcon.d7416d5e.js";import{r as qe}from"./ArrowUturnLeftIcon.a34a4b1e.js";import{a as ct,p as dt,E as ut,n as Ve,d as E,S as ye,h as xe,U as we,G as ke,V as Se}from"./transition.b64af0ad.js";import{r as pt}from"./PrinterIcon.1a5037aa.js";import{_ as mt}from"./Datatable.84742e46.js";import{u as ft}from"./vue.f36acd1f.f2e079ec.js";import{P as ht}from"./package.5e2caa05.js";import{r as _t}from"./MagnifyingGlassIcon.476707c0.js";import{r as vt}from"./ChevronDownIcon.5b1f85b5.js";import{r as bt}from"./CheckIcon.65f37a5a.js";import{m as Te,o as p,E as Ce,u as X,g as gt,l as ae,y as yt,i as xt,j as wt,H as Ie,t as J,f as me,a as fe,p as kt,d as Re,b as V,P as z,N,T as he}from"./hidden.f73e56d1.js";import{b as St}from"./use-text-value.f574ba92.js";import{r as Tt}from"./CheckCircleIcon.ebff275b.js";import{r as Ct}from"./FunnelIcon.357b5521.js";import{r as De}from"./SquaresPlusIcon.ba731c3b.js";import{r as It}from"./AdjustmentsVerticalIcon.8b8ddc66.js";import{r as de}from"./CheckBadgeIcon.cde49576.js";import{a as $t,r as Pt}from"./ChevronRightIcon.fbcfaf0d.js";import{r as Rt}from"./ArchiveBoxXMarkIcon.0c74ad21.js";import{r as ne}from"./HandThumbDownIcon.b80c5fde.js";import{r as Dt}from"./ArrowPathIcon.166ad1cb.js";import{B as jt,N as At,K as Ot,H as Ft,U as Lt}from"./listbox.c6ea7184.js";import{M as Ut,R as Bt,h as Et,y as Nt}from"./menu.1086d148.js";import"./nuxt-link.03f295fe.js";import"./HomeIcon.ea2dab51.js";function Mt(s,o){return w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12.97 3.97a.75.75 0 011.06 0l7.5 7.5a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 11-1.06-1.06l6.22-6.22H3a.75.75 0 010-1.5h16.19l-6.22-6.22a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}function qt(s,o){return w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M14.47 2.47a.75.75 0 011.06 0l6 6a.75.75 0 010 1.06l-6 6a.75.75 0 11-1.06-1.06l4.72-4.72H9a5.25 5.25 0 100 10.5h3a.75.75 0 010 1.5H9a6.75 6.75 0 010-13.5h10.19l-4.72-4.72a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}function Vt(s,o){return w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z","clip-rule":"evenodd"})])}var zt=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(zt||{});let ze=Symbol("PopoverContext");function $e(s){let o=be(ze,null);if(o===null){let r=new Error(`<${s} /> is missing a parent <${Xe.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,$e),r}return o}let Gt=Symbol("PopoverGroupContext");function Ge(){return be(Gt,null)}let He=Symbol("PopoverPanelContext");function Ht(){return be(He,null)}let Xe=_e({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(s,{slots:o,attrs:r,expose:i}){var e;let n=F(null);i({el:n,$el:n});let m=F(1),f=F(null),$=F(null),S=F(null),d=F(null),I=U(()=>Te(n)),P=U(()=>{var u,b;if(!p(f)||!p(d))return!1;for(let oe of document.querySelectorAll("body > *"))if(Number(oe==null?void 0:oe.contains(p(f)))^Number(oe==null?void 0:oe.contains(p(d))))return!0;let y=Ce(),j=y.indexOf(p(f)),se=(j+y.length-1)%y.length,Ke=(j+1)%y.length,Ye=y[se],We=y[Ke];return!((u=p(d))!=null&&u.contains(Ye))&&!((b=p(d))!=null&&b.contains(We))}),_={popoverState:m,buttonId:F(null),panelId:F(null),panel:d,button:f,isPortalled:P,beforePanelSentinel:$,afterPanelSentinel:S,togglePopover(){m.value=X(m.value,{[0]:1,[1]:0})},closePopover(){m.value!==1&&(m.value=1)},close(u){_.closePopover();let b=(()=>u?u instanceof HTMLElement?u:u.value instanceof HTMLElement?p(u):p(_.button):p(_.button))();b==null||b.focus()}};je(ze,_),gt(U(()=>X(m.value,{[0]:ae.Open,[1]:ae.Closed})));let D={buttonId:_.buttonId,panelId:_.panelId,close(){_.closePopover()}},g=Ge(),l=g==null?void 0:g.registerPopover,[c,v]=ct(),h=dt({mainTreeNodeRef:g==null?void 0:g.mainTreeNodeRef,portals:c,defaultContainers:[f,d]});function T(){var u,b,y,j;return(j=g==null?void 0:g.isFocusWithinPopoverGroup())!=null?j:((u=I.value)==null?void 0:u.activeElement)&&(((b=p(f))==null?void 0:b.contains(I.value.activeElement))||((y=p(d))==null?void 0:y.contains(I.value.activeElement)))}return ve(()=>l==null?void 0:l(D)),ut((e=I.value)==null?void 0:e.defaultView,"focus",u=>{var b,y;u.target!==window&&u.target instanceof HTMLElement&&m.value===0&&(T()||f&&d&&(h.contains(u.target)||(b=p(_.beforePanelSentinel))!=null&&b.contains(u.target)||(y=p(_.afterPanelSentinel))!=null&&y.contains(u.target)||_.closePopover()))},!0),yt(h.resolveContainers,(u,b)=>{var y;_.closePopover(),xt(b,wt.Loose)||(u.preventDefault(),(y=p(f))==null||y.focus())},U(()=>m.value===0)),()=>{let u={open:m.value===0,close:_.close};return M(G,[M(v,{},()=>Ie({theirProps:{...s,...r},ourProps:{ref:n},slot:u,slots:o,attrs:r,name:"Popover"})),M(h.MainTreeNode)])}}}),Xt=_e({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${J()}`}},inheritAttrs:!1,setup(s,{attrs:o,slots:r,expose:i}){let e=$e("PopoverButton"),n=U(()=>Te(e.button));i({el:e.button,$el:e.button}),Ae(()=>{e.buttonId.value=s.id}),Oe(()=>{e.buttonId.value=null});let m=Ge(),f=m==null?void 0:m.closeOthers,$=Ht(),S=U(()=>$===null?!1:$.value===e.panelId.value),d=F(null),I=`headlessui-focus-sentinel-${J()}`;S.value||ve(()=>{e.button.value=d.value});let P=St(U(()=>({as:s.as,type:o.type})),d);function _(h){var T,u,b,y,j;if(S.value){if(e.popoverState.value===1)return;switch(h.key){case V.Space:case V.Enter:h.preventDefault(),(u=(T=h.target).click)==null||u.call(T),e.closePopover(),(b=p(e.button))==null||b.focus();break}}else switch(h.key){case V.Space:case V.Enter:h.preventDefault(),h.stopPropagation(),e.popoverState.value===1&&(f==null||f(e.buttonId.value)),e.togglePopover();break;case V.Escape:if(e.popoverState.value!==0)return f==null?void 0:f(e.buttonId.value);if(!p(e.button)||(y=n.value)!=null&&y.activeElement&&!((j=p(e.button))!=null&&j.contains(n.value.activeElement)))return;h.preventDefault(),h.stopPropagation(),e.closePopover();break}}function D(h){S.value||h.key===V.Space&&h.preventDefault()}function g(h){var T,u;s.disabled||(S.value?(e.closePopover(),(T=p(e.button))==null||T.focus()):(h.preventDefault(),h.stopPropagation(),e.popoverState.value===1&&(f==null||f(e.buttonId.value)),e.togglePopover(),(u=p(e.button))==null||u.focus()))}function l(h){h.preventDefault(),h.stopPropagation()}let c=Ve();function v(){let h=p(e.panel);if(!h)return;function T(){X(c.value,{[E.Forwards]:()=>z(h,N.First),[E.Backwards]:()=>z(h,N.Last)})===he.Error&&z(Ce().filter(u=>u.dataset.headlessuiFocusGuard!=="true"),X(c.value,{[E.Forwards]:N.Next,[E.Backwards]:N.Previous}),{relativeTo:p(e.button)})}T()}return()=>{let h=e.popoverState.value===0,T={open:h},{id:u,...b}=s,y=S.value?{ref:d,type:P.value,onKeydown:_,onClick:g}:{ref:d,id:u,type:P.value,"aria-expanded":e.popoverState.value===0,"aria-controls":p(e.panel)?e.panelId.value:void 0,disabled:s.disabled?!0:void 0,onKeydown:_,onKeyup:D,onClick:g,onMousedown:l};return M(G,[Ie({ourProps:y,theirProps:{...o,...b},slot:T,attrs:o,slots:r,name:"PopoverButton"}),h&&!S.value&&e.isPortalled.value&&M(me,{id:I,features:fe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:v})])}}}),Kt=_e({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${J()}`}},inheritAttrs:!1,setup(s,{attrs:o,slots:r,expose:i}){let{focus:e}=s,n=$e("PopoverPanel"),m=U(()=>Te(n.panel)),f=`headlessui-focus-sentinel-before-${J()}`,$=`headlessui-focus-sentinel-after-${J()}`;i({el:n.panel,$el:n.panel}),Ae(()=>{n.panelId.value=s.id}),Oe(()=>{n.panelId.value=null}),je(He,n.panelId),ve(()=>{var l,c;if(!e||n.popoverState.value!==0||!n.panel)return;let v=(l=m.value)==null?void 0:l.activeElement;(c=p(n.panel))!=null&&c.contains(v)||z(p(n.panel),N.First)});let S=kt(),d=U(()=>S!==null?(S.value&ae.Open)===ae.Open:n.popoverState.value===0);function I(l){var c,v;switch(l.key){case V.Escape:if(n.popoverState.value!==0||!p(n.panel)||m.value&&!((c=p(n.panel))!=null&&c.contains(m.value.activeElement)))return;l.preventDefault(),l.stopPropagation(),n.closePopover(),(v=p(n.button))==null||v.focus();break}}function P(l){var c,v,h,T,u;let b=l.relatedTarget;b&&p(n.panel)&&((c=p(n.panel))!=null&&c.contains(b)||(n.closePopover(),((h=(v=p(n.beforePanelSentinel))==null?void 0:v.contains)!=null&&h.call(v,b)||(u=(T=p(n.afterPanelSentinel))==null?void 0:T.contains)!=null&&u.call(T,b))&&b.focus({preventScroll:!0})))}let _=Ve();function D(){let l=p(n.panel);if(!l)return;function c(){X(_.value,{[E.Forwards]:()=>{var v;z(l,N.First)===he.Error&&((v=p(n.afterPanelSentinel))==null||v.focus())},[E.Backwards]:()=>{var v;(v=p(n.button))==null||v.focus({preventScroll:!0})}})}c()}function g(){let l=p(n.panel);if(!l)return;function c(){X(_.value,{[E.Forwards]:()=>{let v=p(n.button),h=p(n.panel);if(!v)return;let T=Ce(),u=T.indexOf(v),b=T.slice(0,u+1),y=[...T.slice(u+1),...b];for(let j of y.slice())if(j.dataset.headlessuiFocusGuard==="true"||h!=null&&h.contains(j)){let se=y.indexOf(j);se!==-1&&y.splice(se,1)}z(y,N.First,{sorted:!1})},[E.Backwards]:()=>{var v;z(l,N.Previous)===he.Error&&((v=p(n.button))==null||v.focus())}})}c()}return()=>{let l={open:n.popoverState.value===0,close:n.close},{id:c,focus:v,...h}=s,T={ref:n.panel,id:c,onKeydown:I,onFocusout:e&&n.popoverState.value===0?P:void 0,tabIndex:-1};return Ie({ourProps:T,theirProps:{...o,...h},attrs:o,slot:l,slots:{...r,default:(...u)=>{var b;return[M(G,[d.value&&n.isPortalled.value&&M(me,{id:f,ref:n.beforePanelSentinel,features:fe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:D}),(b=r.default)==null?void 0:b.call(r,...u),d.value&&n.isPortalled.value&&M(me,{id:$,ref:n.afterPanelSentinel,features:fe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:g})])]}},features:Re.RenderStrategy|Re.Static,visible:d.value,name:"PopoverPanel"})}}});const Yt={props:{value:{type:Object,required:!0},close:{type:Boolean,required:!0},color:{required:!1,type:String,default:"green"},icon:{required:!1,type:Object}},methods:{removeLabel(){this.$emit("update",this.value)}},components:{XMarkIcon:te}},Wt={class:"text-sm"};function Zt(s,o,r,i,e,n){const m=x("XMarkIcon");return w(),R("button",{class:Fe(["flex items-center space-x-2 px-2 py-1 text-white rounded",`bg-${r.color}-500`])},[t("p",Wt,k(r.value.text),1),W(t("button",{onClick:o[0]||(o[0]=(...f)=>n.removeLabel&&n.removeLabel(...f))},[a(m,{class:"w-4 h-4"})],512),[[Z,r.close]])],2)}const Jt=ee(Yt,[["render",Zt]]),Qt={components:{TransitionRoot:ye,TransitionChild:xe,Dialog:we,DialogPanel:ke,DialogTitle:Se,XMarkIcon:te,UserIcon:Ne},props:{item:{required:!0,type:Object}},data(){return{open:!1,editIcon:ge,saveIcon:Me,clearIcon:qe,name:"",description:"",testTypesSelected:[],loading:!1,testTypes:new Array,rawTestTypes:new Array,departments:new Array,selectedDepartment:"-- select department",cookie:ie("token"),authStore:pe(),departmentId:0}},methods:{async init(){this.handleClick();const s=this.authStore.department,o=this.authStore.user.departments.find(r=>r.name===s);o&&(this.departmentId=o.id),this.selectedDepartment=s,this.departments=this.authStore.user.departments,await this.getTestTypes(this.departmentId)},async getTestTypes(s){const o={route:`${A.specimenTestTypes}?department_id=${s}&specimen_id=${this.item.specimen_id}`,method:"GET",token:`${this.cookie}`},{error:r,data:i}=await O(o);i.value&&(this.rawTestTypes=i.value,this.testTypes=i.value),r.value&&console.error("error: ",r.value)},async submitForm(){this.loading=!0;let s=this.testTypesSelected.map(e=>({specimen:this.item.specimen_id,test_type:e}));const o={route:`${A.addTestOrder}`,method:"POST",token:`${this.cookie}`,body:{order_id:this.item.order_id,tests:s}},{data:r,error:i}=await O(o);r.value&&(this.handleClick(),B().$toast.success("Tests added to current order successfully!"),this.loading=!1,this.$emit("update",!0)),i.value&&(this.handleClick(),console.error("error: ",i.value),B().$toast.error(Q),this.loading=!1)},handleClick(){this.open=!this.open},resetForm(){this.testTypesSelected=new Array}},watch:{selectedDepartment(s,o){if(s!==o){const r=this.authStore.user.departments.find(i=>i.name===s);r&&(this.departmentId=r.id,this.getTestTypes(this.departmentId))}}}},es=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ts={class:"fixed inset-0 overflow-y-auto"},ss={class:"flex min-h-full items-center justify-center p-4 text-center"},os={class:"border-b px-3 py-3 flex items-center justify-between"},ns={class:"mt-2 space-y-3 pb-40"},rs={class:"w-full flex flex-col space-y-2 px-5"},ls=t("label",{class:"font-medium"},"Department",-1),as={class:"w-full flex flex-col space-y-2 px-5"},is=t("label",{class:"font-medium"},"Tests",-1),cs={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ds(s,o,r,i,e,n){const m=ce,f=x("TransitionChild"),$=x("DialogTitle"),S=x("XMarkIcon"),d=x("multi-select"),I=Le,P=x("FormKit"),_=x("DialogPanel"),D=x("Dialog"),g=x("TransitionRoot");return w(),R("div",null,[t("div",null,[a(m,{text:"Add test to current order",color:"warning",icon:e.editIcon,click:n.init},null,8,["icon","click"])]),a(g,{appear:"",show:e.open,as:"template"},{default:C(()=>[a(D,{as:"div",onClose:n.handleClick,class:"relative z-10"},{default:C(()=>[a(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:C(()=>[es]),_:1}),t("div",ts,[t("div",ss,[a(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:C(()=>[a(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:C(()=>[t("div",os,[a($,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:C(()=>[K(" Add Test To Current Order ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...l)=>n.handleClick&&n.handleClick(...l))},[a(S,{class:"w-5 h-5"})])]),a(P,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"submitForm"},{default:C(({value:l})=>[t("div",ns,[t("div",rs,[ls,a(d,{style:{"--ms-max-height":"none !important"},modelValue:e.selectedDepartment,"onUpdate:modelValue":o[1]||(o[1]=c=>e.selectedDepartment=c),options:e.departments.map(c=>c.name),searchable:!0,required:!0,clear:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])]),t("div",as,[is,a(d,{style:{"--ms-max-height":"none !important"},modelValue:e.testTypesSelected,"onUpdate:modelValue":o[2]||(o[2]=c=>e.testTypesSelected=c),options:e.testTypes,mode:"tags",searchable:!0,required:!0,clear:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",cs,[a(I,{type:"button",click:()=>n.resetForm(),text:"Clear form"},null,8,["click"]),a(m,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const us=ee(Qt,[["render",ds]]),ps={components:{TransitionRoot:ye,TransitionChild:xe,Dialog:we,DialogPanel:ke,DialogTitle:Se,XMarkIcon:te,PhoneIcon:ot,EnvelopeIcon:nt,MapPinIcon:rt},data(){return{moment:Y,viewIcon:it,show:this.open,addIcon:Ue,editIcon:ge,acceptIcon:Be,printerIcon:pt,cookie:ie("token"),details:{},loading:!1,zebraPrinting:!1}},props:{data:{type:Object,required:!0},open:{type:Boolean,required:!1}},methods:{async init(){this.loading=!0;const s={route:`${A.tests}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:o,error:r,pending:i}=await O(s);this.loading=i,o.value&&(this.details=o.value,typeof this.details=="object"&&this.handleClick()),r.value&&(this.loading=!1,console.error(r.value),B().$toast.error(Q))},async printBBResults(){const s={route:A.printOutZebra,method:"POST",token:`${this.cookie}`,body:{order_id:this.details.order_id,tests:[this.details],is_cross_match:!0}},{data:o,error:r,pending:i}=await O(s);if(this.zebraPrinting=i,o.value){this.zebraPrinting=!1;const e=new FileReader;e.onload=()=>{const n=URL.createObjectURL(o.value),m=document.createElement("a");m.href=n,m.setAttribute("download",`${Date.now()}.lbl`),m.click(),URL.revokeObjectURL(n)},e.readAsText(o.value),B().$toast.success("Results printed successfully!")}r.value&&(this.zebraPrinting=!1,B().$toast.error(Q),console.error(r.value))},updateChanges(){this.show=!1,this.$emit("update",!0)},handleClick(){this.show=!this.show},printAccessionNumber(){return Pe.printSpecimenLabel(this.details.accession_number)},printTrackingNumber(){return Pe.printTrackingNumber(this.details.tracking_number)},viewReport(){return this.$router.push(`/reports/daily/patient-report/${this.details.client.id}?order_id=${this.details.order_id}`)},getRequestedBy(s){let o="";return s.forEach(r=>{r.status.name==="pending"&&(o=`${r.initiator.first_name} ${r.initiator.last_name}`)}),le(o)}}},ms=""+new URL("prescription_document.18f957e1.svg",import.meta.url).href,fs=""+new URL("test_tube.2b522cf2.svg",import.meta.url).href,hs=""+new URL("i_exam_qualification.dd473ba6.svg",import.meta.url).href,_s=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),vs={class:"fixed inset-0 overflow-y-auto"},bs={class:"flex min-h-full items-center justify-center text-center"},gs={class:"border-b px-3 py-3 flex items-center justify-between"},ys=t("img",{src:ms,class:"w-8 h-8 mr-2"},null,-1),xs={class:"flex items-center justify-center mx-auto my-20"},ws={class:"grid grid-cols-3 gap-4 px-5 py-5"},ks={class:"rounded border"},Ss=t("div",{class:"px-2 py-2 bg-gray-50 border-b rounded-t"},[t("h3",{class:"text-lg font-semibold text-black flex items-center"},[t("img",{src:Je,class:"w-7 h-7 mr-1"}),K(" Patient ")])],-1),Ts={class:"w-full space-y-2 py-2"},Cs={class:"w-full flex justify-between px-4 py-1"},Is=t("h3",{class:"font-semibold"},"Patient Number",-1),$s={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Ps=t("h3",{class:"font-semibold"},"Name",-1),Rs={class:"w-full flex justify-between px-4 py-1"},Ds=t("h3",{class:"font-semibold"},"Sex",-1),js={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},As=t("h3",{class:"font-semibold"},"Age",-1),Os={class:"rounded border"},Fs=t("div",{class:"px-2 py-2 bg-gray-50 border-b rounded-t"},[t("h3",{class:"text-lg font-semibold text-black flex items-center"},[t("img",{src:fs,class:"w-7 h-7 mr-1"}),K(" Specimen ")])],-1),Ls={class:"w-full space-y-2 py-2"},Us={class:"w-full flex justify-between px-4 py-1"},Bs=t("h3",{class:"font-semibold"},"Specimen Type",-1),Es={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Ns=t("h3",{class:"font-semibold"},"Tracking Number",-1),Ms={class:"w-full flex justify-between px-4 py-1"},qs=t("h3",{class:"font-semibold"},"Accession Number",-1),Vs={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},zs=t("h3",{class:"font-semibold"},"Status",-1),Gs={class:"rounded border max-h-72 overflow-y-auto"},Hs=t("div",{class:"px-2 py-2 bg-gray-50 border-b rounded-t flex items-center"},[t("img",{src:hs,class:"w-7 h-7 mr-1"}),t("h3",{class:"text-lg font-semibold text-black"},"Test")],-1),Xs={class:"w-full space-y-2 py-2"},Ks={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Ys=t("h3",{class:"font-semibold"},"Name",-1),Ws={class:"w-full flex justify-between px-4 py-1"},Zs=t("h3",{class:"font-semibold"},"Date Registered",-1),Js={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},Qs=t("h3",{class:"font-semibold"},"Receipt Date",-1),eo={class:"w-full flex justify-between px-4 py-1"},to=t("h3",{class:"font-semibold"},"Test Status",-1),so={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},oo=t("h3",{class:"font-semibold"},"Ward/Location",-1),no={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},ro=t("h3",{class:"font-semibold"},"Request Origin",-1),lo={class:"w-full flex justify-between px-4 py-1"},ao=t("h3",{class:"font-semibold"},"Registered By",-1),io={class:"w-full flex justify-between px-4 py-2 bg-gray-50 border-b border-t border-dotted"},co=t("h3",{class:"font-semibold"},"Requested By",-1),uo={class:"mx-5 rounded border mb-5"},po={class:"flex items-center justify-between bg-gray-50 px-4 py-2 border-b rounded-t"},mo=t("h3",{class:"text-lg font-semibold text-black"},"Results",-1),fo={class:"justify-end flex items-center space-x-3"},ho={class:"flex items-center space-x-1"},_o=["innerHTML"],vo={key:1,class:"text-xs"},bo={key:0,class:"px-2.5 py-2.5 border-t"};function go(s,o,r,i,e,n){const m=ce,f=x("TransitionChild"),$=x("DialogTitle"),S=x("XMarkIcon"),d=st,I=us,P=x("DialogPanel"),_=x("Dialog"),D=x("TransitionRoot");return w(),R("div",null,[a(m,{click:n.init,color:"primary",text:"View",icon:e.viewIcon},null,8,["click","icon"]),a(D,{appear:"",show:e.show,as:"template"},{default:C(()=>[a(_,{as:"div",class:"relative z-10"},{default:C(()=>[a(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:C(()=>[_s]),_:1}),t("div",vs,[t("div",bs,[a(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:C(()=>[a(P,{class:"w-full max-w-7xl m-20 transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:C(()=>[t("div",gs,[a($,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:C(()=>[ys,K(" View Test ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...g)=>n.handleClick&&n.handleClick(...g))},[a(S,{class:"w-5 h-5"})])]),W(t("div",xs,[a(d,{loading:e.loading},null,8,["loading"])],512),[[Z,e.loading]]),t("div",ws,[t("div",ks,[Ss,t("div",Ts,[t("div",Cs,[Is,t("p",null,k(e.details.client.id),1)]),t("div",$s,[Ps,t("p",null,k(("capitalize"in s?s.capitalize:H(le))(`${e.details.client.first_name} ${e.details.client.middle_name!==null?e.details.client.middle_name:""} ${e.details.client.last_name}`)),1)]),t("div",Rs,[Ds,t("p",null,k(e.details.client.sex),1)]),t("div",js,[As,t("p",null,k(("calculateAge"in s?s.calculateAge:H(Ee))(e.details.client.date_of_birth)),1)])])]),t("div",Os,[Fs,t("div",Ls,[t("div",Us,[Bs,t("p",null,k(e.details.specimen_type),1)]),t("div",Es,[Ns,t("p",null,k(e.details.tracking_number),1)]),t("div",Ms,[qs,t("p",null,k(e.details.accession_number),1)]),t("div",Vs,[zs,t("p",null,k(("capitalize"in s?s.capitalize:H(le))(e.details.order_status.split("-").join(" "))),1)])])]),t("div",Gs,[Hs,t("div",Xs,[t("div",Ks,[Ys,t("p",null,k(e.details.test_type_name),1)]),t("div",Ws,[Zs,t("p",null,k(e.moment(e.details.created_date).format("dateFormat"in s?s.dateFormat:H(ue))),1)]),t("div",Js,[Qs,t("p",null,k(e.moment(e.details.updated_date).format("dateFormat"in s?s.dateFormat:H(ue))),1)]),t("div",eo,[to,t("p",null,k(("capitalizeStr"in s?s.capitalizeStr:H(lt))(e.details.status.split("-").join(" "))),1)]),t("div",so,[oo,t("p",null,k(e.details.requesting_ward),1)]),t("div",no,[ro,t("p",null,k(e.details.request_origin),1)]),t("div",lo,[ao,t("p",null,k(n.getRequestedBy(e.details.status_trail)),1)]),t("div",io,[co,t("p",null,k(e.details.requested_by),1)])])])]),t("div",uo,[t("div",po,[mo,t("div",fo,[e.details.status.toLowerCase()==="completed"||e.details.status.toLowerCase()==="verified"?(w(),q(m,{key:0,icon:e.viewIcon,text:"View Report",click:n.viewReport,color:"primary"},null,8,["icon","click"])):L("",!0),a(I,{item:e.details,onUpdate:n.updateChanges,color:"primary"},null,8,["item","onUpdate"]),a(m,{icon:e.printerIcon,text:"Print Accession Number",click:n.printAccessionNumber,color:"primary"},null,8,["icon","click"]),a(m,{icon:e.printerIcon,color:"success",text:"Print Tracking Number",click:n.printTrackingNumber},null,8,["icon","click"])])]),(w(!0),R(G,null,re(e.details.indicators,(g,l)=>{var c;return w(),R("div",{class:Fe(e.details.indicators.length!==l+1?"w-full px-5 py-2 border-b border-dotted flex justify-between items-center":"w-full px-5 py-2 flex justify-between items-center"),key:l},[t("h3",null,k(g.name),1),t("div",ho,[g.result?(w(),R("p",{key:0,innerHTML:g.result.value?g.result.value:"Not done"},null,8,_o)):L("",!0),(c=g.result)!=null&&c.value?(w(),R("span",vo,k(g==null?void 0:g.unit),1)):L("",!0)])],2)}),128)),e.details.test_type_name=="Cross-match"&&e.details.status.toLowerCase()=="verified"?(w(),R("div",bo,[a(m,{loading:e.zebraPrinting,click:()=>{n.printBBResults()},text:"Print results",color:"primary",icon:e.printerIcon},null,8,["loading","click","icon"])])):L("",!0)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const yo=ee(ps,[["render",go]]),xo={components:{TransitionRoot:ye,TransitionChild:xe,Dialog:we,DialogPanel:ke,DialogTitle:Se,XMarkIcon:te,UserIcon:Ne},data(){return{open:!1,addIcon:Ue,saveIcon:Me,clearIcon:qe,name:"",description:"",loading:!1,cookie:ie("token"),reasons:new Array,reasonsSelected:"",rawReasons:new Array}},props:{item:{required:!0,type:Object},text:{type:String,required:!0},action:{type:String,required:!0},icon:{type:[Object,Function],required:!0}},methods:{async init(){this.handleClick();const s={route:A.rejectionReasons,method:"GET",token:`${this.cookie}`},{error:o,data:r}=await O(s);r.value&&(this.rawReasons=r.value,r.value.map(i=>{this.reasons.push(i.description)})),o.value&&console.error(o.value)},async submitForm(){this.loading=!0;let s=null;this.rawReasons.map(n=>{n.description===this.reasonsSelected&&(s=n.id)});const o={route:`${A.testStatus}/${this.item.id}/${this.action}?status_reason_id=${s}&person_talked_to=${this.name}`,method:"PUT",token:`${this.cookie}`,body:{}},{data:r,error:i,pending:e}=await O(o);this.loading=e,r.value&&(B().$toast.success(`Test action "${this.text}" done successfully!`),this.handleClick(),this.loading=!1,this.$emit("update",!0)),i.value&&(console.error(i.value),B().$toast.error(Q),this.loading=!1)},handleClick(){this.open=!this.open},resetForm(){this.reasonsSelected="",this.$formkit.reset("rejectionForm")}}},wo=""+new URL("rdt_result_no_test.6a8034c1.svg",import.meta.url).href,ko=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),So={class:"fixed inset-0 overflow-y-auto"},To={class:"flex min-h-full items-center justify-center p-4 text-center"},Co={class:"border-b px-3 py-3 flex items-center justify-between"},Io=t("img",{src:wo,class:"w-8 h-8 mr-2"},null,-1),$o={class:"mt-2 space-y-3 px-5 py-5"},Po={class:"space-y-2"},Ro=t("h3",{class:"font-medium"},"Test Type",-1),Do={class:"border-b border-dotted text-gray-600"},jo={class:"space-y-2"},Ao=t("h3",{class:"font-medium"},"Specimen",-1),Oo={class:"border-b border-dotted text-gray-600"},Fo={class:"space-y-2"},Lo=t("h3",{class:"font-medium"},"Accession Number",-1),Uo={class:"border-b border-dotted text-gray-600"},Bo={class:"w-full flex items-center"},Eo={class:"w-full flex flex-col space-y-2"},No={class:"w-full flex flex-col space-y-2 pb-40"},Mo=t("label",{class:"font-medium"},"Select Reason(s)",-1),qo={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Vo(s,o,r,i,e,n){const m=ce,f=x("TransitionChild"),$=x("DialogTitle"),S=x("XMarkIcon"),d=x("FormKit"),I=x("multi-select"),P=Le,_=x("DialogPanel"),D=x("Dialog"),g=x("TransitionRoot");return w(),R("div",null,[t("div",null,[a(m,{text:r.text,color:"error",icon:r.icon,click:n.init},null,8,["text","icon","click"])]),a(g,{appear:"",show:e.open,as:"template"},{default:C(()=>[a(D,{as:"div",onClose:n.handleClick,class:"relative z-10"},{default:C(()=>[a(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:C(()=>[ko]),_:1}),t("div",So,[t("div",To,[a(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:C(()=>[a(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:C(()=>[t("div",Co,[a($,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:C(()=>[Io,K(" "+k(r.text.charAt(0).toUpperCase()+r.text.slice(1))+" Reason ",1)]),_:1}),t("button",{onClick:o[0]||(o[0]=(...l)=>n.handleClick&&n.handleClick(...l))},[a(S,{class:"w-5 h-5"})])]),a(d,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"rejectionForm"},{default:C(({value:l})=>[t("div",$o,[t("div",Po,[Ro,t("p",Do,k(r.item.test_type_name),1)]),t("div",jo,[Ao,t("p",Oo,k(r.item.specimen_type),1)]),t("div",Fo,[Lo,t("p",Uo,k(r.item.accession_number),1)]),t("div",Bo,[t("div",Eo,[a(d,{type:"text",label:"Person Talked To",validation:"required",modelValue:e.name,"onUpdate:modelValue":o[1]||(o[1]=c=>e.name=c)},null,8,["modelValue"])])]),t("div",No,[Mo,a(I,{style:{"--ms-max-height":"none !important"},modelValue:e.reasonsSelected,"onUpdate:modelValue":o[2]||(o[2]=c=>e.reasonsSelected=c),options:e.reasons,searchable:!0,required:!0,clear:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",qo,[a(P,{type:"button",text:"Clear form",click:n.resetForm},null,8,["click"]),a(m,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const zo=ee(xo,[["render",Vo]]),Go={components:{MagnifyingGlassIcon:_t,Listbox:jt,ListboxButton:At,ListboxLabel:Ot,ListboxOptions:Ft,ListboxOption:Lt,ChevronUpDownIcon:Qe,ArrowRightIcon:Mt,ChevronDownIcon:vt,Menu:Ut,MenuButton:Bt,MenuItems:Et,MenuItem:Nt,CheckIcon:bt,PopoverButton:Xt,Popover:Xe,PopoverPanel:Kt,XMarkIcon:te,CheckCircleIcon:Tt,FunnelIcon:Ct},setup(){const s=pe();ft({title:`${ht.name.toUpperCase()} - ${s.department} Tests`})},data(){return{moment:Y,addIcon:De,filterIcon:It,applyIcon:qt,acceptIcon:Be,moreActions:!1,okIcon:de,moreIcon:$t,lessIcon:Pt,clearIcon:Rt,dropIcon:ne,editIcon:ge,refreshIcon:Dt,dateRange:[],search:"",header:"Tests Lists",pages:[{name:"Home",link:"/home"}],headers:[{text:"PATIENT NO",value:"client.id",sortable:!0},{text:"PATIENT NAME",value:"name",sortable:!0},{text:"ACCESSION NO",value:"accession_number",sortable:!0},{text:"TEST",value:"test_type_name",sortable:!0},{text:"LOCATION",value:"requesting_ward",sortable:!0},{text:"ORDER STATUS",value:"order_status",sortable:!0},{text:"STATUS",value:"status",sortable:!0},{text:"DATE REGISTERED",value:"created_date",sortable:!0},{text:"ACTIONS",value:"actions"}],statuses:[{text:"Results",color:"primary",icon:De,status:"completed",show:"started"},{text:"Accept",color:"success",icon:de,status:"pending",show:"not-collected"},{text:"Start",color:"warning",icon:Vt,status:"started",show:"pending"},{text:"Authorize",color:"success",status:"verified",icon:de,show:"completed"}],rejectStatuses:[{name:"Reject",icon:ne,action:"rejected"},{name:"Void",icon:ne,action:"voided"},{name:"Not-done",icon:ne,action:"not_done"}],changing:!1,data:new Array,statusSelected:{name:"select status"},searchField:"accession_number",searchValue:"",cookie:ie("token"),loading:!1,serverItemsLength:0,serverOptions:{page:1,rowsPerPage:10,sortBy:"name"},authStore:pe(),testStatuses:new Array,filters:new Array}},created(){this.init()},methods:{async searchNlims(s){this.loading=!0;const o={route:`${A.nlimsTestSearch}?tracking_number=${s.replace(/\$$/,"")}`,method:"GET",token:`${this.cookie}`},{data:r,error:i}=await O(o);r.value&&(at(r.value),this.loading=!1),i.value&&(console.error(i.value),B().$toast.error(`${i.value.data.error}`),this.loading=!1)},async init(){this.loadStatuses(),this.loading=!0;const{page:s,rowsPerPage:o}=this.serverOptions;let r=this.getIdFromName(this.authStore.user.departments,this.authStore.department),i=this.statusSelected.name==="select status"?"":this.statusSelected.name;const e=this.dateRange!==null&&this.dateRange.length>0?Y(this.dateRange[0]).format("YYYY-MM-DD"):"",n=this.dateRange!==null&&this.dateRange.length>1?Y(this.dateRange[1]).format("YYYY-MM-DD"):"",m={route:`${A.tests}?minimal=true&page=${s}&per_page=${o}&status=${i.toLowerCase()}&search=${this.search}&department_id=${r}&start_date=${e}&end_date=${n}`,method:"GET",token:`${this.cookie}`},{data:f,error:$,pending:S}=await O(m);this.loading=S,f.value&&(this.data=f.value.data.map(d=>{var I,P,_,D;return{...d,name:`${le(`${(I=d.client)==null?void 0:I.first_name} ${((P=d.client)==null?void 0:P.middle_name)!==null?d.client.middle_name:""} ${(_=d.client)==null?void 0:_.last_name}`)} (${d.client.sex}, ${Ee((D=d.client)==null?void 0:D.date_of_birth)} yrs)`,order_status:`${d.order_status!==null?(d.order_status.charAt(0).toUpperCase()+d.order_status.slice(1)).split("-").join(" "):""}`,status:`${d.status!==null?d.status.charAt(0).toUpperCase()+d.status.slice(1):""}`,created_date:Y(d.created_date).utcOffset(2).format(ue)}}),this.serverItemsLength=f.value.meta.total_count,this.loading=!1),$.value&&(console.error($.value.data),B().$toast.error(Q),this.loading=!1)},async loadStatuses(){const s={route:`${A.testStatus}/all`,method:"GET",token:`${this.cookie}`},{data:o,error:r}=await O(s);o.value&&(this.testStatuses=o.value.map(i=>({id:i.id,name:i.name.charAt(0).toUpperCase()+i.name.slice(1)}))),r.value&&console.error(r.value)},async changeStatus(s,o){this.loading=!0;const r={route:`${A.testStatus}/${o}/${s}`,method:"PUT",token:`${this.cookie}`,body:{}},{data:i,error:e,pending:n}=await O(r);this.loading=n,i.value&&(this.init(),this.loading=!1),e.value&&(console.error(e.value),this.loading=!1)},async changeOrderStatus(s,o){this.loading=!0;const r={route:`${A.orderStatus}/${s}`,method:"PUT",token:`${this.cookie}`,body:{order_id:o}},{data:i,error:e,pending:n}=await O(r);this.loading=n,i.value&&(this.init(),this.loading=!1),e.value&&(console.error(e.value),this.loading=!1)},checkStatus(s,o){s.status==="completed"?o.test_type_name.toLowerCase().includes("culture")?this.redirect(o,`/tests/result/culture-sensitivity?accession_number=${o.accession_number}&test_id=${o.id}`):this.redirect(o,`/tests/result?accession_number=${o.accession_number}&test_id=${o.id}`):s.status!==""?this.changeStatus(s.status,o.id):this.printTest(o)},printTest(s){print()},getIdFromName(s,o){const r=s.find(i=>i.name===o);return r?r.id:null},updateTests(s){typeof s=="object"&&(this.serverOptions=s),this.init(),this.moreActions=!1},refreshTests(){this.searchValue="",this.search="",this.init()},update(s){this.search=s,this.searchValue=s,s!==""?this.checkTrackingNumber(s)?this.searchNlims(s):this.updateTests(s):this.init()},handleClick(){this.moreActions=!this.moreActions},redirect(s,o){this.$router.push(o)},checkTrackingNumber(s){return/^(x|l).*\d/.test(s.toLowerCase())},updateOnStatus(s){if(s.name!=="select status"){const o=this.filters.find(r=>r.origin==="statuses");o?o.value=s.name:this.filters.push({origin:"statuses",value:s.name})}this.statusSelected=s,this.init()},removeFilter(s){s.origin==="statuses"&&this.statusSelected.name!=="select status"&&this.updateOnStatus({name:"select status"});const o=this.filters.findIndex(r=>r.origin===s.origin);o!==-1&&this.filters.splice(o,1),this.init()},isCompletedByCurrentUserOrSuperAdmin(s){const o=this.authStore.user,r=s.completed_by;if(r){if(r.id!==o.id)return!0;if(r.is_super_admin===!0)return!0}return!1},shouldDisplayButton(s,o){const r=s.status.toLowerCase(),i=o.show.toLowerCase();if(r===i){const e=this.isCompletedByCurrentUserOrSuperAdmin(s);return r==="pending"&&s.order_status.toLowerCase()==="specimen not collected"?!1:e}return!1},hideRejectActions(s){return!["voided","test-rejected","verified"].includes(s.toLowerCase())}},watch:{authStore:{handler(){this.init()},deep:!0},dateRange:{handler(){this.init()},deep:!0},statusSelected:{handler(s){this.updateOnStatus(s)},deep:!0}}},Ho=""+new URL("experiment-results.d7dc2871.png",import.meta.url).href,Xo={class:"py-5 px-5"},Ko=t("div",{class:"flex items-center space-x-2 py-5"},[t("img",{src:Ho,alt:"experiment-results-icon",class:"w-auto h-8"}),t("h3",{class:"text-2xl font-semibold uppercase"},"Tests List")],-1),Yo={class:"flex justify-between items-center w-full py-2 mb-2"},Wo={class:"flex items-center space-x-2"},Zo={class:"relative z-10 w-40"},Jo={class:"pt-1"},Qo={class:"bg-gray-100 pl-2.5 rounded flex items-center text-zinc-500"},en={class:"w-72 ml-2"},tn={class:"py-3 flex items-center space-x-3"},sn={class:"py-2 flex items-center"},on={class:"w-full flex items-center justify-between space-x-2"},nn={class:"flex items-center space-x-2"},rn={key:0,class:"flex items-center space-x-2"},ln=t("div",{id:"tests-container"},null,-1);function an(s,o,r,i,e,n){const m=Ze,f=ce,$=et,S=x("FunnelIcon"),d=x("datepicker"),I=tt,P=Jt,_=yo,D=zo,g=mt;return w(),R("div",Xo,[a(m,{pages:e.pages},null,8,["pages"]),Ko,t("div",Yo,[t("div",Wo,[a(f,{text:"Refresh",color:"warning",icon:e.refreshIcon,click:()=>{n.refreshTests()},loading:e.loading},null,8,["icon","click","loading"]),t("div",Zo,[a($,{items:e.testStatuses,modelValue:e.statusSelected,"onUpdate:modelValue":o[0]||(o[0]=l=>e.statusSelected=l)},null,8,["items","modelValue"])]),t("div",Jo,[t("div",Qo,[a(S,{class:"w-5 h-5 mr-2"}),K(" Filter By Date Range "),t("div",en,[a(d,{required:"",position:"left",placeholder:"select start & end date",range:!0,format:"dd/MM/yyyy","input-class-name":"datepicker",modelValue:e.dateRange,"onUpdate:modelValue":o[1]||(o[1]=l=>e.dateRange=l)},null,8,["modelValue"])])])])]),a(I,{onUpdate:n.update,search:e.search},null,8,["onUpdate","search"])]),t("div",tn,[(w(!0),R(G,null,re(e.filters,(l,c)=>(w(),q(P,{value:{origin:"statuses",text:l.value},close:"",color:"green",key:c,onUpdate:n.removeFilter},null,8,["value","onUpdate"]))),128))]),a(g,{headers:e.headers,data:e.data,loading:e.loading,searchField:e.searchField,searchValue:e.searchValue,serverItemsLength:e.serverItemsLength,serverOptions:e.serverOptions,onUpdate:n.updateTests},{actions:C(({item:l})=>[t("div",sn,[t("div",on,[W(t("div",nn,[a(_,{data:l,onUpdate:n.updateTests},null,8,["data","onUpdate"]),l.status.toLowerCase()==="completed"?(w(),q(f,{key:0,click:()=>{n.checkStatus({status:"completed"},l)},text:"Edit",color:"success",icon:e.editIcon},null,8,["click","icon"])):L("",!0),(w(!0),R(G,null,re(e.statuses,(c,v)=>W((w(),q(f,{color:c.color,text:c.text,icon:c.icon,click:()=>{n.checkStatus(c,l)},key:v},null,8,["color","text","icon","click"])),[[Z,n.shouldDisplayButton(l,c)]])),128)),l.status.toLowerCase()!=="test-rejected"&&l.order_status.toLowerCase()==="specimen not collected"?(w(),q(f,{key:1,color:"success",text:"Accept",icon:e.acceptIcon,click:()=>n.changeOrderStatus("accepted",l.order_id)},null,8,["icon","click"])):L("",!0)],512),[[Z,!e.moreActions]]),n.hideRejectActions(l.status)?(w(),q(f,{key:0,click:n.handleClick,color:"",text:"",icon:e.moreActions==!0?e.lessIcon:e.moreIcon},null,8,["click","icon"])):L("",!0)]),n.hideRejectActions(l.status)?W((w(),R("div",rn,[n.hideRejectActions(l.status)?(w(!0),R(G,{key:0},re(e.rejectStatuses,(c,v)=>(w(),q(D,{item:l,key:v,text:c.name,icon:c.icon,action:c.action,onUpdate:n.updateTests},null,8,["item","text","icon","action","onUpdate"]))),128)):L("",!0)],512)),[[Z,e.moreActions]]):L("",!0)])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"]),ln])}const Gn=ee(Go,[["render",an]]);export{Gn as default};

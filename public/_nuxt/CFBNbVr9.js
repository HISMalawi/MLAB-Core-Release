import{_ as T}from"./DV1Zihh-.js";import{_ as S}from"./geU3gxiD.js";import{s as g,S as A,p as M,Y as O,G as P,V as B,q as V,z as x,x as r,b as k,e as v,f as s,y as l,g as e,j,t as d,h as E,L as y,_ as w,a as L}from"./Bz6dDDnm.js";import{r as b}from"./7v0OV8VH.js";import{r as D}from"./hv9qM_4X.js";import{_ as R}from"./DurIvlB0.js";import{S as q}from"./DXkUKhZN.js";import{P as $}from"./Vq2kRzrb.js";import{u as N}from"./CYvY0-Vn.js";import{r as U}from"./C64XfAR2.js";import{r as F}from"./CskYfaO9.js";import"./CJmHsYwL.js";import"./sX7iQee9.js";const X={components:{TransitionRoot:A,TransitionChild:M,Dialog:O,DialogPanel:P,DialogTitle:B,XMarkIcon:V},data(){return{viewIcon:b,show:!1,editIcon:D,moment:x}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},z={class:"fixed inset-0 overflow-y-auto"},G={class:"flex min-h-full items-center justify-center p-4 text-center"},H={class:"border-b px-3 py-3 flex items-center justify-between"},Y={class:"mt-2 space-y-3 px-5"},Q={class:"w-full flex flex-col space-y-1"},J={class:"w-full flex flex-col space-y-1"},K={class:"w-full flex flex-col space-y-1"},W={class:"w-full flex flex-col space-y-1"},Z={class:"w-full flex flex-col space-y-1"},ee={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function te(a,t,i,f,o,n){const c=w,p=r("TransitionChild"),_=r("DialogTitle"),u=r("XMarkIcon"),h=r("DialogPanel"),m=r("Dialog"),C=r("TransitionRoot");return k(),v("div",null,[s(c,{click:n.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),s(C,{appear:"",show:o.show,as:"template"},{default:l(()=>[s(m,{as:"div",class:"relative z-10"},{default:l(()=>[s(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>t[1]||(t[1]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),e("div",z,[e("div",G,[s(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[s(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",H,[s(_,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>t[2]||(t[2]=[j(" View Stock ")])),_:1}),e("button",{onClick:t[0]||(t[0]=(...I)=>n.handleClick&&n.handleClick(...I))},[s(u,{class:"w-5 h-5"})])]),e("div",Y,[e("div",Q,[t[3]||(t[3]=e("label",{class:"font-semibold text-lg"},"Name",-1)),e("p",null,d(i.data.stock_item.name),1)]),e("div",J,[t[4]||(t[4]=e("label",{class:"font-semibold text-lg"},"Description",-1)),e("p",null,d(i.data.stock_item.description),1)]),e("div",K,[t[5]||(t[5]=e("label",{class:"font-semibold text-lg"},"Location",-1)),e("p",null,d(i.data.stock_location.name),1)]),e("div",W,[t[6]||(t[6]=e("label",{class:"font-semibold text-lg"},"Quantity",-1)),e("p",null,d(i.data.quantity),1)]),e("div",Z,[t[7]||(t[7]=e("label",{class:"font-semibold text-lg"},"Date modified",-1)),e("p",null,d(o.moment(i.data.updated_date).format("DATE_FORMAT"in a?a.DATE_FORMAT:E(y))),1)])]),e("div",ee,[s(c,{click:()=>{a.$router.push("/stock-management/stock-items")},icon:o.editIcon,text:"Edit",color:"success"},null,8,["click","icon"])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const oe=g(X,[["render",te]]),se={setup(){N({title:`${$.name.toUpperCase()} - Stock`})},data(){return{header:"Stock",addIcon:U,viewIcon:b,deleteIcon:F,editIcon:D,pages:[{name:"Home",link:"/home"},{name:"Stock Management",link:"#"}],search:"",cookie:L("token"),headers:[{text:"name",value:"stock_item.name",sortable:!0},{text:"description",value:"stock_item.description"},{text:"quantity",value:"quantity"},{text:"date modified",value:"updated_date"},{text:"actions",value:"actions"}],loading:!1,serverItemsLength:0,stocks:new Array,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init()},computed:{filteredStocks(){return this.stocks.map(a=>({...a,updated_date:x(a.updated_date).format(y)}))}},methods:{async init(){this.loading=!0;const a=new q,{page:t,rowsPerPage:i}=this.serverOptions;let f=`?page=${t}&per_page=${i}&search=${this.search}`;const{data:o,error:n,pending:c}=await a.getStock(`${this.cookie}`,f);this.loading=c,o.value&&(this.loading=!1,this.stocks=o.value.data),n.value&&(this.loading=!1,console.error(n.value))}},watch:{search(){this.init()}}},ae={class:"px-5 py-5"},ne={class:"flex items-center justify-between py-5"},ie={class:"text-2xl font-semibold"},le={class:"flex items-center justify-end py-5"},ce={class:"py-2 flex items-center space-x-2"};function re(a,t,i,f,o,n){const c=T,p=S,_=oe,u=w,h=R;return k(),v("div",ae,[s(c,{pages:o.pages},null,8,["pages"]),e("div",ne,[e("h3",ie,d(o.header),1)]),e("div",le,[s(p,{search:o.search,"onUpdate:search":t[0]||(t[0]=m=>o.search=m)},null,8,["search"])]),e("div",null,[s(h,{headers:o.headers,data:n.filteredStocks,loading:o.loading,"search-field":"name","search-value":o.search,serverItemsLength:o.serverItemsLength,serverOptions:o.serverOptions,onUpdate:n.init},{actions:l(({item:m})=>[e("div",ce,[s(_,{data:m},null,8,["data"]),s(u,{click:()=>{a.$router.push("/stock-management/stock-items")},text:"Edit",color:"success",icon:o.editIcon},null,8,["click","icon"]),s(u,{click:()=>{a.$router.push("/stock-management/stock-items")},text:"Delete",color:"error",icon:o.deleteIcon},null,8,["click","icon"])])]),_:1},8,["headers","data","loading","search-value","serverItemsLength","serverOptions","onUpdate"])])])}const be=g(se,[["render",re]]);export{be as default};

import{W as m,l as p,m as n,b as i,e as l,f as u,i as f,v,g as y,F as S,j as _,t as w,s as V}from"./Cg5p-McN.js";import{r as k}from"./aBMXVFc4.js";const c=m("search",{state:()=>({recent:[]}),actions:{addRecent(e){this.recent.push(e)}},persist:{storage:localStorage}}),b={props:{search:{required:!0,type:String},placeholder:{required:!1,type:String,default:"Search..."}},components:{XMarkIcon:k},data(){return{value:this.search,history:[],showSuggestions:!1}},methods:{emitValue(){let e=this.value.trim();this.$emit("update",e),this.$emit("update:search",e),e&&e.length>=4&&!this.history.includes(e)&&(this.history.unshift(e),this.saveHistory(e))},saveHistory(e){const{addRecent:t,recent:a}=c();t(e),a.length>20&&a.pop()},loadHistory(){const{recent:e}=c();this.history=e},filterOptions(e){return this.history.filter(t=>t.toLowerCase().includes(e.toLowerCase()))},selectSuggestion(e){this.value=e,this.showSuggestions=!1},hideSuggestions(){setTimeout(()=>{this.showSuggestions=!1},200)},clearValue(){this.value="",this.showSuggestions=!1}},watch:{value(){this.emitValue()}},computed:{suggestions(){return this.filterOptions(this.value).slice(0,5)}},mounted(){this.loadHistory()}},x={class:"relative"},C={key:0,class:"absolute z-50 top-full left-0 w-full bg-white rounded-md shadow-md"},B=["onClick"];function F(e,t,a,H,r,o){const h=n("FormKit"),d=n("XMarkIcon");return i(),l("div",x,[u(h,{label:"",type:"search",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),modelModifiers:{lazy:!0},placeholder:"Search",delay:1e3,"prefix-icon":"search",autocomplete:"off",onBlur:o.hideSuggestions,onFocus:t[1]||(t[1]=s=>r.showSuggestions=!0)},null,8,["modelValue","onBlur"]),f(y("button",{onClick:t[2]||(t[2]=(...s)=>o.clearValue&&o.clearValue(...s)),class:"absolute inset-y-0 right-0 flex items-center pr-3"},[u(d,{class:"w-5 h-5 mt-2"})],512),[[v,r.value!==""]]),r.showSuggestions&&o.suggestions.length>0?(i(),l("ul",C,[(i(!0),l(S,null,_(o.suggestions,(s,g)=>(i(),l("li",{key:g,onClick:M=>o.selectSuggestion(s),class:"px-3 py-2 hover:bg-gray-100 cursor-pointer"},w(s),9,B))),128))])):V("",!0)])}const N=p(b,[["render",F]]);export{N as _};

import{_ as O}from"./Breadcrumb.fceb39b7.js";import{u as j,a as b,_ as w,f as a,o as C,c as D,d as t,b as e,g as s,h as v,e as T,t as M}from"./entry.8d1887e0.js";import{_ as B}from"./OutlinedButton.30e426f7.js";import{r as K,e as R,f as $,a as N}from"./fetch.1b1fb40d.js";import{r as I}from"./XMarkIcon.dad50e8c.js";import{r as z}from"./UserIcon.64ed093f.js";import{r as q}from"./ArrowDownTrayIcon.fc686a16.js";import{r as G}from"./ArrowUturnLeftIcon.5f900b8d.js";import{S,h as V,U,G as F,V as P}from"./transition.166bd9ac.js";import{_ as X}from"./clinical_fe.8e7e8067.js";import{_ as H}from"./SearchBar.a918a5ce.js";import{r as E,a as L}from"./PencilSquareIcon.21ca2aeb.js";import{r as J}from"./TrashIcon.8669999a.js";import{_ as Q}from"./Datatable.cca64e33.js";import{u as W}from"./vue.f36acd1f.90da7972.js";import{P as Y}from"./package.d411c004.js";import{r as Z}from"./MagnifyingGlassIcon.659a43f2.js";import"./nuxt-link.8f68ed8a.js";import"./HomeIcon.a70aee08.js";import"./constants.6559c015.js";import"./PrinterIcon.1c7de3dc.js";import"./hidden.4fcf3718.js";import"./Loader.14568b8d.js";const ee={components:{TransitionRoot:S,TransitionChild:V,Dialog:U,DialogPanel:F,DialogTitle:P,XMarkIcon:I,UserIcon:z},data(){return{open:!1,addIcon:K,saveIcon:q,clearIcon:G,reason:"",loading:!1,cookie:j("token")}},methods:{async submitForm(){this.loading=!0;const c={route:R.rejectionReasons,method:"POST",token:`${this.cookie}`,body:{description:this.reason}},{pending:n,error:l,data:r}=await $(c);this.loading=n,r.value&&(this.adjustVisibility(),b().$toast.success("Specimen rejection reason created successfully!"),this.loading=!1,this.reason="",this.$emit("update",!0)),l.value&&(this.adjustVisibility(),b().$toast.error(`${l.value.data.error}`),console.log(l.value.data.error),this.loading=!1)},adjustVisibility(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},te=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),oe={class:"fixed inset-0 overflow-y-auto"},ne={class:"flex min-h-full items-center justify-center p-4 text-center"},ae={class:"border-b px-3 py-3 flex items-center justify-between"},se=t("img",{src:X,class:"w-8 h-8 mr-2"},null,-1),ie={class:"mt-2 space-y-3"},le={class:"w-full flex items-center px-5"},ce={class:"w-full flex flex-col space-y-2"},re={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function de(c,n,l,r,o,i){const m=T,d=a("TransitionChild"),f=a("DialogTitle"),h=a("XMarkIcon"),p=a("FormKit"),_=B,g=a("DialogPanel"),u=a("Dialog"),k=a("TransitionRoot");return C(),D("div",null,[t("div",null,[e(m,{text:"New Rejection Reason",color:"primary",icon:o.addIcon,click:i.adjustVisibility},null,8,["icon","click"])]),e(k,{appear:"",show:o.open,as:"template"},{default:s(()=>[e(u,{as:"div",onClose:i.adjustVisibility,class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[te]),_:1}),t("div",oe,[t("div",ne,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",ae,[e(f,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:s(()=>[se,v(" Add Specimen Rejection Reason ")]),_:1}),t("button",{onClick:n[0]||(n[0]=(...x)=>i.adjustVisibility&&i.adjustVisibility(...x))},[e(h,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1,id:"submitForm"},{default:s(({value:x})=>[t("div",ie,[t("div",le,[t("div",ce,[e(p,{type:"text",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":n[1]||(n[1]=y=>o.reason=y)},null,8,["modelValue"])])])]),t("div",re,[e(_,{text:"Clear form",type:"button",click:()=>{i.clearForm()}},null,8,["click"]),e(m,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ue=w(ee,[["render",de]]),me={components:{TransitionRoot:S,TransitionChild:V,Dialog:U,DialogPanel:F,DialogTitle:P,XMarkIcon:I},data(){return{viewIcon:E,show:!1}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},pe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),_e={class:"fixed inset-0 overflow-y-auto"},fe={class:"flex min-h-full items-center justify-center p-4 text-center"},he={class:"border-b px-3 py-3 flex items-center justify-between"},ge=t("img",{src:X,class:"w-8 h-8 mr-2"},null,-1),xe={class:"space-y-3 px-5 py-5"},ye={class:"w-full flex flex-col space-y-1"},ve=t("label",{class:"font-semibold text-lg"},"Reason",-1),be={class:"underline"};function ke(c,n,l,r,o,i){const m=T,d=a("TransitionChild"),f=a("DialogTitle"),h=a("XMarkIcon"),p=a("DialogPanel"),_=a("Dialog"),g=a("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(g,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(_,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[pe]),_:1}),t("div",_e,[t("div",fe,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",he,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[ge,v(" View Specimen Rejection Reason ")]),_:1}),t("button",{onClick:n[0]||(n[0]=(...u)=>i.handleClick&&i.handleClick(...u))},[e(h,{class:"w-5 h-5"})])]),t("div",xe,[t("div",ye,[ve,t("p",be,M(l.data.description),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const we=w(me,[["render",ke]]),Ce={components:{TransitionRoot:S,TransitionChild:V,Dialog:U,DialogPanel:F,DialogTitle:P,XMarkIcon:I},data(){return{viewIcon:E,show:!1,editIcon:L,saveIcon:q,cookie:j("token"),loading:!1}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const c={route:`${R.rejectionReasons}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:n,error:l,data:r}=await $(c);this.loading=n,r.value&&(this.handleClick(),b().$toast.success("Specimen rejection reason updated successfully!"),this.loading=!1,this.$emit("update",!0)),l.value&&(b().$toast.success("An error occurred, please try again!"),this.handleClick(),console.error(l.value),this.loading=!1)},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("submitForm")}}},De=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),je={class:"fixed inset-0 overflow-y-auto"},Te={class:"flex min-h-full items-center justify-center p-4 text-center"},Re={class:"border-b px-3 py-3 flex items-center justify-between"},$e=t("img",{src:X,class:"w-8 h-8 mr-2"},null,-1),Ie={class:"mt-2 space-y-3"},Se={class:"w-full flex items-center px-5 space-x-3"},Ve={class:"w-full flex flex-col space-y-2"},Ue={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Fe(c,n,l,r,o,i){const m=T,d=a("TransitionChild"),f=a("DialogTitle"),h=a("XMarkIcon"),p=a("FormKit"),_=B,g=a("DialogPanel"),u=a("Dialog"),k=a("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,color:"success",text:"Edit",icon:o.editIcon},null,8,["click","icon"]),e(k,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(u,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[De]),_:1}),t("div",je,[t("div",Te,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Re,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[$e,v(" Edit Sample Rejection Reason ")]),_:1}),t("button",{onClick:n[0]||(n[0]=(...x)=>i.handleClick&&i.handleClick(...x))},[e(h,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1,id:"submitForm"},{default:s(({value:x})=>[t("div",Ie,[t("div",Se,[t("div",Ve,[e(p,{type:"textarea",label:"Reason",validation:"required",modelValue:l.data.description,"onUpdate:modelValue":n[1]||(n[1]=y=>l.data.description=y)},null,8,["modelValue"])])]),t("div",Ue,[e(_,{type:"button",click:()=>{i.clearForm()},text:"Clear form",color:"error"},null,8,["click"]),e(m,{type:"submit",click:()=>{},color:"success",loading:o.loading,icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Pe=w(Ce,[["render",Fe]]),Me={components:{TransitionRoot:S,TransitionChild:V,Dialog:U,DialogPanel:F,DialogTitle:P,XMarkIcon:I,ExclamationTriangleIcon:N},data(){return{show:!1,deleteIcon:J,loading:!1,reason:"",cookie:j("token")}},props:{data:{type:Object,required:!0}},methods:{async deleteData(c){this.loading=!0;const n={route:`${R.rejectionReasons}/${c}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:l,error:r,data:o}=await $(n);o.value&&(this.handleClick(),b().$toast.success("Specimen rejection reason deleted successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(b().$toast.error("An error occurred, please try again!"),console.log(r.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Be=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Xe={class:"fixed inset-0 overflow-y-auto"},qe={class:"flex min-h-full items-center justify-center p-4 text-center"},Ee={class:"border-b px-3 py-3 flex items-center justify-between"},Ae={class:"mt-2 space-y-3 px-5"},Oe={class:"rounded px-2 py-2"},Ke={class:"font-semibold text-red-500"},Ne={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function ze(c,n,l,r,o,i){const m=T,d=a("TransitionChild"),f=a("ExclamationTriangleIcon"),h=a("DialogTitle"),p=a("XMarkIcon"),_=a("FormKit"),g=B,u=a("DialogPanel"),k=a("Dialog"),x=a("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(x,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(k,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Be]),_:1}),t("div",Xe,[t("div",qe,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(u,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Ee,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[e(f,{class:"h-5 w-5 mr-2"}),v(" Confirm delete ")]),_:1}),t("button",{onClick:n[0]||(n[0]=(...y)=>i.handleClick&&i.handleClick(...y))},[e(p,{class:"w-5 h-5"})])]),e(_,{type:"form","submit-label":"Update",onSubmit:n[2]||(n[2]=y=>i.deleteData(l.data.id)),actions:!1},{default:s(({value:y})=>[t("div",Ae,[t("div",Oe,[v(" Do you really want to delete "),t("span",Ke,M(l.data.description),1),v("? Note that once this action is completed, it can not be undone ")]),e(_,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":n[1]||(n[1]=A=>o.reason=A)},null,8,["modelValue"])]),t("div",Ne,[e(g,{type:"button",click:()=>{i.handleClick()},text:"Cancel"},null,8,["click"]),e(m,{loading:o.loading,type:"submit",click:()=>{},color:"error",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ge=w(Me,[["render",ze]]),He={setup(){W({title:`${Y.name.toUpperCase()} - Specimen Rejection Reasons`})},components:{MagnifyingGlassIcon:Z},data(){return{header:"Specimen Rejection Reasons",reasons:new Array,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],search:"",searchValue:"",loading:!1,cookie:j("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"reason",value:"description",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(c){this.searchValue=c,this.search=c},async init(){this.loading=!0;const c={route:R.rejectionReasons,method:"GET",token:`${this.cookie}`},{pending:n,error:l,data:r}=await $(c);this.loading=n,r.value&&(this.loading=!1,this.reasons=r.value),l.value&&(this.loading=!1,console.log(l.value))},updateSpecimenRejection(c){c&&this.init()}}},Le={class:"py-5 px-5"},Je={class:"flex items-center justify-between py-5"},Qe={class:"text-2xl font-semibold"},We={class:"flex items-center space-x-3"},Ye={class:"flex justify-end w-full px-2 py-2 mb-2"},Ze={class:"py-2 flex items-center space-x-2"};function et(c,n,l,r,o,i){const m=O,d=ue,f=H,h=we,p=Pe,_=Ge,g=Q;return C(),D("div",Le,[e(m,{pages:o.pages},null,8,["pages"]),t("div",Je,[t("h3",Qe,M(o.header),1),t("div",We,[e(d,{onUpdate:i.updateSpecimenRejection},null,8,["onUpdate"])])]),t("div",Ye,[e(f,{search:o.search,"onUpdate:search":n[0]||(n[0]=u=>o.search=u),onUpdate:i.updateSearch},null,8,["search","onUpdate"])]),e(g,{headers:o.headers,data:o.reasons,loading:o.loading,"search-value":o.searchValue,"search-field":"description"},{actions:s(({item:u})=>[t("div",Ze,[e(h,{data:u},null,8,["data"]),e(p,{data:u,onUpdate:i.updateSpecimenRejection},null,8,["data","onUpdate"]),e(_,{data:u,onUpdate:i.updateSpecimenRejection},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const Ct=w(He,[["render",et]]);export{Ct as default};

import{_ as L}from"./D2iAdfOK.js";import{S as U,p as S,Y as R,G as A,V as M,q as j,s as Y,a as E,l as b,m as w,u as D,E as B,x as C,y as l,b as v,e as T,g as t,f as o,z as i,j as V,_ as q,A as J,B as O,C as X,t as I,h as k,O as G,L as N,K as P}from"./CpqwsBCr.js";import{_ as K}from"./BeBt5uam.js";import{r as Q}from"./pZMJ6Qi7.js";import{r as z}from"./DgbeGPrl.js";import{r as W}from"./C0WmLC-R.js";import{_ as Z}from"./BBzQqOzR.js";import{_ as H}from"./BBIgpWSn.js";import{_ as ee}from"./DFbPGSN_.js";import{u as F}from"./Dkj5C81l.js";import{P as te}from"./CejigzqB.js";import{u as oe}from"./3Owfe8OW.js";import{r as se}from"./BK-u_zKT.js";import"./C1gcPR4j.js";import"./DicwA20n.js";import"./CBnClnGu.js";import"./CX_spC93.js";const ae={components:{TransitionRoot:U,TransitionChild:S,Dialog:R,DialogPanel:A,DialogTitle:M,XMarkIcon:j,UserIcon:Q},data(){return{open:!1,addIcon:Y,saveIcon:z,clearIcon:W,loading:!1,name:"",shortName:"",cookie:E("token")}},methods:{async submitForm(){this.loading=!0;const a={route:b.drugs,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName}},{pending:e,error:r,data:c}=await w(a);this.loading=e,c.value&&(this.handleClick(),D().$toast.success(`${this.name} drug created successfully!`),this.loading=!1,this.shortName="",this.name="",this.$emit("update",!0)),r.value&&(this.handleClick(),console.error(r.value),D().$toast.error(B),this.loading=!1)},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},ne={class:"fixed inset-0 overflow-y-auto"},le={class:"flex min-h-full items-center justify-center p-4 text-center"},ie={class:"border-b px-3 py-3 flex items-center justify-between"},re={class:"mt-2 space-y-3"},ce={class:"w-full flex items-center px-5"},de={class:"w-full flex flex-col space-y-2"},ue={class:"w-full flex items-center px-5 space-x-3"},me={class:"w-full flex flex-col space-y-2"},pe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function fe(a,e,r,c,s,n){const p=q,m=l("TransitionChild"),f=l("DialogTitle"),_=l("XMarkIcon"),u=l("FormKit"),h=K,g=l("DialogPanel"),d=l("Dialog"),$=l("TransitionRoot");return v(),T("div",null,[t("div",null,[o(p,{text:"Create drug",color:"primary",icon:s.addIcon,click:n.handleClick},null,8,["icon","click"])]),o($,{appear:"",show:s.open,as:"template"},{default:i(()=>[o(d,{as:"div",onClose:n.handleClick,class:"relative z-10"},{default:i(()=>[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>e[3]||(e[3]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",ne,[t("div",le,[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[o(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[t("div",ie,[o(f,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:i(()=>e[4]||(e[4]=[V(" Create drug ")])),_:1}),t("button",{onClick:e[0]||(e[0]=(...y)=>n.handleClick&&n.handleClick(...y))},[o(_,{class:"w-5 h-5"})])]),o(u,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"submitForm"},{default:i(({value:y})=>[t("div",re,[t("div",ce,[t("div",de,[o(u,{type:"text",label:"Name",validation:"required",modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=x=>s.name=x)},null,8,["modelValue"])])]),t("div",ue,[t("div",me,[o(u,{type:"text",label:"Short Name",validation:"required",modelValue:s.shortName,"onUpdate:modelValue":e[2]||(e[2]=x=>s.shortName=x)},null,8,["modelValue"])])])]),t("div",pe,[o(h,{type:"button",click:()=>{n.clearForm()},text:"Clear form"},null,8,["click"]),o(p,{loading:s.loading,type:"submit",click:()=>{},color:"success",icon:s.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const _e=C(ae,[["render",fe]]),he={components:{TransitionRoot:U,TransitionChild:S,Dialog:R,DialogPanel:A,DialogTitle:M,XMarkIcon:j},data(){return{viewIcon:J,show:!1,editIcon:O,moment:X}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},ge={class:"fixed inset-0 overflow-y-auto"},xe={class:"flex min-h-full items-center justify-center p-4 text-center"},ve={class:"border-b px-3 py-3 flex items-center justify-between"},ye={class:"space-y-3 px-5 py-5"},ke={class:"w-full flex flex-col space-y-1"},be={class:"underline"},we={class:"w-full flex flex-col space-y-1"},De={class:"underline"},Ce={class:"w-full flex flex-col space-y-1"},Te={class:"underline"};function Ve(a,e,r,c,s,n){const p=q,m=l("TransitionChild"),f=l("DialogTitle"),_=l("XMarkIcon"),u=l("DialogPanel"),h=l("Dialog"),g=l("TransitionRoot");return v(),T("div",null,[o(p,{click:n.handleClick,color:"primary",text:"View",icon:s.viewIcon},null,8,["click","icon"]),o(g,{appear:"",show:s.show,as:"template"},{default:i(()=>[o(h,{as:"div",class:"relative z-10"},{default:i(()=>[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>e[1]||(e[1]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",ge,[t("div",xe,[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[o(u,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[t("div",ve,[o(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>e[2]||(e[2]=[t("img",{src:H,class:"w-8 h-8 mr-2"},null,-1),V(" View drug ")])),_:1}),t("button",{onClick:e[0]||(e[0]=(...d)=>n.handleClick&&n.handleClick(...d))},[o(_,{class:"w-5 h-5"})])]),t("div",ye,[t("div",ke,[e[3]||(e[3]=t("label",{class:"font-semibold text-lg"},"Name",-1)),t("p",be,I(r.data.name),1)]),t("div",we,[e[4]||(e[4]=t("label",{class:"font-semibold text-lg"},"Short Name",-1)),t("p",De,I(r.data.short_name),1)]),t("div",Ce,[e[5]||(e[5]=t("label",{class:"font-semibold text-lg"},"Date Created",-1)),t("p",Te,I(s.moment(r.data.created_date).format("DATE_FORMAT"in a?a.DATE_FORMAT:k(G))),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const $e=C(he,[["render",Ve]]),Ie={components:{TransitionRoot:U,TransitionChild:S,Dialog:R,DialogPanel:A,DialogTitle:M,XMarkIcon:j},data(){return{editIcon:O,show:!1,saveIcon:z,name:"",shortName:"",loading:!1,cookie:E("token")}},props:{data:{type:Object,required:!0}},methods:{async init(){this.handleClick(),this.loading=!0;const a={route:`${b.drugs}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{pending:e,error:r,data:c}=await w(a);this.loading=e,c.value&&(this.shortName=c.value.short_name,this.name=c.value.name),r.value&&console.log(r.value)},async submitForm(){this.loading=!0;const a={route:`${b.drugs}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName}},{pending:e,error:r,data:c}=await w(a);this.loading=e,c.value&&(this.handleClick(),D().$toast.success("Drug updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(this.handleClick(),D().$toast.error(B),console.log(r.value),this.loading=!1)},clearForm(){this.$formkit.reset("editForm")},handleClick(){this.show=!this.show}}},Ne={class:"fixed inset-0 overflow-y-auto"},Pe={class:"flex min-h-full items-center justify-center p-4 text-center"},Fe={class:"border-b px-3 py-3 flex items-center justify-between"},Ue={class:"mt-2 space-y-3"},Se={class:"w-full flex items-center px-5"},Re={class:"w-full flex flex-col space-y-2"},Ae={class:"w-full flex items-center px-5 space-x-3"},Me={class:"w-full flex flex-col space-y-2"},je={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ee(a,e,r,c,s,n){const p=q,m=l("TransitionChild"),f=l("DialogTitle"),_=l("XMarkIcon"),u=l("FormKit"),h=K,g=l("DialogPanel"),d=l("Dialog"),$=l("TransitionRoot");return v(),T("div",null,[o(p,{click:n.init,text:"Edit",color:"success",icon:s.editIcon},null,8,["click","icon"]),o($,{appear:"",show:s.show,as:"template"},{default:i(()=>[o(d,{as:"div",class:"relative z-10"},{default:i(()=>[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>e[3]||(e[3]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",Ne,[t("div",Pe,[o(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[o(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[t("div",Fe,[o(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>e[4]||(e[4]=[V(" Edit drug ")])),_:1}),t("button",{onClick:e[0]||(e[0]=(...y)=>n.handleClick&&n.handleClick(...y))},[o(_,{class:"w-5 h-5"})])]),o(u,{type:"form",id:"editForm","submit-label":"Update",onSubmit:n.submitForm,actions:!1},{default:i(({value:y})=>[t("div",Ue,[t("div",Se,[t("div",Re,[o(u,{type:"text",label:"Name",validation:"required",modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=x=>s.name=x)},null,8,["modelValue"])])]),t("div",Ae,[t("div",Me,[o(u,{type:"text",label:"Short Name",validation:"required",modelValue:s.shortName,"onUpdate:modelValue":e[2]||(e[2]=x=>s.shortName=x)},null,8,["modelValue"])])])]),t("div",je,[o(h,{type:"button",click:()=>{n.clearForm()},text:"Clear form"},null,8,["click"]),o(p,{loading:s.loading,type:"submit",click:()=>{},color:"success",icon:s.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const qe=C(Ie,[["render",Ee]]),Be={setup(){oe({title:`${te.name.toUpperCase()} - Drugs`})},data(){return{header:"List Of Drugs",drugs:new Array,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],loading:!1,search:"",searchValue:"",cookie:E("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"date created",value:"created_date"},{text:"actions",value:"actions"}]}},components:{MagnifyingGlassIcon:se},created(){this.init()},methods:{updateSearch(a){this.searchValue=a,this.search=a},async init(){this.loading=!0;const a={route:b.drugs,method:"GET",token:`${this.cookie}`},{pending:e,error:r,data:c}=await w(a);this.loading=e,c.value&&(this.drugs=c.value.map(s=>({...s,created_date:X(s.created_date).format(G)})),this.loading=!1),r.value&&(console.log(r.value),this.loading=!1)},updateDrugs(a){a&&(this.search="",this.searchValue="",this.init())}}},Oe={class:"py-5 px-5"},Xe={class:"flex items-center justify-between py-5"},Ge={class:"flex items-center space-x-3"},Ke={class:"flex justify-end w-full px-2 py-2 mb-2"},ze={class:"py-2 flex items-center space-x-2"};function He(a,e,r,c,s,n){const p=L,m=_e,f=Z,_=$e,u=qe,h=l("DrugsDeleteDialog"),g=ee;return v(),T("div",Oe,[o(p,{pages:s.pages},null,8,["pages"]),t("div",Xe,[e[2]||(e[2]=t("div",{class:"text-2xl font-semibold flex items-center uppercase"},[t("img",{src:H,alt:"report-icon",class:"w-8 h-8 mr-2"}),V(" Drugs ")],-1)),t("div",Ge,[("usePermissions"in a?a.usePermissions:k(F))().can.manage("test_catalog")?(v(),N(m,{key:0,onUpdate:n.updateDrugs},null,8,["onUpdate"])):P("",!0)])]),t("div",Ke,[("usePermissions"in a?a.usePermissions:k(F))().can.manage("test_catalog")?(v(),N(f,{key:0,search:s.search,"onUpdate:search":e[0]||(e[0]=d=>s.search=d),onUpdate:n.updateSearch,modelValue:s.search,"onUpdate:modelValue":e[1]||(e[1]=d=>s.search=d)},null,8,["search","onUpdate","modelValue"])):P("",!0)]),("usePermissions"in a?a.usePermissions:k(F))().can.manage("test_catalog")?(v(),N(g,{key:0,headers:s.headers,data:s.drugs,loading:s.loading,"search-value":s.searchValue,"search-field":"name"},{actions:i(({item:d})=>[t("div",ze,[o(_,{data:d},null,8,["data"]),o(u,{data:d,onUpdate:n.updateDrugs},null,8,["data","onUpdate"]),o(h,{data:d,onUpdate:n.updateDrugs},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])):P("",!0)])}const ut=C(Be,[["render",He]]);export{ut as default};

import{_ as ne}from"./BIgjk9bL.js";import{_ as ce}from"./BpMjlwPN.js";import{d as ie,aE as de,r as v,a as ue,a5 as le,aj as pe,u as me,w as _e,C,c as ye,o as J,y as he,b as f,e as k,f as m,h as o,g as e,k as w,H as be,z as xe,t as a,K as G,F as ve,j as fe,l as U,m as z,aF as ke,E as ge,_ as $e,n as Ce}from"./Iy63StId.js";import{_ as Re}from"./9cDXPPtc.js";import{_ as je,a as we}from"./Di7YmAEr.js";import{u as De}from"./dSQnwF8t.js";import{_ as Qe}from"./DMYUdFKp.js";import{_ as Ne}from"./CJfn8iQP.js";import{u as Te}from"./DZWvke74.js";import{P as Ye}from"./yiwDnRAW.js";import{r as Ee}from"./Ch943h6f.js";import{r as Me}from"./5bsad-w_.js";import"./CY_pW6Pm.js";import"./Dndf7ZKt.js";import"./Byb5n9Ur.js";import"./G37wRrHr.js";import"./57K4Quj0.js";import"./BklODkO7.js";import"./CUkWAT3i.js";import"./BAFJmU_2.js";import"./DW7An3PC.js";const Ae={class:"px-5 py-5"},Be=e("div",{class:"py-5"},[e("div",{class:"text-2xl font-semibold flex items-center uppercase"},[e("img",{src:Qe,alt:"report-icon",class:"w-8 h-8 mr-2"}),w(" Biochemistry Report ")])],-1),Oe={class:"w-full flex justify-between py-5"},Se={class:"flex items-center space-x-3"},qe={class:"bg-gray-100 pl-2.5 rounded flex items-center text-zinc-500"},Fe={class:"w-36 ml-2 bg-white"},Ie={class:"border rounded"},He={class:"rounded-tr rounded-tl border-b px-5 py-5 flex items-center justify-between"},Le=e("div",{class:"flex flex-col space-y-2"},[e("img",{src:Ne,alt:"app-logo",class:"w-24 h-24 object-cover"}),e("h3",{class:"text-xl font-semibold"}," BIOCHEMISTRY MoH LABORATORY REPORT ")],-1),Pe={class:"px-4 py-2.5 font-medium"},Ve={class:"font-normal"},Je={class:"overflow-x-auto rounded border-t relative"},Ge={key:0,class:"w-full bg-black bg-opacity-5 absolute flex space-y-2 justify-center py-20 mx-auto h-full"},Ue={class:"flex flex-col items-center space-y-"},ze={class:"overflow-x-auto"},Ke=e("thead",{class:"border-b"},[e("tr",{class:"w-full bg-gray-50"},[e("th",{class:"px-4 py-2 uppercase border-r"},"Laboratory Service"),e("th",{class:"px-4 py-2 uppercase border-r"},"Jan"),e("th",{class:"px-4 py-2 uppercase border-r"},"Feb"),e("th",{class:"px-4 py-2 uppercase"},"March"),e("th",{class:"px-4 py-2 uppercase bg-sky-50 text-sky-500 border border-sky-100"},"Total Q1"),e("th",{class:"px-4 py-2 uppercase border-r"},"Apr"),e("th",{class:"px-4 py-2 uppercase border-r"},"May"),e("th",{class:"px-4 py-2 uppercase"},"Jun"),e("th",{class:"px-4 py-2 uppercase bg-sky-50 text-sky-500 border border-sky-100"},"Total Q2"),e("th",{class:"px-4 py-2 uppercase border-r"},"Jul"),e("th",{class:"px-4 py-2 uppercase border-r"},"Aug"),e("th",{class:"px-4 py-2 uppercase"},"Sep"),e("th",{class:"px-4 py-2 uppercase bg-sky-50 text-sky-500 border border-sky-100"},"Total Q3"),e("th",{class:"px-4 py-2 uppercase border-r"},"Oct"),e("th",{class:"px-4 py-2 uppercase border-r"},"Nov"),e("th",{class:"px-4 py-2 uppercase"},"Dec"),e("th",{class:"px-4 py-2 uppercase bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"}," Total Q4 "),e("th",{class:"px-4 py-2 uppercase bg-green-600 text-white border border-green-400"},"Total")])],-1),We={class:"px-4 py-2 text-center border-r border-b"},Xe=["onClick"],Ze=["onClick"],et=["onClick"],tt={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},ot=["onClick"],rt=["onClick"],st=["onClick"],at={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},nt=["onClick"],ct=["onClick"],it=["onClick"],dt={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},ut=["onClick"],lt=["onClick"],pt=["onClick"],mt={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"},_t={class:"px-4 py-2 text-center bg-green-600 border text-white border-green-400"},yt={key:1,class:"w-full flex flex-col items-center justify-center space-y-2 py-10"},ht=e("img",{src:we,alt:"page-icon",class:"object-cover w-20 h-20"},null,-1),bt=e("p",{class:"text-base"},"Could not load data, please try again",-1),xt=[ht,bt],It=ie({__name:"biochemistry",setup(vt){De({title:`${Ye.name.toUpperCase()} - Biochemistry Report`});const K=Me,W=de([{name:"Home",link:"/home"},{name:"Reports",link:"#"},{name:"MoH Diagnistic Reports",link:"#"}]),y=v([]),r=v({name:"select year"}),D=v([]),Q=ue("token"),p=v(!1),h=le(),b=pe(),{$toast:x}=me(),R=Te(),N=v([]),u=(c,i,n,l)=>{if(n!==0&&l!==""){const _=C(i).format("MMMM-YYYY");h.push(`/reports/${l}?origin=moh&type=biochemistry-report&dateRange=${_}&test=${c} - ${_}&department=Biochemistry&count=${n}`)}else x.warning("No data found for this month")},X=async()=>{p.value=!0;const c={route:`${U.reportIndicators}?department=Biochemistry`,method:"GET",token:`${Q.value}`},{data:i,error:n}=await z(c);i.value&&(y.value=i.value.map(l=>({indicator:l,jan:{count:"!",associated_ids:""},feb:{count:"!",associated_ids:""},mar:{count:"!",associated_ids:""},totalQ1:"!",apr:{count:"!",associated_ids:""},may:{count:"!",associated_ids:""},june:{count:"!",associated_ids:""},totalQ2:"!",jul:{count:"!",associated_ids:""},aug:{count:"!",associated_ids:""},sept:{count:"!",associated_ids:""},totalQ3:"!",oct:{count:"!",associated_ids:""},nov:{count:"!",associated_ids:""},dec:{count:"!",associated_ids:""},totalQ4:"!",total:"!"})),p.value=!1),n.value&&(console.error(n.value),p.value=!1,x.error(ke))},Z=async()=>{r.value.name==="select year"?x.warning("Please select a year"):T()},ee=()=>{let c="";if(r.value.name!=="select year"&&(c=`&year=${r.value.name}`),b.query.period){const i=`1/${String(b.query.period)}`;c=`&year=${C(i).format("YYYY")}`,r.value={name:C(i).format("YYYY")}}return c},T=async()=>{p.value=!0;const c=b.query.report_id??"",i={route:`${U.mohReport}biochemistry?report_id=${c}${ee()}`,method:"GET",token:`${Q.value}`},{data:n,error:l,pending:_}=await z(i);if(p.value=_,n.value){const g=y.value.map(s=>{const j=["january","february","march","april","may","june","july","august","september","october","november","december"].map(ae=>n.value[ae][s.indicator]),[t,$,d,E,M,A,B,O,S,q,F,I]=j,H=t.count+$.count+d.count,L=E.count+M.count+A.count,P=B.count+O.count+S.count,V=q.count+F.count+I.count,se=H+L+P+V;return{indicator:s.indicator,jan:t,feb:$,mar:d,totalQ1:H,apr:E,may:M,june:A,totalQ2:L,jul:B,aug:O,sept:S,totalQ3:P,oct:q,nov:F,dec:I,totalQ4:V,total:se}});y.value=g,N.value=g.map(s=>({"Laboratory Service":s.indicator,January:s.jan.count,February:s.feb.count,March:s.mar.count,"Total Q1":s.totalQ1,April:s.apr.count,May:s.may.count,June:s.june.count,"Total Q2":s.totalQ2,July:s.jul.count,August:s.aug.count,September:s.sept.count,"Total Q3":s.totalQ3,October:s.oct.count,November:s.nov.count,December:s.dec.count,"Total Q4":s.totalQ4,Total:s.total})),p.value=!1,te(n.value.report_id),x.success("Report data generated successfully!")}l.value&&(p.value=!1,console.error(l.value),x.error(ge))},te=c=>{const n={...h.currentRoute.value.query,report_id:c};h.replace({query:n}).catch(l=>{console.error("Failed to replace route:",l)})},oe=()=>{const c=new Date().getFullYear();D.value=Array.from({length:c-1999},(i,n)=>({name:(c-n).toString(),id:c-n}))};_e(r,()=>{if(r){const i={...h.currentRoute.value.query,period:C(r.value.name).format("M/yyyy"),report_id:""};h.replace({query:i}).catch(n=>{console.error("Failed to replace route:",n)})}},{deep:!0});const re=ye(()=>b.query.period!==void 0&&b.query.period!=="");return J(()=>{re.value&&T()}),J(()=>{oe(),X()}),(c,i)=>{const n=ne,l=ce,_=$e,g=Re,s=he("excel"),Y=je,j=Ce;return f(),k("div",Ae,[m(n,{pages:o(W)},null,8,["pages"]),Be,e("div",Oe,[e("div",Se,[e("div",qe,[m(o(Ee),{class:"w-5 h-5 mr-2"}),w(" Filter By Year "),e("div",Fe,[m(l,{items:o(D),modelValue:o(r),"onUpdate:modelValue":i[0]||(i[0]=t=>be(r)?r.value=t:null)},null,8,["items","modelValue"])])]),m(_,{loading:o(p),click:()=>{Z()},color:"primary",icon:o(K),text:"Generate report"},null,8,["loading","click","icon"])]),e("div",null,[m(s,{class:"btn btn-default",header:[`BIOCHEMISTRY MoH LABORATORY REPORT ${o(r).name}`,o(R).details.name,o(R).details.address,o(R).details.phone],data:o(N),worksheet:"report-work-sheet",name:`moh_biochemistry_report_${o(r).name}.xls`},{default:xe(()=>[m(g,{text:"Export Excel"})]),_:1},8,["header","data","name"])])]),e("div",Ie,[e("div",He,[Le,m(Y)]),e("div",null,[e("h3",Pe,[w("Data for the year: "),e("span",Ve,a(o(r).name=="select year"?"-:-":o(r).name),1)])]),e("div",Je,[o(p)?(f(),k("div",Ge,[e("div",Ue,[m(j,{width:100,height:100})])])):G("",!0),e("table",ze,[Ke,e("tbody",null,[(f(!0),k(ve,null,fe(o(y),(t,$)=>(f(),k("tr",{class:"px-2",key:$},[e("td",We,a(t.indicator),1),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`01-01-${o(r).name}`,Number(t.jan.count),t.jan.associated_ids)},a(t.jan.count),9,Xe),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`02-01-${o(r).name}`,Number(t.feb.count),t.feb.associated_ids)},a(t.feb.count),9,Ze),e("td",{class:"px-4 py-2 text-center border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`03-01-${o(r).name}`,Number(t.mar.count),t.mar.associated_ids)},a(t.mar.count),9,et),e("td",tt,a(t.totalQ1),1),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`04-01-${o(r).name}`,Number(t.apr.count),t.apr.associated_ids)},a(t.apr.count),9,ot),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`05-01-${o(r).name}`,Number(t.may.count),t.may.associated_ids)},a(t.may.count),9,rt),e("td",{class:"px-4 py-2 text-center border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`06-01-${o(r).name}`,Number(t.june.count),t.june.associated_ids)},a(t.june.count),9,st),e("td",at,a(t.totalQ2),1),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`07-01-${o(r).name}`,Number(t.jul.count),t.jul.associated_ids)},a(t.jul.count),9,nt),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`08-08-${o(r).name}`,Number(t.aug.count),t.aug.associated_ids)},a(t.aug.count),9,ct),e("td",{class:"px-4 py-2 text-center border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`09-9-${o(r).name}`,Number(t.sept.count),t.sept.associated_ids)},a(t.sept.count),9,it),e("td",dt,a(t.totalQ3),1),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`10-10-${o(r).name}`,Number(t.oct.count),t.oct.associated_ids)},a(t.oct.count),9,ut),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`11-11-${o(r).name}`,Number(t.nov.count),t.nov.associated_ids)},a(t.nov.count),9,lt),e("td",{class:"px-4 py-2 text-center border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:d=>u(t.indicator,`12-12-${o(r).name}`,Number(t.dec.count),t.dec.associated_ids)},a(t.dec.count),9,pt),e("td",mt,a(t.totalQ4),1),e("td",_t,a(t.total),1)]))),128))])]),o(y).length==0&&!o(p)?(f(),k("div",yt,xt)):G("",!0)])])])}}});export{It as default};

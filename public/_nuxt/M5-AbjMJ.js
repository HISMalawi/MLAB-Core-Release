import{_ as G}from"./Cz4lehrB.js";import{S as j,p as T,Y as R,G as $,V as I,q as S,a as V,l as P,m as F,u as k,s as C,x as s,b as y,e as D,g as o,f as t,y as a,j as b,_ as U,t as E,h as B,H as M,D as q}from"./DcSzNNCf.js";import{_ as A}from"./CHZli66Y.js";import{r as H}from"./CvRYkzzn.js";import{r as Y}from"./DLxjVmxZ.js";import{r as O}from"./BruAWYOi.js";import{r as L}from"./CycEhU8v.js";import{_ as N}from"./cien4RO4.js";import{_ as J}from"./Bilkl43O.js";import{r as K}from"./i6ttUZwi.js";import{r as Q}from"./DRrex8QY.js";import{r as W}from"./D5RrpQQm.js";import{r as Z}from"./BqLBxrJ3.js";import{_ as ee}from"./BuTDN1wI.js";import{u as X}from"./COhJ2qVd.js";import{P as te}from"./D2Kkx04a.js";import{u as oe}from"./beBtvkQa.js";import{r as ne}from"./CRtrlqLS.js";import{_ as se}from"./DAoM-dCf.js";import"./DVihQi1k.js";import"./CMQt2dEX.js";const ae={components:{TransitionRoot:j,TransitionChild:T,Dialog:R,DialogPanel:$,DialogTitle:I,XMarkIcon:S,UserIcon:H},data(){return{open:!1,addIcon:Y,saveIcon:O,clearIcon:L,reason:"",loading:!1,cookie:V("token")}},methods:{async submitForm(){this.loading=!0;const l={route:P.rejectionReasons,method:"POST",token:`${this.cookie}`,body:{description:this.reason}},{pending:e,error:r,data:c}=await F(l);this.loading=e,c.value&&(this.adjustVisibility(),k().$toast.success("Specimen rejection reason created successfully!"),this.loading=!1,this.reason="",this.$emit("update",!0)),r.value&&(this.adjustVisibility(),k().$toast.error(`${r.value.data.error}`),console.log(r.value.data.error),this.loading=!1)},adjustVisibility(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},ie={class:"fixed inset-0 overflow-y-auto"},le={class:"flex min-h-full items-center justify-center p-4 text-center"},re={class:"border-b px-3 py-3 flex items-center justify-between"},ce={class:"mt-2 space-y-3"},de={class:"w-full flex items-center px-5"},me={class:"w-full flex flex-col space-y-2"},ue={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function pe(l,e,r,c,n,i){const u=U,d=s("TransitionChild"),_=s("DialogTitle"),h=s("XMarkIcon"),p=s("FormKit"),f=A,g=s("DialogPanel"),m=s("Dialog"),w=s("TransitionRoot");return y(),D("div",null,[o("div",null,[t(u,{text:"New Rejection Reason",color:"primary",icon:n.addIcon,click:i.adjustVisibility},null,8,["icon","click"])]),t(w,{appear:"",show:n.open,as:"template"},{default:a(()=>[t(m,{as:"div",onClose:i.adjustVisibility,class:"relative z-10"},{default:a(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>e[2]||(e[2]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",ie,[o("div",le,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[t(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[o("div",re,[t(_,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:a(()=>e[3]||(e[3]=[o("img",{src:N,class:"w-8 h-8 mr-2"},null,-1),b(" Add Specimen Rejection Reason ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...x)=>i.adjustVisibility&&i.adjustVisibility(...x))},[t(h,{class:"w-5 h-5"})])]),t(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1,id:"submitForm"},{default:a(({value:x})=>[o("div",ce,[o("div",de,[o("div",me,[t(p,{type:"text",label:"Reason",validation:"required",modelValue:n.reason,"onUpdate:modelValue":e[1]||(e[1]=v=>n.reason=v)},null,8,["modelValue"])])])]),o("div",ue,[t(f,{text:"Clear form",type:"button",click:()=>{i.clearForm()}},null,8,["click"]),t(u,{loading:n.loading,type:"submit",click:()=>{},color:"success",icon:n.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const fe=C(ae,[["render",pe]]),_e={components:{TransitionRoot:j,TransitionChild:T,Dialog:R,DialogPanel:$,DialogTitle:I,XMarkIcon:S},data(){return{viewIcon:K,show:!1}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},he={class:"fixed inset-0 overflow-y-auto"},ge={class:"flex min-h-full items-center justify-center p-4 text-center"},ye={class:"border-b px-3 py-3 flex items-center justify-between"},xe={class:"space-y-3 px-5 py-5"},ve={class:"w-full flex flex-col space-y-1"},be={class:"underline"};function ke(l,e,r,c,n,i){const u=U,d=s("TransitionChild"),_=s("DialogTitle"),h=s("XMarkIcon"),p=s("DialogPanel"),f=s("Dialog"),g=s("TransitionRoot");return y(),D("div",null,[t(u,{click:i.handleClick,color:"primary",text:"View",icon:n.viewIcon},null,8,["click","icon"]),t(g,{appear:"",show:n.show,as:"template"},{default:a(()=>[t(f,{as:"div",class:"relative z-10"},{default:a(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>e[1]||(e[1]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",he,[o("div",ge,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[t(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[o("div",ye,[t(_,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>e[2]||(e[2]=[o("img",{src:N,class:"w-8 h-8 mr-2"},null,-1),b(" View Specimen Rejection Reason ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...m)=>i.handleClick&&i.handleClick(...m))},[t(h,{class:"w-5 h-5"})])]),o("div",xe,[o("div",ve,[e[3]||(e[3]=o("label",{class:"font-semibold text-lg"},"Reason",-1)),o("p",be,E(r.data.description),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const we=C(_e,[["render",ke]]),Ce={components:{TransitionRoot:j,TransitionChild:T,Dialog:R,DialogPanel:$,DialogTitle:I,XMarkIcon:S},data(){return{viewIcon:K,show:!1,editIcon:Q,saveIcon:O,cookie:V("token"),loading:!1}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const l={route:`${P.rejectionReasons}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:e,error:r,data:c}=await F(l);this.loading=e,c.value&&(this.handleClick(),k().$toast.success("Specimen rejection reason updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(k().$toast.success("An error occurred, please try again!"),this.handleClick(),console.error(r.value),this.loading=!1)},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("submitForm")}}},De={class:"fixed inset-0 overflow-y-auto"},je={class:"flex min-h-full items-center justify-center p-4 text-center"},Te={class:"border-b px-3 py-3 flex items-center justify-between"},Re={class:"mt-2 space-y-3"},$e={class:"w-full flex items-center px-5 space-x-3"},Ie={class:"w-full flex flex-col space-y-2"},Se={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ve(l,e,r,c,n,i){const u=U,d=s("TransitionChild"),_=s("DialogTitle"),h=s("XMarkIcon"),p=s("FormKit"),f=A,g=s("DialogPanel"),m=s("Dialog"),w=s("TransitionRoot");return y(),D("div",null,[t(u,{click:i.handleClick,color:"success",text:"Edit",icon:n.editIcon},null,8,["click","icon"]),t(w,{appear:"",show:n.show,as:"template"},{default:a(()=>[t(m,{as:"div",class:"relative z-10"},{default:a(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>e[2]||(e[2]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",De,[o("div",je,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[t(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[o("div",Te,[t(_,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>e[3]||(e[3]=[o("img",{src:N,class:"w-8 h-8 mr-2"},null,-1),b(" Edit Sample Rejection Reason ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...x)=>i.handleClick&&i.handleClick(...x))},[t(h,{class:"w-5 h-5"})])]),t(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1,id:"submitForm"},{default:a(({value:x})=>[o("div",Re,[o("div",$e,[o("div",Ie,[t(p,{type:"textarea",label:"Reason",validation:"required",modelValue:r.data.description,"onUpdate:modelValue":e[1]||(e[1]=v=>r.data.description=v)},null,8,["modelValue"])])]),o("div",Se,[t(f,{type:"button",click:()=>{i.clearForm()},text:"Clear form",color:"error"},null,8,["click"]),t(u,{type:"submit",click:()=>{},color:"success",loading:n.loading,icon:n.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Pe=C(Ce,[["render",Ve]]),Fe={components:{TransitionRoot:j,TransitionChild:T,Dialog:R,DialogPanel:$,DialogTitle:I,XMarkIcon:S,ExclamationTriangleIcon:W},data(){return{show:!1,deleteIcon:Z,loading:!1,reason:"",cookie:V("token")}},props:{data:{type:Object,required:!0}},methods:{async deleteData(l){this.loading=!0;const e={route:`${P.rejectionReasons}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:r,error:c,data:n}=await F(e);n.value&&(this.handleClick(),k().$toast.success("Specimen rejection reason deleted successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(k().$toast.error("An error occurred, please try again!"),console.log(c.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Ue={class:"fixed inset-0 overflow-y-auto"},Be={class:"flex min-h-full items-center justify-center p-4 text-center"},Me={class:"border-b px-3 py-3 flex items-center justify-between"},qe={class:"mt-2 space-y-3 px-5"},Xe={class:"rounded px-2 py-2"},Ee={class:"font-semibold text-red-500"},Ae={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function Ne(l,e,r,c,n,i){const u=U,d=s("TransitionChild"),_=s("ExclamationTriangleIcon"),h=s("DialogTitle"),p=s("XMarkIcon"),f=s("FormKit"),g=A,m=s("DialogPanel"),w=s("Dialog"),x=s("TransitionRoot");return y(),D("div",null,[t(u,{click:i.handleClick,color:"error",text:"Delete",icon:n.deleteIcon},null,8,["click","icon"]),t(x,{appear:"",show:n.show,as:"template"},{default:a(()=>[t(w,{as:"div",class:"relative z-10"},{default:a(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>e[3]||(e[3]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",Ue,[o("div",Be,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[t(m,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[o("div",Me,[t(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>[t(_,{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=b(" Confirm delete "))]),_:1}),o("button",{onClick:e[0]||(e[0]=(...v)=>i.handleClick&&i.handleClick(...v))},[t(p,{class:"w-5 h-5"})])]),t(f,{type:"form","submit-label":"Update",onSubmit:e[2]||(e[2]=v=>i.deleteData(r.data.id)),actions:!1},{default:a(({value:v})=>[o("div",qe,[o("div",Xe,[e[5]||(e[5]=b(" Do you really want to delete ")),o("span",Ee,E(r.data.description),1),e[6]||(e[6]=b("? Note that once this action is completed, it can not be undone "))]),t(f,{type:"textarea",label:"Reason",validation:"required",modelValue:n.reason,"onUpdate:modelValue":e[1]||(e[1]=z=>n.reason=z)},null,8,["modelValue"])]),o("div",Ae,[t(g,{type:"button",click:()=>{i.handleClick()},text:"Cancel"},null,8,["click"]),t(u,{loading:n.loading,type:"submit",click:()=>{},color:"error",icon:n.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Oe=C(Fe,[["render",Ne]]),Ke={setup(){oe({title:`${te.name.toUpperCase()} - Specimen Rejection Reasons`})},components:{MagnifyingGlassIcon:ne},data(){return{header:"Specimen Rejection Reasons",reasons:new Array,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],search:"",searchValue:"",loading:!1,cookie:V("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"reason",value:"description",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(l){this.searchValue=l,this.search=l},async init(){this.loading=!0;const l={route:P.rejectionReasons,method:"GET",token:`${this.cookie}`},{pending:e,error:r,data:c}=await F(l);this.loading=e,c.value&&(this.loading=!1,this.reasons=c.value),r.value&&(this.loading=!1,console.log(r.value))},updateSpecimenRejection(l){l&&this.init()}}},ze={class:"py-5 px-5"},Ge={class:"flex items-center justify-between py-5"},He={class:"text-2xl font-semibold flex items-center uppercase"},Ye={class:"flex items-center space-x-3"},Le={class:"flex justify-end w-full px-2 py-2 mb-2"},Je={class:"py-2 flex items-center space-x-2"};function Qe(l,e,r,c,n,i){const u=G,d=fe,_=J,h=we,p=Pe,f=Oe,g=ee;return y(),D("div",ze,[t(u,{pages:n.pages},null,8,["pages"]),o("div",Ge,[o("div",He,[e[1]||(e[1]=o("img",{src:se,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1)),b(" "+E(n.header),1)]),o("div",Ye,[("usePermissions"in l?l.usePermissions:B(X))().can.manage("test_catalog")?(y(),M(d,{key:0,onUpdate:i.updateSpecimenRejection},null,8,["onUpdate"])):q("",!0)])]),o("div",Le,[("usePermissions"in l?l.usePermissions:B(X))().can.manage("test_catalog")?(y(),M(_,{key:0,search:n.search,"onUpdate:search":e[0]||(e[0]=m=>n.search=m),onUpdate:i.updateSearch},null,8,["search","onUpdate"])):q("",!0)]),("usePermissions"in l?l.usePermissions:B(X))().can.manage("test_catalog")?(y(),M(g,{key:0,headers:n.headers,data:n.reasons,loading:n.loading,"search-value":n.searchValue,"search-field":"description"},{actions:a(({item:m})=>[o("div",Je,[t(h,{data:m},null,8,["data"]),t(p,{data:m,onUpdate:i.updateSpecimenRejection},null,8,["data","onUpdate"]),t(f,{data:m,onUpdate:i.updateSpecimenRejection},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])):q("",!0)])}const xt=C(Ke,[["render",Qe]]);export{xt as default};

import{_ as G}from"./ucPVlGIa.js";import{S,p as $,Y as V,G as I,V as U,q as F,s as H,a as P,l as j,m as R,u as w,E as K,x as B,y as c,b,e as T,g as t,f as e,z as a,k,_ as q,A as L,t as D,B as Y,d as J,r as E,h as m,D as Q,H as W,L as A,K as N}from"./CnHVHtNb.js";import{_ as M}from"./B_Awot1K.js";import{r as Z}from"./DGfQsrMy.js";import{r as z}from"./DXtvsuug.js";import{r as ee}from"./BB8zdY6n.js";import{_ as te}from"./BvHVvoZk.js";import{_ as oe}from"./quWe4lpW.js";import{r as X}from"./DJDBc3LR.js";import{_ as se}from"./D79OLBMa.js";import{u as O}from"./ijQJjDmU.js";import{u as ae}from"./Bnl9n6mh.js";import{P as ne}from"./O-3ebvIT.js";import{r as ie}from"./C20_EJt5.js";import{_ as le}from"./DAoM-dCf.js";import"./BZb3bzVo.js";import"./n6mkMIpm.js";import"./CRaEjCo-.js";import"./DCavMtdm.js";const ce={components:{TransitionRoot:S,TransitionChild:$,Dialog:V,DialogPanel:I,DialogTitle:U,XMarkIcon:F,UserIcon:Z},data(){return{open:!1,addIcon:H,saveIcon:z,clearIcon:ee,name:"",description:"",loading:!1,cookie:P("token")}},methods:{async submitForm(){this.loading=!0;const l={route:j.specimens,method:"POST",token:`${this.cookie}`,body:{name:this.name,description:this.description}},{pending:s,error:i,data:d}=await R(l);this.loading=s,d.value&&(this.handleClick(),w().$toast.success(`${this.name} specimen type created successfully!`),this.loading=!1,this.name="",this.description="",this.$emit("update",!0)),i.value&&(this.handleClick(),console.error(i.value.data.error),w().$toast.error(K),this.loading=!1)},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},re=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),de={class:"fixed inset-0 overflow-y-auto"},me={class:"flex min-h-full items-center justify-center p-4 text-center"},ue={class:"border-b px-3 py-3 flex items-center justify-between"},pe={class:"mt-2 space-y-3"},_e={class:"w-full flex items-center px-5"},fe={class:"w-full flex flex-col space-y-2"},he={class:"w-full flex items-center px-5 space-x-3"},xe={class:"w-full flex flex-col space-y-2"},ve={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ye(l,s,i,d,o,n){const x=q,f=c("TransitionChild"),u=c("DialogTitle"),v=c("XMarkIcon"),r=c("FormKit"),p=M,h=c("DialogPanel"),_=c("Dialog"),C=c("TransitionRoot");return b(),T("div",null,[t("div",null,[e(x,{text:"Create specimen",color:"primary",icon:o.addIcon,click:n.handleClick},null,8,["icon","click"])]),e(C,{appear:"",show:o.open,as:"template"},{default:a(()=>[e(_,{as:"div",onClose:n.handleClick,class:"relative z-10"},{default:a(()=>[e(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>[re]),_:1}),t("div",de,[t("div",me,[e(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[e(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[t("div",ue,[e(u,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:a(()=>[k(" Create Specimen ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...y)=>n.handleClick&&n.handleClick(...y))},[e(v,{class:"w-5 h-5"})])]),e(r,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"submitForm"},{default:a(({value:y})=>[t("div",pe,[t("div",_e,[t("div",fe,[e(r,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":s[1]||(s[1]=g=>o.name=g)},null,8,["modelValue"])])]),t("div",he,[t("div",xe,[e(r,{type:"textarea",label:"Description",validation:"required",modelValue:o.description,"onUpdate:modelValue":s[2]||(s[2]=g=>o.description=g)},null,8,["modelValue"])])]),t("div",ve,[e(p,{text:"Clear form",color:"error",type:"button",click:()=>{n.clearForm()}},null,8,["click"]),e(x,{type:"submit",click:()=>{},color:"success",loading:o.loading,icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ge=B(ce,[["render",ye]]),be={components:{TransitionRoot:S,TransitionChild:$,Dialog:V,DialogPanel:I,DialogTitle:U,XMarkIcon:F},data(){return{viewIcon:L,show:!1}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},ke=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),we={class:"fixed inset-0 overflow-y-auto"},Ce={class:"flex min-h-full items-center justify-center p-4 text-center"},$e={class:"border-b px-3 py-3 flex items-center justify-between"},Te=t("img",{src:oe,class:"w-8 h-8 mr-2"},null,-1),De={class:"space-y-3 px-5 py-5"},Se={class:"w-full flex flex-col space-y-1"},Ve=t("label",{class:"font-semibold text-lg"},"Name",-1),Ie={class:"underline"},Ue={class:"w-full flex flex-col space-y-1"},Fe=t("label",{class:"font-semibold text-lg"},"Description",-1),Pe={class:"underline"};function je(l,s,i,d,o,n){const x=q,f=c("TransitionChild"),u=c("DialogTitle"),v=c("XMarkIcon"),r=c("DialogPanel"),p=c("Dialog"),h=c("TransitionRoot");return b(),T("div",null,[e(x,{click:n.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(h,{appear:"",show:o.show,as:"template"},{default:a(()=>[e(p,{as:"div",class:"relative z-10"},{default:a(()=>[e(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>[ke]),_:1}),t("div",we,[t("div",Ce,[e(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[e(r,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[t("div",$e,[e(u,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>[Te,k(" View Specimen ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(..._)=>n.handleClick&&n.handleClick(..._))},[e(v,{class:"w-5 h-5"})])]),t("div",De,[t("div",Se,[Ve,t("p",Ie,D(i.data.name),1)]),t("div",Ue,[Fe,t("p",Pe,D(i.data.description),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Re=B(be,[["render",je]]),Be={components:{TransitionRoot:S,TransitionChild:$,Dialog:V,DialogPanel:I,DialogTitle:U,XMarkIcon:F},data(){return{editIcon:Y,show:!1,saveIcon:z,loading:!1,cookie:P("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const l={route:`${j.specimens}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:s,error:i,data:d}=await R(l);this.loading=s,d.value&&(this.handleClick(),w().$toast.success("Specimen type updated successfully!"),this.loading=!1,this.$emit("update",!0)),i.value&&(w().$toast.success("An error occurred, please try again!"),this.handleClick(),console.log(i.value),this.loading=!1)},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("submitForm")}}},qe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ee={class:"fixed inset-0 overflow-y-auto"},Me={class:"flex min-h-full items-center justify-center p-4 text-center"},Ae={class:"border-b px-3 py-3 flex items-center justify-between"},Ne={class:"mt-2 space-y-3"},Xe={class:"w-full flex items-center px-5"},Oe={class:"w-full flex flex-col space-y-2"},Ke={class:"w-full flex items-center px-5 space-x-3"},ze={class:"w-full flex flex-col space-y-2"},Ge={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function He(l,s,i,d,o,n){const x=q,f=c("TransitionChild"),u=c("DialogTitle"),v=c("XMarkIcon"),r=c("FormKit"),p=M,h=c("DialogPanel"),_=c("Dialog"),C=c("TransitionRoot");return b(),T("div",null,[e(x,{click:n.handleClick,text:"Edit",icon:o.editIcon,color:"success"},null,8,["click","icon"]),e(C,{appear:"",show:o.show,as:"template"},{default:a(()=>[e(_,{as:"div",class:"relative z-10"},{default:a(()=>[e(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>[qe]),_:1}),t("div",Ee,[t("div",Me,[e(f,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[e(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[t("div",Ae,[e(u,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>[k(" Edit Specimen ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...y)=>n.handleClick&&n.handleClick(...y))},[e(v,{class:"w-5 h-5"})])]),e(r,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"submitForm"},{default:a(({value:y})=>[t("div",Ne,[t("div",Xe,[t("div",Oe,[e(r,{type:"text",label:"Name",validation:"required",modelValue:i.data.name,"onUpdate:modelValue":s[1]||(s[1]=g=>i.data.name=g)},null,8,["modelValue"])])]),t("div",Ke,[t("div",ze,[e(r,{type:"textarea",label:"Description",validation:"required",modelValue:i.data.description,"onUpdate:modelValue":s[2]||(s[2]=g=>i.data.description=g)},null,8,["modelValue"])])]),t("div",Ge,[e(p,{text:"Clear form",color:"error",type:"button",click:()=>{n.clearForm()}},null,8,["click"]),e(x,{type:"submit",click:()=>{},color:"success",loading:o.loading,icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Le=B(Be,[["render",He]]),Ye=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Je={class:"fixed inset-0 overflow-y-auto"},Qe={class:"flex min-h-full items-center justify-center p-4 text-center"},We={class:"border-b px-3 py-3 flex items-center justify-between"},Ze={class:"mt-2 space-y-3 px-5"},et={class:"rounded px-2 py-2"},tt={class:"font-semibold text-red-500"},ot={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"},st=J({__name:"index",props:{data:{required:!0,type:Object}},emits:["update"],setup(l,{emit:s}){const i=E(!1),d=E(!1),o=E(""),n=P("token"),x=s;async function f(v){d.value=!0;const{data:r,error:p,pending:h}=await R({route:`${j.specimens}/${v}`,method:"DELETE",token:`${n.value}`,body:{retired_reason:o.value}});d.value=h,r.value&&(u(),w().$toast.success("Specimen type deleted successfully!"),d.value=!1,x("update",!0)),p.value&&(w().$toast.error(K),console.error(p.value),u(),d.value=!1)}const u=()=>{i.value=!i.value};return(v,r)=>{const p=q,h=c("FormKit"),_=M;return b(),T("div",null,[e(p,{click:u,color:"error",text:"Delete",icon:m(X)},null,8,["icon"]),e(m(S),{appear:"",show:m(i),as:"template"},{default:a(()=>[e(m(V),{as:"div",class:"relative z-10"},{default:a(()=>[e(m($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>[Ye]),_:1}),t("div",Je,[t("div",Qe,[e(m($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[e(m(I),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[t("div",We,[e(m(U),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>[e(m(Q),{class:"h-5 w-5 mr-2"}),k(" Confirm delete ")]),_:1}),t("button",{onClick:u},[e(m(F),{class:"w-5 h-5"})])]),e(h,{type:"form","submit-label":"Update",onSubmit:r[1]||(r[1]=C=>f(l.data.id)),actions:!1},{default:a(({value:C})=>[t("div",Ze,[t("div",et,[k(" Do you really want to delete "),t("span",tt,D(l.data.name),1),k("? Note that once this action is completed, it can not be undone ")]),e(h,{type:"textarea",label:"Reason",validation:"required",modelValue:m(o),"onUpdate:modelValue":r[0]||(r[0]=y=>W(o)?o.value=y:null)},null,8,["modelValue"])]),t("div",ot,[e(_,{type:"button",text:"Cancel",click:()=>{u()}},null,8,["click"]),e(p,{loading:m(d),type:"submit",click:()=>{},color:"error",icon:m(X),text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),at={setup(){ae({title:`${ne.name.toUpperCase()} - Specimen Types`})},components:{MagnifyingGlassIcon:ie},data(){return{header:"Specimen Types",specimens:new Array,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],loading:!1,search:"",searchValue:"",cookie:P("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"description",value:"description",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(l){this.searchValue=l,this.search=l},async init(){this.loading=!0;const l={route:j.specimens,method:"GET",token:`${this.cookie}`,body:{}},{data:s,error:i,pending:d}=await R(l);this.loading=d,s.value&&(this.specimens=s.value),i.value&&console.error(i.value)},updateSpecimenTypes(l){l&&this.init()}}},nt={class:"py-5 px-5"},it={class:"flex items-center justify-between py-5"},lt={class:"text-2xl font-semibold flex items-center uppercase"},ct=t("img",{src:le,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),rt={class:"flex items-center space-x-3"},dt={class:"flex justify-end w-full px-2 py-2 mb-2"},mt={class:"py-2 flex items-center space-x-2"};function ut(l,s,i,d,o,n){const x=G,f=ge,u=te,v=Re,r=Le,p=st,h=se;return b(),T("div",nt,[e(x,{pages:o.pages},null,8,["pages"]),t("div",it,[t("div",lt,[ct,k(" "+D(o.header),1)]),t("div",rt,[("usePermissions"in l?l.usePermissions:m(O))().can.manage("test_catalog")?(b(),A(f,{key:0,onUpdate:n.updateSpecimenTypes},null,8,["onUpdate"])):N("",!0)])]),t("div",dt,[e(u,{search:o.search,"onUpdate:search":s[0]||(s[0]=_=>o.search=_),onUpdate:n.updateSearch},null,8,["search","onUpdate"])]),("usePermissions"in l?l.usePermissions:m(O))().can.manage("test_catalog")?(b(),A(h,{key:0,headers:o.headers,data:o.specimens,loading:o.loading,"search-value":o.searchValue,"search-field":"name"},{actions:a(({item:_})=>[t("div",mt,[e(v,{data:_},null,8,["data"]),e(r,{data:_,onUpdate:n.updateSpecimenTypes},null,8,["data","onUpdate"]),e(p,{data:_,onUpdate:n.updateSpecimenTypes},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])):N("",!0)])}const Ft=B(at,[["render",ut]]);export{Ft as default};

import{_ as de}from"./BiWEQHgV.js";import{d as z,r as x,c as _,ah as U,a7 as a,bi as X,bb as D,a2 as oe,ba as fe,bc as V,bj as be,bk as me,aP as J,bl as he,b7 as ye,b8 as ge,b9 as Pe,a8 as I,ac as Z,F as Q,a3 as H,o as Y,ae as re,bm as se,a9 as W,ab as K,ai as O,aj as F,bd as we,be as ne,af as ee,ag as B,bn as C,ak as R,b as te,e as le,g as k,w as Se,f as M,y as G,h as j,T as xe,A as _e,_ as $e,q as ke,s as Ee,x as Fe,t as Ce,i as Ie,v as Be,J as Me}from"./B6cxelmB.js";import{s as Oe}from"./DnKNuaHm.js";var Te=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(Te||{});let ue=Symbol("PopoverContext");function ae(s){let v=ee(ue,null);if(v===null){let d=new Error(`<${s} /> is missing a parent <${pe.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,ae),d}return v}let Ae=Symbol("PopoverGroupContext");function ie(){return ee(Ae,null)}let ce=Symbol("PopoverPanelContext");function Ne(){return ee(ce,null)}let pe=z({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(s,{slots:v,attrs:d,expose:y}){var S;let u=x(null);y({el:u,$el:u});let l=x(1),e=x(null),h=x(null),g=x(null),m=x(null),f=_(()=>U(u)),P=_(()=>{var t,o;if(!a(e)||!a(m))return!1;for(let q of document.querySelectorAll("body > *"))if(Number(q==null?void 0:q.contains(a(e)))^Number(q==null?void 0:q.contains(a(m))))return!0;let n=X(),p=n.indexOf(a(e)),$=(p+n.length-1)%n.length,E=(p+1)%n.length,L=n[$],ve=n[E];return!((t=a(m))!=null&&t.contains(L))&&!((o=a(m))!=null&&o.contains(ve))}),b={popoverState:l,buttonId:x(null),panelId:x(null),panel:m,button:e,isPortalled:P,beforePanelSentinel:h,afterPanelSentinel:g,togglePopover(){l.value=D(l.value,{0:1,1:0})},closePopover(){l.value!==1&&(l.value=1)},close(t){b.closePopover();let o=t?t instanceof HTMLElement?t:t.value instanceof HTMLElement?a(t):a(b.button):a(b.button);o==null||o.focus()}};oe(ue,b),fe(_(()=>D(l.value,{0:V.Open,1:V.Closed})));let T={buttonId:b.buttonId,panelId:b.panelId,close(){b.closePopover()}},w=ie(),A=w==null?void 0:w.registerPopover,[N,i]=be(),c=me({mainTreeNodeRef:w==null?void 0:w.mainTreeNodeRef,portals:N,defaultContainers:[e,m]});function r(){var t,o,n,p;return(p=w==null?void 0:w.isFocusWithinPopoverGroup())!=null?p:((t=f.value)==null?void 0:t.activeElement)&&(((o=a(e))==null?void 0:o.contains(f.value.activeElement))||((n=a(m))==null?void 0:n.contains(f.value.activeElement)))}return J(()=>A==null?void 0:A(T)),he((S=f.value)==null?void 0:S.defaultView,"focus",t=>{var o,n;t.target!==window&&t.target instanceof HTMLElement&&l.value===0&&(r()||e&&m&&(c.contains(t.target)||(o=a(b.beforePanelSentinel))!=null&&o.contains(t.target)||(n=a(b.afterPanelSentinel))!=null&&n.contains(t.target)||b.closePopover()))},!0),ye(c.resolveContainers,(t,o)=>{var n;b.closePopover(),ge(o,Pe.Loose)||(t.preventDefault(),(n=a(e))==null||n.focus())},_(()=>l.value===0)),()=>{let t={open:l.value===0,close:b.close};return I(Q,[I(i,{},()=>Z({theirProps:{...s,...d},ourProps:{ref:u},slot:t,slots:v,attrs:d,name:"Popover"})),I(c.MainTreeNode)])}}}),je=z({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(s,{attrs:v,slots:d,expose:y}){var S;let u=(S=s.id)!=null?S:`headlessui-popover-button-${H()}`,l=ae("PopoverButton"),e=_(()=>U(l.button));y({el:l.button,$el:l.button}),Y(()=>{l.buttonId.value=u}),re(()=>{l.buttonId.value=null});let h=ie(),g=h==null?void 0:h.closeOthers,m=Ne(),f=_(()=>m===null?!1:m.value===l.panelId.value),P=x(null),b=`headlessui-focus-sentinel-${H()}`;f.value||J(()=>{l.button.value=a(P)});let T=Oe(_(()=>({as:s.as,type:v.type})),P);function w(t){var o,n,p,$,E;if(f.value){if(l.popoverState.value===1)return;switch(t.key){case B.Space:case B.Enter:t.preventDefault(),(n=(o=t.target).click)==null||n.call(o),l.closePopover(),(p=a(l.button))==null||p.focus();break}}else switch(t.key){case B.Space:case B.Enter:t.preventDefault(),t.stopPropagation(),l.popoverState.value===1&&(g==null||g(l.buttonId.value)),l.togglePopover();break;case B.Escape:if(l.popoverState.value!==0)return g==null?void 0:g(l.buttonId.value);if(!a(l.button)||($=e.value)!=null&&$.activeElement&&!((E=a(l.button))!=null&&E.contains(e.value.activeElement)))return;t.preventDefault(),t.stopPropagation(),l.closePopover();break}}function A(t){f.value||t.key===B.Space&&t.preventDefault()}function N(t){var o,n;s.disabled||(f.value?(l.closePopover(),(o=a(l.button))==null||o.focus()):(t.preventDefault(),t.stopPropagation(),l.popoverState.value===1&&(g==null||g(l.buttonId.value)),l.togglePopover(),(n=a(l.button))==null||n.focus()))}function i(t){t.preventDefault(),t.stopPropagation()}let c=se();function r(){let t=a(l.panel);if(!t)return;function o(){D(c.value,{[C.Forwards]:()=>O(t,F.First),[C.Backwards]:()=>O(t,F.Last)})===R.Error&&O(X().filter(n=>n.dataset.headlessuiFocusGuard!=="true"),D(c.value,{[C.Forwards]:F.Next,[C.Backwards]:F.Previous}),{relativeTo:a(l.button)})}o()}return()=>{let t=l.popoverState.value===0,o={open:t},{...n}=s,p=f.value?{ref:P,type:T.value,onKeydown:w,onClick:N}:{ref:P,id:u,type:T.value,"aria-expanded":l.popoverState.value===0,"aria-controls":a(l.panel)?l.panelId.value:void 0,disabled:s.disabled?!0:void 0,onKeydown:w,onKeyup:A,onClick:N,onMousedown:i};return I(Q,[Z({ourProps:p,theirProps:{...v,...n},slot:o,attrs:v,slots:d,name:"PopoverButton"}),t&&!f.value&&l.isPortalled.value&&I(W,{id:b,features:K.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:r})])}}}),De=z({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(s,{attrs:v,slots:d,expose:y}){var S;let u=(S=s.id)!=null?S:`headlessui-popover-panel-${H()}`,{focus:l}=s,e=ae("PopoverPanel"),h=_(()=>U(e.panel)),g=`headlessui-focus-sentinel-before-${H()}`,m=`headlessui-focus-sentinel-after-${H()}`;y({el:e.panel,$el:e.panel}),Y(()=>{e.panelId.value=u}),re(()=>{e.panelId.value=null}),oe(ce,e.panelId),J(()=>{var i,c;if(!l||e.popoverState.value!==0||!e.panel)return;let r=(i=h.value)==null?void 0:i.activeElement;(c=a(e.panel))!=null&&c.contains(r)||O(a(e.panel),F.First)});let f=we(),P=_(()=>f!==null?(f.value&V.Open)===V.Open:e.popoverState.value===0);function b(i){var c,r;switch(i.key){case B.Escape:if(e.popoverState.value!==0||!a(e.panel)||h.value&&!((c=a(e.panel))!=null&&c.contains(h.value.activeElement)))return;i.preventDefault(),i.stopPropagation(),e.closePopover(),(r=a(e.button))==null||r.focus();break}}function T(i){var c,r,t,o,n;let p=i.relatedTarget;p&&a(e.panel)&&((c=a(e.panel))!=null&&c.contains(p)||(e.closePopover(),((t=(r=a(e.beforePanelSentinel))==null?void 0:r.contains)!=null&&t.call(r,p)||(n=(o=a(e.afterPanelSentinel))==null?void 0:o.contains)!=null&&n.call(o,p))&&p.focus({preventScroll:!0})))}let w=se();function A(){let i=a(e.panel);if(!i)return;function c(){D(w.value,{[C.Forwards]:()=>{var r;O(i,F.First)===R.Error&&((r=a(e.afterPanelSentinel))==null||r.focus())},[C.Backwards]:()=>{var r;(r=a(e.button))==null||r.focus({preventScroll:!0})}})}c()}function N(){let i=a(e.panel);if(!i)return;function c(){D(w.value,{[C.Forwards]:()=>{let r=a(e.button),t=a(e.panel);if(!r)return;let o=X(),n=o.indexOf(r),p=o.slice(0,n+1),$=[...o.slice(n+1),...p];for(let E of $.slice())if(E.dataset.headlessuiFocusGuard==="true"||t!=null&&t.contains(E)){let L=$.indexOf(E);L!==-1&&$.splice(L,1)}O($,F.First,{sorted:!1})},[C.Backwards]:()=>{var r;O(i,F.Previous)===R.Error&&((r=a(e.button))==null||r.focus())}})}c()}return()=>{let i={open:e.popoverState.value===0,close:e.close},{focus:c,...r}=s,t={ref:e.panel,id:u,onKeydown:b,onFocusout:l&&e.popoverState.value===0?T:void 0,tabIndex:-1};return Z({ourProps:t,theirProps:{...v,...r},attrs:v,slot:i,slots:{...d,default:(...o)=>{var n;return[I(Q,[P.value&&e.isPortalled.value&&I(W,{id:g,ref:e.beforePanelSentinel,features:K.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:A}),(n=d.default)==null?void 0:n.call(d,...o),P.value&&e.isPortalled.value&&I(W,{id:m,ref:e.afterPanelSentinel,features:K.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:N})])]}},features:ne.RenderStrategy|ne.Static,visible:P.value,name:"PopoverPanel"})}}});function He(s,v){return te(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[k("path",{"fill-rule":"evenodd",d:"M14.47 2.47a.75.75 0 0 1 1.06 0l6 6a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06l4.72-4.72H9a5.25 5.25 0 1 0 0 10.5h3a.75.75 0 0 1 0 1.5H9a6.75 6.75 0 0 1 0-13.5h10.19l-4.72-4.72a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const Le={class:"px-5 py-3"},qe={class:"flex items-end justify-end space-x-2 border-t px-4 py-2"},Ue=z({__name:"FilterWards",props:{wards:{type:Array,required:!0},initialSelection:{type:Array,default:()=>[]}},emits:["update:items-selected"],setup(s,{emit:v}){const d=v,y=s,S=_(()=>y.wards.map(e=>e.name)),u=x([]);Y(()=>{y.initialSelection&&y.initialSelection.length>0&&(u.value=[...y.initialSelection])}),Se(()=>y.initialSelection,e=>{e&&(u.value=[...e])},{deep:!0});const l=e=>{d("update:items-selected",u.value),e()};return(e,h)=>{const g=de,m=$e;return te(),le("div",null,[M(j(pe),{class:"relative"},{default:G(({close:f})=>[M(j(je),{class:"bg-gray-50 text-zinc-500 flex items-center space-x-2 rounded border px-2 py-1.5 focus:outline-none focus:ring-0 min-w-0"},{default:G(()=>h[1]||(h[1]=[k("svg",{class:"mr-2 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 48 48"},[k("path",{fill:"currentColor","fill-rule":"evenodd",d:"M29 6v2c0 1.306.835 2.418 2 2.83V12h-1a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1h-1v-1h5v12.066H20.11a.3.3 0 0 1-.218-.09l-.366-.37l.369-.367a3.77 3.77 0 0 0 .001-5.333l-1.8-1.8a3.77 3.77 0 0 0-5.333-.003l-.704.704a3.95 3.95 0 0 0-3.892 1.021a4.034 4.034 0 0 0 0 5.676l.833.839V34H6v2h3.05a3.5 3.5 0 1 0 4.899 0h20.102a3.5 3.5 0 1 0 4.899 0H42v-2h-4v-3h.066C40.24 31 42 29.224 42 27.033a3.97 3.97 0 0 0-2-3.455V11a2 2 0 0 0-2-2h-6a1 1 0 0 1-1-1V6zM13.826 16.868l4.29 4.32l.365-.364a1.77 1.77 0 0 0 0-2.504l-1.8-1.8a1.77 1.77 0 0 0-2.504-.002zM36 34H11v-8.644l5.275 5.311c.212.213.498.333.797.333H36z","clip-rule":"evenodd"})],-1),k("div",{class:"flex-1 min-w-0"},[k("div",{class:"text-left"},"Filter By Wards")],-1)])),_:1}),M(xe,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:G(()=>[M(j(De),{class:"absolute z-10 mt-0 w-screen bg-white border shadow-2xl rounded max-w-2xl transform px-4 sm:px-0 lg:max-w-3xl"},{default:G(()=>[k("div",Le,[M(g,{placeholder:"click to select wards",label:"Select ward(s)",mode:"tags",items:j(S),"items-selected":j(u),"onUpdate:itemsSelected":h[0]||(h[0]=P=>_e(u)?u.value=P:null)},null,8,["items","items-selected"])]),k("div",qe,[M(m,{text:"Apply",icon:j(He),color:"primary",click:()=>{l(f)}},null,8,["icon","click"])])]),_:2},1024)]),_:2},1024)]),_:1})])}}}),Ge={props:{value:{type:Object,required:!0},close:{type:Boolean,required:!0},color:{required:!1,type:String,default:"green"},icon:{required:!1,type:Object}},methods:{removeLabel(){this.$emit("update",this.value)}},components:{XMarkIcon:ke}},Ve={class:"text-sm"};function ze(s,v,d,y,S,u){const l=Fe("XMarkIcon");return te(),le("div",{class:Me(["flex items-center space-x-2 px-2 py-1 text-white rounded",`bg-${d.color}-500`])},[k("p",Ve,Ce(d.value.value),1),Ie(k("button",{onClick:v[0]||(v[0]=(...e)=>u.removeLabel&&u.removeLabel(...e)),class:"ml-2"},[M(l,{class:"w-4 h-4"})],512),[[Be,d.close]])],2)}const Xe=Ee(Ge,[["render",ze]]);export{Ue as _,Xe as a};

import{_ as W}from"./CUGREwii.js";import{d as J,r as I,a as j,b as r,e as _,f as a,h as s,z as i,Y as N,p as O,g as e,G,V as z,k as T,q as K,i as M,v as U,t as u,F as P,j as S,K as D,C as Q,O as Z,S as X,A as ee,l as B,m as L,u as E,_ as R,n as te,D as se,E as oe,x as H,y as w,s as ae,B as ne,P as le,L as V}from"./JEpZiKDn.js";import{_ as ie}from"./ptOfu_GX.js";import{_ as re}from"./CstTSjsb.js";import{r as ce}from"./D6_522nX.js";import{_ as de}from"./eLgep5E_.js";import{u as A}from"./B5usExHv.js";import{u as ue}from"./Bl4Rx-lb.js";import{P as pe}from"./DObdreHM.js";import{r as _e}from"./BcteEfoI.js";import{_ as me}from"./VmwGiaas.js";import"./DGM4Jn_4.js";import"./Cd90EHgg.js";import"./CNpZTCKC.js";import"./Drn6De9M.js";const fe=e("div",{class:"fixed inset-0 bg-black bg-opacity-50"},null,-1),he={class:"fixed inset-0 overflow-y-auto"},xe={class:"flex min-h-full items-center justify-center p-4 text-center"},ye={class:"border-b px-3 py-3 flex items-center justify-between"},ge=e("img",{src:re,class:"w-8 h-8 mr-2"},null,-1),ve={class:"flex items-center justify-center mx-auto my-20"},we={class:"space-y-3 px-5 py-5"},be={class:"w-full flex flex-col space-y-1"},Te=e("label",{class:"font-semibold text-lg"},"Name",-1),ke={class:"w-full flex flex-col space-y-1"},$e=e("label",{class:"font-semibold text-lg"},"Short Name",-1),Ce={class:"w-full flex flex-col space-y-1"},De=e("label",{class:"font-semibold text-lg"},"Laboratory Section",-1),Ee={class:"w-full flex flex-col space-y-1"},Ie=e("label",{class:"font-semibold text-lg"},"Specific Sex",-1),Pe={class:"w-full flex flex-col space-y-1"},Se=e("label",{class:"font-semibold text-lg"},"Compatible Specimen",-1),Ve={class:"flex flex-wrap gap-2"},Ae={class:"w-full flex flex-col space-y-1"},Oe=e("label",{class:"font-semibold text-lg"},"Organisms",-1),je={class:"flex flex-wrap gap-2"},Be={key:0},Le={class:"w-full flex flex-col space-y-1"},Re=e("label",{class:"font-semibold text-lg"},"Measure",-1),Fe={class:"w-full flex flex-col space-y-1"},qe=e("label",{class:"font-semibold text-lg"},"Expected Turn Around Time",-1),Me={class:"w-full flex flex-col space-y-1"},Ue=e("label",{class:"font-semibold text-lg"},"Date Created",-1),Ne=J({__name:"index",props:{data:{type:Object,required:!0}},setup(n){const l=n,m=ee,c=I(!1),t=I(!1),o=I({}),d=j("token"),p=async()=>{f(),t.value=!0;const y={route:`${B.viewTestType}/${l.data.id}`,method:"GET",token:`${d.value}`},{data:h,error:g,pending:x}=await L(y);t.value=x,h.value&&(o.value=h.value,t.value=!1),g.value&&(t.value=!1,E().$toast.error("An error occurred, please try again!"))},f=()=>{c.value=!c.value};return(y,h)=>{const g=R,x=te;return r(),_("div",null,[a(g,{click:p,color:"primary",text:"View",icon:s(m)},null,8,["icon"]),a(s(X),{appear:"",show:s(c),as:"template"},{default:i(()=>[a(s(N),{as:"div",class:"relative z-10"},{default:i(()=>[a(s(O),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[fe]),_:1}),e("div",he,[e("div",xe,[a(s(O),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[a(s(G),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>{var k,$,b,C,F,q;return[e("div",ye,[a(s(z),{as:"h3",class:"text-lg flex items-center font-semibold leading-6"},{default:i(()=>[ge,T(" Test Type Details ")]),_:1}),e("button",{onClick:h[0]||(h[0]=()=>{f()})},[a(s(K),{class:"w-5 h-5"})])]),M(e("div",ve,[a(x,{loading:s(t)},null,8,["loading"])],512),[[U,s(t)]]),M(e("div",we,[e("div",be,[Te,e("p",null,u((k=s(o))==null?void 0:k.name),1)]),e("div",ke,[$e,e("p",null,u(($=s(o))==null?void 0:$.short_name),1)]),e("div",Ce,[De,e("p",null,u((C=(b=s(o))==null?void 0:b.department)==null?void 0:C.id),1)]),e("div",Ee,[Ie,e("p",null,u(s(o).sex),1)]),e("div",Pe,[Se,e("div",Ve,[(r(!0),_(P,null,S(s(o).specimens,v=>(r(),_("p",{key:v},u(`${v.name}`),1))),128))])]),e("div",Ae,[Oe,e("div",je,[(r(!0),_(P,null,S(s(o).organisms,(v,Y)=>(r(),_("p",{key:v},[T(u(`${v.name}`),1),Y!==s(o).organisms.length-1?(r(),_("span",Be,",")):D("",!0)]))),128))])]),e("div",Le,[Re,(r(!0),_(P,null,S(s(o).indicators,v=>(r(),_("p",{key:v},u(`${v.name}`),1))),128))]),e("div",Fe,[qe,e("p",null,u(`${(F=s(o).expected_turn_around_time)==null?void 0:F.value} ${(q=s(o).expected_turn_around_time)==null?void 0:q.unit}`),1)]),e("div",Me,[Ue,e("p",null,u(s(Q)(s(o).created_date).format("DATE_FORMAT"in y?y.DATE_FORMAT:s(Z))),1)])],512),[[U,!s(t)]])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),Ge={components:{TransitionRoot:X,TransitionChild:O,Dialog:N,DialogPanel:G,DialogTitle:z,XMarkIcon:K,ExclamationTriangleIcon:se},data(){return{show:!1,deleteIcon:ce,loading:!1,cookie:j("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(n){this.loading=!0;const l={route:`${B.testTypes}/${n}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{data:m,error:c,pending:t}=await L(l);this.loading=t,m.value&&(this.handleClick(),E().$toast.success(`${this.data.name} test type deleted successfully!`),this.loading=!1,this.$emit("update",!0)),c.value&&(console.error(c.value),E().$toast.error(oe),this.loading=!1)},handleClick(){this.show=!this.show}}},ze=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ke={class:"fixed inset-0 overflow-y-auto"},Xe={class:"flex min-h-full items-center justify-center p-4 text-center"},He={class:"border-b px-3 py-3 flex items-center justify-between"},Ye={class:"mt-2 space-y-3 px-5"},We={class:"rounded px-2 py-2"},Je={class:"font-semibold text-red-500"},Qe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ze(n,l,m,c,t,o){const d=R,p=w("TransitionChild"),f=w("ExclamationTriangleIcon"),y=w("DialogTitle"),h=w("XMarkIcon"),g=w("FormKit"),x=w("DialogPanel"),k=w("Dialog"),$=w("TransitionRoot");return r(),_("div",null,[a(d,{click:o.handleClick,color:"error",text:"Delete",icon:t.deleteIcon},null,8,["click","icon"]),a($,{appear:"",show:t.show,as:"template"},{default:i(()=>[a(k,{as:"div",class:"relative z-10"},{default:i(()=>[a(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[ze]),_:1}),e("div",Ke,[e("div",Xe,[a(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[a(x,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[e("div",He,[a(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[a(f,{class:"h-5 w-5 mr-2"}),T(" Confirm delete ")]),_:1}),e("button",{onClick:l[0]||(l[0]=(...b)=>o.handleClick&&o.handleClick(...b))},[a(h,{class:"w-5 h-5"})])]),a(g,{type:"form","submit-label":"Update",onSubmit:l[2]||(l[2]=b=>o.deleteData(m.data.id)),actions:!1},{default:i(({value:b})=>[e("div",Ye,[e("div",We,[T(" Do you really want to delete "),e("span",Je,u(m.data.name),1),T("? Note that once this action is completed, it can not be undone ")]),a(g,{type:"textarea",label:"Reason",validation:"required",modelValue:t.reason,"onUpdate:modelValue":l[1]||(l[1]=C=>t.reason=C)},null,8,["modelValue"])]),e("div",Qe,[a(d,{loading:t.loading,type:"submit",click:()=>{},color:"error",icon:t.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const et=H(Ge,[["render",Ze]]),tt={components:{MagnifyingGlassIcon:_e},setup(){ue({title:`${pe.name.toUpperCase()} - Test Types`})},data(){return{header:"Test Types",loading:!0,addIcon:ae,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],editIcon:ne,showEdit:!1,serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},search:"",testTypes:new Array,cookie:j("token"),headers:[{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"expected turn around time",value:"expected_turn_around_time"},{text:"actions",value:"actions"}],searchField:"name",searchValue:""}},created(){this.init(),(this._.provides[le]||this.$route).query.create&&E().$toast.success("Test type created successfully!")},methods:{async init(){const{page:n,rowsPerPage:l}=this.serverOptions;this.loading=!0;const m={route:`${B.testTypes}?page=${n}&per_page=${l}&search=${this.search}`,method:"GET",token:`${this.cookie}`,body:{}};let{data:c,error:t,pending:o}=await L(m);this.loading=o,c.value&&(this.testTypes=c.value.test_types.map(d=>{var p,f;return{...d,expected_turn_around_time:`${d.expected_turn_around_time!==null?((p=d.expected_turn_around_time)==null?void 0:p.value)+" "+(d.expected_turn_around_time.unit==null?"":(f=d.expected_turn_around_time.unit)==null?void 0:f.toLowerCase()):""}`}}),this.serverItemsLength=c.value.meta.total_count),t.value&&console.error(t.value)},updateTestTypes(n){typeof n=="object"&&(this.serverOptions=n),this.init()},updateSearch(n){this.searchValue=n,this.search=n,this.updateTestTypes(!0)},edit(n){this.showEdit=!0},navigateToEdit(n){const l=n.name.trim().toLowerCase().replace(/[\s\W-]+/g,"-").replace(/^-+|-+$/g,"");this.$router.push(`/test-catalog/test-types/edit/${l}?testType=${n.id}`)},createTestType(){this.$router.push("/test-catalog/test-types/create")}}},st={class:"px-5 py-5"},ot={class:"flex items-center justify-between py-5"},at={class:"text-2xl font-semibold flex items-center uppercase"},nt=e("img",{src:me,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),lt={class:"flex items-center space-x-3"},it={class:"flex justify-end w-full px-2 py-2 mb-2"},rt={class:"py-2 flex items-center space-x-2"};function ct(n,l,m,c,t,o){const d=W,p=R,f=ie,y=Ne,h=et,g=de;return r(),_("div",st,[a(d,{pages:t.pages},null,8,["pages"]),e("div",ot,[e("div",at,[nt,T(" "+u(t.header),1)]),e("div",lt,[("usePermissions"in n?n.usePermissions:s(A))().can.manage("test_catalog")?(r(),V(p,{key:0,text:"Create Test Type",icon:t.addIcon,color:"primary",click:o.createTestType},null,8,["icon","click"])):D("",!0)])]),e("div",it,[("usePermissions"in n?n.usePermissions:s(A))().can.manage("test_catalog")?(r(),V(f,{key:0,search:t.search,onUpdate:o.updateSearch},null,8,["search","onUpdate"])):D("",!0)]),("usePermissions"in n?n.usePermissions:s(A))().can.manage("test_catalog")?(r(),V(g,{key:0,headers:t.headers,data:t.testTypes,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:o.updateTestTypes},{actions:i(({item:x})=>[e("div",rt,[a(y,{onEdit:o.edit,open:t.showEdit,data:x},null,8,["onEdit","open","data"]),a(p,{click:()=>{o.navigateToEdit(x)},color:"success",text:"Edit",icon:t.editIcon},null,8,["click","icon"]),a(h,{onUpdate:o.updateTestTypes,data:x},null,8,["onUpdate","data"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])):D("",!0)])}const $t=H(tt,[["render",ct]]);export{$t as default};

import{_ as G}from"./Breadcrumb.vue.e3e89550.js";import{_ as N}from"./SearchBar.1391c33c.js";import{p as U,x as n,a as B,h as F,o as L,c as P,d as a,m as e,i as p,e as t,j,t as x,w as D,v as I,q as O,l as z,b as S,f as K,B as M}from"./entry.ede29211.js";import{e as C,f as q,m as H,d as R}from"./fetch.7c05310f.js";import{e as A}from"./constants.ee9a0283.js";import{_ as J}from"./clinical_fe.ea056bd0.js";import{a as Q}from"./PencilSquareIcon.8f17322d.js";import{r as W}from"./XMarkIcon.e9883b5f.js";import{r as X}from"./ArrowDownTrayIcon.a1ec8672.js";import{U as Y,h as V,G as Z,V as ee,S as te}from"./transition.a542e4ff.js";import{_ as se}from"./Datatable.82d36aa2.js";import{u as ae}from"./index.28c26345.js";import{_ as ne}from"./medical_sample.34f807d8.js";import{P as oe}from"./package.6544c22a.js";import"./nuxt-link.cd4ac04e.js";import"./HomeIcon.e5ce52a1.js";import"./network.8dfa1f5e.js";import"./PrinterIcon.41d0b58e.js";import"./hidden.43ef53b5.js";const ie=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),le={class:"fixed inset-0 overflow-y-auto"},ce={class:"flex min-h-full items-center justify-center p-4 text-center"},re={class:"border-b px-3 py-3 flex items-center justify-between"},pe=t("img",{src:J,class:"w-8 h-8 mr-2"},null,-1),me={class:"mt-2 space-y-3 px-5 py-5"},de={class:"w-full flex flex-col space-y-1"},ue=t("label",{class:"font-semibold text-lg"},x("Specimen Name"),-1),_e={class:"underline"},fe={class:"w-full flex flex-col space-y-1"},ve=t("label",{class:"font-semibold text-lg"},x("Test Type"),-1),he={class:"underline"},xe={class:"mt-2 space-y-3"},ye={class:"w-full grid grid-1 items-center px-5 space-x-3"},ge={class:"w-full grid grid-1 items-center px-5 space-x-3"},be={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"},$e=U({__name:"index",props:{id:{}},emits:["action-completed"],setup(T,{emit:b}){const u=b,y=T,_=n(!1),r=n(!1),f=B("token"),o=n({life_span:"",life_span_units:""}),v=n({specimen_name:"",test_type_name:"",life_span:"",life_span_units:""}),$=n([{label:"mins",value:"mins"},{label:"hours",value:"hours"},{label:"days",value:"days"},{label:"months",value:"months"}]),h=async()=>{r.value=!0;const m={route:`${C.specimensLifespan.edit}/${y.id}`,method:"GET",token:`${f.value}`},s=await q(m);if(s.data.value){const l=s.data.value;o.value.life_span=l.life_span,o.value.life_span_units=l.life_span_units,v.value.specimen_name=l.specimen.name,v.value.test_type_name=l.test_type.name,_.value=!0}r.value=!1,s.error.value&&(r.value=!1,S().$toast.error(`${A}`))},k=async()=>{r.value=!0;const m=await H(`${C.specimensLifespan.update}/${y.id}`,{method:"PUT",headers:{Authorization:`${f.value}`},body:o},"$x31dFGojBG");m.data.value&&(g(),u("action-completed",!0),S().$toast.success("Specimen lifespan updated successfully!")),m.error.value&&(S().$toast.success("An error occurred, please try again!"),g())},g=()=>{_.value=!_.value,r.value=!1};return(m,s)=>{const l=K,d=F("FormKit");return L(),P("div",null,[a(l,{click:h,color:"success",text:"Edit",icon:e(Q)},null,8,["icon"]),a(e(te),{appear:"",show:e(_),as:"template"},{default:p(()=>[a(e(Y),{as:"div",class:"relative z-10"},{default:p(()=>[a(e(V),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[ie]),_:1}),t("div",le,[t("div",ce,[a(e(V),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:p(()=>[a(e(Z),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:p(()=>[t("div",re,[a(e(ee),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:p(()=>[pe,j(" "+x("Edit Specimen Lifespan"))]),_:1}),t("button",{onClick:g},[a(e(W),{class:"w-5 h-5"})])]),D(t("div",me,[t("div",de,[ue,t("p",_e,x(e(v).specimen_name),1)]),t("div",fe,[ve,t("p",he,x(e(v).test_type_name),1)])],512),[[I,!e(r)]]),a(d,{type:"form","submit-label":"Update",onSubmit:k,actions:!1},{default:p(({})=>[t("div",xe,[t("div",ye,[a(d,{class:"w-full",type:"number",label:"Lifespan",validation:"required",modelValue:e(o).life_span,"onUpdate:modelValue":s[0]||(s[0]=c=>e(o).life_span=c)},null,8,["modelValue"])]),t("div",ge,[e($).length?(L(),O(d,{key:0,type:"select",label:"Test Type",modelValue:e(o).life_span_units,"onUpdate:modelValue":s[1]||(s[1]=c=>e(o).life_span_units=c),placeholder:"Select disease",validation:"required",options:e($)},null,8,["modelValue","options"])):z("",!0)]),t("div",be,[a(l,{type:"submit",click:()=>{},color:"success",loading:e(r),icon:e(X),text:"Save changes"},null,8,["loading","icon"])])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),we={class:"px-5 py-5"},Se={class:"text-2xl font-semibold flex items-center uppercase py-5"},ke=t("img",{src:ne,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),Le={class:"flex justify-end w-full px-2 py-2 mb-2"},Ce={class:"py-2 flex items-center space-x-2"},Re=U({__name:"specimen-lifespan",setup(T){ae({title:`${oe.name.toUpperCase()} - Specimen Lifespan`});const b=n(0),u=n(!1),y=n([]),_=B("token"),r=n("Specimen Lifespan"),f=n(""),o=n({page:1,rowsPerPage:10,sortBy:"name"}),v=n([{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}]),$=n([{text:"Specimen Type",value:"specimen_name",sortable:!0},{text:"Test Type",value:"test_type_name"},{text:"Lifesapn",value:"specimen_life_span"},{text:"Actions",value:"actions"}]),h=async()=>{u.value=!0;const{page:s,rowsPerPage:l}=o.value,d={route:R(C.specimensLifespan.index,{page:s,per_page:l,search:f.value}),method:"GET",token:`${_.value}`},c=await q(d);if(c.data.value){const w=c.data.value.data;y.value=w?w.map(i=>({id:i.id,specimen_name:i.specimen_name,test_type_name:i.test_type_name,specimen_life_span:i.life_span&&i.life_span_units?`${i.life_span} ${i.life_span_units}`:"--",life_span:i.life_span,life_span_unit:i.life_span_units})):[],b.value=c.data.value.meta.total_count??0}u.value=!1,c.error.value&&(u.value=!1,S().$toast.error(`${A}`))},k=s=>{f.value=s,h()},g=s=>o.value=s;h(),M(o,()=>h());const m=async()=>{h()};return(s,l)=>{const d=G,c=N,w=$e,i=se;return L(),P("div",we,[a(d,{pages:e(v)},null,8,["pages"]),t("div",Se,[ke,j(" "+x(e(r)),1)]),t("div",Le,[a(c,{search:e(f),onUpdate:k},null,8,["search"])]),a(i,{headers:e($),data:e(y),serverOptions:e(o),loading:e(u),serverItemsLength:e(b),onUpdate:g},{actions:p(({item:E})=>[t("div",Ce,[a(w,{onActionCompleted:m,id:E.id},null,8,["id"])])]),_:1},8,["headers","data","serverOptions","loading","serverItemsLength"])])}}});export{Re as default};

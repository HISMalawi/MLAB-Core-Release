import{ae as x,d as B,r as d,c as F,w as L,o as N,x as R,b as i,e as u,f as m,h as a,A as q,i as z,v as D,g as H,q as K,F as M,k as $,t as A,C as E}from"./D6i_IOc_.js";const I=x("search",{state:()=>({recent:[]}),actions:{addRecent(o){this.recent.includes(o)||this.recent.push(o)}},persist:{storage:localStorage}}),O={class:"relative"},T={key:0,class:"absolute z-50 top-full left-0 w-full bg-white rounded-md shadow-md"},U=["onClick"],J=B({__name:"SearchBar",props:{search:{required:!0,type:String},placeholder:{required:!1,type:String,default:"Search..."}},emits:["update","update:search"],setup(o,{emit:f}){const v=o,h=f,t=d(v.search),n=d([]),r=d(!1),c=I(),g=()=>{let e=t.value.trim();h("update",e),h("update:search",e),e&&e.length>=4&&!n.value.includes(e)&&(n.value.unshift(e),S(e))},S=e=>{c.addRecent(e),c.recent.length>20&&c.recent.pop()},y=()=>{n.value=c.recent},w=e=>n.value.filter(s=>s.toLowerCase().includes(e.toLowerCase().trim())),C=e=>{t.value=e,r.value=!1},V=()=>{setTimeout(()=>{r.value=!1},200)},_=()=>{t.value="",r.value=!1},p=F(()=>w(t.value).slice(0,5));return L(t,()=>{g()}),N(()=>{y()}),(e,s)=>{const k=R("FormKit");return i(),u("div",O,[m(k,{label:"",type:"search",modelValue:a(t),"onUpdate:modelValue":s[0]||(s[0]=l=>q(t)?t.value=l:null),modelModifiers:{lazy:!0},placeholder:o.placeholder,delay:1e3,"prefix-icon":"searchIcon",autocomplete:"off",onBlur:V,onFocus:s[1]||(s[1]=l=>r.value=!0)},null,8,["modelValue","placeholder"]),z(H("button",{onClick:_,class:"absolute inset-y-0 right-0 flex items-center pr-3"},[m(a(K),{class:"w-5 h-5 mt-2"})],512),[[D,a(t)!==""]]),a(r)&&a(p).length>0?(i(),u("ul",T,[(i(!0),u(M,null,$(a(p),(l,b)=>(i(),u("li",{key:b,onClick:j=>C(l),class:"px-3 py-2 hover:bg-gray-100 cursor-pointer"},A(l),9,U))),128))])):E("",!0)])}}});export{J as _};

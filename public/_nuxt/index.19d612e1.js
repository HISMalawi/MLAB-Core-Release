import{o as c,c as u,d as e,l as q,B as w,f as h,b as o,k as r,g as l,h as L,C as U,e as P,_ as N,n as B,w as M,v as j,t as _,a as F,T,F as O,r as K,p as G,j as E}from"./entry.07439091.js";import{_ as H}from"./OutlinedButton.f31735b7.js";import{b as R,f as $,u as Y,c as J,T as Q,e as V}from"./fetch.b0dbeb5a.js";import{r as W}from"./XMarkIcon.03d2e3cf.js";import{r as X}from"./ArrowPathIcon.e0098bbf.js";import{U as Z,h as D,G as ee,V as te,S as oe}from"./transition.d75289e9.js";import{_ as se}from"./nuxt-link.93f30edb.js";import{u as ne}from"./facility.9663b28a.js";import{P as b}from"./package.d411c004.js";import{r as ae}from"./UserIcon.a7089748.js";import{B as re,K as le,N as ie,H as ce,U as de}from"./listbox.932c8cac.js";import{_ as ue}from"./git-branch-outline.22cef694.js";import{_ as me}from"./logo.b25abaa2.js";import{u as pe}from"./vue.f36acd1f.70ff2b88.js";import"./constants.06d305c2.js";import"./PencilSquareIcon.ac5eab04.js";import"./PrinterIcon.0139b369.js";import"./hidden.0c3ab281.js";import"./use-text-value.4499ba3e.js";function fe(s,t){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z","clip-rule":"evenodd"})])}function _e(s,t){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M2.47 2.47a.75.75 0 011.06 0l8.407 8.407a1.125 1.125 0 011.186 1.186l1.462 1.461a3.001 3.001 0 00-.464-3.645.75.75 0 111.061-1.061 4.501 4.501 0 01.486 5.79l1.072 1.072a6.001 6.001 0 00-.497-7.923.75.75 0 011.06-1.06 7.501 7.501 0 01.505 10.05l1.064 1.065a9 9 0 00-.508-12.176.75.75 0 011.06-1.06c3.923 3.922 4.093 10.175.512 14.3l1.594 1.594a.75.75 0 11-1.06 1.06l-2.106-2.105-2.121-2.122h-.001l-4.705-4.706a.747.747 0 01-.127-.126L2.47 3.53a.75.75 0 010-1.061zm1.189 4.422a.75.75 0 01.326 1.01 9.004 9.004 0 001.651 10.462.75.75 0 11-1.06 1.06C1.27 16.12.63 11.165 2.648 7.219a.75.75 0 011.01-.326zM5.84 9.134a.75.75 0 01.472.95 6 6 0 001.444 6.159.75.75 0 01-1.06 1.06A7.5 7.5 0 014.89 9.606a.75.75 0 01.95-.472zm2.341 2.653a.75.75 0 01.848.638c.088.62.37 1.218.849 1.696a.75.75 0 01-1.061 1.061 4.483 4.483 0 01-1.273-2.546.75.75 0 01.637-.848z","clip-rule":"evenodd"})])}function I(s,t){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.636 4.575a.75.75 0 010 1.06 9 9 0 000 12.729.75.75 0 01-1.06 1.06c-4.101-4.1-4.101-10.748 0-14.849a.75.75 0 011.06 0zm12.728 0a.75.75 0 011.06 0c4.101 4.1 4.101 10.749 0 14.85a.75.75 0 11-1.06-1.061 9 9 0 000-12.728.75.75 0 010-1.06zM7.757 6.696a.75.75 0 010 1.061 6 6 0 000 8.485.75.75 0 01-1.06 1.061 7.5 7.5 0 010-10.607.75.75 0 011.06 0zm8.486 0a.75.75 0 011.06 0 7.5 7.5 0 010 10.607.75.75 0 01-1.06-1.06 6 6 0 000-8.486.75.75 0 010-1.06zM9.879 8.818a.75.75 0 010 1.06 3 3 0 000 4.243.75.75 0 11-1.061 1.06 4.5 4.5 0 010-6.363.75.75 0 011.06 0zm4.242 0a.75.75 0 011.061 0 4.5 4.5 0 010 6.364.75.75 0 01-1.06-1.06 3 3 0 000-4.244.75.75 0 010-1.06zM10.875 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})])}function he(s,t){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})])}function xe(s,t){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}const ve=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ge={class:"fixed inset-0 overflow-y-auto"},we={class:"flex min-h-full items-center justify-center p-4 text-center"},ye={class:"border-b px-3 py-3 flex items-center justify-between"},be={class:"mt-2 space-y-3 px-5"},Ce=e("div",{class:"px-3 py-3 border-l-4 border-sky-500 shadow"}," Please make sure you enter the correct IBLIS API IP Address and the port that it is running. This page will refresh after updating changes. ",-1),ke={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"},$e=q({__name:"index",props:{isConnected:{required:!0,type:Boolean,default:!1}},setup(s){const t=w(!1),n=w(!1),m=R(),a=s,p=w(m.ip),d=w(m.port),x=()=>{n.value=!n.value},C=(v,f)=>{m.updateNetwork({ip:v,port:f}),x(),window.location.reload()};return(v,f)=>{const y=P,g=h("FormKit"),k=H;return c(),u("div",null,[o(y,{text:"Network Configuration",color:a.isConnected?"success":"error",icon:v.$props.isConnected?r(I):r(_e),click:x},null,8,["color","icon"]),o(r(oe),{appear:"",show:r(n),as:"template"},{default:l(()=>[o(r(Z),{as:"div",class:"relative z-10"},{default:l(()=>[o(r(D),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[ve]),_:1}),e("div",ge,[e("div",we,[o(r(D),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[o(r(ee),{class:"w-full max-w-xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",ye,[o(r(te),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[o(r(I),{class:"h-5 w-5 mr-2"}),L(" Configure Network ")]),_:1}),e("button",{onClick:x},[o(r(W),{class:"w-5 h-5"})])]),o(g,{type:"form","submit-label":"Update",onSubmit:f[2]||(f[2]=z=>C(r(p),r(d))),actions:!1},{default:l(({value:z})=>[e("div",be,[Ce,o(g,{type:"text",label:"IP Address",modelValue:r(p),"onUpdate:modelValue":f[0]||(f[0]=i=>U(p)?p.value=i:null),validation:"required|string"},null,8,["modelValue"]),o(g,{type:"number",label:"Port",modelValue:r(d),"onUpdate:modelValue":f[1]||(f[1]=i=>U(d)?d.value=i:null),validation:"required|number"},null,8,["modelValue"])]),e("div",ke,[o(k,{type:"button",click:()=>{x()},text:"Cancel"},null,8,["click"]),o(y,{loading:r(t),type:"submit",click:()=>{},color:"success",icon:r(X),text:"Update"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),Ve={props:{color:{required:!1,type:String},type:{required:!0,type:String},to:{required:!1,type:String},text:{required:!0,type:String},loading:{type:Boolean,required:!1,default:!1}}},Be=["type"],Le={class:"w-5 h-5 text-white animate-spin mr-2",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ze=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Se=e("path",{class:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"},null,-1),Ue=[ze,Se];function De(s,t,n,m,a,p){const d=se;return c(),u("div",null,[o(d,null,{default:l(()=>[e("button",{type:n.type,class:B(n.color=="primary"?"flex items-center justify-center w-full text-center bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-500 font-normal shadow-sm rounded px-2 py-2 text-white":n.color=="error"?"bg-red-500 flex focus:outline-none focus:ring-2 focus:ring-red-500 font-normal items-center shadow-sm rounded px-2 py-1.5 text-sm text-white":n.color=="success"?"bg-green-500 flex focus:outline-none focus:ring-2 focus:ring-green-500 font-normal items-center shadow-sm rounded px-2 py-1.5 text-sm text-white":"bg-gray-200 flex focus:outline-none focus:ring-2 focus:ring-gray-100 text-gray-500 font-normal items-center shadow-sm rounded px-2 py-1.5 text-sm")},[M((c(),u("svg",Le,Ue,512)),[[j,n.loading]]),L(" "+_(n.loading?"  Please wait...":n.text),1)],10,Be)]),_:1})])}const Ie=N(Ve,[["render",De]]),qe={components:{UserIcon:ae,LockClosedIcon:fe,CheckIcon:he,ChevronUpDownIcon:xe,Listbox:re,ListboxLabel:le,ListboxButton:ie,ListboxOptions:ce,ListboxOption:de},data(){return{appName:b.name,username:"",password:"",loading:!1,facility:"",version:b.version,apiVersion:"-:-",departments:new Array,selectedDepartment:{name:"-- select department --"}}},created(){this.init(),this.getAPIVersion(),this.globals()},methods:{async globals(){const{fetchFacility:s,details:t}=ne(),n={route:V.global,method:"GET",token:""},{data:m,error:a}=await $(n);a.value&&console.error(a.value),m.value&&(s(m.value),this.facility=t.name)},async getAPIVersion(){const s={route:`${V.global}/current_api_tag`,method:"GET"},{data:t,error:n}=await $(s);t.value&&(this.apiVersion=t.value.git_tag,this.$emit("connection",!0)),n.value&&(console.error(n.value),this.$emit("connection",!1))},async init(){const s={route:V.departments,method:"GET",token:""},{data:t,error:n}=await $(s);t.value&&(this.departments=t.value),n.value&&console.error(n.value)},async login(){const{authenticateUser:s,authenticated:t}=Y();let n={username:this.username,password:this.password,department:this.selectedDepartment.name};this.selectedDepartment.name!=="-- select department --"?(this.loading=!0,await s(n),J(),this.loading=!1):F().$toast.warning("Please select a department!")},translateDepartments(s,t){return Q(s,t)}}},Ne={class:"my-20"},Ae={class:"mx-auto max-w-sm bg-white border rounded mt-10"},Pe={class:"px-2 py-2 flex items-center justify-between"},Me={class:"rounded bg-gray-100 py-1 px-2.5 border border-gray-50 text-sm flex items-center text-gray-500"},je=e("img",{src:ue,class:"w-5 h-5 text-red-500",alt:"git-tag-icon/"},null,-1),Fe={class:"px-16 py-5 flex flex-col items-center"},Te=e("img",{src:me,alt:"app-logo",class:"w-28 h-28 object-cover"},null,-1),Oe={class:"mt-5 w-full text-3xl font-bold text-sky-500 text-center uppercase"},Ke={class:"mt-3 text-xl font-medium text-center"},Ge={class:"space-y-2 px-5 py-3"},Ee={class:"mt-3"},He={class:"space-y-2 px-5 mb-5"},Re={class:"font-medium text-base"},Ye={class:"relative mt-1"},Je={class:"block truncate"},Qe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},We={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-sky-600"},Xe={class:"px-5 mb-5"},Ze={class:"mt-5 flex flex-col space-y-2 items-center justify-center"},et={class:"text-center text-gray-500"};function tt(s,t,n,m,a,p){const d=h("FormKit"),x=h("ChevronUpDownIcon"),C=h("ListboxButton"),v=h("CheckIcon"),f=h("ListboxOption"),y=h("ListboxOptions"),g=h("Listbox"),k=Ie;return c(),u("div",Ne,[e("div",Ae,[e("div",null,[e("div",Pe,[e("div",Me,[je,L(" "+_(a.version)+" / "+_(a.apiVersion),1)])]),e("div",Fe,[Te,e("div",Oe,_(a.appName),1),e("h3",Ke,_(a.facility),1)]),o(d,{type:"form","submit-label":"Update",onSubmit:p.login,actions:!1},{default:l(({value:z})=>[e("div",Ge,[o(d,{type:"text",label:s.$t("username"),modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=i=>a.username=i),validation:"required"},null,8,["label","modelValue"]),e("div",Ee,[o(d,{type:"password",label:s.$t("password"),modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=i=>a.password=i),validation:"required"},null,8,["label","modelValue"])])]),e("div",He,[e("label",Re,_(s.$t("laboratory_section")),1),o(g,{modelValue:a.selectedDepartment,"onUpdate:modelValue":t[2]||(t[2]=i=>a.selectedDepartment=i)},{default:l(()=>[e("div",Ye,[o(C,{class:"relative w-full cursor-default rounded border py-2.5 pl-3 pr-10 text-left focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-none sm:text-sm"},{default:l(()=>[e("span",Je,_(p.translateDepartments(a.selectedDepartment.name,s.$t)),1),e("span",Qe,[o(x,{class:"h-5 w-5 text-gray-500","aria-hidden":"true"})])]),_:1}),o(T,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:l(()=>[o(y,{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-2 text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:l(()=>[(c(!0),u(O,null,K(a.departments,i=>(c(),G(f,{key:i.name,value:i,as:"template"},{default:l(({active:A,selected:S})=>[e("li",{class:B([A?"bg-gray-50":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[e("span",{class:B([S?"font-medium":"font-normal","block truncate"])},_(p.translateDepartments(i.name,s.$t)),3),S?(c(),u("span",We,[o(v,{class:"h-5 w-5","aria-hidden":"true"})])):E("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),e("div",Xe,[o(k,{color:"primary",type:"submit",text:s.$t("login"),loading:a.loading},null,8,["text","loading"])])]),_:1},8,["onSubmit"])])]),e("div",Ze,[e("p",et,_(s.$t("moh"))+" © "+_(new Date().getFullYear()),1)])])}const ot=N(qe,[["render",tt]]),st={class:"w-full flex items-center justify-end p-3"},Ct=q({__name:"index",setup(s){pe({title:`${b.name.toUpperCase()} - ${b.version}`});const t=w(),n=m=>{t.value=m};return(m,a)=>{const p=$e,d=ot;return c(),u("div",null,[e("div",st,[o(p,{isConnected:r(t)},null,8,["isConnected"])]),o(d,{onConnection:n})])}}});export{Ct as default};

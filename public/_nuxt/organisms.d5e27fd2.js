import{_ as H}from"./Breadcrumb.vue.becc510d.js";import{a as V,b as $,_ as S,g as l,o as k,c as D,e as t,d as e,h as r,i as C,f as U,w as R,v as B,t as I,u as L}from"./entry.4de71976.js";import{_ as J}from"./Multiselect.52f4bb3a.js";import{_ as P}from"./OutlinedButton.17a6425f.js";import{r as W,e as w,f as T,l as X,a as G,h as Y}from"./fetch.bfb1bb55.js";import{e as N}from"./constants.21d45e56.js";import{r as F}from"./XMarkIcon.71885131.js";import{r as Q}from"./UserIcon.0fdc638a.js";import{r as z}from"./ArrowDownTrayIcon.b003e3b3.js";import{r as Z}from"./ArrowUturnLeftIcon.15bb7976.js";import{S as j,h as E,U as O,G as A,V as M}from"./transition.9533f77f.js";import{_ as ee}from"./SearchBar.d9c93c77.js";import{_ as te}from"./Loader.1b523c4e.js";import{r as oe,a as K}from"./PencilSquareIcon.aafc535d.js";import{_ as q}from"./bacteria.2bb7323b.js";import{r as se}from"./TrashIcon.5534a06a.js";import{_ as ne}from"./Datatable.f8e8f287.js";import{P as ae}from"./package.ff8ec66d.js";import{r as ie}from"./MagnifyingGlassIcon.558a83d0.js";import"./nuxt-link.d2a17216.js";import"./HomeIcon.b89edfca.js";import"./PrinterIcon.b492aebf.js";import"./hidden.08e3289b.js";const le={components:{TransitionRoot:j,TransitionChild:E,Dialog:O,DialogPanel:A,DialogTitle:M,XMarkIcon:F,UserIcon:Q},data(){return{open:!1,addIcon:W,saveIcon:z,clearIcon:Z,name:"",description:"",drugSelected:null,loading:!1,drugs:new Array,rawDrugs:new Array,cookie:V("token")}},methods:{async init(){this.handleClick();const i={route:w.drugs,method:"GET",token:`${this.cookie}`},{pending:s,error:n,data:c}=await T(i);c.value&&(this.rawDrugs=c.value,c.value.map(o=>{this.drugs.push(o.name)})),n.value&&console.error(n.value)},async submitForm(){this.loading=!0;let i=new Array;this.drugSelected.map(o=>{this.rawDrugs.filter(a=>{o==a.name&&i.push(a.id)})});const{pending:s,error:n,data:c}=await X(w.organisms,{method:"POST",headers:{Authorization:`${this.cookie}`},body:{name:this.name,description:this.description,drugs:i}},"$JUYccvWHv1");c.value&&(this.handleClick(),$().$toast.success(`${this.name} organism created sucessfully!`),this.loading=!1,this.$emit("update",!0)),n.value&&(this.handleClick(),console.error(n.value),$().$toast.error(N),this.loading=!1)},updateDrugs(i){this.drugSelected=i},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},re=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ce={class:"fixed inset-0 overflow-y-auto"},de={class:"flex min-h-full items-center justify-center p-4 text-center"},ue={class:"border-b px-3 py-3 flex items-center justify-between"},me={class:"mt-2 space-y-3"},pe={class:"w-full flex items-center px-5"},_e={class:"w-full flex flex-col space-y-2"},he={class:"w-full flex items-center px-5 space-x-3"},fe={class:"w-full flex flex-col space-y-2"},ge={class:"w-full pb-20 px-5"},xe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ve(i,s,n,c,o,a){const d=U,m=l("TransitionChild"),g=l("DialogTitle"),x=l("XMarkIcon"),p=l("FormKit"),f=J,v=P,h=l("DialogPanel"),b=l("Dialog"),y=l("TransitionRoot");return k(),D("div",null,[t("div",null,[e(d,{text:"Create organism",color:"primary",icon:o.addIcon,click:a.init},null,8,["icon","click"])]),e(y,{appear:"",show:o.open,as:"template"},{default:r(()=>[e(b,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:r(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[re]),_:1}),t("div",ce,[t("div",de,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[e(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",ue,[e(g,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:r(()=>[C(" Create organism ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(..._)=>a.handleClick&&a.handleClick(..._))},[e(x,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1,id:"submitForm"},{default:r(({value:_})=>[t("div",me,[t("div",pe,[t("div",_e,[e(p,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":s[1]||(s[1]=u=>o.name=u)},null,8,["modelValue"])])]),t("div",he,[t("div",fe,[e(p,{type:"textarea",label:"Description",validation:"required",modelValue:o.description,"onUpdate:modelValue":s[2]||(s[2]=u=>o.description=u)},null,8,["modelValue"])])]),t("div",ge,[e(f,{label:"Drugs","items-selected":o.drugSelected,items:o.drugs,mode:"tags",onUpdate:a.updateDrugs},null,8,["items-selected","items","onUpdate"])])]),t("div",xe,[e(v,{type:"button",click:()=>{a.clearForm()},text:"Clear form"},null,8,["click"]),e(d,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ye=S(le,[["render",ve]]),we={components:{TransitionRoot:j,TransitionChild:E,Dialog:O,DialogPanel:A,DialogTitle:M,XMarkIcon:F,ExclamationTriangleIcon:G},data(){return{viewIcon:oe,show:!1,loading:!1,editIcon:K,moment:Y,cookie:V("token"),organism:{}}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show},async init(){this.handleClick(),this.loading=!0;const i={route:`${w.organisms}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:s,error:n,pending:c}=await T(i);this.loading=c,s.value&&(this.organism=s.value,this.loading=!1),n.value&&(console.error("error loading organism data: ",n.value),this.loading=!1)}}},be=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ke={class:"fixed inset-0 overflow-y-auto"},De={class:"flex min-h-full items-center justify-center p-4 text-center"},Ce={class:"border-b px-3 py-3 flex items-center justify-between"},Te=t("img",{src:q,class:"w-8 h-8 mr-2"},null,-1),$e={class:"flex items-center justify-center mx-auto my-20"},Ie={class:"space-y-3 px-5 py-5"},Ve={class:"w-full flex flex-col space-y-1"},Se=t("label",{class:"font-semibold text-lg"},"Name",-1),Ue={class:"underline text-black"},Fe={class:"w-full flex flex-col space-y-1"},je=t("label",{class:"font-semibold text-lg"},"Description",-1),Ee={key:0,class:"underline text-black"},Oe={key:1,class:"bg-red-50 py-2 px-2 flex items-center space-x-2"},Ae=t("p",{class:"text-red-500 font-medium"}," Description not found ",-1),Me={class:"w-full flex flex-col space-y-1"},Pe=t("label",{class:"font-semibold text-lg"},"Drugs",-1),qe={class:"underline text-black"};function Re(i,s,n,c,o,a){const d=U,m=l("TransitionChild"),g=l("DialogTitle"),x=l("XMarkIcon"),p=te,f=l("ExclamationTriangleIcon"),v=l("DialogPanel"),h=l("Dialog"),b=l("TransitionRoot");return k(),D("div",null,[e(d,{click:a.init,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(b,{appear:"",show:o.show,as:"template"},{default:r(()=>[e(h,{as:"div",class:"relative z-10"},{default:r(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[be]),_:1}),t("div",ke,[t("div",De,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[e(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>{var y,_;return[t("div",Ce,[e(g,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[Te,C(" View organism ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...u)=>a.handleClick&&a.handleClick(...u))},[e(x,{class:"w-5 h-5"})])]),R(t("div",$e,[e(p,{loading:o.loading},null,8,["loading"])],512),[[B,o.loading]]),R(t("div",Ie,[t("div",Ve,[Se,t("p",Ue,I(o.organism.name),1)]),t("div",Fe,[je,o.organism.description?(k(),D("p",Ee,I(o.organism.description),1)):(k(),D("div",Oe,[e(f,{class:"w-5 h-5 text-red-500 rounded-md"}),Ae]))]),t("div",Me,[Pe,t("p",qe,I((_=(y=o.organism.drugs)==null?void 0:y.map(u=>u.name))==null?void 0:_.join(", ")),1)])],512),[[B,!o.loading]])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Be=S(we,[["render",Re]]),Xe={components:{TransitionRoot:j,TransitionChild:E,Dialog:O,DialogPanel:A,DialogTitle:M,XMarkIcon:F},data(){return{editIcon:K,show:!1,saveIcon:z,drugSelected:new Array,cookie:V("token"),drugs:new Array,rawDrugs:new Array,loading:!1}},props:{data:{type:Object,required:!0}},methods:{async loadDrugs(){const i={route:w.drugs,method:"GET",token:`${this.cookie}`},{error:s,data:n}=await T(i);n.value&&(this.rawDrugs=n.value,n.value.map(c=>{this.drugs.push(c.name)})),s.value&&console.error(s.value)},async init(){await this.loadDrugs(),this.handleClick(),this.drugSelected=new Array;const i={route:`${w.organisms}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{error:s,data:n}=await T(i);n.value&&n.value.drugs.map(c=>{this.drugSelected.push(c.name)}),s.value&&console.error(s.value)},async submitForm(){this.loading=!0;let i=new Array;this.drugSelected.map(a=>{this.rawDrugs.filter(d=>{a==d.name&&i.push(Number(d.id))})}),this.data.drugs=i;const s={route:`${w.organisms}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:n,error:c,data:o}=await T(s);this.loading=n,o.value&&(this.show=!1,$().$toast.success("Organism updated successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(this.show=!1,console.error(c.value),this.loading=!1,$().$toast.error(N))},updateDrugs(i){this.drugSelected=i},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("submitForm")}}},Ge=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25"},null,-1),Ne={class:"fixed inset-0 overflow-y-auto"},ze={class:"flex min-h-full items-center justify-center p-4 text-center"},Ke={class:"border-b px-3 py-3 flex items-center justify-between"},He=t("img",{src:q,class:"w-8 h-8 mr-2"},null,-1),Le={class:"mt-2 space-y-3"},Je={class:"w-full flex items-center px-5"},We={class:"w-full flex flex-col space-y-2"},Ye={class:"w-full flex items-center px-5 space-x-3"},Qe={class:"w-full flex flex-col space-y-2"},Ze={class:"w-full pb-20 px-5"},et={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function tt(i,s,n,c,o,a){const d=U,m=l("TransitionChild"),g=l("DialogTitle"),x=l("XMarkIcon"),p=l("FormKit"),f=l("multi-select"),v=P,h=l("DialogPanel"),b=l("Dialog"),y=l("TransitionRoot");return k(),D("div",null,[e(d,{click:a.init,text:"Edit",color:"success",icon:o.editIcon},null,8,["click","icon"]),e(y,{appear:"",show:o.show,as:"template"},{default:r(()=>[e(b,{as:"div",class:"relative z-10"},{default:r(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[Ge]),_:1}),t("div",Ne,[t("div",ze,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[e(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",Ke,[e(g,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[He,C(" Edit organism ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(..._)=>a.handleClick&&a.handleClick(..._))},[e(x,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1,id:"submitForm"},{default:r(({value:_})=>[t("div",Le,[t("div",Je,[t("div",We,[e(p,{type:"text",label:"Name",validation:"required",modelValue:n.data.name,"onUpdate:modelValue":s[1]||(s[1]=u=>n.data.name=u)},null,8,["modelValue"])])]),t("div",Ye,[t("div",Qe,[e(p,{type:"textarea",label:"Description",validation:"required",modelValue:n.data.description,"onUpdate:modelValue":s[2]||(s[2]=u=>n.data.description=u)},null,8,["modelValue"])])]),t("div",Ze,[e(f,{label:"Drugs",modelValue:o.drugSelected,"onUpdate:modelValue":s[3]||(s[3]=u=>o.drugSelected=u),options:o.drugs,mode:"tags",clear:"",searchable:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",et,[e(v,{text:"Clear form",type:"button",click:()=>{a.clearForm()}},null,8,["click"]),e(d,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ot=S(Xe,[["render",tt]]),st={components:{TransitionRoot:j,TransitionChild:E,Dialog:O,DialogPanel:A,DialogTitle:M,XMarkIcon:F,ExclamationTriangleIcon:G},data(){return{show:!1,deleteIcon:se,loading:!1,cookie:V("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(i){this.loading=!0;const{pending:s,error:n,data:c}=await X(`${w.organisms}/${i}`,{method:"DELETE",headers:{Authorization:`${this.cookie}`},body:{retired_reason:this.reason}},"$uMsyS7TGbT");c.value&&(this.handleClick(),$().$toast.success("Drug deleted successfully!"),this.loading=!1,this.$emit("update",!0)),n.value&&(console.log(n.value),$().$toast.error("An error occurred, please try again!"),this.loading=!1)},handleClick(){this.show=!this.show}}},nt=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),at={class:"fixed inset-0 overflow-y-auto"},it={class:"flex min-h-full items-center justify-center p-4 text-center"},lt={class:"border-b px-3 py-3 flex items-center justify-between"},rt={class:"mt-2 space-y-3 px-5"},ct={class:"rounded px-2 py-2"},dt={class:"font-semibold text-red-500"},ut={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function mt(i,s,n,c,o,a){const d=U,m=l("TransitionChild"),g=l("ExclamationTriangleIcon"),x=l("DialogTitle"),p=l("XMarkIcon"),f=l("FormKit"),v=P,h=l("DialogPanel"),b=l("Dialog"),y=l("TransitionRoot");return k(),D("div",null,[e(d,{click:a.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(y,{appear:"",show:o.show,as:"template"},{default:r(()=>[e(b,{as:"div",class:"relative z-10"},{default:r(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[nt]),_:1}),t("div",at,[t("div",it,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[e(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",lt,[e(x,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[e(g,{class:"h-5 w-5 mr-2"}),C(" Confirm delete ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(..._)=>a.handleClick&&a.handleClick(..._))},[e(p,{class:"w-5 h-5"})])]),e(f,{type:"form","submit-label":"Update",onSubmit:s[2]||(s[2]=_=>a.deleteData(n.data.id)),actions:!1},{default:r(({value:_})=>[t("div",rt,[t("div",ct,[C(" Do you really want to delete "),t("span",dt,I(n.data.name),1),C("? Note that once this action is completed, it can not be undone ")]),e(f,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":s[1]||(s[1]=u=>o.reason=u)},null,8,["modelValue"])]),t("div",ut,[e(v,{click:()=>{a.handleClick()},type:"button",text:"Cancel"},null,8,["click"]),e(d,{loading:o.loading,type:"submit",click:()=>{},color:"error",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const pt=S(st,[["render",mt]]),_t={setup(){L({title:`${ae.name.toUpperCase()} - Organisms`})},data(){return{header:"Organisms",loading:!1,search:"",searchValue:"",headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"description",value:"description"},{text:"actions",value:"actions"}],organisms:[],pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],cookie:V("token")}},components:{MagnifyingGlassIcon:ie},created(){this.init()},methods:{updateSearch(i){this.searchValue=i,this.search=i},async init(){this.loading=!0;const i={route:w.organisms,method:"GET",token:`${this.cookie}`},{data:s,error:n,pending:c}=await T(i);this.loading=c,s.value&&(this.organisms=s.value,this.loading=!1),n.value&&(console.error(n.value),this.loading=!1)},updateOrganisms(i){i&&this.init()}}},ht={class:"py-5 px-5"},ft={class:"flex items-center justify-between py-5"},gt={class:"text-2xl font-semibold flex items-center uppercase"},xt=t("img",{src:q,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),vt={class:"flex items-center space-x-3"},yt={class:"flex justify-end w-full px-2 py-2 mb-2"},wt={class:"py-2 flex items-center space-x-2"};function bt(i,s,n,c,o,a){const d=H,m=ye,g=ee,x=Be,p=ot,f=pt,v=ne;return k(),D("div",ht,[e(d,{pages:o.pages},null,8,["pages"]),t("div",ft,[t("div",gt,[xt,C(" "+I(o.header),1)]),t("div",vt,[e(m,{onUpdate:a.updateOrganisms},null,8,["onUpdate"])])]),t("div",yt,[e(g,{search:o.search,onUpdate:a.updateSearch},null,8,["search","onUpdate"])]),e(v,{headers:o.headers,data:o.organisms,loading:o.loading,"search-value":o.searchValue,"search-field":"name"},{actions:r(({item:h})=>[t("div",wt,[e(x,{data:h},null,8,["data"]),e(p,{data:h,onUpdate:a.updateOrganisms},null,8,["data","onUpdate"]),e(f,{data:h,onUpdate:a.updateOrganisms},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const Kt=S(_t,[["render",bt]]);export{Kt as default};

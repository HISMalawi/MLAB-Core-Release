import{_ as H}from"./COJDNupw.js";import{S as $,p as U,Y as q,G as A,V as E,q as j,s as Y,a as I,l as k,m as w,u as D,E as z,x as S,y as i,b as T,e as b,g as e,f as t,z as r,k as C,_ as N,A as J,i as M,v as B,t as P,F as Q,j as W,n as Z,B as ee,D as te,h as X,L as G,K as O}from"./BxD-h1LR.js";import{_ as oe}from"./DMx_cVtr.js";import{_ as R}from"./DlrUcOnO.js";import{r as F}from"./BsvR1uat.js";import{r as L}from"./BPzJPC5B.js";import{_ as se}from"./CPPw0KVQ.js";import{_ as ne}from"./Co6rQh9N.js";import{r as ae}from"./DbyLJe1U.js";import{_ as le}from"./DCLH_TIo.js";import{u as K}from"./D6kY4awV.js";import{u as ie}from"./BmiBNsbw.js";import{P as re}from"./C1C0mJ5v.js";import{r as ce}from"./DQVzKFZd.js";import{_ as de}from"./VmwGiaas.js";import"./Dm9r4zu1.js";import"./Cpa0DX47.js";import"./DkqoXkVu.js";import"./CmGziMTe.js";const ue={components:{TransitionRoot:$,TransitionChild:U,Dialog:q,DialogPanel:A,DialogTitle:E,XMarkIcon:j,UserIcon:F},data(){return{open:!1,addIcon:Y,saveIcon:L,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:I("token")}},created(){this.init()},methods:{async init(){const l={route:k.testTypes,method:"GET",token:`${this.cookie}`},{data:o,error:a}=await w(l);if(o.value){const{test_types:c}=o.value;this.rawTestTypes=c,this.testTypes=c.map(s=>s.name)}a.value&&console.error(a.value)},async submitForm(){this.loading=!0;const l=this.testTypesSelected.map(n=>{const d=this.rawTestTypes.find(m=>m.name===n);return d?d.id:null}).filter(n=>n!==null),o={route:k.testPanels,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName,description:this.description,test_types:l}},{data:a,error:c,pending:s}=await w(o);this.loading=s,a.value&&(this.handleClick(),D().$toast.success("Test panel created successfully!"),this.$emit("update",!0)),c.value&&(D().$toast.error(z),console.error(c.value),this.handleClick())},handleClick(){this.open=!this.open}}},me=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),pe={class:"fixed inset-0 overflow-y-auto"},_e={class:"flex min-h-full items-center justify-center p-4 text-center"},fe={class:"border-b px-3 py-3 flex items-center justify-between"},he={class:"mt-2 space-y-3 px-5"},ye={class:"w-full flex"},ve={class:"w-full flex"},ge={class:"w-full"},xe={class:"w-full flex"},Te={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ke(l,o,a,c,s,n){const d=N,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),p=i("FormKit"),f=oe,g=R,_=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return T(),b("div",null,[e("div",null,[t(d,{click:n.handleClick,text:"Create test panel",color:"primary",icon:s.addIcon},null,8,["click","icon"])]),t(V,{appear:"",show:s.open,as:"template"},{default:r(()=>[t(h,{as:"div",onClose:n.handleClick,class:"relative z-20"},{default:r(()=>[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[me]),_:1}),e("div",pe,[e("div",_e,[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",fe,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[C(" Create Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...x)=>n.handleClick&&n.handleClick(...x))},[t(v,{class:"w-5 h-5"})])]),t(p,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1},{default:r(({value:x})=>[e("div",he,[e("div",ye,[t(p,{type:"text",label:"Name",validation:"required",modelValue:s.name,"onUpdate:modelValue":o[1]||(o[1]=u=>s.name=u)},null,8,["modelValue"])]),e("div",ve,[t(p,{type:"text",label:"Short Name",validation:"required",modelValue:s.shortName,"onUpdate:modelValue":o[2]||(o[2]=u=>s.shortName=u)},null,8,["modelValue"])]),e("div",ge,[t(f,{label:"Select Test Types",items:s.testTypes,"items-selected":s.testTypesSelected,"onUpdate:itemsSelected":o[3]||(o[3]=u=>s.testTypesSelected=u),mode:"tags"},null,8,["items","items-selected"])]),e("div",xe,[t(p,{type:"textarea",label:"Description",validation:"required",modelValue:s.description,"onUpdate:modelValue":o[4]||(o[4]=u=>s.description=u)},null,8,["modelValue"])])]),e("div",Te,[t(g,{text:"Dismiss",type:"button",click:n.handleClick},null,8,["click"]),t(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const we=S(ue,[["render",ke]]),be={components:{TransitionRoot:$,TransitionChild:U,Dialog:q,DialogPanel:A,DialogTitle:E,XMarkIcon:j,UserIcon:F},data(){return{open:!1,viewIcon:J,loading:!1,details:{},cookie:I("token")}},props:{data:{required:!0,type:Object}},methods:{async init(){this.open=!0,this.loading=!0;const{pending:l,error:o,data:a}=await w({route:`${k.testPanels}/${this.data.id}`,method:"GET",token:`${this.cookie}`});this.loading=l,a.value&&(this.details=a.value,this.loading=!1),o.value&&(console.error(o.value),this.loading=!1,D().$toast.error("An error occurred, please try again!"))},handleClick(){this.open=!this.open}}},Ce=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),De={class:"fixed inset-0 overflow-y-auto"},Pe={class:"flex min-h-full items-center justify-center p-4 text-center"},Ve={class:"border-b px-3 py-3 flex items-center justify-between"},Ie=e("img",{src:ne,class:"w-8 h-8 mr-2"},null,-1),Se={class:"flex items-center justify-center mx-auto my-20"},$e={class:"space-y-3 px-5 py-5"},Ue={class:"w-full flex flex-col space-y-1"},qe=e("label",{class:"font-semibold text-lg"},"Name",-1),Ae={class:"underline"},Ee={class:"w-full flex flex-col space-y-1"},je=e("label",{class:"font-semibold text-lg"},"Short Name",-1),Ne={class:"underline"},Re={class:"w-full flex flex-col space-y-1"},Fe=e("label",{class:"font-semibold text-lg"},"Description",-1),Me={class:"underline"},Be={class:"w-full flex flex-col space-y-1"},Xe=e("label",{class:"font-semibold list text-lg"},"Test Types",-1);function Ge(l,o,a,c,s,n){const d=N,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),p=Z,f=i("DialogPanel"),g=i("Dialog"),_=i("TransitionRoot");return T(),b("div",null,[e("div",null,[t(d,{click:n.init,text:"View",color:"primary",icon:s.viewIcon},null,8,["click","icon"])]),t(_,{appear:"",show:s.open,as:"template"},{default:r(()=>[t(g,{as:"div",onClose:()=>{},class:"relative z-10"},{default:r(()=>[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[Ce]),_:1}),e("div",De,[e("div",Pe,[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[t(f,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",Ve,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[Ie,C(" View Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...h)=>n.handleClick&&n.handleClick(...h))},[t(v,{class:"w-5 h-5"})])]),M(e("div",Se,[t(p,{loading:s.loading},null,8,["loading"])],512),[[B,s.loading]]),M(e("div",$e,[e("div",Ue,[qe,e("p",Ae,P(s.details.name),1)]),e("div",Ee,[je,e("p",Ne,P(s.details.short_name),1)]),e("div",Re,[Fe,e("p",Me,P(s.details.description),1)]),e("div",Be,[Xe,(T(!0),b(Q,null,W(s.details.test_types,h=>(T(),b("div",{key:h.id,class:"flex flex-wrap underline"},P(h.name),1))),128))])],512),[[B,!s.loading]])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Oe=S(be,[["render",Ge]]),Ke={components:{TransitionRoot:$,TransitionChild:U,Dialog:q,DialogPanel:A,DialogTitle:E,XMarkIcon:j,UserIcon:F},props:{data:{required:!0,type:Object}},data(){return{open:!1,editIcon:ee,saveIcon:L,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:I("token")}},methods:{async loadTestTypes(){const l={route:k.testTypes,method:"GET",token:`${this.cookie}`},{data:o,error:a}=await w(l);o.value&&(this.rawTestTypes=o.value.test_types,o.value.test_types.map(c=>{this.testTypes.push(c.name)})),a.value&&console.error(a.value)},async init(){this.open=!0,await this.loadTestTypes(),this.testTypesSelected=new Array;const l={route:`${k.testPanels}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:o,error:a}=await w(l);o.value&&o.value.test_types.map(c=>{this.testTypesSelected.push(c.name)}),a.value&&console.error(a.value)},async submitForm(){this.loading=!0;let l=new Array;this.testTypesSelected.map(n=>{this.rawTestTypes.filter(d=>{n==d.name&&l.push(d.id)})}),this.data.test_types=l;const o={route:`${k.testPanels}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{data:a,error:c,pending:s}=await w(o);this.loading=s,a.value&&(this.open=!1,D().$toast.success("Test panel updated successfully!"),this.$emit("update",!0)),c.value&&(console.error(c.value),D().$toast.error(z))},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},ze=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Le={class:"fixed inset-0 overflow-y-auto"},He={class:"flex min-h-full items-center justify-center p-4 text-center"},Ye={class:"border-b px-3 py-3 flex items-center justify-between"},Je={class:"mt-2 space-y-3 px-5"},Qe={class:"w-full flex"},We={class:"w-full flex"},Ze={class:"w-full flex"},et={class:"h-72 w-full flex flex-col space-y-2"},tt=e("label",{class:"font-medium"},"Select Test Types",-1),ot={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function st(l,o,a,c,s,n){const d=N,m=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),p=i("FormKit"),f=i("multi-select"),g=R,_=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return T(),b("div",null,[e("div",null,[t(d,{click:n.init,text:"Edit",color:"success",icon:s.editIcon},null,8,["click","icon"])]),t(V,{appear:"",show:s.open,as:"template"},{default:r(()=>[t(h,{as:"div",onClose:n.handleClick,class:"relative z-10"},{default:r(()=>[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[ze]),_:1}),e("div",Le,[e("div",He,[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",Ye,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[C(" Edit Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...x)=>n.handleClick&&n.handleClick(...x))},[t(v,{class:"w-5 h-5"})])]),t(p,{type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1,id:"submitForm"},{default:r(({value:x})=>[e("div",Je,[e("div",Qe,[t(p,{type:"text",label:"Name",validation:"required",modelValue:a.data.name,"onUpdate:modelValue":o[1]||(o[1]=u=>a.data.name=u)},null,8,["modelValue"])]),e("div",We,[t(p,{type:"text",label:"Short Name",validation:"required",modelValue:a.data.short_name,"onUpdate:modelValue":o[2]||(o[2]=u=>a.data.short_name=u)},null,8,["modelValue"])]),e("div",Ze,[t(p,{type:"textarea",label:"Description",validation:"required",modelValue:a.data.description,"onUpdate:modelValue":o[3]||(o[3]=u=>a.data.description=u)},null,8,["modelValue"])]),e("div",et,[tt,t(f,{style:{"--ms-max-height":"none !important"},modelValue:s.testTypesSelected,"onUpdate:modelValue":o[4]||(o[4]=u=>s.testTypesSelected=u),options:s.testTypes,mode:"tags",clear:"",searchable:!0,required:!0,class:"outline-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),e("div",ot,[t(g,{text:"Clear form",type:"button",click:()=>{n.clearForm()}},null,8,["click"]),t(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const nt=S(Ke,[["render",st]]),at={components:{TransitionRoot:$,TransitionChild:U,Dialog:q,DialogPanel:A,DialogTitle:E,XMarkIcon:j,ExclamationTriangleIcon:te},data(){return{show:!1,deleteIcon:ae,loading:!1,reason:"",cookie:I("token")}},props:{data:{type:Object,required:!0}},methods:{async deleteData(l){this.loading=!0;const o={route:`${k.testPanels}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:a,error:c,data:s}=await w(o);this.loading=a,s.value&&(this.handleClick(),D().$toast.success("Test panel deleted successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(D().$toast.error("An error occurred, please try again!"),console.error(c.value),this.loading=!1)},handleClick(){this.show=!this.show}}},lt=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),it={class:"fixed inset-0 overflow-y-auto"},rt={class:"flex min-h-full items-center justify-center p-4 text-center"},ct={class:"border-b px-3 py-3 flex items-center justify-between"},dt={class:"mt-2 space-y-3 px-5"},ut={class:"rounded px-2 py-2"},mt={class:"font-semibold text-red-500"},pt={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function _t(l,o,a,c,s,n){const d=N,m=i("TransitionChild"),y=i("ExclamationTriangleIcon"),v=i("DialogTitle"),p=i("XMarkIcon"),f=i("FormKit"),g=R,_=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return T(),b("div",null,[t(d,{click:n.handleClick,color:"error",text:"Delete",icon:s.deleteIcon},null,8,["click","icon"]),t(V,{appear:"",show:s.show,as:"template"},{default:r(()=>[t(h,{as:"div",class:"relative z-10"},{default:r(()=>[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[lt]),_:1}),e("div",it,[e("div",rt,[t(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",ct,[t(v,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[t(y,{class:"h-5 w-5 mr-2"}),C(" Confirm delete ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...x)=>n.handleClick&&n.handleClick(...x))},[t(p,{class:"w-5 h-5"})])]),t(f,{type:"form","submit-label":"Update",onSubmit:o[2]||(o[2]=x=>n.deleteData(a.data.id)),actions:!1},{default:r(({value:x})=>[e("div",dt,[e("div",ut,[C(" Do you really want to delete "),e("span",mt,P(a.data.name),1),C("? Note that once this action is completed, it can not be undone ")]),t(f,{type:"textarea",label:"Reason",validation:"required",modelValue:s.reason,"onUpdate:modelValue":o[1]||(o[1]=u=>s.reason=u)},null,8,["modelValue"])]),e("div",pt,[t(g,{type:"button",click:()=>{n.handleClick()},text:"Cancel"},null,8,["click"]),t(d,{loading:s.loading,type:"submit",click:()=>{},color:"error",icon:s.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ft=S(at,[["render",_t]]),ht={setup(){ie({title:`${re.name.toUpperCase()} - Test Panels`})},components:{MagnifyingGlassIcon:ce},data(){return{header:"Test Panels",testPanels:new Array,loading:!1,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],search:"",searchValue:"",cookie:I("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"description",value:"description",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(l){this.searchValue=l,this.search=l},async init(){this.loading=!0;const l={route:k.testPanels,method:"GET",token:`${this.cookie}`},{data:o,error:a,pending:c}=await w(l);this.loading=c,o.value&&(this.testPanels=o.value,this.loading=!1),a.value&&(console.error(a.value),this.loading=!1)},updateTestPanels(l){l&&this.init()}}},yt={class:"py-5 px-5"},vt={class:"flex items-center justify-between py-5"},gt={class:"text-2xl font-semibold flex items-center uppercase"},xt=e("img",{src:de,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),Tt={class:"flex items-center space-x-3"},kt={class:"flex justify-end w-full px-2 py-2 mb-2"},wt={class:"py-2 flex items-center space-x-2"};function bt(l,o,a,c,s,n){const d=H,m=we,y=se,v=Oe,p=nt,f=ft,g=le;return T(),b("div",yt,[t(d,{pages:s.pages},null,8,["pages"]),e("div",vt,[e("div",gt,[xt,C(" "+P(s.header),1)]),e("div",Tt,[("usePermissions"in l?l.usePermissions:X(K))().can.manage("test_catalog")?(T(),G(m,{key:0,onUpdate:n.updateTestPanels},null,8,["onUpdate"])):O("",!0)])]),e("div",kt,[t(y,{search:s.search,"onUpdate:search":o[0]||(o[0]=_=>s.search=_),onUpdate:n.updateSearch},null,8,["search","onUpdate"])]),("usePermissions"in l?l.usePermissions:X(K))().can.manage("test_catalog")?(T(),G(g,{key:0,headers:s.headers,data:s.testPanels,loading:s.loading,"search-value":s.searchValue,"search-field":"name"},{actions:r(({item:_})=>[e("div",wt,[t(v,{data:_},null,8,["data"]),t(p,{data:_,onUpdate:n.updateTestPanels},null,8,["data","onUpdate"]),t(f,{data:_,onUpdate:n.updateTestPanels},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])):O("",!0)])}const Ot=S(ht,[["render",bt]]);export{Ot as default};

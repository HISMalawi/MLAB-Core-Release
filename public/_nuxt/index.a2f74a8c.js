import{_ as X}from"./Breadcrumb.vue.7f5c1701.js";import{u as V,a as H,_ as B,f as c,o as g,c as w,d as e,b as i,g as l,h as P,e as L,p as I,j as R,t as o,F as $,r as q,w as Q,v as z}from"./entry.d8806b4d.js";import{_ as E}from"./OutlinedButton.b4acccf9.js";import{S}from"./stock.8744866e.js";import{r as T}from"./XMarkIcon.c6ea15dc.js";import{r as G}from"./UserIcon.e312027e.js";import{r as K,h as b}from"./fetch.a5dd36ac.js";import{r as J}from"./ArrowDownTrayIcon.d81bcd7a.js";import{r as W}from"./ArrowUturnLeftIcon.7e172025.js";import{S as j,h as M,U as N,G as F,V as A}from"./transition.47325ebf.js";import{_ as Y}from"./Dropdown.07437792.js";import{_ as Z}from"./SearchBar.af0363a8.js";import{_ as ee}from"./index.1506920a.js";import{d as x}from"./constants.6be6ca46.js";import{u as te}from"./facility.bd699e9f.js";import{r as se}from"./TicketIcon.ba881db8.js";import{r as oe,a as O}from"./PencilSquareIcon.7a888707.js";import{_ as re}from"./logo.7f84c5d6.js";import{_ as ie}from"./pharmacy_alt.c38344a0.js";import{_ as ae}from"./Datatable.4dace9b6.js";import{u as ne}from"./vue.f36acd1f.6a8c9096.js";import{P as ce}from"./package.2c43f7b3.js";import{r as le}from"./PrinterIcon.907e547a.js";import{r as de}from"./CheckBadgeIcon.daab0941.js";import{r as pe}from"./SquaresPlusIcon.7d58f9f7.js";import{r as ue}from"./DocumentCheckIcon.b3d215ca.js";import"./nuxt-link.ac17f1f4.js";import"./HomeIcon.2ec025f1.js";import"./hidden.492e3e8e.js";import"./listbox.fd66c15f.js";import"./use-text-value.bf1f0859.js";import"./CheckIcon.b53b2000.js";import"./CheckCircleIcon.7a1e5e88.js";import"./MagnifyingGlassIcon.f7cd7505.js";import"./jspdf.es.min.6f50bce6.js";import"./Loader.05846428.js";const _e={components:{TransitionRoot:j,TransitionChild:M,Dialog:N,DialogPanel:F,DialogTitle:A,XMarkIcon:T,UserIcon:G},data(){return{open:!1,addIcon:K,saveIcon:J,clearIcon:W,loading:!1,voucherId:"",description:"",cookie:V("token")}},methods:{async checkVoucherValidity(){this.loading=!0;const r=new S,{data:s,error:n,pending:d}=await r.checkStockOrder(`${this.cookie}`,{voucher_number:Number(this.voucherId)});this.loading=d,s.value&&(s.value.used?H().$toast.warn("Order already exists"):this.$router.push(`/stock-management/orders/${this.voucherId}`),this.loading=!1),n.value&&(console.error(n.value),this.loading=!1)},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},me=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),fe={class:"fixed inset-0 overflow-y-auto"},he={class:"flex min-h-full items-center justify-center p-4 text-center"},ge={class:"border-b px-3 py-3 flex items-center justify-between"},be={class:"mt-2 space-y-3"},xe={class:"w-full flex items-center px-5"},ve={class:"w-full flex flex-col space-y-2"},ye={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function we(r,s,n,d,t,a){const _=L,m=c("TransitionChild"),f=c("DialogTitle"),v=c("XMarkIcon"),y=c("FormKit"),k=E,D=c("DialogPanel"),p=c("Dialog"),h=c("TransitionRoot");return g(),w("div",null,[e("div",null,[i(_,{text:"Create order",color:"primary",icon:t.addIcon,click:a.handleClick},null,8,["icon","click"])]),i(h,{appear:"",show:t.open,as:"template"},{default:l(()=>[i(p,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:l(()=>[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[me]),_:1}),e("div",fe,[e("div",he,[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[i(D,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",ge,[i(f,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:l(()=>[P(" Create stock order ")]),_:1}),e("button",{onClick:s[0]||(s[0]=(...u)=>a.handleClick&&a.handleClick(...u))},[i(v,{class:"w-5 h-5"})])]),i(y,{type:"form","submit-label":"Update",actions:!1,onSubmit:a.checkVoucherValidity,id:"submitForm"},{default:l(({value:u})=>[e("div",be,[e("div",xe,[e("div",ve,[i(y,{type:"text",label:"Voucher ID",validation:"required",modelValue:t.voucherId,"onUpdate:modelValue":s[1]||(s[1]=C=>t.voucherId=C)},null,8,["modelValue"])])])]),e("div",ye,[i(k,{type:"button",click:()=>{a.clearForm()},text:"Clear form"},null,8,["click"]),i(_,{loading:t.loading,type:"submit",click:()=>{},color:"success",icon:t.saveIcon,text:"Continue"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ke=B(_e,[["render",we]]),De={components:{TransitionRoot:j,TransitionChild:M,Dialog:N,DialogPanel:F,DialogTitle:A,XMarkIcon:T,TicketIcon:se},data(){return{viewIcon:oe,show:!1,editIcon:O,facility:te(),cookie:V("token"),loading:!1,requisitions:new Array,voidReason:"",issuerName:"",issuerDesignation:"",issuerPhone:"",issuerSignature:"",approverName:"",approverDesignation:"",approverPhone:"",approverSignature:"",issuedDate:"",approvedDate:"",preparedBy:"",preparedDesignation:"",preparedSignature:"",preparedDate:"",certifiedBy:"",certifiedDesignation:"",certifiedSignature:"",certifiedDate:"",collectedBy:"",collectedDesignation:"",collectedSignature:"",collectedDate:"",verifiedBy:"",verifiedDesignation:"",verifiedSignature:"",verifiedDate:""}},props:{data:{type:Object,required:!0}},methods:{async openDialog(){await this.init(),this.handleClick()},async init(){this.loading=!0;const r=new S,{data:s,error:n,pending:d}=await r.getStockOrder(`${this.cookie}`,`${this.data.id}`);this.loading=d,s.value&&(this.requisitions=s.value.stock_requisitions,this.loading=!1,s.value.stock_pharmacy_approver_and_issuers.map(t=>{t.record_type=="issuer"?(this.issuerName=t.name,this.issuerPhone=t.phone_number,this.issuerDesignation=t.designation,this.issuerSignature=t.signature,this.issuedDate=b(t.created_date).format(x)):(this.approverName=t.name,this.approverPhone=t.phone_number,this.approverDesignation=t.designation,this.approverSignature=t.signature,this.approvedDate=b(t.created_date).format(x))}),s.value.stock_order_status_trail.map(t=>{t.stock_status.name.toLowerCase()=="draft"?(this.preparedBy=`${t.initiator.first_name} ${t.initiator.last_name}`,this.preparedDesignation="Laboratory",this.preparedSignature=t.initiator.username,this.preparedDate=b(t.created_date).format(x)):t.stock_status.name.toLowerCase()=="requested"?(this.certifiedBy=`${t.initiator.first_name} ${t.initiator.last_name}`,this.certifiedDesignation="Laboratory",this.certifiedSignature=t.initiator.username,this.certifiedDate=b(t.created_date).format(x)):t.stock_status.name.toLowerCase()=="received"?(this.collectedBy=`${t.initiator.first_name} ${t.initiator.last_name}`,this.collectedDesignation="Laboratory",this.collectedSignature=t.initiator.username,this.collectedDate=b(t.created_date).format(x)):t.stock_status.name.toLowerCase()=="approved"&&(this.verifiedBy=`${t.initiator.first_name} ${t.initiator.last_name}`,this.verifiedDesignation="Laboratory",this.verifiedSignature=t.initiator.username,this.verifiedDate=b(t.created_date).format(x))})),n.value&&(console.error(n.value),this.loading=!1)},handleClick(){this.show=!this.show}}},U=""+new URL("hematology_laboratory.da804142.svg",import.meta.url).href,Se=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ce={class:"fixed inset-0 overflow-y-auto"},Ie={class:"flex min-h-full items-center justify-center p-4 text-center"},Oe={class:"border-b px-3 py-3 flex items-center justify-between"},Ve={class:"py-5 px-5 space-y-3 print-container",id:"print-container"},Be=e("div",{class:"rounded-tr rounded-tl px-5 py-5 flex flex-col items-center"},[e("img",{src:re,alt:"app-logo",class:"w-24 h-24 object-cover"}),e("h3",{class:"mt-2 text-xl font-medium uppercase"},"Republic of Malawi"),e("h3",{class:"mt-2 text-xl font-medium"},"Ministry of Health"),e("h3",{class:"mt-2 text-2xl font-semibold"},"Requisition and Issue Voucher")],-1),Le={class:"flex bg-gray-50 border-l-4 border-l-100 rounded-r px-2 py-2 items-center space-x-2"},Te=e("span",{class:"text-lg text-sky-500 font-medium"},"B",-1),Pe={class:"mt-3"},Re={class:"w-full"},$e=e("thead",{clas:"w-full border-t border-l border-r"},[e("tr",{class:"border-b border-t border-r border-l rounded"},[e("th",{colspan:2,class:"text-left p-2"}," Requisitions ")]),e("tr",{class:"border-b border-t border-r border-l rounded"},[e("th",{class:"px-2 py-2 text-left border-r"}," Stock Item "),e("th",{class:"px-2 py-2 text-left"}," Quantity Being Requested "),e("th",{class:"px-2 py-2 text-left"}," Quantity Isssued "),e("th",{class:"px-2 py-2 text-left"}," Quantity Collected ")])],-1),qe={class:"px-2 py-2 border-r"},je={class:"px-2 py-2 border-r"},Me={class:"px-2 py-2 border-r"},Ne={class:"px-2 py-2 border-r"},Fe={class:"rounded border mt-5"},Ae=e("div",{class:"flex items-center space-x-3 bg-gray-50 py-2 rounded-t px-2 border-b"},[e("img",{src:U,class:"w-6 h-6"}),e("h3",{class:"text-lg font-semibold"},"Preparation of RIV")],-1),Ue={class:"w-full grid grid-cols-2 gap-5 py-5 px-5"},Xe={class:"col-span-1 flex flex-col space-y-2"},He={class:"w-full flex items-center space-x-2"},Qe=e("p",{class:"w-72 font-medium"},"Prepared by: ",-1),ze={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},Ee={class:"w-full flex items-center space-x-2"},Ge=e("p",{class:"w-72 font-medium"},"Designation: ",-1),Ke={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},Je={class:"w-full flex items-center space-x-2"},We=e("p",{class:"w-72 font-medium"},"Signature: ",-1),Ye={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},Ze={class:"w-full flex items-center space-x-2"},et=e("p",{class:"w-72 font-medium"},"Date:",-1),tt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},st={class:"col-span-1 flex flex-col space-y-2"},ot={class:"w-full flex items-center space-x-2"},rt=e("p",{class:"w-72 font-medium"},"Certified by: ",-1),it={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},at={class:"w-full flex items-center space-x-2"},nt=e("p",{class:"w-72 font-medium"},"Designation: ",-1),ct={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},lt={class:"w-full flex items-center space-x-2"},dt=e("p",{class:"w-72 font-medium"},"Signature: ",-1),pt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},ut={class:"w-full flex items-center space-x-2"},_t=e("p",{class:"w-72 font-medium"},"Date:",-1),mt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},ft={class:"rounded border mt-5"},ht=e("div",{class:"flex items-center space-x-3 bg-gray-50 py-2 rounded-t px-2 border-b"},[e("img",{src:ie,class:"w-6 h-6"}),e("h3",{class:"text-lg font-semibold"},"Pharmacy")],-1),gt={class:"w-full grid grid-cols-2 gap-5 py-5 px-5"},bt={class:"col-span-1 flex flex-col space-y-2"},xt={class:"w-full flex items-center space-x-2"},vt=e("p",{class:"w-72 font-medium"},"Issued by: ",-1),yt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},wt={class:"w-full flex items-center space-x-2"},kt=e("p",{class:"w-72 font-medium"},"Designation: ",-1),Dt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},St={class:"w-full flex items-center space-x-2"},Ct=e("p",{class:"w-72 font-medium"},"Signature: ",-1),It={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},Ot={class:"w-full flex items-center space-x-2"},Vt=e("p",{class:"w-72 font-medium"},"Date:",-1),Bt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},Lt={class:"col-span-1 flex flex-col space-y-2"},Tt={class:"w-full flex items-center space-x-2"},Pt=e("p",{class:"w-72 font-medium"},"Approved by: ",-1),Rt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},$t={class:"w-full flex items-center space-x-2"},qt=e("p",{class:"w-72 font-medium"},"Designation: ",-1),jt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},Mt={class:"w-full flex items-center space-x-2"},Nt=e("p",{class:"w-72 font-medium"},"Signature: ",-1),Ft={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},At={class:"w-full flex items-center space-x-2"},Ut=e("p",{class:"w-72 font-medium"},"Date:",-1),Xt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},Ht={class:"rounded border mt-5"},Qt=e("div",{class:"flex items-center space-x-3 bg-gray-50 py-2 rounded-t px-2 border-b"},[e("img",{src:U,class:"w-6 h-6"}),e("h3",{class:"text-lg font-semibold"},"Finalisation of Order")],-1),zt={class:"w-full grid grid-cols-2 gap-5 py-5 px-5"},Et={class:"col-span-1 flex flex-col space-y-2"},Gt={class:"w-full flex items-center space-x-2"},Kt=e("p",{class:"w-72 font-medium"},"Collected by: ",-1),Jt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},Wt={class:"w-full flex items-center space-x-2"},Yt=e("p",{class:"w-72 font-medium"},"Designation: ",-1),Zt={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},es={class:"w-full flex items-center space-x-2"},ts=e("p",{class:"w-72 font-medium"},"Signature: ",-1),ss={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},os={class:"w-full flex items-center space-x-2"},rs=e("p",{class:"w-72 font-medium"},"Date:",-1),is={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},as={class:"col-span-1 flex flex-col space-y-2"},ns={class:"w-full flex items-center space-x-2"},cs=e("p",{class:"w-72 font-medium"},"Verified by: ",-1),ls={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},ds={class:"w-full flex items-center space-x-2"},ps=e("p",{class:"w-72 font-medium"},"Designation: ",-1),us={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},_s={class:"w-full flex items-center space-x-2"},ms=e("p",{class:"w-72 font-medium"},"Signature: ",-1),fs={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"},hs={class:"w-full flex items-center space-x-2"},gs=e("p",{class:"w-72 font-medium"},"Date:",-1),bs={class:"w-full border-b-2 text-gray-700 border-dotted pb-1 font-normal border-gray-300"};function xs(r,s,n,d,t,a){const _=L,m=c("TransitionChild"),f=ee,v=c("DialogTitle"),y=c("XMarkIcon"),k=c("TicketIcon"),D=c("DialogPanel"),p=c("Dialog"),h=c("TransitionRoot");return g(),w("div",null,[i(_,{click:()=>{a.openDialog()},color:"primary",text:"View",icon:t.viewIcon},null,8,["click","icon"]),i(h,{appear:"",show:t.show,as:"template"},{default:l(()=>[i(p,{as:"div",class:"relative z-10"},{default:l(()=>[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[Se]),_:1}),e("div",Ce,[e("div",Ie,[i(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[i(D,{class:"w-full max-w-4xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",Oe,[i(v,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[n.data.stock_order_status.toLowerCase()==="approved"?(g(),I(f,{key:0,id:"print-container","print-small-label":!1})):R("",!0)]),_:1}),e("button",{onClick:s[0]||(s[0]=(...u)=>a.handleClick&&a.handleClick(...u))},[i(y,{class:"w-5 h-5"})])]),e("div",Ve,[Be,e("div",Le,[i(k,{class:"h-5 w-5"}),e("p",null,[P("Voucher Number: "),Te,e("strong",null,o(n.data.voucher_number),1)])]),e("div",Pe,[e("table",Re,[$e,e("tbody",null,[(g(!0),w($,null,q(t.requisitions,(u,C)=>(g(),w("tr",{key:C,class:"border-b border-t border-r border-l rounded"},[e("td",qe,o(u.item.name),1),e("td",je,o(u.quantity_requested),1),e("td",Me,o(u.quantity_issued),1),e("td",Ne,o(u.quantity_collected),1)]))),128))])]),e("div",Fe,[Ae,e("div",Ue,[e("div",Xe,[e("div",He,[Qe,e("span",ze,o(t.preparedBy),1)]),e("div",Ee,[Ge,e("span",Ke,o(t.preparedDesignation),1)]),e("div",Je,[We,e("span",Ye,o(t.preparedSignature),1)]),e("div",Ze,[et,e("span",tt,o(t.preparedDate),1)])]),e("div",st,[e("div",ot,[rt,e("span",it,o(t.certifiedBy),1)]),e("div",at,[nt,e("span",ct,o(t.certifiedDesignation),1)]),e("div",lt,[dt,e("span",pt,o(t.certifiedSignature),1)]),e("div",ut,[_t,e("span",mt,o(t.certifiedDate),1)])])])]),e("div",ft,[ht,e("div",gt,[e("div",bt,[e("div",xt,[vt,e("span",yt,o(t.issuerName),1)]),e("div",wt,[kt,e("span",Dt,o(t.issuerDesignation),1)]),e("div",St,[Ct,e("span",It,o(t.issuerSignature),1)]),e("div",Ot,[Vt,e("span",Bt,o(t.issuedDate),1)])]),e("div",Lt,[e("div",Tt,[Pt,e("span",Rt,o(t.approverName),1)]),e("div",$t,[qt,e("span",jt,o(t.approverDesignation),1)]),e("div",Mt,[Nt,e("span",Ft,o(t.issuerSignature),1)]),e("div",At,[Ut,e("span",Xt,o(t.approvedDate),1)])])])]),e("div",Ht,[Qt,e("div",zt,[e("div",Et,[e("div",Gt,[Kt,e("span",Jt,o(t.collectedBy),1)]),e("div",Wt,[Yt,e("span",Zt,o(t.collectedDesignation),1)]),e("div",es,[ts,e("span",ss,o(t.collectedSignature),1)]),e("div",os,[rs,e("span",is,o(t.collectedDate),1)])]),e("div",as,[e("div",ns,[cs,e("span",ls,o(t.verifiedBy),1)]),e("div",ds,[ps,e("span",us,o(t.verifiedDesignation),1)]),e("div",_s,[ms,e("span",fs,o(t.verifiedSignature),1)]),e("div",hs,[gs,e("span",bs,o(t.verifiedDate),1)])])])])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const vs=B(De,[["render",xs]]),ys={setup(){ne({title:`${ce.name.toUpperCase()} - Stock Orders`})},data(){return{header:"Stock Orders",pages:[{name:"Home",link:"/home"},{name:"Stock Management",link:"#"}],search:"",headers:[{text:"Voucher Number",value:"voucher_number",sortable:!0},{text:"Requisitions",value:"requisitions"},{text:"Status",value:"stock_order_status"},{text:"Date Created",value:"created_date"},{text:"actions",value:"actions"}],statuses:new Array,statusSelected:{name:"-- select status -- ",id:0},orders:new Array,printIcon:le,editIcon:O,clearIcon:T,loading:!1,statusLoading:!1,cookie:V("token"),serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"voucher_number"}}},created(){this.init(),this.getOrderStatuses()},computed:{orderStatuses(){return[{name:"Edit",show:"pending",icon:O},{name:"Verify",show:"draft",icon:de},{name:"Receive",show:"requested",icon:pe},{name:"Approve",show:"received",icon:ue}]}},methods:{async getOrderStatuses(){const r=new S,{data:s,error:n}=await r.getStockOrderStatus(`${this.cookie}`);s.value&&s.value.map(d=>{this.statuses.push({name:d.name,id:d.id})}),n.value&&console.error(n.value)},async init(){this.loading=!0;const r=new S;let s=this.statusSelected.id==0?"":this.statusSelected.id;const{page:n,rowsPerPage:d}=this.serverOptions;let t=`page=${n}&per_page=${d}`;const{data:a,error:_,pending:m}=await r.getStockOrder(`${this.cookie}`,"",this.search,`${s}`,t);this.loading=m,a.value&&(this.orders=a.value.data.map(f=>({...f,requisitions:f.stock_requisitions.length,created_date:b(f.created_date).format(x)})),this.loading=!1),_.value&&(console.error(_.value),this.loading=!1)},clearFilter(){this.statuses.push({name:"-- select status -- ",id:0}),this.statusSelected=this.statuses[this.statuses.length-1],this.init()},checkStatus(r,s){return r.show.toLowerCase()==s.stock_order_status.toLowerCase()},verifyStockOrder(r,s){this.$router.push(`/stock-management/orders/request/${s}?order_id=${r}`)},receiveStockOrder(r,s){this.$router.push(`/stock-management/orders/receive/${s}?order_id=${r}`)},approveStockOrder(r,s){this.$router.push(`/stock-management/orders/approve/${s}?order_id=${r}`)},rejectStockOrder(r,s){this.$router.push(`/stock-management/orders/reject/${s}?order_id=${r}`)},async changeStatus(r){this.statusLoading=!0;const s=new S,n={route:"",status:r},{data:d,error:t,pending:a}=await s.updateStockOrderStatus(`${this.cookie}`,n);this.statusLoading=a,d.value&&(this.init(),this.statusLoading=!1),t.value&&(console.error(t.value),this.statusLoading=!1)},processStockOrder(r,s){r==="Verify"?this.verifyStockOrder(s.id,s.voucher_number):r==="Receive"?this.receiveStockOrder(s.id,s.voucher_number):r==="Approve"?this.approveStockOrder(s.id,s.voucher_number):r==="Reject"&&this.rejectStockOrder(s.id,s.voucher_number)}},watch:{search(){this.init()},statusSelected:{handler(){this.init()},deep:!0}}},ws={class:"px-5 py-5"},ks={class:"flex items-center justify-between py-5"},Ds={class:"text-2xl font-semibold"},Ss={class:"flex items-center space-x-3"},Cs={class:"flex items-center justify-between"},Is={class:"flex items-center space-x-2"},Os={class:"mt-10"},Vs={class:"py-2 flex items-center space-x-2"};function Bs(r,s,n,d,t,a){const _=X,m=ke,f=Y,v=L,y=Z,k=vs,D=ae;return g(),w("div",ws,[i(_,{pages:t.pages},null,8,["pages"]),e("div",ks,[e("h3",Ds,o(t.header),1),e("div",Ss,[i(m)])]),e("div",Cs,[e("div",Is,[i(f,{items:t.statuses,modelValue:t.statusSelected,"onUpdate:modelValue":s[0]||(s[0]=p=>t.statusSelected=p)},null,8,["items","modelValue"]),t.statusSelected.id!=0?(g(),I(v,{key:0,text:"Clear filter",color:"warning",icon:t.clearIcon,click:()=>{a.clearFilter()},loading:t.loading},null,8,["icon","click","loading"])):R("",!0)]),i(y,{search:t.search,"onUpdate:search":s[1]||(s[1]=p=>t.search=p)},null,8,["search"])]),e("div",Os,[i(D,{data:t.orders,headers:t.headers,loading:t.loading,"search-field":"voucher_number","search-value":t.search,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:a.init},{actions:l(({item:p})=>[e("div",Vs,[i(k,{data:p},null,8,["data"]),(g(!0),w($,null,q(a.orderStatuses,(h,u)=>Q((g(),I(v,{key:u,text:h.name,color:h.name=="Reject"?"error":"success",icon:h.icon,click:()=>{a.processStockOrder(h.name,p)}},null,8,["text","color","icon","click"])),[[z,a.checkStatus(h,p)]])),128))])]),_:1},8,["data","headers","loading","search-value","serverItemsLength","serverOptions","onUpdate"])])])}const mo=B(ys,[["render",Bs]]);export{mo as default};

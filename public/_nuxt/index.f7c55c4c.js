import{_ as re}from"./Breadcrumb.vue.3bde75e9.js";import{a as O,b as M,_ as P,g as c,o as p,c as f,e,d as s,h as d,i as I,w as E,R as H,v as $,F as S,r as R,t as y,T as ce,q as J,n as Q,k as U,l as Z,f as F,u as de}from"./entry.2f1e42b9.js";import{r as ue,_ as me}from"./Dropdown.097974d8.js";import{_ as pe}from"./OutlinedButton.e1da640a.js";import{e as ee,s as _e,d as he}from"./constants.9f05ed5b.js";import{r as fe,e as C,f as D,i as Y,h as ge,a as xe}from"./fetch.f66c8189.js";import{r as j}from"./XMarkIcon.a6ae467b.js";import{r as ye}from"./UserIcon.a7b68e54.js";import{r as ve}from"./CheckCircleIcon.8aac4754.js";import{r as be}from"./InformationCircleIcon.348b9081.js";import{r as we}from"./ArrowDownTrayIcon.9860a2ae.js";import{r as ke}from"./ArrowUturnLeftIcon.3a65876f.js";import{S as B,h as W,U as G,G as X,V as K}from"./transition.0eb804de.js";import{F as Te,B as Ve,K as Ce,N as De,H as Ie}from"./listbox.73385f84.js";import{_ as te}from"./cone_test_on_nets.117707bd.js";import{_ as Ue}from"./SearchBar.315fd9b9.js";import{_ as Se}from"./Loader.0e328f2b.js";import{r as Re,a as Ae}from"./PencilSquareIcon.6c44b9c5.js";import{r as Le}from"./TrashIcon.fe5ec944.js";import{_ as qe}from"./Datatable.ddf1cfb2.js";import{P as Ee}from"./package.bb5fb76c.js";import{r as Me}from"./MagnifyingGlassIcon.a68a94aa.js";import{_ as Oe}from"./ui_folder.a1508b96.js";import"./nuxt-link.12fc21ba.js";import"./HomeIcon.04b2f4b8.js";import"./CheckIcon.62f78616.js";import"./PrinterIcon.d705e3fe.js";import"./hidden.f2d50dc5.js";import"./use-text-value.3a939a03.js";const Pe={components:{TransitionRoot:B,TransitionChild:W,Dialog:G,DialogPanel:X,DialogTitle:K,Listbox:Te,ListboxLabel:Ve,ListboxButton:Ce,ListboxOptions:De,ListboxOption:Ie,XMarkIcon:j,UserIcon:ye,CheckCircleIcon:ve,InformationCircleIcon:be,ChevronUpDownIcon:ue},data(){return{open:!1,addIcon:fe,saveIcon:we,clearIcon:ke,loadingSpecimens:!1,showMeasures:!1,measures:1,ranges:0,indicators:[{name:"",test_indicator_type:0,unit:"",description:"",indicator_ranges:new Array}],numericRange:{id:0,max_age:0,min_age:0,lower_range:0,upper_range:0,gender:{name:"-- select gender --"},interpretation:""},autocompleteRange:{id:1,value:"",interpretation:""},name:"",shortName:"",turnAroundTime:"",measureTypes:Array(),measureSelected:{name:"-- Select measure --",id:0},loading:!1,rawOrganisms:new Array,organisms:new Array,organismsSelected:new Array,cookie:O("token"),rawSpecimens:new Array,specimens:new Array,specimensSelected:new Array,departments:new Array,measureType:"",selectedDepartment:"-- select department --",showCultureWorksheet:!1,shouldPrintResults:!1,timeTypes:new Array({name:"Month"},{name:"Weeks"},{name:"Days"},{name:"Hours"},{name:"Minutes"}),timeType:{name:"-- select value --"}}},methods:{async init(){await this.loadDepartments(),await this.loadTestTypeIndicators(),await this.loadOrganisms(),this.handleClick();const n={route:C.specimens,method:"GET",token:`${this.cookie}`,body:{}};let{data:o,error:r,pending:u}=await D(n);this.loadingSpecimens=u,o.value&&(this.rawSpecimens=o.value,o.value.map(t=>{this.specimens.push(t.name)})),r.value&&console.error(r.value)},async loadDepartments(){const n={route:C.departments,method:"GET",token:`${this.cookie}`};let{data:o,error:r,pending:u}=await D(n);o.value&&(this.departments=o.value),r.value&&console.error(r.value)},async loadOrganisms(){const n={route:C.organisms,method:"GET",token:`${this.cookie}`};let{data:o,error:r}=await D(n);o.value&&(this.rawOrganisms=o.value,o.value.map(u=>{this.organisms.push(u.name)})),r.value&&console.error(r.value)},async loadTestTypeIndicators(){const n={route:`${C.testTypes}/test_indicator_types/`,method:"GET",token:`${this.cookie}`};let{data:o,error:r,pending:u}=await D(n);o.value&&(this.measureTypes=o.value,this.measureType=this.measureSelected.name),r.value&&console.error(r.value)},handleClick(){this.open=!this.open},getEmitedDepartment(n){this.selectedDepartment=n.name},addMeasure(){this.indicators.push({name:"",test_indicator_type:0,unit:"",description:"",indicator_ranges:[],value:"",id:""})},addRange(n){try{const r=this.indicators[n].indicator_ranges;let u=0;if(r.length>0){const _=r.length-1;u=r[_].id}const a={id:u&&u+1,interpretation:""};this.measureSelected.name.toLowerCase().includes("numeric")?(a.age_max=0,a.age_min=0,a.upper_range=0,a.lower_range=0,a.gender={name:"-- select gender --"}):(this.measureSelected.name.toLowerCase()=="auto complete"||this.measureSelected.name.toLowerCase().includes("alpha"))&&(a.value=""),r.push(a)}catch(o){console.error("Error: ",o)}},removeRange(n,o){this.indicators[n].indicator_ranges.splice(o,1)},async submitForm(){this.loading=!0;const n=this.indicators.map(g=>{const v=g.indicator_ranges.map(x=>{if(x.hasOwnProperty("gender")){const{gender:m,...w}=x;return{...w,sex:m.name}}else return x});return{...g,indicator_ranges:v}}),o=this.departments.find(g=>g.name===this.selectedDepartment),r=o?o.id:void 0,u={route:C.testTypes,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName,expected_turn_around_time:{value:this.turnAroundTime,unit:this.timeType.name},print_device:this.shouldPrintResults,department_id:r,specimens:Y(this.rawSpecimens,this.specimensSelected),indicators:n,organisms:Y(this.rawOrganisms,this.organismsSelected)}},{data:t,error:a,pending:_}=await D(u);this.loading=_,t.value&&(this.handleClick(),M().$toast.success("Test type created successfully!"),this.invalidateForm(),this.$emit("update",!0)),a.value&&(console.error(a.value),M().$toast.error(ee),this.handleClick())},addNumericRange(n){n.name.toLowerCase()=="numeric"&&this.indicators.map(o=>{o.indicator_ranges.push(this.numericRange)})},addAutocompleteRange(n){n.name.toLowerCase()==="auto complete"&&this.indicators.map(o=>{o.indicator_ranges.push(this.autocompleteRange)})},invalidateForm(){this.$formkit.reset("submitForm")}},watch:{measureSelected:{handler(n){n.name=="Auto Complete"?this.addAutocompleteRange(n):this.addNumericRange(n)},deep:!0}}},Fe=e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50"},null,-1),Ne={class:"fixed inset-0 overflow-y-auto"},$e={class:"flex min-h-full items-center justify-center p-4 text-center"},je={class:"border-b px-3 py-3 flex items-center justify-between"},Be=e("img",{src:te,class:"w-8 h-8 mr-2"},null,-1),We={class:"mt-2 space-y-3"},Ge={class:"grid grid-cols-2 gap-4 px-5"},Xe={class:"w-full flex px-5"},Ke={class:"py-1 ml-2"},ze=e("label",{class:"font-medium text-base"},"Duration",-1),He={class:"w-full px-5 flex items-center space-x-2"},Je=e("label",{for:"showCultureWorksheet"},"Show Culture Worksheet?",-1),Qe={class:"w-full flex flex-col space-y-2 px-5"},Ye=e("label",{class:"font-medium"},"Organisms",-1),Ze={class:"w-full flex flex-col space-y-2 px-5"},et=e("label",{class:"font-medium"},"Specimens",-1),tt={class:"w-full px-5 flex items-center space-x-2"},ot=e("label",{for:"shouldPrintResults"},"Print Results On Small Label?",-1),st={class:"w-full flex items-center px-5"},nt={class:"w-full flex flex-col space-y-2"},at=e("label",{class:"font-medium"},"Lab section",-1),lt={class:"w-full flex px-5"},it={class:"py-3 flex items-center justify-between"},rt={class:"text-lg text-grameasuresy-700 font-semibold"},ct=["onClick"],dt={class:"grid grid-cols-4 gap-2 mb-3"},ut=e("label",{class:"font-medium pb-2"},"Type",-1),mt={hidden:""},pt={class:"relative mt-1"},_t={class:"block truncate"},ht={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},ft={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-500"},gt={class:"flex items-center justify-center space-x-3"},xt={class:"grid grid-cols-2 gap-2"},yt={class:""},vt=e("label",{class:"mb-2 text-lg font-semibold text-gray-600"},"Age Range",-1),bt={class:"grid grid-cols-2 gap-2"},wt={class:""},kt=e("label",{class:"mb-2 text-lg font-semibold text-gray-600"},"Measure Range",-1),Tt={class:"grid grid-cols-2 gap-2"},Vt=["onClick"],Ct={class:"w-full flex items-center justify-center space-x-2"},Dt={class:"w-full grid grid-cols-2 gap-4"},It=["onClick"],Ut={key:3,class:"flex items-center px-3 py-3 rounded bg-sky-50 mt-3 text-sky-500"},St={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Rt(n,o,r,u,t,a){const _=F,g=c("TransitionChild"),v=c("DialogTitle"),x=c("XMarkIcon"),m=c("FormKit"),w=me,k=c("multi-select"),T=c("ChevronUpDownIcon"),A=c("ListboxButton"),V=c("CheckCircleIcon"),b=c("ListboxOption"),N=c("ListboxOptions"),oe=c("Listbox"),se=c("InformationCircleIcon"),ne=pe,ae=c("DialogPanel"),le=c("Dialog"),ie=c("TransitionRoot");return p(),f("div",null,[e("div",null,[s(_,{text:"New test type",color:"primary",icon:t.addIcon,click:a.init},null,8,["icon","click"])]),s(ie,{appear:"",show:t.open,as:"template"},{default:d(()=>[s(le,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:d(()=>[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[Fe]),_:1}),e("div",Ne,[e("div",$e,[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[s(ae,{class:"w-full max-w-5xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[e("div",je,[s(v,{as:"h3",class:"text-lg text-black flex items-center font-semibold leading-6"},{default:d(()=>[Be,I(" Create Test Type ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...z)=>a.handleClick&&a.handleClick(...z))},[s(x,{class:"w-5 h-5"})])]),s(m,{id:"submitForm",type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:d(({value:z})=>[e("div",We,[e("div",Ge,[s(m,{type:"text",label:"Name",validation:"required",modelValue:t.name,"onUpdate:modelValue":o[1]||(o[1]=l=>t.name=l)},null,8,["modelValue"]),s(m,{type:"text",label:"Short name",validation:"required",modelValue:t.shortName,"onUpdate:modelValue":o[2]||(o[2]=l=>t.shortName=l)},null,8,["modelValue"])]),e("div",Xe,[s(m,{type:"number",label:"Expected Turn Around Time",validation:"required|number",modelValue:t.turnAroundTime,"onUpdate:modelValue":o[3]||(o[3]=l=>t.turnAroundTime=l)},null,8,["modelValue"]),e("div",Ke,[ze,s(w,{items:t.timeTypes,modelValue:t.timeType,"onUpdate:modelValue":o[4]||(o[4]=l=>t.timeType=l)},null,8,["items","modelValue"])])]),e("div",He,[E(e("input",{id:"showCultureWorksheet",name:"showCultureWorksheet",type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=l=>t.showCultureWorksheet=l)},null,512),[[H,t.showCultureWorksheet]]),Je]),E(e("div",Qe,[Ye,s(k,{style:{"--ms-max-height":"none !important"},modelValue:t.organismsSelected,"onUpdate:modelValue":o[6]||(o[6]=l=>t.organismsSelected=l),options:t.organisms,mode:"tags",required:!1,clear:"",searchable:"",class:"focus:ring-none focus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])],512),[[$,t.showCultureWorksheet]]),e("div",Ze,[et,s(k,{style:{"--ms-max-height":"none !important"},modelValue:t.specimensSelected,"onUpdate:modelValue":o[7]||(o[7]=l=>t.specimensSelected=l),options:t.specimens,mode:"tags",required:"",searchable:"",clear:"",class:"focus:ring-none focus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])]),e("div",tt,[E(e("input",{id:"shouldPrintResults",name:"shouldPrintResults",type:"checkbox","onUpdate:modelValue":o[8]||(o[8]=l=>t.shouldPrintResults=l)},null,512),[[H,t.shouldPrintResults]]),ot]),e("div",st,[e("div",nt,[at,s(k,{style:{"--ms-max-height":"none !important"},modelValue:t.selectedDepartment,"onUpdate:modelValue":o[9]||(o[9]=l=>t.selectedDepartment=l),options:t.departments.map(l=>l.name),single:"",required:"",searchable:"",clear:"",class:"focus:ring-none focus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),e("div",lt,[s(_,{click:()=>{a.addMeasure()},color:"primary",text:"Add Measure",icon:t.addIcon},null,8,["click","icon"])]),t.indicators.length!=0?(p(!0),f(S,{key:0},R(t.indicators,(l,L)=>(p(),f("div",{key:L,class:"border px-5 mx-5 py-3 rounded"},[e("div",it,[e("h3",rt," Measures ("+y(L+1)+") ",1),e("button",{onClick:()=>{t.indicators.splice(L,1)}},[s(x,{class:"w-5 h-5"})],8,ct)]),e("div",dt,[s(m,{type:"text",label:"Name",validation:"required",modelValue:l.name,"onUpdate:modelValue":i=>l.name=i},null,8,["modelValue","onUpdate:modelValue"]),e("div",null,[ut,e("div",mt,y(l.test_indicator_type=t.measureSelected.id),1),s(oe,{modelValue:t.measureSelected,"onUpdate:modelValue":o[10]||(o[10]=i=>t.measureSelected=i)},{default:d(()=>[e("div",pt,[s(A,{class:"relative w-full cursor-default rounded border py-2 pl-3 pr-10 text-left focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-none sm:text-sm"},{default:d(()=>[e("span",_t,y(t.measureSelected.name),1),e("span",ht,[s(T,{class:"h-5 w-5 text-gray-500","aria-hidden":"true"})])]),_:1}),s(ce,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:d(()=>[s(N,{style:{"z-index":"10000"},class:"absolute mt-1 w-full max-h-96 overflow-auto rounded-md bg-white py-1 text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm drop-shadow-md divide-y divide-slate-100"},{default:d(()=>[(p(!0),f(S,null,R(t.measureTypes,i=>(p(),J(b,{key:i.name,value:i,as:"template"},{default:d(({active:q,selected:h})=>[e("li",{class:Q([q?"bg-green-100 text-green-500":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[e("span",{class:Q([h?"font-medium":"font-normal","block truncate"])},y(i.name),3),h?(p(),f("span",ft,[s(V,{class:"h-5 w-5","aria-hidden":"true"})])):U("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),s(m,{type:"text",label:"Unit",modelValue:l.unit,"onUpdate:modelValue":i=>l.unit=i},null,8,["modelValue","onUpdate:modelValue"]),s(m,{type:"text",label:"Description",modelValue:l.description,"onUpdate:modelValue":i=>l.description=i},null,8,["modelValue","onUpdate:modelValue"])]),t.measureSelected.name!=="Free Text"?(p(),J(_,{key:0,type:"button",click:()=>{a.addRange(L)},color:"primary",text:"Add New Range",icon:t.addIcon},null,8,["click","icon"])):U("",!0),l.indicator_ranges.length>0&&t.measureSelected.name==="Numeric"?(p(!0),f(S,{key:1},R(l.indicator_ranges,(i,q)=>(p(),f("div",{class:"px-3 py-3",key:i.id},[e("div",gt,[e("div",xt,[e("div",yt,[vt,e("div",bt,[s(m,{type:"number",label:"Minimum",validation:"required",modelValue:i.min_age,"onUpdate:modelValue":h=>i.min_age=h},null,8,["modelValue","onUpdate:modelValue"]),s(m,{type:"number",label:"Maximum",validation:"required",modelValue:i.max_age,"onUpdate:modelValue":h=>i.max_age=h},null,8,["modelValue","onUpdate:modelValue"]),s(w,{modelValue:i.gender,"onUpdate:modelValue":h=>i.gender=h,items:"sex"in n?n.sex:Z(_e)},null,8,["modelValue","onUpdate:modelValue","items"])])]),e("div",wt,[kt,e("div",Tt,[s(m,{type:"number",number:"",step:"any",label:"Minimum",validation:"required|required",modelValue:i.upper_range,"onUpdate:modelValue":h=>i.upper_range=h},null,8,["modelValue","onUpdate:modelValue"]),s(m,{type:"number",number:"",step:"any",label:"Maximum",validation:"required|required",modelValue:i.lower_range,"onUpdate:modelValue":h=>i.lower_range=h},null,8,["modelValue","onUpdate:modelValue"])])]),s(m,{type:"text",label:"Interpretation",validation:"required",modelValue:i.interpretation,"onUpdate:modelValue":h=>i.interpretation=h},null,8,["modelValue","onUpdate:modelValue"])]),e("button",{onClick:h=>a.removeRange(L,q)},[s(x,{class:"w-5 h-5"})],8,Vt)])]))),128)):U("",!0),l.indicator_ranges.length>0&&t.measureSelected.name=="Auto Complete"||t.measureSelected.name==="Alpha Numeric"?(p(!0),f(S,{key:2},R(l.indicator_ranges,(i,q)=>(p(),f("div",{class:"px-3 py-3",key:i.id},[e("div",Ct,[e("div",Dt,[s(m,{type:"text",label:"Value",validation:"required",modelValue:i.value,"onUpdate:modelValue":h=>i.value=h},null,8,["modelValue","onUpdate:modelValue"]),s(m,{type:"text",label:"Interpretation",validation:"required",modelValue:i.interpretation,"onUpdate:modelValue":h=>i.interpretation=h},null,8,["modelValue","onUpdate:modelValue"])]),e("button",{onClick:h=>a.removeRange(L,q),class:"h-full bg-red-500 flex items-center justify-center rounded text-white px-4 py-2 mt-2"},[s(x,{class:"w-5 h-5"})],8,It)])]))),128)):U("",!0),t.measureSelected.name==="Free Text"?(p(),f("div",Ut,[s(se,{class:"w-5 h-5 mr-2"}),I(" A text box will appear for results entry ")])):U("",!0)]))),128)):U("",!0)]),e("div",St,[s(ne,{type:"button",click:()=>{a.invalidateForm()},text:"Clear form"},null,8,["click"]),s(_,{type:"submit",click:()=>{},loading:t.loading,color:"success",icon:t.saveIcon,text:"Save Changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const At=P(Pe,[["render",Rt]]),Lt={components:{TransitionRoot:B,TransitionChild:W,Dialog:G,DialogPanel:X,DialogTitle:K,XMarkIcon:j},data(){return{viewIcon:Re,show:!1,moment:ge,loading:!1,details:{name:"",short_name:"",department_id:{id:0,name:""},specimens:{id:0,name:"",expected_turn_around_time:"",created_date:""}}}},setup(){return{cookie:O("token")}},props:{data:{type:Object,required:!0}},methods:{async init(){this.handleClick(),this.loading=!0;const n={route:`${C.viewTestType}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:o,error:r,pending:u}=await D(n);this.loading=u,o.value&&(this.details=o.value,this.loading=!1),r.value&&(this.loading=!1,M().$toast.error("An error occurred, please try again!"))},handleClick(){this.show=!this.show}}},qt=e("div",{class:"fixed inset-0 bg-black bg-opacity-50"},null,-1),Et={class:"fixed inset-0 overflow-y-auto"},Mt={class:"flex min-h-full items-center justify-center p-4 text-center"},Ot={class:"border-b px-3 py-3 flex items-center justify-between"},Pt=e("img",{src:te,class:"w-8 h-8 mr-2"},null,-1),Ft={class:"flex items-center justify-center mx-auto my-20"},Nt={class:"space-y-3 px-5 py-5"},$t={class:"w-full flex flex-col space-y-1"},jt=e("label",{class:"font-semibold text-lg"},"Name",-1),Bt={class:"w-full flex flex-col space-y-1"},Wt=e("label",{class:"font-semibold text-lg"},"Short Name",-1),Gt={class:"w-full flex flex-col space-y-1"},Xt=e("label",{class:"font-semibold text-lg"},"Laboratory Section",-1),Kt={class:"w-full flex flex-col space-y-1"},zt=e("label",{class:"font-semibold text-lg"},"Compatible Specimen",-1),Ht={class:"flex flex-wrap gap-2"},Jt={class:"w-full flex flex-col space-y-1"},Qt=e("label",{class:"font-semibold text-lg"},"Organisms",-1),Yt={class:"flex flex-wrap gap-2"},Zt={key:0},eo={class:"w-full flex flex-col space-y-1"},to=e("label",{class:"font-semibold text-lg"},"Measure",-1),oo={class:"w-full flex flex-col space-y-1"},so=e("label",{class:"font-semibold text-lg"},"Expected Turn Around Time",-1),no={class:"w-full flex flex-col space-y-1"},ao=e("label",{class:"font-semibold text-lg"},"Date Created",-1);function lo(n,o,r,u,t,a){const _=F,g=c("TransitionChild"),v=c("DialogTitle"),x=c("XMarkIcon"),m=Se,w=c("DialogPanel"),k=c("Dialog"),T=c("TransitionRoot");return p(),f("div",null,[s(_,{click:a.init,color:"primary",text:"View",icon:t.viewIcon},null,8,["click","icon"]),s(T,{appear:"",show:t.show,as:"template"},{default:d(()=>[s(k,{as:"div",class:"relative z-10"},{default:d(()=>[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[qt]),_:1}),e("div",Et,[e("div",Mt,[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[s(w,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>{var A,V;return[e("div",Ot,[s(v,{as:"h3",class:"text-lg flex items-center font-semibold leading-6"},{default:d(()=>[Pt,I(" Test Type Details ")]),_:1}),e("button",{onClick:o[0]||(o[0]=()=>{a.handleClick()})},[s(x,{class:"w-5 h-5"})])]),E(e("div",Ft,[s(m,{loading:t.loading},null,8,["loading"])],512),[[$,t.loading]]),E(e("div",Nt,[e("div",$t,[jt,e("p",null,y(t.details.name),1)]),e("div",Bt,[Wt,e("p",null,y(t.details.short_name),1)]),e("div",Gt,[Xt,e("p",null,y(t.details.department_id.name),1)]),e("div",Kt,[zt,e("div",Ht,[(p(!0),f(S,null,R(t.details.specimens,b=>(p(),f("p",{key:b},y(`${b.name}`),1))),128))])]),e("div",Jt,[Qt,e("div",Yt,[(p(!0),f(S,null,R(t.details.organisms,(b,N)=>(p(),f("p",{key:b},[I(y(`${b.name}`),1),N!==t.details.organisms.length-1?(p(),f("span",Zt,",")):U("",!0)]))),128))])]),e("div",eo,[to,(p(!0),f(S,null,R(t.details.indicators,b=>(p(),f("p",{key:b},y(`${b.name}`),1))),128))]),e("div",oo,[so,e("p",null,y(`${(A=t.details.expected_turn_around_time)==null?void 0:A.value} ${(V=t.details.expected_turn_around_time)==null?void 0:V.unit}`),1)]),e("div",no,[ao,e("p",null,y(t.moment(t.details.created_date).format("dateFormat"in n?n.dateFormat:Z(he))),1)])],512),[[$,!t.loading]])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const io=P(Lt,[["render",lo]]),ro={components:{TransitionRoot:B,TransitionChild:W,Dialog:G,DialogPanel:X,DialogTitle:K,XMarkIcon:j,ExclamationTriangleIcon:xe},data(){return{show:!1,deleteIcon:Le,loading:!1,cookie:O("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(n){this.loading=!0;const o={route:`${C.testTypes}/${n}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{data:r,error:u,pending:t}=await D(o);this.loading=t,r.value&&(this.handleClick(),M().$toast.success(`${this.data.name} test type deleted successfully!`),this.loading=!1,this.$emit("update",!0)),u.value&&(console.error(u.value),M().$toast.error(ee),this.loading=!1)},handleClick(){this.show=!this.show}}},co=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),uo={class:"fixed inset-0 overflow-y-auto"},mo={class:"flex min-h-full items-center justify-center p-4 text-center"},po={class:"border-b px-3 py-3 flex items-center justify-between"},_o={class:"mt-2 space-y-3 px-5"},ho={class:"rounded px-2 py-2"},fo={class:"font-semibold text-red-500"},go={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function xo(n,o,r,u,t,a){const _=F,g=c("TransitionChild"),v=c("ExclamationTriangleIcon"),x=c("DialogTitle"),m=c("XMarkIcon"),w=c("FormKit"),k=c("DialogPanel"),T=c("Dialog"),A=c("TransitionRoot");return p(),f("div",null,[s(_,{click:a.handleClick,color:"error",text:"Delete",icon:t.deleteIcon},null,8,["click","icon"]),s(A,{appear:"",show:t.show,as:"template"},{default:d(()=>[s(T,{as:"div",class:"relative z-10"},{default:d(()=>[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[co]),_:1}),e("div",uo,[e("div",mo,[s(g,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[s(k,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[e("div",po,[s(x,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:d(()=>[s(v,{class:"h-5 w-5 mr-2"}),I(" Confirm delete ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...V)=>a.handleClick&&a.handleClick(...V))},[s(m,{class:"w-5 h-5"})])]),s(w,{type:"form","submit-label":"Update",onSubmit:o[2]||(o[2]=V=>a.deleteData(r.data.id)),actions:!1},{default:d(({value:V})=>[e("div",_o,[e("div",ho,[I(" Do you really want to delete "),e("span",fo,y(r.data.name),1),I("? Note that once this action is completed, it can not be undone ")]),s(w,{type:"textarea",label:"Reason",validation:"required",modelValue:t.reason,"onUpdate:modelValue":o[1]||(o[1]=b=>t.reason=b)},null,8,["modelValue"])]),e("div",go,[s(_,{loading:t.loading,type:"submit",click:()=>{},color:"error",icon:t.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const yo=P(ro,[["render",xo]]),vo={components:{MagnifyingGlassIcon:Me},setup(){de({title:`${Ee.name.toUpperCase()} - Test Types`})},data(){return{header:"Test Types",loading:!0,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],editIcon:Ae,showEdit:!1,serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},search:"",testTypes:new Array,cookie:O("token"),headers:[{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"expected turn around time",value:"expected_turn_around_time"},{text:"actions",value:"actions"}],searchField:"name",searchValue:""}},created(){this.init()},methods:{async init(){const{page:n,rowsPerPage:o}=this.serverOptions;this.loading=!0;const r={route:`${C.testTypes}?page=${n}&per_page=${o}&search=${this.search}`,method:"GET",token:`${this.cookie}`,body:{}};let{data:u,error:t,pending:a}=await D(r);this.loading=a,u.value&&(this.testTypes=u.value.test_types.map(_=>{var g,v;return{..._,expected_turn_around_time:`${_.expected_turn_around_time!==null?((g=_.expected_turn_around_time)==null?void 0:g.value)+" "+(_.expected_turn_around_time.unit==null?"":(v=_.expected_turn_around_time.unit)==null?void 0:v.toLowerCase()):""}`}}),this.serverItemsLength=u.value.meta.total_count),t.value&&console.error(t.value)},updateTestTypes(n){typeof n=="object"&&(this.serverOptions=n),this.init()},updateSearch(n){this.searchValue=n,this.search=n,this.updateTestTypes(!0)},edit(n){this.showEdit=!0},navigateToEdit(n){const o=n.name.trim().toLowerCase().replace(/[\s\W-]+/g,"-").replace(/^-+|-+$/g,"");this.$router.push(`/test-catalog/test-types/edit/${o}?testType=${n.id}`)}}},bo={class:"px-5 py-5"},wo={class:"flex items-center justify-between py-5"},ko={class:"text-2xl font-semibold flex items-center uppercase"},To=e("img",{src:Oe,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),Vo={class:"flex items-center space-x-3"},Co={class:"flex justify-end w-full px-2 py-2 mb-2"},Do={class:"py-2 flex items-center space-x-2"};function Io(n,o,r,u,t,a){const _=re,g=At,v=Ue,x=io,m=F,w=yo,k=qe;return p(),f("div",bo,[s(_,{pages:t.pages},null,8,["pages"]),e("div",wo,[e("div",ko,[To,I(" "+y(t.header),1)]),e("div",Vo,[s(g,{onUpdate:a.updateTestTypes},null,8,["onUpdate"])])]),e("div",Co,[s(v,{search:t.search,onUpdate:a.updateSearch},null,8,["search","onUpdate"])]),s(k,{headers:t.headers,data:t.testTypes,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:a.updateTestTypes},{actions:d(({item:T})=>[e("div",Do,[s(x,{onEdit:a.edit,open:t.showEdit,data:T},null,8,["onEdit","open","data"]),s(m,{click:()=>{a.navigateToEdit(T)},color:"success",text:"Edit",icon:t.editIcon},null,8,["click","icon"]),s(w,{onUpdate:a.updateTestTypes,data:T},null,8,["onUpdate","data"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])])}const ns=P(vo,[["render",Io]]);export{ns as default};

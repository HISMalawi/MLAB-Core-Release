import{_ as z}from"./9st0-0tz.js";import{S as T,p as I,Y as $,G as P,V,q as U,a as j,l as R,m as S,u as k,E as q,s as C,x as s,b as v,e as D,g as o,f as t,y as a,j as w,_ as B,t as L,h as E,H as M,D as O}from"./DFRCgfJ7.js";import{_ as X}from"./DKZ0QoWC.js";import{r as Y}from"./DvUwAmtA.js";import{r as F}from"./Z66635vA.js";import{r as N}from"./BIfcYUmN.js";import{r as Z}from"./DDOI77tZ.js";import{_ as J}from"./BZkefcnP.js";import{r as Q}from"./C-CyX-lv.js";import{r as A}from"./CNSNb7H9.js";import{r as ee}from"./DMnRMKKE.js";import{r as H}from"./Dyezt1gs.js";import{_ as te}from"./DJS9VRo6.js";import{u as W}from"./RjamUEmk.js";import{P as oe}from"./BJWqiItS.js";import{u as ne}from"./DX-fG2iE.js";import{r as se}from"./D8DjzwVZ.js";import{r as ae}from"./DzGD7ECj.js";import"./_gKYxzJq.js";import"./ETY0v-Ty.js";const ie={components:{TransitionRoot:T,TransitionChild:I,Dialog:$,DialogPanel:P,DialogTitle:V,XMarkIcon:U,UserIcon:Y},data(){return{open:!1,addIcon:F,saveIcon:N,clearIcon:Z,name:"",description:"",loading:!1,cookie:j("token")}},methods:{async submitForm(){this.loading=!0;let l={route:R.sections,method:"POST",token:`${this.cookie}`,body:{name:this.name}};const{pending:e,error:r,data:c}=await S(l);this.loading=e,c.value&&(this.handleClick(),k().$toast.success(`${this.name} ward created successfully!`),this.name="",this.loading=!1,this.$emit("update",!0)),r.value&&(this.handleClick(),console.log(r.value),k().$toast.success(q),this.loading=!1)},handleClick(){this.open=!this.open}}},le={class:"fixed inset-0 overflow-y-auto"},re={class:"flex min-h-full items-center justify-center p-4 text-center"},ce={class:"border-b px-3 py-3 flex items-center justify-between"},de={class:"mt-2 space-y-3"},ue={class:"w-full flex items-center px-5"},me={class:"w-full flex flex-col space-y-2"},pe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function fe(l,e,r,c,n,i){const m=B,d=s("TransitionChild"),_=s("DialogTitle"),h=s("XMarkIcon"),p=s("FormKit"),f=X,g=s("DialogPanel"),u=s("Dialog"),b=s("TransitionRoot");return v(),D("div",null,[o("div",null,[t(m,{text:"Create ward",color:"primary",icon:n.addIcon,click:i.handleClick},null,8,["icon","click"])]),t(b,{appear:"",show:n.open,as:"template"},{default:a(()=>[t(u,{as:"div",onClose:i.handleClick,class:"relative z-10"},{default:a(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>e[2]||(e[2]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",le,[o("div",re,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[t(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[o("div",ce,[t(_,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:a(()=>e[3]||(e[3]=[w(" Create ward ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...x)=>i.handleClick&&i.handleClick(...x))},[t(h,{class:"w-5 h-5"})])]),t(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:a(({value:x})=>[o("div",de,[o("div",ue,[o("div",me,[t(p,{type:"text",label:"Name",validation:"required",modelValue:n.name,"onUpdate:modelValue":e[1]||(e[1]=y=>n.name=y)},null,8,["modelValue"])])]),o("div",pe,[t(f,{text:"Clear form",color:"error",type:"button",click:()=>{}}),t(m,{type:"submit",click:()=>{},color:"success",loading:n.loading,icon:n.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const _e=C(ie,[["render",fe]]),K="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M41.7083%2023.794L24.0579%206.08569L6.29405%2023.7916C5.90289%2024.1815%205.90185%2024.8147%206.29174%2025.2059C6.68163%2025.597%207.31479%2025.5981%207.70595%2025.2082L11%2021.9249V40.9998C11%2041.5521%2011.4477%2041.9998%2012%2041.9998H19C19.5523%2041.9998%2020%2041.5521%2020%2040.9998V33C20%2031.8954%2020.8954%2031%2022%2031H26C27.1046%2031%2028%2031.8954%2028%2033V40.9998C28%2041.5521%2028.4477%2041.9998%2029%2041.9998H36C36.5523%2041.9998%2037%2041.5521%2037%2040.9998V21.9033L40.2917%2025.2059C40.6816%2025.597%2041.3148%2025.5981%2041.7059%2025.2082C42.0971%2024.8183%2042.0981%2024.1851%2041.7083%2023.794Z'%20fill='%23333333'/%3e%3c/svg%3e",he={components:{TransitionRoot:T,TransitionChild:I,Dialog:$,DialogPanel:P,DialogTitle:V,XMarkIcon:U},data(){return{viewIcon:Q,show:!1,editIcon:A}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},ge={class:"fixed inset-0 overflow-y-auto"},ve={class:"flex min-h-full items-center justify-center p-4 text-center"},xe={class:"border-b px-3 py-3 flex items-center justify-between"},ye={class:"px-5 py-5"},we={class:"w-full flex flex-col space-y-2"},ke={class:"underline"};function be(l,e,r,c,n,i){const m=B,d=s("TransitionChild"),_=s("DialogTitle"),h=s("XMarkIcon"),p=s("DialogPanel"),f=s("Dialog"),g=s("TransitionRoot");return v(),D("div",null,[t(m,{click:i.handleClick,color:"primary",text:"View",icon:n.viewIcon},null,8,["click","icon"]),t(g,{appear:"",show:n.show,as:"template"},{default:a(()=>[t(f,{as:"div",class:"relative z-10"},{default:a(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>e[1]||(e[1]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",ge,[o("div",ve,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[t(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[o("div",xe,[t(_,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>e[2]||(e[2]=[o("img",{src:K,class:"w-8 h-8 mr-2"},null,-1),w(" View ward ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...u)=>i.handleClick&&i.handleClick(...u))},[t(h,{class:"w-5 h-5"})])]),o("div",ye,[o("div",we,[e[3]||(e[3]=o("label",{class:"font-medium"},"Name",-1)),o("p",ke,L(r.data.name),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ce=C(he,[["render",be]]),De={components:{TransitionRoot:T,TransitionChild:I,Dialog:$,DialogPanel:P,DialogTitle:V,XMarkIcon:U},data(){return{editIcon:A,show:!1,saveIcon:N,loading:!1,cookie:j("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;let l={route:`${R.sections}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data};const{pending:e,error:r,data:c}=await S(l);this.loading=e,c.value&&(this.handleClick(),k().$toast.success("Ward updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(k().$toast.success(q),this.handleClick(),console.log(r.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Te={class:"fixed inset-0 overflow-y-auto"},Ie={class:"flex min-h-full items-center justify-center p-4 text-center"},$e={class:"border-b px-3 py-3 flex items-center justify-between"},Pe={class:"mt-2 space-y-3"},Ve={class:"w-full flex items-center px-5"},Ue={class:"w-full flex flex-col space-y-2"},je={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Re(l,e,r,c,n,i){const m=B,d=s("TransitionChild"),_=s("DialogTitle"),h=s("XMarkIcon"),p=s("FormKit"),f=X,g=s("DialogPanel"),u=s("Dialog"),b=s("TransitionRoot");return v(),D("div",null,[t(m,{click:i.handleClick,text:"Edit",icon:n.editIcon,color:"success"},null,8,["click","icon"]),t(b,{appear:"",show:n.show,as:"template"},{default:a(()=>[t(u,{as:"div",class:"relative z-10"},{default:a(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>e[2]||(e[2]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",Te,[o("div",Ie,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[t(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[o("div",$e,[t(_,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>e[3]||(e[3]=[o("img",{src:K,class:"w-8 h-8 mr-2"},null,-1),w(" Edit ward ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...x)=>i.handleClick&&i.handleClick(...x))},[t(h,{class:"w-5 h-5"})])]),t(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:a(({value:x})=>[o("div",Pe,[o("div",Ve,[o("div",Ue,[t(p,{type:"text",label:"Name",validation:"required",modelValue:r.data.name,"onUpdate:modelValue":e[1]||(e[1]=y=>r.data.name=y)},null,8,["modelValue"])])]),o("div",je,[t(f,{text:"Clear form",color:"error",type:"button",click:()=>{}}),t(m,{type:"submit",click:()=>{},color:"success",loading:n.loading,icon:n.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Se=C(De,[["render",Re]]),Be={components:{TransitionRoot:T,TransitionChild:I,Dialog:$,DialogPanel:P,DialogTitle:V,XMarkIcon:U,ExclamationTriangleIcon:ee},data(){return{show:!1,deleteIcon:H,loading:!1,reason:""}},props:{data:{type:Object,required:!0}},setup(){return{cookie:j("token")}},methods:{async deleteData(l){this.loading=!0;let e={route:`${R.sections}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}};const{pending:r,error:c,data:n}=await S(e);this.loading=r,n.value&&(this.handleClick(),k().$toast.success("Ward deleted successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(k().$toast.success(q),console.log(c.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Ee={class:"fixed inset-0 overflow-y-auto"},Me={class:"flex min-h-full items-center justify-center p-4 text-center"},Oe={class:"border-b px-3 py-3 flex items-center justify-between"},We={class:"mt-2 space-y-3 px-5"},qe={class:"rounded px-2 py-2"},Le={class:"font-semibold text-red-500"},Xe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function Fe(l,e,r,c,n,i){const m=B,d=s("TransitionChild"),_=s("ExclamationTriangleIcon"),h=s("DialogTitle"),p=s("XMarkIcon"),f=s("FormKit"),g=X,u=s("DialogPanel"),b=s("Dialog"),x=s("TransitionRoot");return v(),D("div",null,[t(m,{click:i.handleClick,color:"error",text:"Delete",icon:n.deleteIcon},null,8,["click","icon"]),t(x,{appear:"",show:n.show,as:"template"},{default:a(()=>[t(b,{as:"div",class:"relative z-10"},{default:a(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>e[3]||(e[3]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",Ee,[o("div",Me,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[t(u,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:a(()=>[o("div",Oe,[t(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:a(()=>[t(_,{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=w(" Confirm delete "))]),_:1}),o("button",{onClick:e[0]||(e[0]=(...y)=>i.handleClick&&i.handleClick(...y))},[t(p,{class:"w-5 h-5"})])]),t(f,{type:"form","submit-label":"Update",onSubmit:e[2]||(e[2]=y=>i.deleteData(r.data.id)),actions:!1},{default:a(({value:y})=>[o("div",We,[o("div",qe,[e[5]||(e[5]=w(" Do you really want to delete ")),o("span",Le,L(r.data.name),1),e[6]||(e[6]=w("? Note that once this action is completed, it can not be undone "))]),t(f,{type:"textarea",label:"Reason",validation:"required",modelValue:n.reason,"onUpdate:modelValue":e[1]||(e[1]=G=>n.reason=G)},null,8,["modelValue"])]),o("div",Xe,[t(g,{text:"Cancel"}),t(m,{loading:n.loading,type:"submit",click:()=>{},color:"error",icon:n.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ne=C(Be,[["render",Fe]]),Ae={components:{MagnifyingGlassIcon:se},setup(){ne({title:`${oe.name.toUpperCase()} - Wards`})},data(){return{header:"List of wards",pages:[{name:"Home",link:"/home"},{name:"Lab Configuration",link:"#"}],addIcon:F,deleteIcon:H,viewIcon:ae,headers:[{text:"ID",value:"id",sortable:!0},{text:"Name",value:"name",sortable:!0},{text:"Actions",value:"actions"}],wards:new Array,cookie:j("token"),loading:!1,search:"",searchValue:"",searchField:"name",serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init()},methods:{async init(){this.loading=!0;const{page:l,rowsPerPage:e}=this.serverOptions,r={route:`${R.sections}?page=${l}&per_page=${e}&search=${this.search}`,method:"GET",token:`${this.cookie}`},{data:c,error:n,pending:i}=await S(r);this.loading=i,c.value&&(this.wards=c.value.data,this.loading=!1,this.serverItemsLength=c.value.meta.total_count),n.value&&(console.log(n.value),this.loading=!1)},updateWards(l){typeof l=="object"&&(this.serverOptions=l),this.init()},updateSearch(l){typeof l=="string"&&(this.search=l,this.searchValue=l,this.updateWards(!0))}}},He={class:"py-5 px-5"},Ke={class:"flex items-center justify-between py-5"},Ge={class:"text-2xl font-semibold"},ze={class:"flex justify-end w-full px-2 py-2 mb-2"},Ye={class:"py-2 flex items-center space-x-2"};function Ze(l,e,r,c,n,i){const m=z,d=_e,_=J,h=Ce,p=Se,f=Ne,g=te;return v(),D("div",He,[t(m,{pages:n.pages},null,8,["pages"]),o("div",Ke,[o("h3",Ge,L(n.header),1),("usePermissions"in l?l.usePermissions:E(W))().can.manage("lab_configurations")?(v(),M(d,{key:0,onUpdate:i.updateWards},null,8,["onUpdate"])):O("",!0)]),o("div",ze,[("usePermissions"in l?l.usePermissions:E(W))().can.manage("lab_configurations")?(v(),M(_,{key:0,search:n.search,"onUpdate:search":e[0]||(e[0]=u=>n.search=u),onUpdate:i.updateSearch},null,8,["search","onUpdate"])):O("",!0)]),("usePermissions"in l?l.usePermissions:E(W))().can.manage("lab_configurations")?(v(),M(g,{key:0,headers:n.headers,data:n.wards,loading:n.loading,"search-value":n.searchValue,"search-field":"name",serverItemsLength:n.serverItemsLength,serverOptions:n.serverOptions,onUpdate:i.updateWards},{actions:a(({item:u})=>[o("div",Ye,[t(h,{data:u},null,8,["data"]),t(p,{data:u,onUpdate:i.updateWards},null,8,["data","onUpdate"]),t(f,{data:u,onUpdate:i.updateWards},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value","serverItemsLength","serverOptions","onUpdate"])):O("",!0)])}const vt=C(Ae,[["render",Ze]]);export{vt as default};

import{m as v,a as w,u as p,E as b,bu as P,d as f,b as g,e as k,f as c,y as u,h as d,Y as C,p as y,g as m,G as $,S as A,r as L,bw as R,a8 as E,bx as U}from"./Mfiulbk9.js";import{_ as j}from"./BX4SrWBH.js";function x(r,e){return P(e)?r:r+"?"+Object.entries(e).map(([a,s])=>`${a}=${s}`).join("&")}const B=new class{getJson(e,a={}){var s;return v({route:x(e,a),method:"GET",token:((s=w("token"))==null?void 0:s.value)||"",body:{}}).then(({data:o,error:n})=>{if(n.value)throw n.value.data;if(o.value)return o.value}).catch(o=>{console.error(o),p().$toast.error(`${b}`)})}postJson(e,a,s={}){var o;return v({route:x(e,s),method:"POST",token:((o=w("token"))==null?void 0:o.value)||"",body:a}).then(({data:n,error:l})=>{if(l.value)throw l.value.data;if(n.value)return n.value}).catch(n=>{console.error(n),p().$toast.error(`${b}`)})}},G=""+new URL("zebra-label-printer.DIIWoAGn.jpeg",import.meta.url).href,O={class:"fixed inset-0 overflow-y-auto"},M={class:"flex min-h-full items-center justify-center p-4 text-center"},N=f({__name:"PrintingStatus",props:{show:{type:Boolean}},setup(r){return(e,a)=>(g(),k("div",null,[c(d(A),{appear:"",show:e.show,as:"template"},{default:u(()=>[c(d(C),{as:"div",class:"relative z-10"},{default:u(()=>[c(d(y),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>a[0]||(a[0]=[m("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),m("div",O,[m("div",M,[c(d(y),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:u(()=>[c(d($),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all py-20"},{default:u(()=>a[1]||(a[1]=[m("img",{src:G,class:"w-36 object-cover mx-auto"},null,-1),m("h1",{class:"text-center my-5 mx-auto text-2xl"},"Printing...",-1)])),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}});function z(){const r=L(!1),e=(t,i)=>R(t).mount(i),a=t=>document.body.removeChild(t),s=()=>{const t=document.createElement("div");return t.id="modal-wrapper-div",document.body.appendChild(t),t},o=(t,i)=>({render:()=>E(t,{...i,show:r.value})});return{alertConfirmation:async t=>{const i=s(),_=await new Promise(h=>{const S=f({extends:o(j,{onConfirm:()=>h(!0),onCancel:()=>h(!1),...t})});e(S,i),r.value=!0});return r.value=!1,a(i),_},showPrinterStatus:async()=>{const t=s(),i=f({extends:o(N)});return e(i,t),r.value=!0,t},hidePrinterStatus:t=>{r.value=!1,document.body.removeChild(t)}}}const{showPrinterStatus:J,hidePrinterStatus:T}=z(),q=new class{async writeLbl(e,a,s=`${Date.now()}.lbl`){const o=await J();try{const n=await B.getJson(e,a);e=URL.createObjectURL(n);const l=document.createElement("a");l.setAttribute("href",e),l.setAttribute("download",s),l.click(),URL.revokeObjectURL(e),await U(2e3)}catch(n){console.error(n),p().$toast.error("Unable to print the label")}T(o)}printSpecimenLabel(e){return this.writeLbl("printout/accession_number",{accession_number:e},`${e}.lbl`)}printTrackingNumber(e){return this.writeLbl("printout/tracking_number",{tracking_number:e},`${e}.lbl`)}};export{B as A,q as P,z as u};

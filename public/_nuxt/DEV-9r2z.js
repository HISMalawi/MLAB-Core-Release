import{_ as pe}from"./B75xAycs.js";import{_ as ve}from"./D0Q_03Km.js";import{r as g,a2 as se,c as m,d as q,a3 as oe,a4 as re,a5 as V,a6 as fe,a7 as T,o as J,w as be,a8 as Q,a9 as ye,aa as he,ab as ge,ac as ne,ad as xe,F as H,ae as _e,af as we,ag as G,ah as z,ai as Y,aj as P,ak as X,al as ke,I as Se,$ as Re,am as Ce,b as w,e as S,g as s,t as N,h as a,i as We,v as Le,k as Z,f as R,C as F,y as $,Y as Oe,p as ee,G as $e,V as Ve,j as Ee,A as te,H as je,J as ae,S as Ae}from"./Dq6GAKbi.js";import{_ as Ge}from"./K7TIBmeR.js";import{u as Ne}from"./CX0YNKG2.js";import{P as Be}from"./Cym2IAMG.js";import{r as le}from"./FeIzrERn.js";import{d as Pe,e as Fe,p as Te}from"./V6O_Nsr-.js";import{i as De}from"./Cu8fGwMK.js";import"./CCv5i2WQ.js";let Ie=Symbol("LabelContext");function ie({slot:t={},name:C="Label",props:W={}}={}){let x=g([]);function k(p){return x.value.push(p),()=>{let d=x.value.indexOf(p);d!==-1&&x.value.splice(d,1)}}return se(Ie,{register:k,slot:t,name:C,props:W}),m(()=>x.value.length>0?x.value.join(" "):void 0)}function Ue(t,C){return t===C}let ue=Symbol("RadioGroupContext");function de(t){let C=we(ue,null);if(C===null){let W=new Error(`<${t} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(W,de),W}return C}let ze=q({name:"RadioGroup",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ue},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(t,{emit:C,attrs:W,slots:x,expose:k}){var p;let d=(p=t.id)!=null?p:`headlessui-radiogroup-${oe()}`,v=g(null),n=g([]),u=ie({name:"RadioGroupLabel"}),E=re({name:"RadioGroupDescription"});k({el:v,$el:v});let[_,f]=Pe(m(()=>t.modelValue),e=>C("update:modelValue",e),m(()=>t.defaultValue)),b={options:n,value:_,disabled:m(()=>t.disabled),firstOption:m(()=>n.value.find(e=>!e.propsRef.disabled)),containsCheckedOption:m(()=>n.value.some(e=>b.compare(V(e.propsRef.value),V(t.modelValue)))),compare(e,o){if(typeof t.by=="string"){let l=t.by;return(e==null?void 0:e[l])===(o==null?void 0:o[l])}return t.by(e,o)},change(e){var o;if(t.disabled||b.compare(V(_.value),V(e)))return!1;let l=(o=n.value.find(y=>b.compare(V(y.propsRef.value),V(e))))==null?void 0:o.propsRef;return l!=null&&l.disabled?!1:(f(e),!0)},registerOption(e){n.value.push(e),n.value=fe(n.value,o=>o.element)},unregisterOption(e){let o=n.value.findIndex(l=>l.id===e);o!==-1&&n.value.splice(o,1)}};se(ue,b),De({container:m(()=>T(v)),accept(e){return e.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(e){e.setAttribute("role","none")}});function L(e){if(!v.value||!v.value.contains(e.target))return;let o=n.value.filter(l=>l.propsRef.disabled===!1).map(l=>l.element);switch(e.key){case G.Enter:Te(e.currentTarget);break;case G.ArrowLeft:case G.ArrowUp:if(e.preventDefault(),e.stopPropagation(),Y(o,P.Previous|P.WrapAround)===X.Success){let l=n.value.find(y=>{var i;return y.element===((i=z(v))==null?void 0:i.activeElement)});l&&b.change(l.propsRef.value)}break;case G.ArrowRight:case G.ArrowDown:if(e.preventDefault(),e.stopPropagation(),Y(o,P.Next|P.WrapAround)===X.Success){let l=n.value.find(y=>{var i;return y.element===((i=z(y.element))==null?void 0:i.activeElement)});l&&b.change(l.propsRef.value)}break;case G.Space:{e.preventDefault(),e.stopPropagation();let l=n.value.find(y=>{var i;return y.element===((i=z(y.element))==null?void 0:i.activeElement)});l&&b.change(l.propsRef.value)}break}}let c=m(()=>{var e;return(e=T(v))==null?void 0:e.closest("form")});return J(()=>{be([c],()=>{if(!c.value||t.defaultValue===void 0)return;function e(){b.change(t.defaultValue)}return c.value.addEventListener("reset",e),()=>{var o;(o=c.value)==null||o.removeEventListener("reset",e)}},{immediate:!0})}),()=>{let{disabled:e,name:o,form:l,...y}=t,i={ref:v,id:d,role:"radiogroup","aria-labelledby":u.value,"aria-describedby":E.value,onKeydown:L};return Q(H,[...o!=null&&_.value!=null?Fe({[o]:_.value}).map(([j,A])=>Q(ye,he({features:ge.Hidden,key:j,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:l,disabled:e,name:j,value:A}))):[],ne({ourProps:i,theirProps:{...W,...xe(y,["modelValue","defaultValue","by"])},slot:{},attrs:W,slots:x,name:"RadioGroup"})])}}});var He=(t=>(t[t.Empty=1]="Empty",t[t.Active=2]="Active",t))(He||{});let Ke=q({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{attrs:C,slots:W,expose:x}){var k;let p=(k=t.id)!=null?k:`headlessui-radiogroup-option-${oe()}`,d=de("RadioGroupOption"),v=ie({name:"RadioGroupLabel"}),n=re({name:"RadioGroupDescription"}),u=g(null),E=m(()=>({value:t.value,disabled:t.disabled})),_=g(1);x({el:u,$el:u});let f=m(()=>T(u));J(()=>d.registerOption({id:p,element:f,propsRef:E})),_e(()=>d.unregisterOption(p));let b=m(()=>{var i;return((i=d.firstOption.value)==null?void 0:i.id)===p}),L=m(()=>d.disabled.value||t.disabled),c=m(()=>d.compare(V(d.value.value),V(t.value))),e=m(()=>L.value?-1:c.value||!d.containsCheckedOption.value&&b.value?0:-1);function o(){var i;d.change(t.value)&&(_.value|=2,(i=T(u))==null||i.focus())}function l(){_.value|=2}function y(){_.value&=-3}return()=>{let{value:i,disabled:j,...A}=t,D={checked:c.value,disabled:L.value,active:!!(_.value&2)},I={id:p,ref:u,role:"radio","aria-checked":c.value?"true":"false","aria-labelledby":v.value,"aria-describedby":n.value,"aria-disabled":L.value?!0:void 0,tabIndex:e.value,onClick:L.value?void 0:o,onFocus:L.value?void 0:l,onBlur:L.value?void 0:y};return ne({ourProps:I,theirProps:A,slot:D,attrs:C,slots:W,name:"RadioGroupOption"})}}});const qe=""+new URL("lab.DVXNRrGq.png",import.meta.url).href,K=""+new URL("hospital-bed.COKClPQf.png",import.meta.url).href,Je={class:"py-20"},Me={class:"px-10 py-5 flex flex-col items-center rounded shadow max-w-sm mx-auto bg-white"},Qe={class:"mt-5 w-full text-3xl font-bold text-sky-500 text-center uppercase"},Ye={class:"mt-3 text-2xl font-bold text-black text-center"},Xe={class:"w-full flex flex-col space-y-2.5"},Ze={class:"w-full grid grid-cols-2 gap-5"},et=["onClick"],tt={key:0,src:qe,class:"w-12 h-12 object-cover",alt:"lab-icon"},at={key:1,src:K,class:"w-12 h-12 object-cover",alt:"ward-icon"},lt={class:"w-full font-light text-black flex justify-center uppercase text-lg text-center mt-1"},st={key:2,class:"absolute top-1.5 left-1.5"},ot={class:"fixed inset-0 z-10 overflow-y-auto"},rt={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},nt={class:"mb-4"},it={key:0,class:"flex justify-center py-8 px-8"},ut={key:1,class:"py-8 text-center text-gray-500"},dt={key:2,class:"max-h-60 overflow-y-auto mt-2"},ct=["aria-selected"],mt={class:"flex items-center w-full"},pt={class:"flex-shrink-0 mr-3"},vt={class:"flex-grow font-medium text-black"},ft={key:0,class:"flex-shrink-0"},bt={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},yt={key:0,class:"w-full mt-4"},ht={class:"flex flex-col p-4 bg-white border rounded-md shadow-sm"},gt={class:"flex items-center"},xt={class:"font-medium text-lg"},_t={key:1,class:"w-full mt-3"},Et=q({__name:"locations",setup(t){const C=Be.name,W=Ne(),x=ke(),k=Se(),p=Re(),{route:d}=Ce(),v=g(k.locations),n=g(!1),u=g({name:""}),E=g(!1),_=g([]),f=g({name:""}),b=g(!1),L=g(!1),c=g(""),e=g(null),o=m(()=>{if(!c.value)return _.value;const O=c.value.toLowerCase().trim();return _.value.filter(r=>r.name.toLowerCase().includes(O))}),l=m(()=>u.value.name==="Ward"?L.value&&f.value.name!=="":u.value.name!==""),y=O=>{O.name==="Ward"?(u.value=O,j()):i(O)},i=O=>{n.value=!0,k.selectedLocation=O.name,u.value=O,n.value=!1},j=async()=>{c.value="",_.value.length===0&&await I(),b.value=!0},A=()=>{b.value=!1},D=()=>{f.value.name&&(p.setSelectedWard(f.value.name),L.value=!0,b.value=!1,u.value={id:0,name:"Ward"},k.selectedLocation="Ward")},I=async()=>{E.value=!0,await p.fetchWards(),_.value=p.wards,E.value=!1},ce=()=>{l.value&&(u.value.name==="Ward"&&f.value.name!==""?(k.selectedLocation="Ward",p.setSelectedWard(f.value.name),x.push("/tests")):(k.selectedLocation=u.value.name,k.isClinicalStaff?x.push("/tests"):d===""?x.push("/home"):x.push(d)))};return J(()=>{v.value&&!v.value.some(O=>O.name==="Ward")&&v.value.push({id:0,name:"Ward"})}),(O,r)=>{const me=pe,U=ve;return w(),S("div",Je,[s("div",Me,[r[10]||(r[10]=s("img",{src:Ge,alt:"app-logo",class:"w-28 h-28 object-cover"},null,-1)),s("div",Qe,N(a(C)),1),s("h3",Ye,N(a(W).details.name),1),s("div",Xe,[r[3]||(r[3]=s("label",{class:"text-lg font-semibold text-gray-500 text-center"},"Select Location",-1)),We(s("div",Ze,[(w(!0),S(H,null,Z(a(v),h=>(w(),S("div",{onClick:B=>y(h),key:h.id,class:"relative py-10 px-10 flex flex-col items-center bg-gray-50 text-zinc-500 border rounded hover:bg-gray-100 transition duration-150 hover:cursor-pointer"},[h.name!=="Ward"?(w(),S("img",tt)):(w(),S("img",at)),s("p",lt,N(h.name),1),a(u).name==h.name?(w(),S("div",st,[R(a(le),{class:"w-6 h-6 text-green-500"})])):F("",!0)],8,et))),128))],512),[[Le,!a(n)]])]),R(a(Ae),{as:"template",show:a(b)},{default:$(()=>[R(a(Oe),{as:"div",class:"relative z-10",onClose:A,initialFocus:a(e)},{default:$(()=>[R(a(ee),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:$(()=>r[4]||(r[4]=[s("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25 transition-opacity"},null,-1)])),_:1}),s("div",ot,[s("div",rt,[R(a(ee),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:$(()=>[R(a($e),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md sm:p-6"},{default:$(()=>[s("div",null,[R(a(Ve),{as:"h3",class:"text-xl font-semibold text-black mb-4"},{default:$(()=>r[5]||(r[5]=[Ee(" Select Ward ")])),_:1}),s("div",nt,[R(me,{search:a(c),"onUpdate:search":[r[0]||(r[0]=h=>te(c)?c.value=h:null),r[1]||(r[1]=h=>c.value=h)],placeholder:"Search wards..."},null,8,["search"])]),a(E)?(w(),S("div",it,r[6]||(r[6]=[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-500"},null,-1)]))):a(o).length===0?(w(),S("div",ut," No wards found matching your search. ")):(w(),S("div",dt,[R(a(ze),{modelValue:a(f),"onUpdate:modelValue":r[2]||(r[2]=h=>te(f)?f.value=h:null)},{default:$(()=>[(w(!0),S(H,null,Z(a(o),h=>(w(),je(a(Ke),{key:h.id,value:{name:h.name},as:"template"},{default:$(({checked:B,active:M})=>[s("div",{class:ae(["relative flex cursor-pointer p-3 border-b hover:bg-gray-100 transition-colors duration-150",M?"bg-sky-100 border-sky-200":""]),tabindex:"0",role:"button","aria-label":"Select ward","aria-selected":B},[s("div",mt,[s("div",pt,[s("div",{class:ae(["w-8 h-8 flex items-center justify-center",{"text-sky-500":B||M}])},r[7]||(r[7]=[s("img",{src:K,class:"w-8 h-8 object-cover",alt:"ward-icon"},null,-1)]),2)]),s("div",vt,N(h.name),1),B?(w(),S("div",ft,[R(a(le),{class:"w-6 h-6 text-sky-500"})])):F("",!0)])],10,ct)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))]),s("div",bt,[R(U,{ref_key:"confirmButtonRef",ref:e,text:"Confirm",color:"primary",type:"button",onClick:D,disabled:!a(f).name,class:"sm:col-start-2"},null,8,["disabled"]),R(U,{text:"Cancel",color:"default",type:"button",onClick:A,class:"mt-3 sm:mt-0 sm:col-start-1"})])]),_:1})]),_:1})])])]),_:1},8,["initialFocus"])]),_:1},8,["show"]),a(u).name==="Ward"&&a(f).name!==""?(w(),S("div",yt,[s("div",ht,[r[9]||(r[9]=s("div",{class:"text-sm text-gray-500 mb-1"},"Selected Ward",-1)),s("div",gt,[r[8]||(r[8]=s("img",{src:K,class:"w-8 h-8 mr-3",alt:"ward-icon"},null,-1)),s("div",xt,N(a(f).name),1),s("button",{onClick:j,class:"ml-auto text-sky-600 hover:text-sky-800 text-sm px-3 py-1 rounded-md border border-sky-200 hover:bg-sky-50 transition-colors"}," Change ")])])])):F("",!0),a(l)?(w(),S("div",_t,[R(U,{text:"Continue â†’",color:"primary",type:"submit",onClick:ce,loading:a(n)},null,8,["loading"])])):F("",!0)])])}}});export{Et as default};

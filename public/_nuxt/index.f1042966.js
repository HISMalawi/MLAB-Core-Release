import{o as d,c as p,e,m as q,s,g as G,d as a,l as t,h as l,i as D,y as V,f as H,z as S,t as y,T as R,F as O,r as Y,p as J,n as T,k as Q,b as W,u as X}from"./entry.8b130418.js";import{_ as Z}from"./OutlinedButton.7de08d36.js";import{u as ee}from"./network.9f9ddcab.js";import{r as te}from"./XMarkIcon.2df3c244.js";import{r as ae}from"./ArrowPathIcon.f2fac6c8.js";import{U as oe,h as I,G as se,V as ne,S as le}from"./transition.0c9cdf07.js";import{_ as re}from"./Button.94417b18.js";import{_ as ie}from"./git-branch-outline.85facb88.js";import{_ as ce}from"./logo.7772852c.js";import{u as ue,f as M,e as P}from"./fetch.6ed6d8be.js";import{u as de}from"./facility.89075c79.js";import{P as U}from"./package.651db5f9.js";import{F as me,K as pe,N as fe,H as _e}from"./listbox.232a252f.js";import"./hidden.94b93f99.js";import"./nuxt-link.a6b19347.js";import"./constants.71ae81d4.js";import"./PencilSquareIcon.e8095535.js";import"./PrinterIcon.55ff5c9e.js";import"./use-text-value.d90f1789.js";function ve(h,u){return d(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M2.47 2.47a.75.75 0 011.06 0l8.407 8.407a1.125 1.125 0 011.186 1.186l1.462 1.461a3.001 3.001 0 00-.464-3.645.75.75 0 111.061-1.061 4.501 4.501 0 01.486 5.79l1.072 1.072a6.001 6.001 0 00-.497-7.923.75.75 0 011.06-1.06 7.501 7.501 0 01.505 10.05l1.064 1.065a9 9 0 00-.508-12.176.75.75 0 011.06-1.06c3.923 3.922 4.093 10.175.512 14.3l1.594 1.594a.75.75 0 11-1.06 1.06l-2.106-2.105-2.121-2.122h-.001l-4.705-4.706a.747.747 0 01-.127-.126L2.47 3.53a.75.75 0 010-1.061zm1.189 4.422a.75.75 0 01.326 1.01 9.004 9.004 0 001.651 10.462.75.75 0 11-1.06 1.06C1.27 16.12.63 11.165 2.648 7.219a.75.75 0 011.01-.326zM5.84 9.134a.75.75 0 01.472.95 6 6 0 001.444 6.159.75.75 0 01-1.06 1.06A7.5 7.5 0 014.89 9.606a.75.75 0 01.95-.472zm2.341 2.653a.75.75 0 01.848.638c.088.62.37 1.218.849 1.696a.75.75 0 01-1.061 1.061 4.483 4.483 0 01-1.273-2.546.75.75 0 01.637-.848z","clip-rule":"evenodd"})])}function K(h,u){return d(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.636 4.575a.75.75 0 010 1.06 9 9 0 000 12.729.75.75 0 01-1.06 1.06c-4.101-4.1-4.101-10.748 0-14.849a.75.75 0 011.06 0zm12.728 0a.75.75 0 011.06 0c4.101 4.1 4.101 10.749 0 14.85a.75.75 0 11-1.06-1.061 9 9 0 000-12.728.75.75 0 010-1.06zM7.757 6.696a.75.75 0 010 1.061 6 6 0 000 8.485.75.75 0 01-1.06 1.061 7.5 7.5 0 010-10.607.75.75 0 011.06 0zm8.486 0a.75.75 0 011.06 0 7.5 7.5 0 010 10.607.75.75 0 01-1.06-1.06 6 6 0 000-8.486.75.75 0 010-1.06zM9.879 8.818a.75.75 0 010 1.06 3 3 0 000 4.243.75.75 0 11-1.061 1.06 4.5 4.5 0 010-6.363.75.75 0 011.06 0zm4.242 0a.75.75 0 011.061 0 4.5 4.5 0 010 6.364.75.75 0 01-1.06-1.06 3 3 0 000-4.244.75.75 0 010-1.06zM10.875 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})])}function xe(h,u){return d(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})])}function he(h,u){return d(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}const ge=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ye={class:"fixed inset-0 overflow-y-auto"},we={class:"flex min-h-full items-center justify-center p-4 text-center"},be={class:"border-b px-3 py-3 flex items-center justify-between"},Ce={class:"mt-2 space-y-3 px-5"},ke=e("div",{class:"px-3 py-3 border-l-4 border-sky-500 shadow"}," Please make sure you enter the correct IBLIS API IP Address and the port that it is running. This page will refresh after updating changes. ",-1),Ve={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"},$e=q({__name:"index",props:{isConnected:{required:!0,type:Boolean,default:!1}},setup(h){const u=s(!1),r=s(!1),{updateNetwork:i,ip:$,port:f}=ee(),_=h,v=s($),g=s(f),w=()=>{r.value=!r.value},z=async()=>{await i(v.value,g.value),w(),window.location.reload()};return(B,c)=>{const b=H,C=G("FormKit"),A=Z;return d(),p("div",null,[a(b,{text:"Network Configuration",color:_.isConnected?"success":"error",icon:B.$props.isConnected?t(K):t(ve),click:w},null,8,["color","icon"]),a(t(le),{appear:"",show:t(r),as:"template"},{default:l(()=>[a(t(oe),{as:"div",class:"relative z-10"},{default:l(()=>[a(t(I),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[ge]),_:1}),e("div",ye,[e("div",we,[a(t(I),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[a(t(se),{class:"w-full max-w-xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",be,[a(t(ne),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[a(t(K),{class:"h-5 w-5 mr-2"}),D(" Configure Network ")]),_:1}),e("button",{onClick:w},[a(t(te),{class:"w-5 h-5"})])]),a(C,{type:"form","submit-label":"Update",onSubmit:z,actions:!1},{default:l(({value:L})=>[e("div",Ce,[ke,a(C,{type:"text",label:"IP Address",modelValue:t(v),"onUpdate:modelValue":c[0]||(c[0]=k=>V(v)?v.value=k:null),validation:"required|string"},null,8,["modelValue"]),a(C,{type:"number",label:"Port",modelValue:t(g),"onUpdate:modelValue":c[1]||(c[1]=k=>V(g)?g.value=k:null),validation:"required|number"},null,8,["modelValue"])]),e("div",Ve,[a(A,{type:"button",click:()=>{w()},text:"Cancel"},null,8,["click"]),a(b,{loading:t(u),type:"submit",click:()=>{},color:"success",icon:t(ae),text:"Update"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),ze={class:"my-20"},Be={class:"mx-auto max-w-sm bg-white border rounded mt-10"},Ne={class:"px-2 py-2 flex items-center justify-between"},Ue={class:"rounded bg-gray-100 py-1 px-2.5 border border-gray-50 text-sm flex items-center text-gray-500"},Ae=e("img",{src:ie,class:"w-5 h-5 text-red-500",alt:"git-tag-icon/"},null,-1),Fe={class:"px-16 py-5 flex flex-col items-center"},Se=e("img",{src:ce,alt:"app-logo",class:"w-28 h-28 object-cover"},null,-1),Me={class:"mt-5 w-full text-3xl font-bold text-sky-500 text-center uppercase"},Pe={class:"mt-3 text-xl font-medium text-center"},qe={class:"space-y-2 px-5 py-3"},Le={class:"mt-3"},je={class:"space-y-2 px-5 mb-5"},Te=e("label",{class:"font-medium text-base"}," Laboratory Section ",-1),Ie={class:"relative mt-1"},Ke={class:"block truncate"},Ge={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},De={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-sky-600"},Ee={class:"px-5 mb-5"},He={class:"mt-5 flex flex-col space-y-2 items-center justify-center"},Re={class:"text-center text-gray-500"},Oe=q({__name:"Login",emits:["connection"],async setup(h,{emit:u}){let r,i;const $=s(U.name),f=s(""),_=s(""),v=s(!1),g=s(""),w=s(U.version),z=s("-:-"),B=s(new Array),c=s({name:"select department",id:0}),b=u;async function C(){const{fetchFacility:x,details:o}=de(),n={route:P.global,method:"GET"},{data:N,error:F}=await M(n);F.value&&console.error(F.value),N.value&&(x(N.value),g.value=o.name)}async function A(){const x={route:`${P.global}/current_api_tag`,method:"GET"},{data:o,error:n}=await M(x);o.value&&(z.value=o.value.git_tag,b("connection",!0)),n.value&&(console.error(n.value),b("connection",!1))}async function L(){const x={route:P.departments,method:"GET"},{data:o,error:n}=await M(x);o.value&&(B.value=o.value),n.value&&console.error(n.value)}async function k(){const{authenticateUser:x,authenticated:o}=ue();let n={username:f.value,password:_.value,department:c.value.name};c.value.name!=="select department"?(v.value=!0,await x(n),v.value=!1):W().$toast.warning("Please select a department!")}return[r,i]=S(()=>A()),await r,i(),[r,i]=S(()=>L()),await r,i(),[r,i]=S(()=>C()),await r,i(),(x,o)=>{const n=G("FormKit"),N=re;return d(),p("div",ze,[e("div",Be,[e("div",null,[e("div",Ne,[e("div",Ue,[Ae,D(" "+y(t(w))+" / "+y(t(z)),1)])]),e("div",Fe,[Se,e("div",Me,y(t($)),1),e("h3",Pe,y(t(g)),1)]),a(n,{type:"form","submit-label":"Update",onSubmit:k,actions:!1},{default:l(({value:F})=>[e("div",qe,[a(n,{type:"text",label:"Username",modelValue:t(f),"onUpdate:modelValue":o[0]||(o[0]=m=>V(f)?f.value=m:null),validation:"required"},null,8,["modelValue"]),e("div",Le,[a(n,{type:"password",label:"Password",modelValue:t(_),"onUpdate:modelValue":o[1]||(o[1]=m=>V(_)?_.value=m:null),validation:"required"},null,8,["modelValue"])])]),e("div",je,[Te,a(t(me),{modelValue:t(c),"onUpdate:modelValue":o[2]||(o[2]=m=>V(c)?c.value=m:null)},{default:l(()=>[e("div",Ie,[a(t(pe),{class:"relative w-full cursor-default rounded border py-2.5 pl-3 pr-10 text-left focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-none sm:text-sm"},{default:l(()=>[e("span",Ke,y(t(c).name),1),e("span",Ge,[a(t(he),{class:"h-5 w-5 text-gray-500","aria-hidden":"true"})])]),_:1}),a(R,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:l(()=>[a(t(fe),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-2 text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:l(()=>[(d(!0),p(O,null,Y(t(B),m=>(d(),J(t(_e),{key:m.name,value:m,as:"template"},{default:l(({active:E,selected:j})=>[e("li",{class:T([E?"bg-gray-50":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[e("span",{class:T([j?"font-medium":"font-normal","block truncate"])},y(m.name),3),j?(d(),p("span",De,[a(t(xe),{class:"h-5 w-5","aria-hidden":"true"})])):Q("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),e("div",Ee,[a(N,{color:"primary",type:"submit",text:"Login",loading:t(v)},null,8,["loading"])])]),_:1})])]),e("div",He,[e("p",Re," Malawi Ministry of Health © "+y(new Date().getFullYear()),1)])])}}}),Ye={class:"w-full flex items-center justify-end p-3"},ft=q({__name:"index",setup(h){X({title:`${U.name.toUpperCase()} - ${U.version}`});const u=s(!1),r=i=>{u.value=i};return(i,$)=>{const f=$e,_=Oe;return d(),p("div",null,[e("div",Ye,[a(f,{isConnected:t(u)},null,8,["isConnected"])]),a(_,{onConnection:r})])}}});export{ft as default};

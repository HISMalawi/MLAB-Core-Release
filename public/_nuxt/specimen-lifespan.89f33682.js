import{_ as G}from"./Breadcrumb.fceb39b7.js";import{_ as N}from"./SearchBar.a918a5ce.js";import{l as U,B as n,u as B,f as q,o as L,c as P,b as a,k as e,g as p,d as t,h as D,t as x,w as F,v as I,p as O,j as z,a as k,e as K,D as M}from"./entry.8d1887e0.js";import{e as C,f as j,k as H,g as R}from"./fetch.1b1fb40d.js";import{e as A}from"./constants.6559c015.js";import{_ as J}from"./clinical_fe.8e7e8067.js";import{a as Q}from"./PencilSquareIcon.21ca2aeb.js";import{r as W}from"./XMarkIcon.dad50e8c.js";import{r as X}from"./ArrowDownTrayIcon.fc686a16.js";import{U as Y,h as V,G as Z,V as ee,S as te}from"./transition.166bd9ac.js";import{_ as se}from"./Datatable.cca64e33.js";import{u as ae}from"./index.eca2caa0.js";import{P as ne}from"./package.d411c004.js";import"./nuxt-link.8f68ed8a.js";import"./HomeIcon.a70aee08.js";import"./PrinterIcon.1c7de3dc.js";import"./hidden.4fcf3718.js";import"./Loader.14568b8d.js";import"./vue.f36acd1f.90da7972.js";const oe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ie={class:"fixed inset-0 overflow-y-auto"},le={class:"flex min-h-full items-center justify-center p-4 text-center"},ce={class:"border-b px-3 py-3 flex items-center justify-between"},re=t("img",{src:J,class:"w-8 h-8 mr-2"},null,-1),pe={class:"mt-2 space-y-3 px-5 py-5"},me={class:"w-full flex flex-col space-y-1"},de=t("label",{class:"font-semibold text-lg"},x("Specimen Name"),-1),ue={class:"underline"},_e={class:"w-full flex flex-col space-y-1"},fe=t("label",{class:"font-semibold text-lg"},x("Test Type"),-1),ve={class:"underline"},he={class:"mt-2 space-y-3"},xe={class:"w-full grid grid-1 items-center px-5 space-x-3"},ye={class:"w-full grid grid-1 items-center px-5 space-x-3"},ge={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"},be=U({__name:"index",props:{id:{}},emits:["action-completed"],setup(T,{emit:b}){const u=b,y=T,_=n(!1),r=n(!1),f=B("token"),o=n({life_span:"",life_span_units:""}),v=n({specimen_name:"",test_type_name:"",life_span:"",life_span_units:""}),$=n([{label:"mins",value:"mins"},{label:"hours",value:"hours"},{label:"days",value:"days"},{label:"months",value:"months"}]),h=async()=>{r.value=!0;const m={route:`${C.specimensLifespan.edit}/${y.id}`,method:"GET",token:`${f.value}`},s=await j(m);if(s.data.value){const l=s.data.value;o.value.life_span=l.life_span,o.value.life_span_units=l.life_span_units,v.value.specimen_name=l.specimen.name,v.value.test_type_name=l.test_type.name,_.value=!0}r.value=!1,s.error.value&&(r.value=!1,k().$toast.error(`${A}`))},S=async()=>{r.value=!0;const m=await H(`${C.specimensLifespan.update}/${y.id}`,{method:"PUT",headers:{Authorization:`${f.value}`},body:o},"$x31dFGojBG");m.data.value&&(g(),u("action-completed",!0),k().$toast.success("Specimen lifespan updated successfully!")),m.error.value&&(k().$toast.success("An error occurred, please try again!"),g())},g=()=>{_.value=!_.value,r.value=!1};return(m,s)=>{const l=K,d=q("FormKit");return L(),P("div",null,[a(l,{click:h,color:"success",text:"Edit",icon:e(Q)},null,8,["icon"]),a(e(te),{appear:"",show:e(_),as:"template"},{default:p(()=>[a(e(Y),{as:"div",class:"relative z-10"},{default:p(()=>[a(e(V),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[oe]),_:1}),t("div",ie,[t("div",le,[a(e(V),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:p(()=>[a(e(Z),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:p(()=>[t("div",ce,[a(e(ee),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:p(()=>[re,D(" "+x("Edit Specimen Lifespan"))]),_:1}),t("button",{onClick:g},[a(e(W),{class:"w-5 h-5"})])]),F(t("div",pe,[t("div",me,[de,t("p",ue,x(e(v).specimen_name),1)]),t("div",_e,[fe,t("p",ve,x(e(v).test_type_name),1)])],512),[[I,!e(r)]]),a(d,{type:"form","submit-label":"Update",onSubmit:S,actions:!1},{default:p(({})=>[t("div",he,[t("div",xe,[a(d,{class:"w-full",type:"number",label:"Lifespan",validation:"required",modelValue:e(o).life_span,"onUpdate:modelValue":s[0]||(s[0]=c=>e(o).life_span=c)},null,8,["modelValue"])]),t("div",ye,[e($).length?(L(),O(d,{key:0,type:"select",label:"Test Type",modelValue:e(o).life_span_units,"onUpdate:modelValue":s[1]||(s[1]=c=>e(o).life_span_units=c),placeholder:"Select disease",validation:"required",options:e($)},null,8,["modelValue","options"])):z("",!0)]),t("div",ge,[a(l,{type:"submit",click:()=>{},color:"success",loading:e(r),icon:e(X),text:"Save changes"},null,8,["loading","icon"])])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),$e={class:"px-5 py-5"},we={class:"flex items-center justify-between py-5"},ke={class:"text-2xl font-semibold"},Se={class:"flex justify-end w-full px-2 py-2 mb-2"},Le={class:"py-2 flex items-center space-x-2"},He=U({__name:"specimen-lifespan",setup(T){ae({title:`${ne.name.toUpperCase()} - Specimen Lifespan`});const b=n(0),u=n(!1),y=n([]),_=B("token"),r=n("Specimen Lifespan"),f=n(""),o=n({page:1,rowsPerPage:10,sortBy:"name"}),v=n([{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}]),$=n([{text:"Specimen Type",value:"specimen_name",sortable:!0},{text:"Test Type",value:"test_type_name"},{text:"Lifesapn",value:"specimen_life_span"},{text:"Actions",value:"actions"}]),h=async()=>{u.value=!0;const{page:s,rowsPerPage:l}=o.value,d={route:R(C.specimensLifespan.index,{page:s,per_page:l,search:f.value}),method:"GET",token:`${_.value}`},c=await j(d);if(c.data.value){const w=c.data.value.data;y.value=w?w.map(i=>({id:i.id,specimen_name:i.specimen_name,test_type_name:i.test_type_name,specimen_life_span:i.life_span&&i.life_span_units?`${i.life_span} ${i.life_span_units}`:"--",life_span:i.life_span,life_span_unit:i.life_span_units})):[],b.value=c.data.value.meta.total_count??0}u.value=!1,c.error.value&&(u.value=!1,k().$toast.error(`${A}`))},S=s=>{f.value=s,h()},g=s=>o.value=s;h(),M(o,()=>h());const m=async()=>{h()};return(s,l)=>{const d=G,c=N,w=be,i=se;return L(),P("div",$e,[a(d,{pages:e(v)},null,8,["pages"]),t("div",we,[t("h3",ke,x(e(r)),1)]),t("div",Se,[a(c,{search:e(f),onUpdate:S},null,8,["search"])]),a(i,{headers:e($),data:e(y),serverOptions:e(o),loading:e(u),serverItemsLength:e(b),onUpdate:g},{actions:p(({item:E})=>[t("div",Le,[a(w,{onActionCompleted:m,id:E.id},null,8,["id"])])]),_:1},8,["headers","data","serverOptions","loading","serverItemsLength"])])}}});export{He as default};

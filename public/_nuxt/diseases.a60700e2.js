import{_ as q}from"./Breadcrumb.vue.0bdfacbe.js";import{_ as M}from"./index.632d3ea8.js";import{_ as N}from"./SearchBar.23d88dce.js";import{a as b,b as y,_ as w,g as i,o as C,c as T,d as e,h as l,e as t,i as v,f as A,t as E,u as X,al as K}from"./entry.6ecd4149.js";import{_ as U}from"./OutlinedButton.74d1ec26.js";import{e as O,d as G}from"./constants.6cf4c43b.js";import{e as $,f as I,a as z,h as H}from"./fetch.ee87b44f.js";import{r as V}from"./XMarkIcon.3f787dce.js";import{a as L}from"./PencilSquareIcon.34c3a71c.js";import{r as J}from"./ArrowDownTrayIcon.e0a2df5d.js";import{S,h as F,U as j,G as B,V as P}from"./transition.4be39060.js";import{_ as Q}from"./virus.b29058f0.js";import{r as W}from"./TrashIcon.2e5c02e2.js";import{_ as Y}from"./Datatable.820fd689.js";import{P as Z}from"./package.274d278d.js";import"./nuxt-link.105aec3d.js";import"./HomeIcon.dfeb70f0.js";import"./PrinterIcon.33b23bbb.js";import"./hidden.06164e9c.js";import"./Loader.557993b8.js";const ee={components:{TransitionRoot:S,TransitionChild:F,Dialog:j,DialogPanel:B,DialogTitle:P,XMarkIcon:V},data(){return{editIcon:L,show:!1,saveIcon:J,name:this.data.name,description:this.data.description,drugSelected:new Array,drugs:new Array,rawDrugs:new Array,loading:!1,cookie:b("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const n={route:`${$.disease.edit}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:a,error:r,data:c}=await I(n);this.loading=a,c.value&&(this.show=!1,y().$toast.success("Disease updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(this.show=!1,console.error(r.value),this.loading=!1,y().$toast.error(O))},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("editForm")}}},te=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25"},null,-1),oe={class:"fixed inset-0 overflow-y-auto"},ae={class:"flex min-h-full items-center justify-center p-4 text-center"},se={class:"border-b px-3 py-3 flex items-center justify-between"},ne=t("img",{src:Q,class:"w-8 h-8 mr-2"},null,-1),ie={class:"mt-2 space-y-3"},le={class:"w-full flex items-center px-5"},re={class:"w-full flex flex-col space-y-2"},ce={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function de(n,a,r,c,o,s){const d=A,m=i("TransitionChild"),h=i("DialogTitle"),f=i("XMarkIcon"),u=i("FormKit"),_=U,p=i("DialogPanel"),k=i("Dialog"),D=i("TransitionRoot");return C(),T("div",null,[e(d,{click:s.handleClick,text:"Edit",color:"success",icon:o.editIcon},null,8,["click","icon"]),e(D,{appear:"",show:o.show,as:"template"},{default:l(()=>[e(k,{as:"div",class:"relative z-10"},{default:l(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[te]),_:1}),t("div",oe,[t("div",ae,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[t("div",se,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[ne,v(" Edit Disease ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...x)=>s.handleClick&&s.handleClick(...x))},[e(f,{class:"w-5 h-5"})])]),e(u,{id:"editForm",type:"form","submit-label":"Update",onSubmit:s.submitForm,actions:!1},{default:l(({value:x})=>[t("div",ie,[t("div",le,[t("div",re,[e(u,{type:"text",label:"Name",validation:"required",modelValue:r.data.name,"onUpdate:modelValue":a[1]||(a[1]=g=>r.data.name=g)},null,8,["modelValue"])])])]),t("div",ce,[e(_,{text:"Clear form",type:"button",click:()=>{s.clearForm()}},null,8,["click"]),e(d,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const me=w(ee,[["render",de]]),ue={components:{TransitionRoot:S,TransitionChild:F,Dialog:j,DialogPanel:B,DialogTitle:P,XMarkIcon:V,ExclamationTriangleIcon:z},data(){return{show:!1,deleteIcon:W,loading:!1,cookie:b("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(n){this.loading=!0;const a={route:`${$.disease.delete}/${n}`,method:"DELETE",token:`${this.cookie}`,body:{voided_reason:this.reason}},{pending:r,error:c,data:o}=await I(a);this.loading=r,o.value&&(this.handleClick(),y().$toast.success("Disease deleted successfully!"),this.reason="",this.loading=!1,this.$emit("update",!0)),c.value&&(console.log(c.value),y().$toast.error("An error occurred, please try again!"),this.loading=!1)},handleClick(){this.show=!this.show}}},_e=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),pe={class:"fixed inset-0 overflow-y-auto"},he={class:"flex min-h-full items-center justify-center p-4 text-center"},fe={class:"border-b px-3 py-3 flex items-center justify-between"},ge={class:"mt-2 space-y-3 px-5"},xe={class:"rounded px-2 py-2"},ve={class:"font-semibold text-red-500"},ye={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ke(n,a,r,c,o,s){const d=A,m=i("TransitionChild"),h=i("ExclamationTriangleIcon"),f=i("DialogTitle"),u=i("XMarkIcon"),_=i("FormKit"),p=U,k=i("DialogPanel"),D=i("Dialog"),x=i("TransitionRoot");return C(),T("div",null,[e(d,{click:s.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(x,{appear:"",show:o.show,as:"template"},{default:l(()=>[e(D,{as:"div",class:"relative z-10"},{default:l(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[_e]),_:1}),t("div",pe,[t("div",he,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[e(k,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[t("div",fe,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[e(h,{class:"h-5 w-5 mr-2"}),v(" Confirm delete ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...g)=>s.handleClick&&s.handleClick(...g))},[e(u,{class:"w-5 h-5"})])]),e(_,{type:"form","submit-label":"Update",onSubmit:a[2]||(a[2]=g=>s.deleteData(r.data.id)),actions:!1},{default:l(({value:g})=>[t("div",ge,[t("div",xe,[v(" Do you really want to delete "),t("span",ve,E(r.data.name),1),v("? Note that once this action is completed, it can not be undone ")]),e(_,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":a[1]||(a[1]=R=>o.reason=R)},null,8,["modelValue"])]),t("div",ye,[e(p,{click:()=>{},type:"button",text:"Cancel"}),e(d,{loading:o.loading,type:"submit",click:()=>{},color:"error",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const De=w(ue,[["render",ke]]),be={setup(){X({title:`${Z.name.toUpperCase()} - Diseases`})},data(){return{header:"Diseases",pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],headers:[{text:"ID",value:"id",sortable:!0},{text:"NAME",value:"name",sortable:!0},{text:"DATE CREATED",value:"created_date"},{text:"Actions",value:"actions"}],diseases:new Array,cookie:b("token"),search:"",searchValue:"",loading:!1}},created(){this.init()},computed:{filteredDiseases(){return this.diseases.map(n=>({...n,created_date:H(n.created_date).format(G)}))}},methods:{async init(){this.loading=!0;const n={route:$.disease.index,method:"GET",token:`${this.cookie}`},{data:a,error:r,pending:c}=await I(n);this.loading=c,a.value&&(this.diseases=a.value,this.loading=!1),r.value&&(console.log(r.value),this.loading=!1)},updateSearch(n){K&&(this.searchValue=n,this.search=n)},updateDiseases(n){this.init()}}},we={class:"px-5 py-5"},Ce={class:"flex items-center justify-between py-5"},Te={class:"text-2xl font-semibold"},$e={class:"flex items-center space-x-3"},Ie={class:"flex justify-end w-full px-2 py-2 mb-2"},Ae={class:"py-2 flex items-center space-x-2"};function Ee(n,a,r,c,o,s){const d=q,m=M,h=N,f=me,u=De,_=Y;return C(),T("div",we,[e(d,{pages:o.pages},null,8,["pages"]),t("div",Ce,[t("h3",Te,E(o.header),1),t("div",$e,[e(m,{onActionCompleted:s.updateDiseases},null,8,["onActionCompleted"])])]),t("div",Ie,[e(h,{search:o.search,onUpdate:s.updateSearch},null,8,["search","onUpdate"])]),e(_,{headers:o.headers,data:s.filteredDiseases,loading:o.loading,"search-value":o.searchValue,"search-field":"name"},{actions:l(({item:p})=>[t("div",Ae,[e(f,{data:p,onUpdate:s.updateDiseases},null,8,["data","onUpdate"]),e(u,{data:p,onUpdate:s.updateDiseases},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const We=w(be,[["render",Ee]]);export{We as default};

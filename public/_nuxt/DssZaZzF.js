import{_ as Z}from"./B38OGO74.js";import{S as $,p as I,Y as V,G as j,V as S,q as F,s as ee,a as R,l as P,m as E,u as C,E as q,x as L,y as n,b,e as T,g as t,f as e,z as s,k,_ as M,A as te,B as G,t as X,D as oe,d as ae,r as B,c as O,o as ne,h as w,L as K,K as z,H as se}from"./DaVfplCl.js";import{_ as N}from"./B0t_sj3-.js";import{r as ie}from"./DQxuftN6.js";import{r as H}from"./CkZqa6SV.js";import{r as le}from"./Ba1YopIZ.js";import{_ as ce}from"./CPUPa6f5.js";import{_ as A}from"./Cl1Pa16j.js";import{r as re}from"./CemrLY-G.js";import{_ as de}from"./CzqI9CSL.js";import{u as ue}from"./MuIwof8c.js";import{u as me}from"./B9Jk58qt.js";import{P as _e}from"./Dr0mg474.js";import"./CaCwXEk-.js";import"./Bk1fID9q.js";import"./BYI7uPfh.js";import"./B5Ij5f4J.js";const pe={components:{TransitionRoot:$,TransitionChild:I,Dialog:V,DialogPanel:j,DialogTitle:S,XMarkIcon:F,UserIcon:ie},data(){return{open:!1,addIcon:ee,saveIcon:H,clearIcon:le,name:"",description:"",loading:!1,cookie:R("token")}},methods:{async submitForm(){this.loading=!0;const v={route:P.departments,method:"POST",token:`${this.cookie}`,body:{name:this.name}},{pending:a,error:l,data:c}=await E(v);this.loading=a,c.value&&(this.adjustVisibility(),C().$toast.success(`${this.name} laboratory section created successfully!`),this.name="",this.loading=!1,this.$emit("update",!0)),l.value&&(this.adjustVisibility(),console.log(l.value),C().$toast.error(q),this.loading=!1)},adjustVisibility(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},fe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),he={class:"fixed inset-0 overflow-y-auto"},ve={class:"flex min-h-full items-center justify-center p-4 text-center"},ye={class:"border-b px-3 py-3 flex items-center justify-between"},xe={class:"mt-2 space-y-3"},ge={class:"w-full flex items-center px-5"},be={class:"w-full flex flex-col space-y-2"},ke={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function we(v,a,l,c,o,i){const u=M,d=n("TransitionChild"),y=n("DialogTitle"),g=n("XMarkIcon"),p=n("FormKit"),f=N,h=n("DialogPanel"),r=n("Dialog"),x=n("TransitionRoot");return b(),T("div",null,[t("div",null,[e(u,{text:"New lab section",color:"primary",icon:o.addIcon,click:i.adjustVisibility},null,8,["icon","click"])]),e(x,{appear:"",show:o.open,as:"template"},{default:s(()=>[e(r,{as:"div",onClose:i.adjustVisibility,class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[fe]),_:1}),t("div",he,[t("div",ve,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",ye,[e(y,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:s(()=>[k(" Add new lab section ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...m)=>i.adjustVisibility&&i.adjustVisibility(...m))},[e(g,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1,id:"submitForm"},{default:s(({value:m})=>[t("div",xe,[t("div",ge,[t("div",be,[e(p,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":a[1]||(a[1]=_=>o.name=_)},null,8,["modelValue"])])])]),t("div",ke,[e(f,{text:"Clear form",type:"button",click:()=>{i.clearForm()}},null,8,["click"]),e(u,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const Ce=L(pe,[["render",we]]),De={components:{TransitionRoot:$,TransitionChild:I,Dialog:V,DialogPanel:j,DialogTitle:S,XMarkIcon:F},data(){return{viewIcon:te,show:!1,editIcon:G}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},Te=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25"},null,-1),$e={class:"fixed inset-0 overflow-y-auto"},Ie={class:"flex min-h-full items-center justify-center p-4 text-center"},Ve={class:"border-b px-3 py-3 flex items-center justify-between"},je=t("img",{src:A,class:"w-8 h-8 mr-2",alt:"hospital-icon"},null,-1),Se={class:"space-y-3 px-5 py-5"},Fe={class:"w-full flex flex-col space-y-1"},Re=t("label",{class:"font-semibold text-lg"},"Name",-1),Pe={class:"underline"};function Ee(v,a,l,c,o,i){const u=M,d=n("TransitionChild"),y=n("DialogTitle"),g=n("XMarkIcon"),p=n("DialogPanel"),f=n("Dialog"),h=n("TransitionRoot");return b(),T("div",null,[e(u,{click:i.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(h,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(f,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Te]),_:1}),t("div",$e,[t("div",Ie,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Ve,[e(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[je,k(" View Laboratory Section ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...r)=>i.handleClick&&i.handleClick(...r))},[e(g,{class:"w-5 h-5"})])]),t("div",Se,[t("div",Fe,[Re,t("p",Pe,X(l.data.name),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Le=L(De,[["render",Ee]]),Me={components:{TransitionRoot:$,TransitionChild:I,Dialog:V,DialogPanel:j,DialogTitle:S,XMarkIcon:F},data(){return{editIcon:G,show:!1,saveIcon:H,loading:!1,cookie:R("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const v={route:`${P.departments}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:{name:this.data.name}},{data:a,error:l,pending:c}=await E(v);this.loading=c,a.value&&(this.handleClick(),C().$toast.success("Laboratory section updated successfully!"),this.loading=!1,this.$emit("update",!0)),l.value&&(this.handleClick(),C().$toast.error(q),console.error(l.value),this.loading=!1)},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("submitForm")}}},Ue=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Be={class:"fixed inset-0 overflow-y-auto"},qe={class:"flex min-h-full items-center justify-center p-4 text-center"},Xe={class:"border-b px-3 py-3 flex items-center justify-between"},Ne=t("img",{src:A,class:"w-8 h-8 mr-2",alt:"hospital-icon"},null,-1),Ae={class:"mt-2 space-y-3"},Oe={class:"w-full flex items-center px-5"},Ke={class:"w-full flex flex-col space-y-2"},ze={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ge(v,a,l,c,o,i){const u=M,d=n("TransitionChild"),y=n("DialogTitle"),g=n("XMarkIcon"),p=n("FormKit"),f=N,h=n("DialogPanel"),r=n("Dialog"),x=n("TransitionRoot");return b(),T("div",null,[e(u,{click:i.handleClick,text:"Edit",color:"success",icon:o.editIcon},null,8,["click","icon"]),e(x,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(r,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Ue]),_:1}),t("div",Be,[t("div",qe,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Xe,[e(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[Ne,k(" Edit Laboratory Department ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...m)=>i.handleClick&&i.handleClick(...m))},[e(g,{class:"w-5 h-5"})])]),e(p,{id:"submitForm",type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:m})=>[t("div",Ae,[t("div",Oe,[t("div",Ke,[e(p,{type:"text",label:"Name",validation:"required",modelValue:l.data.name,"onUpdate:modelValue":a[1]||(a[1]=_=>l.data.name=_)},null,8,["modelValue"])])])]),t("div",ze,[e(f,{text:"Clear form",type:"button",click:()=>{i.clearForm()}},null,8,["click"]),e(u,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const He=L(Me,[["render",Ge]]),Ye={components:{TransitionRoot:$,TransitionChild:I,Dialog:V,DialogPanel:j,DialogTitle:S,XMarkIcon:F,ExclamationTriangleIcon:oe},data(){return{show:!1,deleteIcon:re,loading:!1,reason:"",cookie:R("token")}},props:{data:{type:Object,required:!0}},methods:{async deleteData(v){this.loading=!0;const a={route:`${P.departments}/${v}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}};let{data:l,error:c,pending:o}=await E(a);this.loading=o,l.value&&(this.handleClick(),C().$toast.success("Laboratory section deleted successfully!"),this.$emit("update",!0)),c.value&&(C().$toast.error(q),this.handleClick(),console.error(c.value))},handleClick(){this.show=!this.show}}},Je=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Qe={class:"fixed inset-0 overflow-y-auto"},We={class:"flex min-h-full items-center justify-center p-4 text-center"},Ze={class:"border-b px-3 py-3 flex items-center justify-between"},et={class:"mt-2 space-y-3 px-5"},tt={class:"rounded px-2 py-2"},ot={class:"font-semibold text-red-500"},at={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function nt(v,a,l,c,o,i){const u=M,d=n("TransitionChild"),y=n("ExclamationTriangleIcon"),g=n("DialogTitle"),p=n("XMarkIcon"),f=n("FormKit"),h=N,r=n("DialogPanel"),x=n("Dialog"),m=n("TransitionRoot");return b(),T("div",null,[e(u,{click:i.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(m,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(x,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Je]),_:1}),t("div",Qe,[t("div",We,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(r,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Ze,[e(g,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[e(y,{class:"h-5 w-5 mr-2"}),k(" Confirm delete ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(..._)=>i.handleClick&&i.handleClick(..._))},[e(p,{class:"w-5 h-5"})])]),e(f,{type:"form","submit-label":"Update",onSubmit:a[2]||(a[2]=_=>i.deleteData(l.data.id)),actions:!1},{default:s(({value:_})=>[t("div",et,[t("div",tt,[k(" Do you really want to delete "),t("span",ot,X(l.data.name),1),k("? Note that once this action is completed, it can not be undone ")]),e(f,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":a[1]||(a[1]=U=>o.reason=U)},null,8,["modelValue"])]),t("div",at,[e(h,{type:"button",click:()=>{i.handleClick()},text:"Cancel"},null,8,["click"]),e(u,{loading:o.loading,type:"submit",click:()=>{},color:"error",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const st=L(Ye,[["render",nt]]),it={class:"py-5 px-5"},lt={class:"flex items-center justify-between py-5"},ct=t("img",{src:A,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),rt={class:"flex items-center space-x-3"},dt={class:"flex justify-end w-full px-2 py-2 mb-2"},ut={class:"py-2 flex items-center space-x-2"},mt="Laboratory Sections",jt=ae({__name:"lab-sections",setup(v){ue({title:`${_e.name.toUpperCase()} - Laboratory Sections`});const a=B([]),l=[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],c=B(!1),o=B(""),i=R("token"),u=[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"actions",value:"actions",sortable:!1}],{can:d}=me(),y=O(()=>d.manage("test_catalog")),g=r=>{o.value=r},p=O(()=>o.value?a.value.filter(r=>r.name.toLowerCase().includes(o.value.toLowerCase())):a.value),f=async()=>{c.value=!0;const r={route:P.departments,method:"GET",token:i.value},{pending:x,error:m,data:_}=await E(r);c.value=x,_.value&&(a.value=_.value,c.value=!1),m.value&&(console.error(m.value),c.value=!1)},h=async r=>{r&&await f()};return ne(f),(r,x)=>{const m=Z,_=Ce,U=ce,Y=Le,J=He,Q=st,W=de;return b(),T("div",it,[e(m,{pages:l}),t("div",lt,[t("div",{class:"text-2xl font-semibold flex items-center uppercase"},[ct,k(" "+X(mt))]),t("div",rt,[w(y)?(b(),K(_,{key:0,onUpdate:h})):z("",!0)])]),t("div",dt,[e(U,{search:w(o),"onUpdate:search":x[0]||(x[0]=D=>se(o)?o.value=D:null),onUpdate:g},null,8,["search"])]),w(y)?(b(),K(W,{key:0,headers:u,data:w(p),loading:w(c),"search-value":w(o),"search-field":"name"},{actions:s(({item:D})=>[t("div",ut,[e(Y,{data:D},null,8,["data"]),e(J,{data:D,onUpdate:h},null,8,["data"]),e(Q,{data:D,onUpdate:h},null,8,["data"])])]),_:1},8,["data","loading","search-value"])):z("",!0)])}}});export{jt as default};

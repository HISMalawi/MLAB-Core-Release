import{_ as H}from"./Bz0K0IGU.js";import{_ as R}from"./DC2L4iA4.js";import{s as G,S as j,p as $,Y as B,G as q,V as I,q as N,x as _,b as w,e as D,f as t,y as l,g as e,j as S,t as T,_ as U,d as F,r as u,h as s,D as O,l as M,m as A,u as P,o as X,A as z,H as K,C as L}from"./Mfiulbk9.js";import{_ as E}from"./quWe4lpW.js";import{r as Y}from"./H02xEbv4.js";import{_ as J}from"./DyzbuwC8.js";import{r as Q}from"./Dj1LwFsw.js";import{r as W}from"./DFEJ8LNl.js";import{_ as Z}from"./MEi_HMIO.js";import{u as ee}from"./CqIspz_h.js";import{P as te}from"./Cym2IAMG.js";import{u as se}from"./hBIwNBsI.js";import"./CWIC1ZeM.js";import"./B-Vd1x1K.js";const ae={components:{TransitionRoot:j,TransitionChild:$,Dialog:B,DialogPanel:q,DialogTitle:I,XMarkIcon:N},data(){return{viewIcon:Y,show:!1}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},oe={class:"fixed inset-0 overflow-y-auto"},ne={class:"flex min-h-full items-center justify-center p-4 text-center"},le={class:"border-b px-3 py-3 flex items-center justify-between"},ie={class:"space-y-3 px-5 py-5"},re={class:"w-full flex flex-col space-y-1"},ce={class:"text-gray-600"},de={class:"w-full flex flex-col space-y-1"},ue={class:"text-gray-600"},me={class:"w-full flex flex-col space-y-1"},pe=["innerHTML"];function fe(y,o,d,g,m,i){const v=U,c=_("TransitionChild"),p=_("DialogTitle"),x=_("XMarkIcon"),h=_("DialogPanel"),n=_("Dialog"),a=_("TransitionRoot");return w(),D("div",null,[t(v,{click:i.handleClick,color:"primary",text:"View",icon:m.viewIcon},null,8,["click","icon"]),t(a,{appear:"",show:m.show,as:"template"},{default:l(()=>[t(n,{as:"div",class:"relative z-10"},{default:l(()=>[t(c,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>o[1]||(o[1]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),e("div",oe,[e("div",ne,[t(c,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[t(h,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",le,[t(p,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>o[2]||(o[2]=[e("img",{src:E,class:"w-8 h-8 mr-2"},null,-1),S(" View Specimen ")])),_:1}),e("button",{onClick:o[0]||(o[0]=(...r)=>i.handleClick&&i.handleClick(...r))},[t(x,{class:"w-5 h-5"})])]),e("div",ie,[e("div",re,[o[3]||(o[3]=e("label",{class:"font-semibold text-lg"},"Name",-1)),e("p",ce,T(d.data.name),1)]),e("div",de,[o[4]||(o[4]=e("label",{class:"font-semibold text-lg"},"Preferred name",-1)),e("p",ue,T(d.data.preferred_name),1)]),e("div",me,[o[5]||(o[5]=e("label",{class:"font-semibold text-lg"},"Description",-1)),e("div",{innerHTML:d.data.description||"No description available",class:"text-gray-600"},null,8,pe)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const _e=G(ae,[["render",fe]]),ve={class:"fixed inset-0 overflow-y-auto"},xe={class:"flex min-h-full items-center justify-center p-4 text-center"},ye={class:"border-b px-3 py-3 flex items-center justify-between"},he={class:"mt-2 space-y-3"},ge={class:"w-full flex items-center px-5"},be={class:"w-full flex flex-col space-y-2"},we={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"},ke=F({__name:"index",props:{data:{type:Object,required:!0}},emits:["update"],setup(y,{emit:o}){const d=y,g=o,m=Q,i=u(!1),v=W,c=u(!1),p=()=>{i.value=!i.value},x=()=>{O("submitForm")},h=async()=>{c.value=!0;const n={route:`${M.specimens}/${d.data.id}`,method:"PUT",body:d.data},{pending:a,error:r,data:f}=await A(n);c.value=a,f.value&&(p(),P().$toast.success("Specimen type updated successfully!"),c.value=!1,g("update",!0)),r.value&&(P().$toast.error("An error occurred, please try again!"),p(),console.log(r.value),c.value=!1)};return(n,a)=>{const r=U,f=_("FormKit"),k=J;return w(),D("div",null,[t(r,{click:p,text:"Edit",icon:s(m),color:"success"},null,8,["icon"]),t(s(j),{appear:"",show:s(i),as:"template"},{default:l(()=>[t(s(B),{as:"div",class:"relative z-10"},{default:l(()=>[t(s($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>a[1]||(a[1]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),e("div",ve,[e("div",xe,[t(s($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[t(s(q),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[e("div",ye,[t(s(I),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>a[2]||(a[2]=[S(" Edit Specimen ")])),_:1}),e("button",{onClick:p},[t(s(N),{class:"w-5 h-5"})])]),t(f,{type:"form","submit-label":"Update",onSubmit:h,actions:!1,id:"submitForm"},{default:l(({value:V})=>[e("div",he,[e("div",ge,[e("div",be,[t(f,{type:"text",label:"Preferred name",validation:"required",modelValue:y.data.preferred_name,"onUpdate:modelValue":a[0]||(a[0]=C=>y.data.preferred_name=C)},null,8,["modelValue"])])]),e("div",we,[t(k,{text:"Clear form",color:"error",type:"button",click:()=>{x()}},null,8,["click"]),t(r,{type:"submit",click:()=>{},color:"success",loading:s(c),icon:s(v),text:"Save changes"},null,8,["loading","icon"])])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),Ce={class:"py-5 px-5"},$e={class:"flex items-center justify-between py-5"},Te={class:"text-2xl font-semibold flex items-center uppercase"},De={class:"flex justify-end w-full px-2 py-2 mb-2"},Se={class:"py-2 flex items-center space-x-2"},Ge=F({__name:"specimen-types",setup(y){se({title:`${te.name.toUpperCase()} - Specimen Types`});const o=u("Specimen Types"),d=u([]),g=u([{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}]),m=u(!1),i=u(""),v=u(""),c=u([{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"preferred name",value:"preferred_name",sortable:!0},{text:"nlims code",value:"nlims_code",sortable:!0},{text:"description",value:"description",sortable:!0,html:!0},{text:"actions",value:"actions",sortable:!1}]),p=n=>{v.value=n,i.value=n},x=async()=>{m.value=!0;const n={route:M.specimens,method:"GET"},{data:a,error:r,pending:f}=await A(n);m.value=f.value,a.value&&(d.value=a.value),r.value&&console.error(r.value)},h=n=>{n&&x()};return X(()=>{x()}),(n,a)=>{const r=H,f=R,k=_e,V=ke,C=Z;return w(),D("div",Ce,[t(r,{pages:s(g)},null,8,["pages"]),e("div",$e,[e("div",Te,[a[1]||(a[1]=e("img",{src:E,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1)),S(" "+T(s(o)),1)])]),e("div",De,[t(f,{search:s(i),"onUpdate:search":a[0]||(a[0]=b=>z(i)?i.value=b:null),onUpdate:p},null,8,["search"])]),("usePermissions"in n?n.usePermissions:s(ee))().can.manage("test_catalog")?(w(),K(C,{key:0,headers:s(c),data:s(d),loading:s(m),"search-value":s(v)},{actions:l(({item:b})=>[e("div",Se,[t(k,{data:b},null,8,["data"]),t(V,{data:b,onUpdate:h},null,8,["data"])])]),_:1},8,["headers","data","loading","search-value"])):L("",!0)])}}});export{Ge as default};

import{_ as W}from"./DnsJT0Ia.js";import{d as J,r as I,a as j,b as c,e as f,f as l,h as o,z as r,Y as N,p as O,g as e,G,V as z,j as T,q as K,i as M,v as U,t as p,F as P,k as S,K as D,C as Q,P as Z,S as X,A as ee,l as B,m as L,u as E,_ as R,n as te,D as se,E as oe,x as H,y as w,s as ae,B as ne,az as le,L as V}from"./DV-4n8jq.js";import{_ as ie}from"./BJL1Ko1G.js";import{_ as re}from"./BWAaMzqE.js";import{r as ce}from"./DI-kCbV4.js";import{_ as de}from"./GLfqwz9U.js";import{u as A}from"./rUbZliJN.js";import{P as ue}from"./C10gm716.js";import{u as pe}from"./CokWNKn_.js";import{r as me}from"./D6vWl-Mh.js";import{_ as fe}from"./VmwGiaas.js";import"./8wCHL_pn.js";import"./BXROeG0Z.js";import"./DFrTCvSB.js";import"./PUvLgkXr.js";import"./DsmsN33b.js";const _e={class:"fixed inset-0 overflow-y-auto"},he={class:"flex min-h-full items-center justify-center p-4 text-center"},xe={class:"border-b px-3 py-3 flex items-center justify-between"},ye={class:"flex items-center justify-center mx-auto my-20"},ge={class:"space-y-3 px-5 py-5"},ve={class:"w-full flex flex-col space-y-1"},we={class:"w-full flex flex-col space-y-1"},be={class:"w-full flex flex-col space-y-1"},Te={class:"w-full flex flex-col space-y-1"},ke={class:"w-full flex flex-col space-y-1"},$e={class:"flex flex-wrap gap-2"},Ce={class:"w-full flex flex-col space-y-1"},De={class:"flex flex-wrap gap-2"},Ee={key:0},Ie={class:"w-full flex flex-col space-y-1"},Pe={class:"w-full flex flex-col space-y-1"},Se={class:"w-full flex flex-col space-y-1"},Ve=J({__name:"index",props:{data:{type:Object,required:!0}},setup(i){const n=i,_=ee,d=I(!1),t=I(!1),a=I({}),u=j("token"),m=async()=>{h(),t.value=!0;const y={route:`${B.viewTestType}/${n.data.id}`,method:"GET",token:`${u.value}`},{data:s,error:g,pending:x}=await L(y);t.value=x,s.value&&(a.value=s.value,t.value=!1),g.value&&(t.value=!1,E().$toast.error("An error occurred, please try again!"))},h=()=>{d.value=!d.value};return(y,s)=>{const g=R,x=te;return c(),f("div",null,[l(g,{click:m,color:"primary",text:"View",icon:o(_)},null,8,["icon"]),l(o(X),{appear:"",show:o(d),as:"template"},{default:r(()=>[l(o(N),{as:"div",class:"relative z-10"},{default:r(()=>[l(o(O),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>s[1]||(s[1]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-50"},null,-1)])),_:1}),e("div",_e,[e("div",he,[l(o(O),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[l(o(G),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>{var k,$,b,C,F,q;return[e("div",xe,[l(o(z),{as:"h3",class:"text-lg flex items-center font-semibold leading-6"},{default:r(()=>s[2]||(s[2]=[e("img",{src:re,class:"w-8 h-8 mr-2"},null,-1),T(" Test Type Details ")])),_:1}),e("button",{onClick:s[0]||(s[0]=()=>{h()})},[l(o(K),{class:"w-5 h-5"})])]),M(e("div",ye,[l(x,{loading:o(t)},null,8,["loading"])],512),[[U,o(t)]]),M(e("div",ge,[e("div",ve,[s[3]||(s[3]=e("label",{class:"font-semibold text-lg"},"Name",-1)),e("p",null,p((k=o(a))==null?void 0:k.name),1)]),e("div",we,[s[4]||(s[4]=e("label",{class:"font-semibold text-lg"},"Short Name",-1)),e("p",null,p(($=o(a))==null?void 0:$.short_name),1)]),e("div",be,[s[5]||(s[5]=e("label",{class:"font-semibold text-lg"},"Laboratory Section",-1)),e("p",null,p((C=(b=o(a))==null?void 0:b.department)==null?void 0:C.name),1)]),e("div",Te,[s[6]||(s[6]=e("label",{class:"font-semibold text-lg"},"Specific Sex",-1)),e("p",null,p(o(a).sex),1)]),e("div",ke,[s[7]||(s[7]=e("label",{class:"font-semibold text-lg"},"Compatible Specimen",-1)),e("div",$e,[(c(!0),f(P,null,S(o(a).specimens,v=>(c(),f("p",{key:v},p(`${v.name}`),1))),128))])]),e("div",Ce,[s[8]||(s[8]=e("label",{class:"font-semibold text-lg"},"Organisms",-1)),e("div",De,[(c(!0),f(P,null,S(o(a).organisms,(v,Y)=>(c(),f("p",{key:v},[T(p(`${v.name}`),1),Y!==o(a).organisms.length-1?(c(),f("span",Ee,",")):D("",!0)]))),128))])]),e("div",Ie,[s[9]||(s[9]=e("label",{class:"font-semibold text-lg"},"Measure",-1)),(c(!0),f(P,null,S(o(a).indicators,v=>(c(),f("p",{key:v},p(`${v.name}`),1))),128))]),e("div",Pe,[s[10]||(s[10]=e("label",{class:"font-semibold text-lg"},"Expected Turn Around Time",-1)),e("p",null,p(`${(F=o(a).expected_turn_around_time)==null?void 0:F.value} ${(q=o(a).expected_turn_around_time)==null?void 0:q.unit}`),1)]),e("div",Se,[s[11]||(s[11]=e("label",{class:"font-semibold text-lg"},"Date Created",-1)),e("p",null,p(o(Q)(o(a).created_date).format("DATE_FORMAT"in y?y.DATE_FORMAT:o(Z))),1)])],512),[[U,!o(t)]])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),Ae={components:{TransitionRoot:X,TransitionChild:O,Dialog:N,DialogPanel:G,DialogTitle:z,XMarkIcon:K,ExclamationTriangleIcon:se},data(){return{show:!1,deleteIcon:ce,loading:!1,cookie:j("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(i){this.loading=!0;const n={route:`${B.testTypes}/${i}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{data:_,error:d,pending:t}=await L(n);this.loading=t,_.value&&(this.handleClick(),E().$toast.success(`${this.data.name} test type deleted successfully!`),this.loading=!1,this.$emit("update",!0)),d.value&&(console.error(d.value),E().$toast.error(oe),this.loading=!1)},handleClick(){this.show=!this.show}}},Oe={class:"fixed inset-0 overflow-y-auto"},je={class:"flex min-h-full items-center justify-center p-4 text-center"},Be={class:"border-b px-3 py-3 flex items-center justify-between"},Le={class:"mt-2 space-y-3 px-5"},Re={class:"rounded px-2 py-2"},Fe={class:"font-semibold text-red-500"},qe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Me(i,n,_,d,t,a){const u=R,m=w("TransitionChild"),h=w("ExclamationTriangleIcon"),y=w("DialogTitle"),s=w("XMarkIcon"),g=w("FormKit"),x=w("DialogPanel"),k=w("Dialog"),$=w("TransitionRoot");return c(),f("div",null,[l(u,{click:a.handleClick,color:"error",text:"Delete",icon:t.deleteIcon},null,8,["click","icon"]),l($,{appear:"",show:t.show,as:"template"},{default:r(()=>[l(k,{as:"div",class:"relative z-10"},{default:r(()=>[l(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>n[3]||(n[3]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),e("div",Oe,[e("div",je,[l(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[l(x,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",Be,[l(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[l(h,{class:"h-5 w-5 mr-2"}),n[4]||(n[4]=T(" Confirm delete "))]),_:1}),e("button",{onClick:n[0]||(n[0]=(...b)=>a.handleClick&&a.handleClick(...b))},[l(s,{class:"w-5 h-5"})])]),l(g,{type:"form","submit-label":"Update",onSubmit:n[2]||(n[2]=b=>a.deleteData(_.data.id)),actions:!1},{default:r(({value:b})=>[e("div",Le,[e("div",Re,[n[5]||(n[5]=T(" Do you really want to delete ")),e("span",Fe,p(_.data.name),1),n[6]||(n[6]=T("? Note that once this action is completed, it can not be undone "))]),l(g,{type:"textarea",label:"Reason",validation:"required",modelValue:t.reason,"onUpdate:modelValue":n[1]||(n[1]=C=>t.reason=C)},null,8,["modelValue"])]),e("div",qe,[l(u,{loading:t.loading,type:"submit",click:()=>{},color:"error",icon:t.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ue=H(Ae,[["render",Me]]),Ne={components:{MagnifyingGlassIcon:me},setup(){pe({title:`${ue.name.toUpperCase()} - Test Types`})},data(){return{header:"Test Types",loading:!0,addIcon:ae,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],editIcon:ne,showEdit:!1,serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},search:"",testTypes:new Array,cookie:j("token"),headers:[{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"expected turn around time",value:"expected_turn_around_time"},{text:"actions",value:"actions"}],searchField:"name",searchValue:""}},created(){this.init(),(this._.provides[le]||this.$route).query.create&&E().$toast.success("Test type created successfully!")},methods:{async init(){const{page:i,rowsPerPage:n}=this.serverOptions;this.loading=!0;const _={route:`${B.testTypes}?page=${i}&per_page=${n}&search=${this.search}`,method:"GET",token:`${this.cookie}`,body:{}};let{data:d,error:t,pending:a}=await L(_);this.loading=a,d.value&&(this.testTypes=d.value.test_types.map(u=>{var m,h;return{...u,expected_turn_around_time:`${u.expected_turn_around_time!==null?((m=u.expected_turn_around_time)==null?void 0:m.value)+" "+(u.expected_turn_around_time.unit==null?"":(h=u.expected_turn_around_time.unit)==null?void 0:h.toLowerCase()):""}`}}),this.serverItemsLength=d.value.meta.total_count),t.value&&console.error(t.value)},updateTestTypes(i){typeof i=="object"&&(this.serverOptions=i),this.init()},updateSearch(i){this.searchValue=i,this.search=i,this.updateTestTypes(!0)},edit(i){this.showEdit=!0},navigateToEdit(i){const n=i.name.trim().toLowerCase().replace(/[\s\W-]+/g,"-").replace(/^-+|-+$/g,"");this.$router.push(`/test-catalog/test-types/edit/${n}?testType=${i.id}`)},createTestType(){this.$router.push("/test-catalog/test-types/create")}}},Ge={class:"px-5 py-5"},ze={class:"flex items-center justify-between py-5"},Ke={class:"text-2xl font-semibold flex items-center uppercase"},Xe={class:"flex items-center space-x-3"},He={class:"flex justify-end w-full px-2 py-2 mb-2"},Ye={class:"py-2 flex items-center space-x-2"};function We(i,n,_,d,t,a){const u=W,m=R,h=ie,y=Ve,s=Ue,g=de;return c(),f("div",Ge,[l(u,{pages:t.pages},null,8,["pages"]),e("div",ze,[e("div",Ke,[n[0]||(n[0]=e("img",{src:fe,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1)),T(" "+p(t.header),1)]),e("div",Xe,[("usePermissions"in i?i.usePermissions:o(A))().can.manage("test_catalog")?(c(),V(m,{key:0,text:"Create Test Type",icon:t.addIcon,color:"primary",click:a.createTestType},null,8,["icon","click"])):D("",!0)])]),e("div",He,[("usePermissions"in i?i.usePermissions:o(A))().can.manage("test_catalog")?(c(),V(h,{key:0,search:t.search,onUpdate:a.updateSearch},null,8,["search","onUpdate"])):D("",!0)]),("usePermissions"in i?i.usePermissions:o(A))().can.manage("test_catalog")?(c(),V(g,{key:0,headers:t.headers,data:t.testTypes,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:a.updateTestTypes},{actions:r(({item:x})=>[e("div",Ye,[l(y,{onEdit:a.edit,open:t.showEdit,data:x},null,8,["onEdit","open","data"]),l(m,{click:()=>{a.navigateToEdit(x)},color:"success",text:"Edit",icon:t.editIcon},null,8,["click","icon"]),l(s,{onUpdate:a.updateTestTypes,data:x},null,8,["onUpdate","data"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])):D("",!0)])}const mt=H(Ne,[["render",We]]);export{mt as default};

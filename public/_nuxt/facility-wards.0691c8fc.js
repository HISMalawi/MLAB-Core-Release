import{_ as A}from"./Breadcrumb.vue.29096239.js";import{a as T,b as w,_ as k,g as n,o as C,c as D,e as t,d as e,h as s,i as y,f as $,t as B,u as K}from"./entry.8b130418.js";import{_ as O}from"./OutlinedButton.7de08d36.js";import{e as W}from"./constants.71ae81d4.js";import{r as X,e as I,f as U,a as z}from"./fetch.6ed6d8be.js";import{r as P}from"./XMarkIcon.2df3c244.js";import{r as G}from"./UserIcon.b4088a14.js";import{r as q}from"./ArrowDownTrayIcon.40f31273.js";import{r as H}from"./ArrowUturnLeftIcon.92012f67.js";import{S as V,h as j,U as R,G as M,V as S}from"./transition.0c9cdf07.js";import{_ as J}from"./SearchBar.3d64840b.js";import{r as Q,a as E}from"./PencilSquareIcon.e8095535.js";import{r as F}from"./TrashIcon.373049c3.js";import{_ as Y}from"./Datatable.fefdb3df.js";import{P as Z}from"./package.651db5f9.js";import{r as ee}from"./MagnifyingGlassIcon.a1000dd2.js";import{r as te}from"./ArrowUpOnSquareIcon.8a22795c.js";import"./nuxt-link.a6b19347.js";import"./HomeIcon.75dd900a.js";import"./network.9f9ddcab.js";import"./PrinterIcon.55ff5c9e.js";import"./hidden.94b93f99.js";import"./Loader.d7f1913d.js";const oe={components:{TransitionRoot:V,TransitionChild:j,Dialog:R,DialogPanel:M,DialogTitle:S,XMarkIcon:P,UserIcon:G},data(){return{open:!1,addIcon:X,saveIcon:q,clearIcon:H,name:"",description:"",loading:!1,cookie:T("token")}},methods:{async submitForm(){this.loading=!0;let l={route:I.sections,method:"POST",token:`${this.cookie}`,body:{name:this.name}};const{pending:a,error:c,data:r}=await U(l);this.loading=a,r.value&&(this.handleClick(),w().$toast.success(`${this.name} ward created successfully!`),this.name="",this.loading=!1,this.$emit("update",!0)),c.value&&(this.handleClick(),console.log(c.value),w().$toast.success(W),this.loading=!1)},handleClick(){this.open=!this.open}}},ae=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ne={class:"fixed inset-0 overflow-y-auto"},se={class:"flex min-h-full items-center justify-center p-4 text-center"},ie={class:"border-b px-3 py-3 flex items-center justify-between"},le={class:"mt-2 space-y-3"},ce={class:"w-full flex items-center px-5"},re={class:"w-full flex flex-col space-y-2"},de={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function me(l,a,c,r,o,i){const m=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("FormKit"),_=O,g=n("DialogPanel"),p=n("Dialog"),b=n("TransitionRoot");return C(),D("div",null,[t("div",null,[e(m,{text:"Create ward",color:"primary",icon:o.addIcon,click:i.handleClick},null,8,["icon","click"])]),e(b,{appear:"",show:o.open,as:"template"},{default:s(()=>[e(p,{as:"div",onClose:i.handleClick,class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[ae]),_:1}),t("div",ne,[t("div",se,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",ie,[e(f,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:s(()=>[y(" Create ward ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...v)=>i.handleClick&&i.handleClick(...v))},[e(h,{class:"w-5 h-5"})])]),e(u,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:v})=>[t("div",le,[t("div",ce,[t("div",re,[e(u,{type:"text",label:"Name",validation:"required",modelValue:o.name,"onUpdate:modelValue":a[1]||(a[1]=x=>o.name=x)},null,8,["modelValue"])])]),t("div",de,[e(_,{text:"Clear form",color:"error",type:"button",click:()=>{}}),e(m,{type:"submit",click:()=>{},color:"success",loading:o.loading,icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const ue=k(oe,[["render",me]]),L=""+new URL("home_alt.25ad17d0.svg",import.meta.url).href,pe={components:{TransitionRoot:V,TransitionChild:j,Dialog:R,DialogPanel:M,DialogTitle:S,XMarkIcon:P},data(){return{viewIcon:Q,show:!1,editIcon:E}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},_e=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),fe={class:"fixed inset-0 overflow-y-auto"},he={class:"flex min-h-full items-center justify-center p-4 text-center"},ge={class:"border-b px-3 py-3 flex items-center justify-between"},ve=t("img",{src:L,class:"w-8 h-8 mr-2"},null,-1),xe={class:"px-5 py-5"},ye={class:"w-full flex flex-col space-y-2"},we=t("label",{class:"font-medium"},"Name",-1),be={class:"underline"};function ke(l,a,c,r,o,i){const m=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("DialogPanel"),_=n("Dialog"),g=n("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(g,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(_,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[_e]),_:1}),t("div",fe,[t("div",he,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(u,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",ge,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[ve,y(" View ward ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...p)=>i.handleClick&&i.handleClick(...p))},[e(h,{class:"w-5 h-5"})])]),t("div",xe,[t("div",ye,[we,t("p",be,B(c.data.name),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ce=k(pe,[["render",ke]]),De={components:{TransitionRoot:V,TransitionChild:j,Dialog:R,DialogPanel:M,DialogTitle:S,XMarkIcon:P},data(){return{editIcon:E,show:!1,saveIcon:q,loading:!1,cookie:T("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;let l={route:`${I.sections}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data};const{pending:a,error:c,data:r}=await U(l);this.loading=a,r.value&&(this.handleClick(),w().$toast.success("Ward updated successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(w().$toast.success(W),this.handleClick(),console.log(c.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Te=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),$e={class:"fixed inset-0 overflow-y-auto"},Ie={class:"flex min-h-full items-center justify-center p-4 text-center"},Ue={class:"border-b px-3 py-3 flex items-center justify-between"},Pe=t("img",{src:L,class:"w-8 h-8 mr-2"},null,-1),Ve={class:"mt-2 space-y-3"},je={class:"w-full flex items-center px-5"},Re={class:"w-full flex flex-col space-y-2"},Me={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Se(l,a,c,r,o,i){const m=$,d=n("TransitionChild"),f=n("DialogTitle"),h=n("XMarkIcon"),u=n("FormKit"),_=O,g=n("DialogPanel"),p=n("Dialog"),b=n("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,text:"Edit",icon:o.editIcon,color:"success"},null,8,["click","icon"]),e(b,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(p,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[Te]),_:1}),t("div",$e,[t("div",Ie,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Ue,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[Pe,y(" Edit ward ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...v)=>i.handleClick&&i.handleClick(...v))},[e(h,{class:"w-5 h-5"})])]),e(u,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:v})=>[t("div",Ve,[t("div",je,[t("div",Re,[e(u,{type:"text",label:"Name",validation:"required",modelValue:c.data.name,"onUpdate:modelValue":a[1]||(a[1]=x=>c.data.name=x)},null,8,["modelValue"])])]),t("div",Me,[e(_,{text:"Clear form",color:"error",type:"button",click:()=>{}}),e(m,{type:"submit",click:()=>{},color:"success",loading:o.loading,icon:o.saveIcon,text:"Save changes"},null,8,["loading","icon"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Be=k(De,[["render",Se]]),Oe={components:{TransitionRoot:V,TransitionChild:j,Dialog:R,DialogPanel:M,DialogTitle:S,XMarkIcon:P,ExclamationTriangleIcon:z},data(){return{show:!1,deleteIcon:F,loading:!1,reason:""}},props:{data:{type:Object,required:!0}},setup(){return{cookie:T("token")}},methods:{async deleteData(l){this.loading=!0;let a={route:`${I.sections}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}};const{pending:c,error:r,data:o}=await U(a);this.loading=c,o.value&&(this.handleClick(),w().$toast.success("Ward deleted successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(w().$toast.success(W),console.log(r.value),this.loading=!1)},handleClick(){this.show=!this.show}}},We=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Xe={class:"fixed inset-0 overflow-y-auto"},qe={class:"flex min-h-full items-center justify-center p-4 text-center"},Ee={class:"border-b px-3 py-3 flex items-center justify-between"},Fe={class:"mt-2 space-y-3 px-5"},Le={class:"rounded px-2 py-2"},Ne={class:"font-semibold text-red-500"},Ae={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function Ke(l,a,c,r,o,i){const m=$,d=n("TransitionChild"),f=n("ExclamationTriangleIcon"),h=n("DialogTitle"),u=n("XMarkIcon"),_=n("FormKit"),g=O,p=n("DialogPanel"),b=n("Dialog"),v=n("TransitionRoot");return C(),D("div",null,[e(m,{click:i.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(v,{appear:"",show:o.show,as:"template"},{default:s(()=>[e(b,{as:"div",class:"relative z-10"},{default:s(()=>[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[We]),_:1}),t("div",Xe,[t("div",qe,[e(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[t("div",Ee,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[e(f,{class:"h-5 w-5 mr-2"}),y(" Confirm delete ")]),_:1}),t("button",{onClick:a[0]||(a[0]=(...x)=>i.handleClick&&i.handleClick(...x))},[e(u,{class:"w-5 h-5"})])]),e(_,{type:"form","submit-label":"Update",onSubmit:a[2]||(a[2]=x=>i.deleteData(c.data.id)),actions:!1},{default:s(({value:x})=>[t("div",Fe,[t("div",Le,[y(" Do you really want to delete "),t("span",Ne,B(c.data.name),1),y("? Note that once this action is completed, it can not be undone ")]),e(_,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":a[1]||(a[1]=N=>o.reason=N)},null,8,["modelValue"])]),t("div",Ae,[e(g,{text:"Cancel"}),e(m,{loading:o.loading,type:"submit",click:()=>{},color:"error",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ze=k(Oe,[["render",Ke]]),Ge={components:{MagnifyingGlassIcon:ee},setup(){K({title:`${Z.name.toUpperCase()} - Wards`})},data(){return{header:"List of wards",pages:[{name:"Home",link:"/home"},{name:"Lab Configuration",link:"#"}],addIcon:X,deleteIcon:F,viewIcon:te,headers:[{text:"ID",value:"id",sortable:!0},{text:"Name",value:"name",sortable:!0},{text:"Actions",value:"actions"}],wards:new Array,cookie:T("token"),loading:!1,search:"",searchValue:"",searchField:"name",serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init()},methods:{async init(){this.loading=!0;const{page:l,rowsPerPage:a}=this.serverOptions,c={route:`${I.sections}?page=${l}&per_page=${a}&search=${this.search}`,method:"GET",token:`${this.cookie}`},{data:r,error:o,pending:i}=await U(c);this.loading=i,r.value&&(this.wards=r.value.data,this.loading=!1,this.serverItemsLength=r.value.meta.total_count),o.value&&(console.log(o.value),this.loading=!1)},updateWards(l){typeof l=="object"&&(this.serverOptions=l),this.init()},updateSearch(l){typeof l=="string"&&(this.search=l,this.searchValue=l,this.updateWards(!0))}}},He={class:"py-5 px-5"},Je={class:"flex items-center justify-between py-5"},Qe={class:"text-2xl font-semibold"},Ye={class:"flex justify-end w-full px-2 py-2 mb-2"},Ze={class:"py-2 flex items-center space-x-2"};function et(l,a,c,r,o,i){const m=A,d=ue,f=J,h=Ce,u=Be,_=ze,g=Y;return C(),D("div",He,[e(m,{pages:o.pages},null,8,["pages"]),t("div",Je,[t("h3",Qe,B(o.header),1),e(d,{onUpdate:i.updateWards},null,8,["onUpdate"])]),t("div",Ye,[e(f,{search:o.search,onUpdate:i.updateSearch},null,8,["search","onUpdate"])]),e(g,{headers:o.headers,data:o.wards,loading:o.loading,"search-value":o.searchValue,"search-field":"name",serverItemsLength:o.serverItemsLength,serverOptions:o.serverOptions,onUpdate:i.updateWards},{actions:s(({item:p})=>[t("div",Ze,[e(h,{data:p},null,8,["data"]),e(u,{data:p,onUpdate:i.updateWards},null,8,["data","onUpdate"]),e(_,{data:p,onUpdate:i.updateWards},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value","serverItemsLength","serverOptions","onUpdate"])])}const Ct=k(Ge,[["render",et]]);export{Ct as default};

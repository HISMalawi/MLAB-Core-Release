import{d as w,r as M,b7 as F,c as R,b8 as N,b9 as $,a7 as c,a2 as L,ba as j,bb as K,bc as P,ac as k,a3 as D,bd as _,be as A,o as V,ae as U,aP as Z,av as x,af as q,ag as v,bf as H,aj as E,bg as O,a6 as Q,b as J,e as W,g as z}from"./BXyMujmX.js";import{s as G}from"./CzikmzDu.js";import{p as X,u as Y,f as ee,c as g}from"./CIiMT7Ls.js";import{i as te}from"./7U3-4Wga.js";var ae=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(ae||{}),ne=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(ne||{});function le(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let C=Symbol("MenuContext");function T(a){let f=q(C,null);if(f===null){let I=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(I,T),I}return f}let ie=w({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:f,attrs:I}){let m=M(1),b=M(null),d=M(null),e=M([]),s=M(""),u=M(null),h=M(1);function S(t=l=>l){let l=u.value!==null?e.value[u.value]:null,n=Q(t(e.value.slice()),p=>c(p.dataRef.domRef)),o=l?n.indexOf(l):null;return o===-1&&(o=null),{items:n,activeItemIndex:o}}let r={menuState:m,buttonRef:b,itemsRef:d,items:e,searchQuery:s,activeItemIndex:u,activationTrigger:h,closeMenu:()=>{m.value=1,u.value=null},openMenu:()=>m.value=0,goToItem(t,l,n){let o=S(),p=ee(t===g.Specific?{focus:g.Specific,id:l}:{focus:t},{resolveItems:()=>o.items,resolveActiveIndex:()=>o.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.disabled});s.value="",u.value=p,h.value=n??1,e.value=o.items},search(t){let l=s.value!==""?0:1;s.value+=t.toLowerCase();let n=(u.value!==null?e.value.slice(u.value+l).concat(e.value.slice(0,u.value+l)):e.value).find(p=>p.dataRef.textValue.startsWith(s.value)&&!p.dataRef.disabled),o=n?e.value.indexOf(n):-1;o===-1||o===u.value||(u.value=o,h.value=1)},clearSearch(){s.value=""},registerItem(t,l){let n=S(o=>[...o,{id:t,dataRef:l}]);e.value=n.items,u.value=n.activeItemIndex,h.value=1},unregisterItem(t){let l=S(n=>{let o=n.findIndex(p=>p.id===t);return o!==-1&&n.splice(o,1),n});e.value=l.items,u.value=l.activeItemIndex,h.value=1}};return F([b,d],(t,l)=>{var n;r.closeMenu(),N(l,$.Loose)||(t.preventDefault(),(n=c(b))==null||n.focus())},R(()=>m.value===0)),L(C,r),j(R(()=>K(m.value,{0:P.Open,1:P.Closed}))),()=>{let t={open:m.value===0,close:r.closeMenu};return k({ourProps:{},theirProps:a,slot:t,slots:f,attrs:I,name:"Menu"})}}}),ve=w({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:f,slots:I,expose:m}){var b;let d=(b=a.id)!=null?b:`headlessui-menu-button-${D()}`,e=T("MenuButton");m({el:e.buttonRef,$el:e.buttonRef});function s(r){switch(r.key){case v.Space:case v.Enter:case v.ArrowDown:r.preventDefault(),r.stopPropagation(),e.openMenu(),x(()=>{var t;(t=c(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(g.First)});break;case v.ArrowUp:r.preventDefault(),r.stopPropagation(),e.openMenu(),x(()=>{var t;(t=c(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(g.Last)});break}}function u(r){switch(r.key){case v.Space:r.preventDefault();break}}function h(r){a.disabled||(e.menuState.value===0?(e.closeMenu(),x(()=>{var t;return(t=c(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(r.preventDefault(),e.openMenu(),le(()=>{var t;return(t=c(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let S=G(R(()=>({as:a.as,type:f.type})),e.buttonRef);return()=>{var r;let t={open:e.menuState.value===0},{...l}=a,n={ref:e.buttonRef,id:d,type:S.value,"aria-haspopup":"menu","aria-controls":(r=c(e.itemsRef))==null?void 0:r.id,"aria-expanded":e.menuState.value===0,onKeydown:s,onKeyup:u,onClick:h};return k({ourProps:n,theirProps:l,slot:t,attrs:f,slots:I,name:"MenuButton"})}}}),ce=w({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:f,slots:I,expose:m}){var b;let d=(b=a.id)!=null?b:`headlessui-menu-items-${D()}`,e=T("MenuItems"),s=M(null);m({el:e.itemsRef,$el:e.itemsRef}),te({container:R(()=>c(e.itemsRef)),enabled:R(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function u(t){var l;switch(s.value&&clearTimeout(s.value),t.key){case v.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case v.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let n=e.items.value[e.activeItemIndex.value];(l=c(n.dataRef.domRef))==null||l.click()}e.closeMenu(),O(c(e.buttonRef));break;case v.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(g.Next);case v.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(g.Previous);case v.Home:case v.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(g.First);case v.End:case v.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(g.Last);case v.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),x(()=>{var n;return(n=c(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case v.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),x(()=>H(c(e.buttonRef),t.shiftKey?E.Previous:E.Next));break;default:t.key.length===1&&(e.search(t.key),s.value=setTimeout(()=>e.clearSearch(),350));break}}function h(t){switch(t.key){case v.Space:t.preventDefault();break}}let S=_(),r=R(()=>S!==null?(S.value&P.Open)===P.Open:e.menuState.value===0);return()=>{var t,l;let n={open:e.menuState.value===0},{...o}=a,p={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(l=c(e.buttonRef))==null?void 0:l.id,id:d,onKeydown:u,onKeyup:h,role:"menu",tabIndex:0,ref:e.itemsRef};return k({ourProps:p,theirProps:o,slot:n,attrs:f,slots:I,features:A.RenderStrategy|A.Static,visible:r.value,name:"MenuItems"})}}}),de=w({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:f,attrs:I,expose:m}){var b;let d=(b=a.id)!=null?b:`headlessui-menu-item-${D()}`,e=T("MenuItem"),s=M(null);m({el:s,$el:s});let u=R(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===d:!1),h=X(s),S=R(()=>({disabled:a.disabled,get textValue(){return h()},domRef:s}));V(()=>e.registerItem(d,S)),U(()=>e.unregisterItem(d)),Z(()=>{e.menuState.value===0&&u.value&&e.activationTrigger.value!==0&&x(()=>{var i,y;return(y=(i=c(s))==null?void 0:i.scrollIntoView)==null?void 0:y.call(i,{block:"nearest"})})});function r(i){if(a.disabled)return i.preventDefault();e.closeMenu(),O(c(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(g.Nothing);e.goToItem(g.Specific,d)}let l=Y();function n(i){l.update(i)}function o(i){l.wasMoved(i)&&(a.disabled||u.value||e.goToItem(g.Specific,d,0))}function p(i){l.wasMoved(i)&&(a.disabled||u.value&&e.goToItem(g.Nothing))}return()=>{let{disabled:i,...y}=a,B={active:u.value,disabled:i,close:e.closeMenu};return k({ourProps:{id:d,ref:s,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,onClick:r,onFocus:t,onPointerenter:n,onMouseenter:n,onPointermove:o,onMousemove:o,onPointerleave:p,onMouseleave:p},theirProps:{...I,...y},slot:B,attrs:I,slots:f,name:"MenuItem"})}}});function pe(a,f){return J(),W("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[z("path",{"fill-rule":"evenodd",d:"M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm2.25 8.5a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Zm0 3a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Z","clip-rule":"evenodd"})])}export{ce as M,ve as S,de as b,ie as g,pe as r};

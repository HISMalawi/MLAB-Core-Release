import{_ as E}from"./CGGtvusN.js";import{_ as q}from"./xP1hbB7h.js";import{s as L,S as N,p as U,Y as F,G as H,V as X,q as z,z as B,x as f,b as C,e as V,f as s,y as d,g as e,j as G,t as _,h as o,L as O,_ as j,d as Y,r as n,c as Q,o as J,w as K,A as $,H as M,C as A}from"./D6i_IOc_.js";import{r as W}from"./DlFmXbdc.js";import{r as R}from"./-mp5v0R0.js";import{_ as Z}from"./CsTCrd2P.js";import{S as ee}from"./v49nXNIB.js";import{P as te}from"./BZSIQZRS.js";import{u as oe}from"./DWAwhHUi.js";import{u as se}from"./BQtaNKsZ.js";import{r as ae}from"./nQf0Gylo.js";import"./By9LU-fN.js";import"./DWXm4k5R.js";const ne={components:{TransitionRoot:N,TransitionChild:U,Dialog:F,DialogPanel:H,DialogTitle:X,XMarkIcon:z},data(){return{viewIcon:W,show:!1,editIcon:R,moment:B}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},le={class:"fixed inset-0 overflow-y-auto"},ie={class:"flex min-h-full items-center justify-center p-4 text-center"},ce={class:"border-b px-3 py-3 flex items-center justify-between"},re={class:"mt-2 space-y-3 px-5"},de={class:"w-full flex flex-col space-y-1"},me={class:"w-full flex flex-col space-y-1"},ue={class:"w-full flex flex-col space-y-1"},pe={class:"w-full flex flex-col space-y-1"},fe={class:"w-full flex flex-col space-y-1"},_e={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function ve(k,t,l,P,m,v){const a=j,h=f("TransitionChild"),i=f("DialogTitle"),y=f("XMarkIcon"),w=f("DialogPanel"),g=f("Dialog"),D=f("TransitionRoot");return C(),V("div",null,[s(a,{click:v.handleClick,color:"primary",text:"View",icon:m.viewIcon},null,8,["click","icon"]),s(D,{appear:"",show:m.show,as:"template"},{default:d(()=>[s(g,{as:"div",class:"relative z-10"},{default:d(()=>[s(h,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>t[1]||(t[1]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),e("div",le,[e("div",ie,[s(h,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[s(w,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[e("div",ce,[s(i,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:d(()=>t[2]||(t[2]=[G(" View Stock ")])),_:1}),e("button",{onClick:t[0]||(t[0]=(...x)=>v.handleClick&&v.handleClick(...x))},[s(y,{class:"w-5 h-5"})])]),e("div",re,[e("div",de,[t[3]||(t[3]=e("label",{class:"font-semibold text-lg"},"Name",-1)),e("p",null,_(l.data.stock_item.name),1)]),e("div",me,[t[4]||(t[4]=e("label",{class:"font-semibold text-lg"},"Description",-1)),e("p",null,_(l.data.stock_item.description),1)]),e("div",ue,[t[5]||(t[5]=e("label",{class:"font-semibold text-lg"},"Location",-1)),e("p",null,_(l.data.stock_location.name),1)]),e("div",pe,[t[6]||(t[6]=e("label",{class:"font-semibold text-lg"},"Quantity",-1)),e("p",null,_(l.data.quantity),1)]),e("div",fe,[t[7]||(t[7]=e("label",{class:"font-semibold text-lg"},"Date modified",-1)),e("p",null,_(m.moment(l.data.updated_date).format("DATE_FORMAT"in k?k.DATE_FORMAT:o(O))),1)])]),e("div",_e,[s(a,{click:()=>{k.$router.push("/stock-management/stock-items")},icon:m.editIcon,text:"Edit",color:"success"},null,8,["click","icon"])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ge=L(ne,[["render",ve]]),xe={class:"px-5 py-5"},ke={class:"flex items-center justify-between py-5"},he={class:"text-2xl font-semibold"},ye={class:"flex items-center justify-end py-5"},we={class:"py-2 flex items-center space-x-2"},je=Y({__name:"stock",setup(k){oe({title:`${te.name.toUpperCase()} - Stock`});const{can:t}=se(),l=n("Stock"),P=ae,m=R,v=n([{name:"Home",link:"/home"},{name:"Stock Management",link:"#"}]),a=n(""),h=n([{text:"name",value:"stock_item.name",sortable:!0},{text:"description",value:"stock_item.description",sortable:!1},{text:"quantity",value:"quantity",sortable:!1},{text:"date modified",value:"updated_date",sortable:!1},{text:"actions",value:"actions",sortable:!1}]),i=n(!1),y=n(0),w=n([]),g=n({page:1,rowsPerPage:25,sortBy:"name"}),D=Q(()=>w.value.map(c=>({...c,updated_date:B(c.updated_date).format(O)}))),x=async(c={page:1,rowsPerPage:25})=>{i.value=!0;const u=new ee,{page:T,rowsPerPage:S}=c;let I=`?page=${T}&per_page=${S}&search=${a.value}`;const{data:p,error:b,pending:r}=await u.getStock("",I);i.value=r,p.value&&(i.value=!1,w.value=p.value.data,y.value=p.value.meta.total_count),b.value&&(i.value=!1,console.error(b.value))};return J(()=>{x()}),K(a,()=>{x()}),(c,u)=>{const T=E,S=q,I=ge,p=j,b=Z;return C(),V("div",xe,[s(T,{pages:o(v)},null,8,["pages"]),e("div",ke,[e("h3",he,_(o(l)),1)]),e("div",ye,[s(S,{search:o(a),"onUpdate:search":u[0]||(u[0]=r=>$(a)?a.value=r:null)},null,8,["search"])]),e("div",null,[s(b,{headers:o(h),data:o(D),loading:o(i),"search-field":"name","search-value":o(a),serverItemsLength:o(y),serverOptions:o(g),"onUpdate:serverOptions":u[1]||(u[1]=r=>$(g)?g.value=r:null),onUpdate:x},{actions:d(({item:r})=>[e("div",we,[s(I,{data:r},null,8,["data"]),o(t).manage("stock_management")?(C(),M(p,{key:0,click:()=>{c.$router.push("/stock-management/stock-items")},text:"Edit",color:"success",icon:o(m)},null,8,["click","icon"])):A("",!0),o(t).manage("stock_management")?(C(),M(p,{key:1,click:()=>{c.$router.push("/stock-management/stock-items")},text:"Delete",color:"error",icon:o(P)},null,8,["click","icon"])):A("",!0)])]),_:1},8,["headers","data","loading","search-value","serverItemsLength","serverOptions"])])])}}});export{je as default};

import{_ as g}from"./COwqssE_.js";import{_ as v}from"./k_xLN92M.js";import{A as x,a as y,C as c,aD as R,l as D,m as k,u as b,E as w,x as V,y as m,b as C,e as I,f as n,g as r,j as P,z as M,_ as F}from"./CdnNfM7G.js";import{_ as O}from"./RzMDAWdt.js";import{P as S}from"./Crjae1dH.js";import{u as A}from"./CHeiuEic.js";import{r as B}from"./BAFQr4Vz.js";import{r as E}from"./vWE61jKV.js";import"./CvehVmcI.js";import"./DHgaMDqz.js";const U={setup(){A({title:`${S.name.toUpperCase()} - Patient Report`})},components:{MagnifyingGlassIcon:B,FunnelIcon:E},data(){return{headers:[{text:"patient id",value:"client_id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"sex",value:"sex",sortable:!0},{text:"date of birth",value:"date_of_birth",sortable:!0},{text:"actions",value:"actions"}],patients:new Array,pages:[{name:"Home",link:"/home"},{name:"Reports",link:"#"}],search:"",loading:!1,viewIcon:x,cookie:y("token"),selectedDateRange:["",""],serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},searchField:"name",searchValue:""}},created(){this.init()},computed:{filteredPatients(){return this.patients.map(e=>({...e,name:`${e.first_name} ${e.middle_name?e.middle_name:""} ${e.last_name}`.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),date_of_birth:c(e.date_of_birth).format(R)}))}},methods:{updateSearch(e){this.searchValue=e,this.search=e,this.updatePatients(!0)},updatePatients(e){typeof e=="object"&&(this.serverOptions=e),this.init()},async init(){this.loading=!0;const{page:e,rowsPerPage:s}=this.serverOptions;let d=this.selectedDateRange!==null&&this.selectedDateRange[0].toString()!=""?c(this.selectedDateRange[0].toString()).format("YYYY-MM-DD"):"",p=this.selectedDateRange!==null&&this.selectedDateRange[1].toString()!=""?c(this.selectedDateRange[1].toString()).format("YYYY-MM-DD"):"";const t={route:`${D.clients}?page=${e}&per_page=${s}&search=${this.search}&from=${d}&to=${p}`,method:"GET",token:`${this.cookie}`};let{data:a,error:o,pending:i}=await k(t);this.loading=i,a.value&&(this.patients=a.value.clients,this.serverItemsLength=a.value.meta.total_count),o.value&&(console.error(o.value.data),b().$toast.error(`${w}`))},dateClicked(){this.init()},async viewReport(e){this.$router.push(`/reports/daily/patient-report/${e.client_id}`)}}},Y={class:"px-5 py-5"},$={class:"w-full flex items-center justify-between"},j={class:"bg-gray-100 pl-2.5 rounded flex items-center text-zinc-500"},L={class:"w-72 ml-2"},N={class:"flex justify-end px-2 py-2 mb-2"},T={class:"py-2 flex items-center space-x-2"};function q(e,s,d,p,t,a){const o=g,i=m("FunnelIcon"),u=m("datepicker"),h=v,_=F,f=O;return C(),I("div",Y,[n(o,{pages:t.pages},null,8,["pages"]),s[2]||(s[2]=r("div",{class:"flex items-center justify-between py-5"},[r("h3",{class:"text-2xl font-semibold uppercase"},"Patient reports")],-1)),r("div",$,[r("div",j,[n(i,{class:"w-5 h-5 mr-2"}),s[1]||(s[1]=P(" Filter By Date Range ")),r("div",L,[n(u,{required:"",position:"left",placeholder:"select start & end date",range:!0,"input-class-name":"datepicker",format:"dd/MM/yyyy",modelValue:t.selectedDateRange,"onUpdate:modelValue":[s[0]||(s[0]=l=>t.selectedDateRange=l),a.dateClicked]},null,8,["modelValue","onUpdate:modelValue"])])]),r("div",N,[n(h,{search:t.search,onUpdate:a.updateSearch},null,8,["search","onUpdate"])])]),n(f,{headers:t.headers,data:a.filteredPatients,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:a.updatePatients},{actions:M(({item:l})=>[r("div",T,[n(_,{click:()=>a.viewReport(l),color:"primary",text:"View Report",icon:t.viewIcon},null,8,["click","icon"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])])}const te=V(U,[["render",q]]);export{te as default};

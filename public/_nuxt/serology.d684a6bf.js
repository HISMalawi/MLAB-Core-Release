import{_ as H}from"./Breadcrumb.vue.6f7f01db.js";import{_ as P}from"./Dropdown.4d3ae079.js";import{m as q,u as I,s as l,a as U,g as z,o as S,c as O,d as p,l as a,e,i as B,y as K,h as W,t as r,F as X,r as Z,b as E,f as ee}from"./entry.5bdb8488.js";import{_ as te}from"./ExportButton.vue.5df487c6.js";import{_ as oe}from"./Address.vue.869786e0.js";import{e as re}from"./constants.b04a9525.js";import{_ as se}from"./report.7a140d4e.js";import{_ as ae}from"./logo.c6f04d8d.js";import{e as L,f as Y}from"./fetch.7dc9d831.js";import{u as ne}from"./facility.988108e3.js";import{P as ce}from"./package.62af87d2.js";import{r as le}from"./FunnelIcon.542e27f6.js";import{r as de}from"./ArrowPathIcon.f4019e96.js";import"./nuxt-link.e30313a8.js";import"./HomeIcon.db590299.js";import"./listbox.61dbc330.js";import"./hidden.b0c25628.js";import"./use-text-value.54a66864.js";import"./CheckIcon.79090b5a.js";import"./CheckCircleIcon.ba0cf2d5.js";import"./MagnifyingGlassIcon.d967f597.js";import"./network.3c519541.js";import"./transition.ad4c8a99.js";import"./XMarkIcon.49b75dff.js";import"./PencilSquareIcon.551b626a.js";import"./PrinterIcon.df26e017.js";const pe={class:"px-5 py-5"},ie=e("div",{class:"py-5"},[e("div",{class:"text-2xl font-semibold flex items-center uppercase"},[e("img",{src:se,class:"w-8 h-8 mr-2"}),B(" Serology Report ")])],-1),me={class:"w-full flex justify-between py-5"},be={class:"flex items-center space-x-3"},ye={class:"bg-gray-100 pl-2.5 rounded flex items-center text-zinc-500"},ue={class:"w-36 ml-2 bg-white"},_e={class:"border rounded"},xe={class:"rounded-tr rounded-tl border-b px-5 py-5 flex items-center justify-between"},he=e("div",{class:"flex flex-col space-y-2"},[e("img",{src:ae,alt:"app-logo",class:"w-24 h-24 object-cover"}),e("h3",{class:"text-xl font-semibold"}," SEROLOGY MoH LABORATORY REPORT ")],-1),fe={class:"px-4 py-2.5 font-medium"},ge={class:"font-normal"},ve={class:"overflow-x-auto rounded border-t"},ke={class:"overflow-x-auto"},we=e("thead",{class:"border-b"},[e("tr",{class:"w-full bg-gray-50"},[e("th",{class:"px-4 py-2 border-r"},"Laboratory Service"),e("th",{class:"px-4 py-2 border-r"},"Jan"),e("th",{class:"px-4 py-2 border-r"},"Feb"),e("th",{class:"px-4 py-2"},"March"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q1"),e("th",{class:"px-4 py-2 border-r"},"Apr"),e("th",{class:"px-4 py-2 border-r"},"May"),e("th",{class:"px-4 py-2"},"Jun"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q2"),e("th",{class:"px-4 py-2 border-r"},"Jul"),e("th",{class:"px-4 py-2 border-r"},"Aug"),e("th",{class:"px-4 py-2"},"Sep"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q3"),e("th",{class:"px-4 py-2 border-r"},"Oct"),e("th",{class:"px-4 py-2 border-r"},"Nov"),e("th",{class:"px-4 py-2"},"Dev"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"},"Total Q4 "),e("th",{class:"px-4 py-2 bg-green-600 text-white border border-green-400"},"Total")])],-1),De={class:"px-4 py-2 text-left border-r border-b"},Re={class:"px-4 py-2 text-center border-r border-b"},Qe={class:"px-4 py-2 text-center border-r border-b"},je={class:"px-4 py-2 text-center border-b"},Te={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},$e={class:"px-4 py-2 text-center border-r border-b"},Ae={class:"px-4 py-2 text-center border-r border-b"},Se={class:"px-4 py-2 text-center border-b"},Oe={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},Ee={class:"px-4 py-2 text-center border-r border-b"},Be={class:"px-4 py-2 text-center border-r border-b"},Ce={class:"px-4 py-2 text-center border-b"},Me={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},Fe={class:"px-4 py-2 text-center border-r border-b"},Le={class:"px-4 py-2 text-center border-r border-b"},Ye={class:"px-4 py-2 text-center border-b"},Je={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"},Ne={class:"px-4 py-2 text-center bg-green-600 border text-white border-green-400"},ut=q({__name:"serology",setup(Ve){I({title:`${ce.name.toUpperCase()} - Serology Report`}),l("");const J=l([{name:"Home",link:"/home"},{name:"Reports",link:"#"},{name:"MoH Diagnistic Reports",link:"#"}]);l([]);const m=l([]);l([]);const n=l({name:"select year"}),C=l([]),M=U("token"),b=l(),k=ne(),F=l([]);async function N(){const c={route:`${L.reportIndicators}?department=Serology`,method:"GET",token:`${M.value}`},{data:o,error:d,pending:x}=await Y(c);o.value&&o.value.map(i=>{m.value.push({indicator:i,jan:"!",feb:"!",mar:"!",totalQ1:"!",apr:"!",may:"!",june:"!",totalQ2:"!",jul:"!",aug:"!",sept:"!",totalQ3:"!",oct:"!",nov:"!",dec:"!",totalQ4:"!",total:"!"})}),d.value&&console.error(d.value)}async function V(){if(n.value.name=="select year")E().$toast.warning("Please select a year");else{b.value=!0;const c={route:`${L.mohReport}serology?year=${n.value.name}`,method:"GET",token:`${M.value}`},{data:o,error:d,pending:x}=await Y(c);if(b.value=x,o.value){let i=new Array;m.value.map(s=>{let y=o.value.january[s.indicator],u=o.value.february[s.indicator],t=o.value.march[s.indicator],_=o.value.april[s.indicator],w=o.value.may[s.indicator],D=o.value.june[s.indicator],R=o.value.july[s.indicator],Q=o.value.august[s.indicator],j=o.value.september[s.indicator],T=o.value.october[s.indicator],$=o.value.november[s.indicator],A=o.value.december[s.indicator],h=y+u+t,f=_+w+D,g=R+Q+j,v=T+$+A;i.push({indicator:s.indicator,jan:y,feb:u,mar:t,totalQ1:h,apr:_,may:w,june:D,totalQ2:f,jul:R,aug:Q,sept:j,totalQ3:g,oct:T,nov:$,dec:A,totalQ4:v,total:h+f+g+v}),F.value.push({"Laboratory Service":s.indicator,January:y,February:u,March:t,"Total Q1":h,April:_,May:w,June:D,"Total Q2":f,July:R,August:Q,September:j,"Total Q3":g,October:T,November:$,December:A,"Total Q4":v,Total:h+f+g+v})}),m.value=new Array,m.value.push(...i),b.value=!1,E().$toast.success("Report data generated successfully!")}d.value&&(b.value=!1,console.error(d.value),E().$toast.success(re))}}function G(){for(let c=new Date().getFullYear();c>=2e3;c--)C.value.push({name:c.toString(),id:c})}return N(),G(),(c,o)=>{const d=H,x=P,i=ee,s=te,y=z("excel"),u=oe;return S(),O("div",pe,[p(d,{pages:a(J)},null,8,["pages"]),ie,e("div",me,[e("div",be,[e("div",ye,[p(a(le),{class:"w-5 h-5 mr-2"}),B(" Filter By Year "),e("div",ue,[p(x,{items:a(C),modelValue:a(n),"onUpdate:modelValue":o[0]||(o[0]=t=>K(n)?n.value=t:null)},null,8,["items","modelValue"])])]),p(i,{class:"mt-1",loading:a(b),click:()=>{V()},color:"primary",icon:a(de),text:"Generate report"},null,8,["loading","click","icon"])]),e("div",null,[p(y,{class:"btn btn-default",header:[`SEROLOGY MoH LABORATORY REPORT ${a(n).name}`,a(k).details.name,a(k).details.address,a(k).details.phone],data:a(F),worksheet:"report-work-sheet",name:`moh_serology_report_${a(n).name}.xls`},{default:W(()=>[p(s,{text:"Export Excel"})]),_:1},8,["header","data","name"])])]),e("div",_e,[e("div",xe,[he,p(u)]),e("div",null,[e("h3",fe,[B("Data for the year: "),e("span",ge,r(a(n).name=="select year"?"-:-":a(n).name),1)])]),e("div",ve,[e("table",ke,[we,e("tbody",null,[(S(!0),O(X,null,Z(a(m),(t,_)=>(S(),O("tr",{class:"px-2",key:_},[e("td",De,r(t.indicator),1),e("td",Re,r(t.jan),1),e("td",Qe,r(t.feb),1),e("td",je,r(t.mar),1),e("td",Te,r(t.totalQ1),1),e("td",$e,r(t.apr),1),e("td",Ae,r(t.may),1),e("td",Se,r(t.june),1),e("td",Oe,r(t.totalQ2),1),e("td",Ee,r(t.jul),1),e("td",Be,r(t.aug),1),e("td",Ce,r(t.sept),1),e("td",Me,r(t.totalQ3),1),e("td",Fe,r(t.oct),1),e("td",Le,r(t.nov),1),e("td",Ye,r(t.dec),1),e("td",Je,r(t.totalQ4),1),e("td",Ne,r(t.total),1)]))),128))])])])])])}}});export{ut as default};

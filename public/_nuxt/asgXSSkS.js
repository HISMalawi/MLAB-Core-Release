import{d as T,r as p,a as C,c as $,m as w,b as x,e as y,g as e,J as M,f as n,h as t,p as v,y as S,n as U,t as r,F as V,j as I,u as b,_ as A}from"./CFJLM_Ie.js";import{_ as F}from"./ClsdQHz_.js";import{_ as O}from"./C51bwEc_.js";import{e as Y}from"./Zs5V9wEc.js";import{_ as B}from"./D4WvItVE.js";import{h as u,e as L,f as j}from"./NSQCzdgw.js";import{u as D}from"./DEAa7C1n.js";import{r as P}from"./BL5kvFFC.js";import{r as q}from"./DVj5woSA.js";import"./C6QRH5hM.js";import"./CXlG2fUz.js";import"./B307KWXK.js";import"./BwWK-syC.js";import"./Dhp4HNmj.js";import"./BmAKWF52.js";import"./ccM_rzRE.js";const z={class:"w-full flex items-center justify-between mb-10"},J={class:"flex flex-row items-center bg-gray-100 rounded-l pl-2 font-normal text-zinc-500"},H={class:"w-44 ml-2"},K={class:"w-48"},Q={class:"rounded border",id:"print-container"},W={class:"rounded-tr rounded-tl border-b px-5 py-5 flex items-center justify-between"},X=e("div",{class:"flex flex-col space-y-2"},[e("img",{src:B,alt:"app-logo",class:"w-24 h-24 object-cover"}),e("h3",{class:"text-xl font-semibold"},"CULTURE & SENSITIVITY GENERAL COUNTS REPORT ")],-1),Z={class:"px-4 py-2.5 font-medium"},ee={class:"font-normal"},te={class:"w-full mt-2",ref:"table"},oe={class:"w-full border-b border-t bg-gray-100 rounded-t"},se={class:"w-full"},re={class:"border-b"},ae={class:"px-2 py-2 text-center border-r"},ne={class:"px-2 py-2 text-center border-r"},le={class:"px-2 py-2 text-center border-r"},ie={class:"px-2 py-2 text-center border-r"},ce={class:"px-2 py-2 text-center"},ke=T({__name:"general-counts",setup(de){const o=p(""),N=C("token"),_=D(),l=p(!1),s=p({Growth:0,"No growth":0,"Mixed growth; no predominant organism":0,"Growth of normal flora; no pathogens isolated":0,"Growth of contaminants":0}),g=p([{name:"Growth"},{name:"No Growth"},{name:"Mixed Growth:  No Predominant Organism"},{name:"Growth Normal Flora: No Pathogens Isolated"},{name:"Growth: Contaminations"}]),E=$(()=>g.value.map(i=>({NAME:i.name,COUNT:s.value[i.name]||0})));async function G(){l.value=!0;let i=u(o.value).format("M"),a=u(o.value).format("yyyy");const f={route:`${L.aggregateReports}culture/general_counts?year=${a}&month=${i}`,method:"GET",token:`${N.value}`},{data:c,error:d,pending:h}=await j(f);l.value=h,c.value&&(s.value=c.value.data,l.value=!1,b().$toast.success("Report data generated successfully")),d.value&&(console.error(d.value),l.value=!1,b().$toast.error(Y))}return(i,a)=>{const f=w("datepicker"),c=A,d=F,h=w("excel"),R=O;return x(),y("div",null,[e("div",z,[e("form",{onSubmit:a[1]||(a[1]=M(m=>G(),["prevent"])),class:"flex items-center space-x-5"},[e("div",J,[n(t(P),{class:"w-4 h-4 mr-2"}),v(" Filter by date "),e("div",H,[n(f,{placeholder:"month & year",required:"","input-class-name":"custom-input",modelValue:t(o),"onUpdate:modelValue":a[0]||(a[0]=m=>S(o)?o.value=m:null),range:!1,format:"M/yyyy",position:"left"},null,8,["modelValue"])])]),e("div",K,[n(c,{type:"submit",color:"primary",text:"Generate Report",icon:t(q),click:()=>{},loading:t(l)},null,8,["icon","loading"])])],32),e("div",null,[n(h,{class:"btn btn-default",header:[`CULTURE & SENSITIVITY GENERAL COUNTS REPORT ${t(o)}`,t(_).details.name,t(_).details.address,t(_).details.phone,"",""],data:t(E),worksheet:"report-work-sheet",name:`culture_sensitivity_general_counts_report_${t(u)(t(o)).format("M_YYYY")}.xls`},{default:U(()=>[n(d,{text:"Export Excel",icon:"excel.png"})]),_:1},8,["header","data","name"])])]),e("div",Q,[e("div",W,[X,n(R)]),e("div",null,[e("h3",Z,[v("Data for period: "),e("span",ee,r(t(o)==""?"-":t(u)(t(o)).format("M/yyyy")),1)])]),e("table",te,[e("thead",oe,[e("tr",se,[(x(!0),y(V,null,I(t(g),(m,k)=>(x(),y("th",{class:"px-2 py-2 border-r",key:k},r(m.name),1))),128))])]),e("tbody",null,[e("tr",re,[e("td",ae,r(t(s).Growth),1),e("td",ne,r(t(s)["No growth"]),1),e("td",le,r(t(s)["Mixed growth; no predominant organism"]),1),e("td",ie,r(t(s)["Growth of normal flora; no pathogens isolated"]),1),e("td",ce,r(t(s)["Growth of contaminants"]),1)])])],512)])])}}});export{ke as default};

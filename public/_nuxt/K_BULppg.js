import{W as x,d as B,r as d,c as F,w as L,o as N,m as R,b as i,e as u,f as m,h as o,y as z,i as D,v as H,g as K,F as M,j as $,t as j,s as q}from"./JBsVKZmo.js";import{r as E}from"./rvUhT-B_.js";const I=x("search",{state:()=>({recent:[]}),actions:{addRecent(a){this.recent.includes(a)||this.recent.push(a)}},persist:{storage:localStorage}}),O={class:"relative"},T={key:0,class:"absolute z-50 top-full left-0 w-full bg-white rounded-md shadow-md"},U=["onClick"],J=B({__name:"SearchBar",props:{search:{required:!0,type:String},placeholder:{required:!1,type:String,default:"Search..."}},emits:["update","update:search"],setup(a,{emit:f}){const v=a,p=f,t=d(v.search),n=d([]),r=d(!1),c=I(),g=()=>{let e=t.value.trim();p("update",e),p("update:search",e),e&&e.length>=4&&!n.value.includes(e)&&(n.value.unshift(e),y(e))},y=e=>{c.addRecent(e),c.recent.length>20&&c.recent.pop()},S=()=>{n.value=c.recent},w=e=>n.value.filter(s=>s.toLowerCase().includes(e.toLowerCase().trim())),V=e=>{t.value=e,r.value=!1},_=()=>{setTimeout(()=>{r.value=!1},200)},C=()=>{t.value="",r.value=!1},h=F(()=>w(t.value).slice(0,5));return L(t,()=>{g()}),N(()=>{S()}),(e,s)=>{const b=R("FormKit");return i(),u("div",O,[m(b,{label:"",type:"search",modelValue:o(t),"onUpdate:modelValue":s[0]||(s[0]=l=>z(t)?t.value=l:null),modelModifiers:{lazy:!0},placeholder:a.placeholder,delay:1e3,"prefix-icon":"searchIcon",autocomplete:"off",onBlur:_,onFocus:s[1]||(s[1]=l=>r.value=!0)},null,8,["modelValue","placeholder"]),D(K("button",{onClick:C,class:"absolute inset-y-0 right-0 flex items-center pr-3"},[m(o(E),{class:"w-5 h-5 mt-2"})],512),[[H,o(t)!==""]]),o(r)&&o(h).length>0?(i(),u("ul",T,[(i(!0),u(M,null,$(o(h),(l,k)=>(i(),u("li",{key:k,onClick:W=>V(l),class:"px-3 py-2 hover:bg-gray-100 cursor-pointer"},j(l),9,U))),128))])):q("",!0)])}}});export{J as _};

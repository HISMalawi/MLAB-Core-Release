import{_ as d}from"./Breadcrumb.vue.7a457d8b.js";import{_}from"./SearchBar.e319ad24.js";import{u,a as f,b as g,_ as v,o as x,c as b,d as o,e as i,h as y,f as k}from"./entry.18364f1c.js";import{_ as w}from"./Datatable.9ecef914.js";import{d as P,e as C}from"./constants.86829aaf.js";import{h as I,e as V,f as B}from"./fetch.5f03fbcc.js";import{P as O}from"./package.b965e1b0.js";import{r as R}from"./MagnifyingGlassIcon.570b6e64.js";import{r as U}from"./PencilSquareIcon.5a78d442.js";import"./nuxt-link.eb4fc10e.js";import"./HomeIcon.8d531f3f.js";import"./XMarkIcon.13f92378.js";import"./Loader.888095c3.js";import"./transition.bca0aae9.js";import"./hidden.d8a7e9c3.js";import"./PrinterIcon.46fc5b73.js";const $={setup(){u({title:`${O.name.toUpperCase()} - Patient Report`})},components:{MagnifyingGlassIcon:R},data(){return{headers:[{text:"patient id",value:"client_id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"sex",value:"sex",sortable:!0},{text:"date of birth",value:"date_of_birth",sortable:!0},{text:"actions",value:"actions"}],patients:new Array,pages:[{name:"Home",link:"/home"},{name:"Reports",link:"#"}],search:"",loading:!1,viewIcon:U,cookie:f("token"),serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},searchField:"name",searchValue:""}},created(){this.init()},computed:{filteredPatients(){return this.patients.map(e=>({...e,name:`${e.first_name} ${e.middle_name} ${e.last_name}`.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),date_of_birth:I(e.date_of_birth).format(P)}))}},methods:{updateSearch(e){this.searchValue=e,this.search=e,this.updatePatients(!0)},updatePatients(e){typeof e=="object"&&(this.serverOptions=e),this.init()},async init(){this.loading=!0;const{page:e,rowsPerPage:r}=this.serverOptions,n={route:`${V.clients}?page=${e}&per_page=${r}&search=${this.search}`,method:"GET",token:`${this.cookie}`,body:{}};let{data:a,error:t,pending:s}=await B(n);this.loading=s,a.value&&(this.patients=a.value.clients,this.serverItemsLength=a.value.meta.total_count),t.value&&(console.log(t.value.data),g().$toast.error(`${C}`))},async viewReport(e){this.$router.push(`/reports/daily/patient-report/${e.client_id}`)}}},F={class:"px-5 py-5"},L=i("div",{class:"flex items-center justify-between py-5"},[i("h3",{class:"text-2xl font-semibold"},"Patient reports")],-1),j={class:"flex justify-end w-full px-2 py-2 mb-2"},A={class:"py-2 flex items-center space-x-2"};function N(e,r,n,a,t,s){const c=d,p=_,l=k,m=w;return x(),b("div",F,[o(c,{pages:t.pages},null,8,["pages"]),L,i("div",j,[o(p,{search:t.search,onUpdate:s.updateSearch},null,8,["search","onUpdate"])]),o(m,{headers:t.headers,data:s.filteredPatients,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:s.updatePatients},{actions:y(({item:h})=>[i("div",A,[o(l,{click:()=>s.viewReport(h),color:"primary",text:"View Report",icon:t.viewIcon},null,8,["click","icon"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])])}const ee=v($,[["render",N]]);export{ee as default};

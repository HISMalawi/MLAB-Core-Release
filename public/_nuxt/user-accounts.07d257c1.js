import{_ as te}from"./Breadcrumb.vue.7f5c1701.js";import{o as h,c as v,d as t,u as q,a as A,_ as R,f as i,b as o,g as d,h as S,w as U,i as $,e as M,v as F,t as k,F as K,r as H,j as Y}from"./entry.d8806b4d.js";import{_ as E}from"./OutlinedButton.b4acccf9.js";import{e as J}from"./constants.6be6ca46.js";import{r as Q,e as y,f as w,h as se,a as oe}from"./fetch.a5dd36ac.js";import{r as P}from"./XMarkIcon.c6ea15dc.js";import{r as X}from"./UserIcon.e312027e.js";import{r as W}from"./ArrowDownTrayIcon.d81bcd7a.js";import{r as G}from"./ArrowUturnLeftIcon.7e172025.js";import{S as j,h as N,U as B,G as L,V as O}from"./transition.47325ebf.js";import{_ as le}from"./SearchBar.af0363a8.js";import{_ as Z}from"./Loader.05846428.js";import{r as ae,a as ee}from"./PencilSquareIcon.7a888707.js";import{_ as ne}from"./Datatable.4dace9b6.js";import{u as ie}from"./vue.f36acd1f.6a8c9096.js";import{P as re}from"./package.2c43f7b3.js";import{r as de}from"./MagnifyingGlassIcon.f7cd7505.js";import"./nuxt-link.ac17f1f4.js";import"./HomeIcon.2ec025f1.js";import"./PrinterIcon.907e547a.js";import"./hidden.492e3e8e.js";function ce(l,s){return h(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z","clip-rule":"evenodd"})])}const ue={components:{TransitionRoot:j,TransitionChild:N,Dialog:B,DialogPanel:L,DialogTitle:O,XMarkIcon:P,UserIcon:X},data(){return{open:!1,addIcon:Q,saveIcon:W,clearIcon:G,departmentSelected:null,departments:new Array,rawDepartments:new Array,cookie:q("token"),roles:new Array,rawRoles:new Array,roleSelected:null,firstName:"",middleName:"",lastName:"",username:"",sex:"",password:"",confirmPassword:"",dateOfBirth:"",loading:!1,maxDate:(()=>{const l=new Date;return l.setFullYear(l.getFullYear()-14),l.setDate(l.getDate()+1),l})()}},methods:{async loadRoles(){const l={route:y.roles,method:"GET",token:`${this.cookie}`},{data:s,error:n}=await w(l);s.value&&(this.rawRoles=s.value,s.value.map(c=>{this.roles.push(c.name)})),n.value&&console.error(n.value)},async loadDepartments(){const l={route:y.departments,method:"GET",token:`${this.cookie}`},{data:s,error:n}=await w(l);s.value&&(this.rawDepartments=s.value,s.value.map(c=>{this.departments.push(c.name)})),n.value&&console.error(n.value)},async submitForm(){this.loading=!0;let l=new Array,s=new Array;this.departmentSelected!=null&&this.departmentSelected.map(u=>{this.rawDepartments.filter(r=>{u==r.name&&l.push(Number(r.id))})}),this.roleSelected!=null&&this.roleSelected.map(u=>{this.rawRoles.filter(r=>{u==r.name&&s.push(r.id)})});const n={route:y.users,method:"POST",token:`${this.cookie}`,body:{person:{first_name:this.firstName,middle_name:this.middleName,last_name:this.lastName,sex:this.sex,date_of_birth:this.dateOfBirth},user:{username:this.username,password:this.password},roles:s,departments:l}},{data:c,error:e,pending:a}=await w(n);this.loading=a,c.value&&(this.handleClick(),A().$toast.success("User created successfully!"),this.$emit("update",!0),this.loading=!1),e.value&&(this.handleClick(),A().$toast.error(J),this.loading=!1,console.error(e.value))},async init(){await this.loadDepartments(),await this.loadRoles(),this.handleClick()},clearForm(){this.$formkit.reset("submitForm")},handleClick(){this.open=!this.open}}},z=""+new URL("person.534f8b85.svg",import.meta.url).href,me=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),pe={class:"fixed inset-0 overflow-y-auto"},_e={class:"flex min-h-full items-center justify-center p-4 text-center"},fe={class:"border-b px-3 py-3 flex items-center justify-between"},he=t("img",{src:z,class:"w-8 h-8 mr-2"},null,-1),ve={class:"mt-2 space-y-3 px-5"},ge={class:"grid grid-cols-2 gap-4"},xe={class:"grid grid-cols-2 gap-4"},ye={class:"grid grid-cols-2 gap-4"},we={class:"flex items-center"},be=t("label",{class:"mr-5 font-medium text-lg"},"Sex",-1),ke={class:"flex items-center"},Ve=t("span",{class:"ml-2"},"Male",-1),Ce={class:"flex items-center ml-2"},De=t("span",{class:"ml-2"},"Female",-1),Ue={class:"w-full flex flex-col"},Te={class:"w-full flex flex-col space-y-2"},Ie=t("label",{class:"font-medium"},"Select Role(s)",-1),Se={class:"w-full flex flex-col"},Ae={class:"w-full flex flex-col space-y-2"},qe=t("label",{class:"font-medium"},"Select Lab Section(s)",-1),Re={class:"px-5"},$e=t("p",{class:"py-2 font-medium text-base"},"Date Of Birth",-1),Fe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Me(l,s,n,c,e,a){const u=M,r=i("TransitionChild"),V=i("DialogTitle"),C=i("XMarkIcon"),f=i("FormKit"),_=i("multi-select"),b=i("datepicker"),g=E,x=i("DialogPanel"),D=i("Dialog"),T=i("TransitionRoot");return h(),v("div",null,[t("div",null,[o(u,{text:"Add user",color:"primary",icon:e.addIcon,click:a.init},null,8,["icon","click"])]),o(T,{appear:"",show:e.open,as:"template"},{default:d(()=>[o(D,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:d(()=>[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[me]),_:1}),t("div",pe,[t("div",_e,[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[o(x,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[t("div",fe,[o(V,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:d(()=>[he,S(" Add user ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...I)=>a.handleClick&&a.handleClick(...I))},[o(C,{class:"w-5 h-5"})])]),o(f,{type:"form",id:"submitForm","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:d(({value:I})=>[t("div",ve,[t("div",ge,[o(f,{type:"text",label:"Username",validation:"required",modelValue:e.username,"onUpdate:modelValue":s[1]||(s[1]=m=>e.username=m)},null,8,["modelValue"]),o(f,{type:"text",label:"First name",modelValue:e.firstName,"onUpdate:modelValue":s[2]||(s[2]=m=>e.firstName=m),validation:"required"},null,8,["modelValue"])]),t("div",xe,[o(f,{type:"text",label:"Middle name",modelValue:e.middleName,"onUpdate:modelValue":s[3]||(s[3]=m=>e.middleName=m)},null,8,["modelValue"]),o(f,{type:"text",label:"Last name",validation:"required",modelValue:e.lastName,"onUpdate:modelValue":s[4]||(s[4]=m=>e.lastName=m)},null,8,["modelValue"])]),o(f,{type:"group"},{default:d(()=>[t("div",ye,[o(f,{type:"password",label:"Password",name:"password",validation:"required",modelValue:e.password,"onUpdate:modelValue":s[5]||(s[5]=m=>e.password=m),"validation-visibility":"live"},null,8,["modelValue"]),o(f,{type:"password",label:"Confirm password",name:"password_confirm",validation:"required|confirm","validation-label":"Password confirmation","validation-visibility":"live"})])]),_:1}),t("div",we,[be,t("label",ke,[U(t("input",{required:"","onUpdate:modelValue":s[6]||(s[6]=m=>e.sex=m),type:"radio",value:"M",name:"gender",class:"w-4 h-4 rounded-full bg-sky-500 border-sky-800 text-sky-500 focus:ring-sky-800"},null,512),[[$,e.sex]]),Ve]),t("label",Ce,[U(t("input",{required:"","onUpdate:modelValue":s[7]||(s[7]=m=>e.sex=m),type:"radio",value:"F",name:"gender",class:"w-4 h-4 rounded-full bg-sky-500 border-sky-800 text-sky-500 focus:ring-sky-800"},null,512),[[$,e.sex]]),De])]),t("div",Ue,[t("div",Te,[Ie,o(_,{style:{"--ms-max-height":"none !important"},modelValue:e.roleSelected,"onUpdate:modelValue":s[8]||(s[8]=m=>e.roleSelected=m),options:e.roles,mode:"tags",searchable:!0,required:!0,clear:"",class:"outline-none focus:ring-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",Se,[t("div",Ae,[qe,o(_,{style:{"--ms-max-height":"none !important"},modelValue:e.departmentSelected,"onUpdate:modelValue":s[9]||(s[9]=m=>e.departmentSelected=m),options:e.departments,mode:"tags",searchable:!0,required:!0,clear:"",class:"outline-none focus:ring-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])])]),t("div",Re,[$e,o(b,{range:!1,"input-class-name":"datepicker",format:"dd/MM/yyyy",position:"left",placeholder:"select date of birth",modelValue:e.dateOfBirth,"onUpdate:modelValue":s[10]||(s[10]=m=>e.dateOfBirth=m)},null,8,["modelValue"])]),t("div",Fe,[o(g,{type:"button",click:()=>{a.clearForm()},text:"Clear form"},null,8,["click"]),o(u,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.saveIcon,text:"Save Changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const Pe=R(ue,[["render",Me]]),je={components:{TransitionRoot:j,TransitionChild:N,Dialog:B,DialogPanel:L,DialogTitle:O,XMarkIcon:P,UserIcon:X},props:{data:{required:!0,type:Object}},data(){return{moment:se,open:!1,addIcon:Q,viewIcon:ae,editIcon:ee,clearIcon:G,details:{id:"",username:"",first_name:"",last_name:"",middle_name:"",sex:"",date_of_birth:"",roles:new Array,departments:new Array},loading:!1,cookie:q("token")}},methods:{async init(){this.loading=!0;const l={route:`${y.users}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:s,error:n,pending:c}=await w(l);this.loading=c,s.value&&(this.details=s.value,this.loading=!1,this.adjustVisibility()),n.value&&(console.error(n.value),this.loading=!1)},adjustVisibility(){this.open=!this.open}}},Ne=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Be={class:"fixed inset-0 overflow-y-auto"},Le={class:"flex min-h-full items-center justify-center p-4 text-center"},Oe={class:"border-b px-3 py-3 flex items-center justify-between"},Ee=t("img",{src:z,class:"w-6 h-6 mr-2"},null,-1),Xe={class:"flex items-center justify-center mx-auto my-20"},Ge={class:"space-y-3 px-5 py-5"},ze={class:"w-full flex flex-col space-y-1"},Ke=t("label",{class:"font-semibold text-lg"},"Username",-1),He={class:"underline"},Ye={class:"w-full flex flex-col space-y-1"},Je=t("label",{class:"font-semibold text-lg"},"First name",-1),Qe={class:"underline"},We={class:"w-full flex flex-col space-y-1"},Ze=t("label",{class:"font-semibold text-lg"},"Last name",-1),et={class:"underline"},tt={class:"w-full flex flex-col space-y-1"},st=t("label",{class:"font-semibold text-lg"},"Date of birth",-1),ot={class:"underline"},lt={class:"w-full flex flex-col space-y-1"},at=t("label",{class:"font-semibold text-lg"},"Roles",-1),nt={class:"w-full flex flex-col space-y-1"},it=t("label",{class:"font-semibold text-lg"},"Departments",-1);function rt(l,s,n,c,e,a){const u=M,r=i("TransitionChild"),V=i("DialogTitle"),C=i("XMarkIcon"),f=Z,_=i("DialogPanel"),b=i("Dialog"),g=i("TransitionRoot");return h(),v("div",null,[t("div",null,[o(u,{text:"View",color:"primary",icon:e.viewIcon,click:a.init},null,8,["icon","click"])]),o(g,{appear:"",show:e.open,as:"template"},{default:d(()=>[o(b,{as:"div",onClose:a.adjustVisibility,class:"relative z-10"},{default:d(()=>[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[Ne]),_:1}),t("div",Be,[t("div",Le,[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[o(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[t("div",Oe,[o(V,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:d(()=>[Ee,S(" View User Account ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...x)=>a.adjustVisibility&&a.adjustVisibility(...x))},[o(C,{class:"w-5 h-5"})])]),U(t("div",Xe,[o(f,{loading:e.loading},null,8,["loading"])],512),[[F,e.loading]]),U(t("div",Ge,[t("div",ze,[Ke,t("p",He,k(e.details.username),1)]),t("div",Ye,[Je,t("p",Qe,k(e.details.first_name),1)]),t("div",We,[Ze,t("p",et,k(e.details.last_name),1)]),t("div",tt,[st,t("p",ot,k(e.details.date_of_birth),1)]),t("div",lt,[at,(h(!0),v(K,null,H(e.details.roles,(x,D)=>(h(),v("p",{class:"underline",key:D},k(x.role_name),1))),128))]),t("div",nt,[it,(h(!0),v(K,null,H(e.details.departments,(x,D)=>(h(),v("p",{class:"underline",key:D},k(x.name),1))),128))])],512),[[F,!e.loading]])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const dt=R(je,[["render",rt]]),ct={components:{TransitionRoot:j,TransitionChild:N,Dialog:B,DialogPanel:L,DialogTitle:O,XMarkIcon:P,UserIcon:X},data(){return{open:!1,editIcon:ee,saveIcon:W,clearIcon:G,departmentSelected:null,departments:new Array,rawDepartments:new Array,cookie:q("token"),roles:new Array,rawRoles:new Array,roleSelected:null,firstName:"",middleName:"",lastName:"",username:"",sex:"",password:"",confirmPassword:"",dateOfBirth:"",loading:!1,fetching:!1,details:{id:"",username:"",first_name:"",last_name:"",middle_name:"",old_password:"",new_password:"",sex:"",date_of_birth:"",roles:new Array,departments:new Array}}},props:{data:{required:!0,type:Object}},methods:{async init(){this.open=!0,this.fetching=!0,await this.loadRoles(),await this.loadDepartments();const l={route:`${y.users}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:s,error:n,pending:c}=await w(l);if(this.fetching=c,s.value){this.details=s.value,this.fetching=!1;let e=new Array;s.value.roles.map(u=>{this.rawRoles.map(r=>{u.role_name==r.name&&e.push(r.name)})}),this.roleSelected=e;let a=new Array;s.value.departments.map(u=>{this.rawDepartments.map(r=>{u.name==r.name&&a.push(r.name)})}),this.departmentSelected=a}n.value&&(console.error(n.value),this.fetching=!1)},async loadRoles(){const l={route:y.roles,method:"GET",token:`${this.cookie}`},{data:s,error:n}=await w(l);s.value&&(this.rawRoles=s.value,s.value.map(c=>{this.roles.push(c.name)})),n.value&&console.error(n.value)},async loadDepartments(){const l={route:y.departments,method:"GET",token:`${this.cookie}`},{data:s,error:n}=await w(l);s.value&&(this.rawDepartments=s.value,s.value.map(c=>{this.departments.push(c.name)})),n.value&&console.error(n.value)},async submitForm(){this.loading=!0;let l=new Array,s=new Array;this.departmentSelected!=null&&this.departmentSelected.map(u=>{this.rawDepartments.filter(r=>u==r.name&&l.push(Number(r.id)))}),this.roleSelected!=null&&this.roleSelected.map(u=>{this.rawRoles.filter(r=>{u==r.name&&s.push(r.id)})}),this.details.roles=s,this.details.departments=l;const n={route:`${y.users}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:{person:{first_name:this.details.first_name,middle_name:this.details.middle_name,last_name:this.details.last_name,sex:this.details.sex,date_of_birth:this.details.date_of_birth},user:{username:this.details.username,old_password:this.details.old_password,password:this.details.new_password},roles:s,departments:l}},{data:c,error:e,pending:a}=await w(n);this.loading=a,c.value&&(this.handleClick(),A().$toast.success("User updated successfully!"),this.loading=!1,this.$emit("update",!0)),e.value&&(console.error(e.value),this.handleClick(),A().$toast.error(J),this.loading=!1)},handleClick(){this.open=!this.open}}},ut=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),mt={class:"mx-auto flex justify-center py-20 bg-white"},pt={class:"fixed inset-0 overflow-y-auto"},_t={class:"flex min-h-full items-center justify-center p-4 text-center"},ft={class:"border-b px-3 py-3 flex items-center justify-between"},ht=t("img",{src:z,class:"w-8 h-8 mr-2"},null,-1),vt={class:"mt-2 space-y-3 px-5 py-5"},gt={class:"grid grid-cols-2 gap-4"},xt={class:"grid grid-cols-2 gap-4"},yt={class:"grid grid-cols-2 gap-4"},wt={class:"w-full flex flex-col space-y-2"},bt={class:"w-full flex flex-col space-y-2"},kt={class:"flex items-center"},Vt=t("label",{class:"mr-5 font-medium text-lg"},"Sex",-1),Ct={class:"flex items-center"},Dt=t("span",{class:"ml-2"},"Male",-1),Ut={class:"flex items-center ml-2"},Tt=t("span",{class:"ml-2"},"Female",-1),It={class:"w-full flex flex-col"},St={class:"w-full flex flex-col space-y-2"},At=t("label",{class:"font-medium"},"Select Role(s)",-1),qt={class:"w-full flex flex-col"},Rt={class:"w-full flex flex-col space-y-2"},$t=t("label",{class:"font-medium"},"Select Lab Section(s)",-1),Ft={class:"px-5"},Mt=t("p",{class:"py-2 font-medium text-base"},"Date Of Birth",-1),Pt={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function jt(l,s,n,c,e,a){const u=M,r=i("TransitionChild"),V=Z,C=i("DialogTitle"),f=i("XMarkIcon"),_=i("FormKit"),b=i("multi-select"),g=i("datepicker"),x=E,D=i("DialogPanel"),T=i("Dialog"),I=i("TransitionRoot");return h(),v("div",null,[t("div",null,[o(u,{text:"Edit",color:"primary",icon:e.editIcon,click:a.init},null,8,["icon","click"])]),o(I,{appear:"",show:e.open,as:"template"},{default:d(()=>[o(T,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:d(()=>[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[ut]),_:1}),U(t("div",mt,[o(V)],512),[[F,e.fetching]]),U(t("div",pt,[t("div",_t,[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[o(D,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[t("div",ft,[o(C,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:d(()=>[ht,S(" Edit user ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...m)=>a.handleClick&&a.handleClick(...m))},[o(f,{class:"w-5 h-5"})])]),o(_,{type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:d(({value:m})=>[t("div",vt,[t("div",gt,[o(_,{type:"text",label:"Username",validation:"required",modelValue:e.details.username,"onUpdate:modelValue":s[1]||(s[1]=p=>e.details.username=p)},null,8,["modelValue"]),o(_,{type:"text",label:"First name",modelValue:e.details.first_name,"onUpdate:modelValue":s[2]||(s[2]=p=>e.details.first_name=p),validation:"required"},null,8,["modelValue"])]),t("div",xt,[o(_,{type:"text",label:"Middle name",modelValue:e.details.middle_name,"onUpdate:modelValue":s[3]||(s[3]=p=>e.details.middle_name=p)},null,8,["modelValue"]),o(_,{type:"text",label:"Last name",validation:"required",modelValue:e.details.last_name,"onUpdate:modelValue":s[4]||(s[4]=p=>e.details.last_name=p)},null,8,["modelValue"])]),o(_,{type:"group"},{default:d(()=>[t("div",yt,[t("div",wt,[o(_,{type:"password",label:"New password",name:"password",modelValue:e.details.new_password,"onUpdate:modelValue":s[5]||(s[5]=p=>e.details.new_password=p),"validation-visibility":"live"},null,8,["modelValue"])]),t("div",bt,[o(_,{type:"password",label:"Confirm new password",name:"password_confirm",validation:e.details.new_password&&"required|confirm","validation-label":"Password confirmation","validation-visibility":"live"},null,8,["validation"])])])]),_:1}),t("div",kt,[Vt,t("label",Ct,[U(t("input",{required:"","onUpdate:modelValue":s[6]||(s[6]=p=>e.details.sex=p),type:"radio",value:"M",name:"gender",class:"w-4 h-4 rounded-full bg-sky-500 border-sky-800 text-sky-500 focus:ring-sky-800"},null,512),[[$,e.details.sex]]),Dt]),t("label",Ut,[U(t("input",{required:"","onUpdate:modelValue":s[7]||(s[7]=p=>e.details.sex=p),type:"radio",value:"F",name:"gender",class:"w-4 h-4 rounded-full bg-sky-500 border-sky-800 text-sky-500 focus:ring-sky-800"},null,512),[[$,e.details.sex]]),Tt])]),t("div",It,[t("div",St,[At,o(b,{style:{"--ms-max-height":"none !important"},modelValue:e.roleSelected,"onUpdate:modelValue":s[8]||(s[8]=p=>e.roleSelected=p),options:e.roles,mode:"tags",searchable:!0,required:!0,clear:"",class:"outline-none focus:ring-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",qt,[t("div",Rt,[$t,o(b,{style:{"--ms-max-height":"none !important"},modelValue:e.departmentSelected,"onUpdate:modelValue":s[9]||(s[9]=p=>e.departmentSelected=p),options:e.departments,mode:"tags",searchable:!0,required:!0,clear:"",class:"outline-none focus:ring-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])])]),t("div",Ft,[Mt,o(g,{range:!1,"input-class-name":"datepicker",format:"dd/MM/yyyy",position:"left",placeholder:"select date of birth",modelValue:e.details.date_of_birth,"onUpdate:modelValue":s[10]||(s[10]=p=>e.details.date_of_birth=p)},null,8,["modelValue"])]),t("div",Pt,[o(x,{type:"button",click:()=>{},text:"Clear form"}),o(u,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.saveIcon,text:"Save Changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])],512),[[F,!e.fetching]])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const Nt=R(ct,[["render",jt]]),Bt={components:{TransitionRoot:j,TransitionChild:N,Dialog:B,DialogPanel:L,DialogTitle:O,XMarkIcon:P,ExclamationTriangleIcon:oe},data(){return{show:!1,disableIcon:ce,loading:!1,reason:""}},props:{data:{type:Object,required:!0}},setup(){return{cookie:q("token")}},methods:{async deleteData(l){this.loading=!0;const s={route:`${y.users}/${l}`,method:"DELETE",token:`${this.cookie}`},{pending:n,error:c,data:e}=await w(s);this.loading=n,e.value&&(this.handleClick(),A().$toast.success(`${e.value.message}`),this.loading=!1,this.$emit("update",!0),this.reason=""),c.value&&(console.log(e.value),this.loading=!1)},async activate(l){this.loading=!0;const s={route:`${y.users}/activate/${l}`,method:"PUT",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:n,error:c,data:e}=await w(s);this.loading=n,e.value&&(this.handleClick(),A().$toast.success(`${e.value.message}`),this.loading=!1,this.$emit("update",!0),this.reason=""),c.value&&(console.log(e.value),this.loading=!1)},handleClick(){this.show=!this.show}}},Lt={key:0},Ot={key:1},Et=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Xt={class:"fixed inset-0 overflow-y-auto"},Gt={class:"flex min-h-full items-center justify-center p-4 text-center"},zt={class:"border-b px-3 py-3 flex items-center justify-between"},Kt={class:"mt-2 space-y-3 px-5"},Ht={class:"rounded px-2 py-2"},Yt={class:"font-semibold text-red-500"},Jt={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Qt(l,s,n,c,e,a){const u=M,r=i("TransitionChild"),V=i("ExclamationTriangleIcon"),C=i("DialogTitle"),f=i("XMarkIcon"),_=i("FormKit"),b=E,g=i("DialogPanel"),x=i("Dialog"),D=i("TransitionRoot");return h(),v("div",null,[t("div",null,[n.data.is_active?(h(),v("div",Lt,[o(u,{click:a.handleClick,color:"error",text:"Disable",icon:e.disableIcon},null,8,["click","icon"])])):Y("",!0),n.data.is_active?Y("",!0):(h(),v("div",Ot,[o(u,{click:a.handleClick,color:"success",text:"Enable",icon:e.disableIcon},null,8,["click","icon"])]))]),o(D,{appear:"",show:e.show,as:"template"},{default:d(()=>[o(x,{as:"div",class:"relative z-10"},{default:d(()=>[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[Et]),_:1}),t("div",Xt,[t("div",Gt,[o(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[o(g,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[t("div",zt,[o(C,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:d(()=>[o(V,{class:"h-5 w-5 mr-2"}),S(" "+k(n.data.is_active?"Confirm disable":"Confirm activate"),1)]),_:1}),t("button",{onClick:s[0]||(s[0]=(...T)=>a.handleClick&&a.handleClick(...T))},[o(f,{class:"w-5 h-5"})])]),o(_,{type:"form","submit-label":"Update",onSubmit:s[2]||(s[2]=T=>n.data.is_active?a.deleteData(n.data.id):a.activate(n.data.id)),actions:!1},{default:d(({value:T})=>[t("div",Kt,[t("div",Ht,[S(" Do you want to "+k(n.data.is_active?"disable":"activate")+" ",1),t("span",Yt,k(n.data.username),1),S(" account? Note that once this action is completed, it can not be undone ")]),o(_,{type:"textarea",label:"Reason",validation:"required",modelValue:e.reason,"onUpdate:modelValue":s[1]||(s[1]=I=>e.reason=I)},null,8,["modelValue"])]),t("div",Jt,[o(b,{click:a.handleClick,type:"button",text:"Cancel"},null,8,["click"]),o(u,{loading:e.loading,type:"submit",click:()=>{},color:"success",icon:e.disableIcon,text:"Continue"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Wt=R(Bt,[["render",Qt]]),Zt={components:{MagnifyingGlassIcon:de},setup(){ie({title:`${re.name.toUpperCase()} - User Accounts`})},data(){return{header:"List of Users",headers:[{text:"id",value:"id",sortable:!0},{text:"username",value:"username",sortable:!0},{text:"full name",value:"fullname",sortable:!0},{text:"sex",value:"sex",sortable:!0},{text:"actions",value:"actions"}],users:new Array,cookie:q("token"),loading:!1,search:"",searchValue:"",pages:[{name:"Home",link:"/home"},{name:"Access Controls",link:"#"}],serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init()},methods:{updateSearch(l){this.searchValue=l,this.search=l,this.updateUsers(l)},async init(){this.loading=!0;const{page:l,rowsPerPage:s}=this.serverOptions,n={route:`${y.users}?page=${l}&per_page=${s}&search=${this.search}`,method:"GET",token:`${this.cookie}`},{data:c,error:e,pending:a}=await w(n);this.loading=a,c.value&&(this.users=c.value.data,this.loading=!1,this.serverItemsLength=c.value.meta.total_count),e.value&&(console.error(e.value),this.loading=!1)},updateUsers(l){typeof l=="object"&&(this.serverOptions=l),this.init()}},computed:{filteredUsers(){return this.users.map(l=>({id:l.id,is_active:l.is_active,username:l.username.charAt(0).toUpperCase()+l.username.slice(1),fullname:`${l.first_name} ${l.last_name}`,sex:l.sex}))}}},es={class:"py-5 px-5"},ts={class:"flex items-center justify-between py-5"},ss={class:"text-2xl font-semibold"},os={class:"flex justify-end w-full px-2 py-2 mb-2"},ls={class:"py-2 flex items-center space-x-2"};function as(l,s,n,c,e,a){const u=te,r=Pe,V=le,C=dt,f=Nt,_=Wt,b=ne;return h(),v("div",es,[o(u,{pages:e.pages},null,8,["pages"]),t("div",ts,[t("h3",ss,k(e.header),1),o(r,{onUpdate:a.init},null,8,["onUpdate"])]),t("div",os,[o(V,{search:e.search,onUpdate:a.updateSearch},null,8,["search","onUpdate"])]),o(b,{headers:e.headers,data:a.filteredUsers,loading:e.loading,searchField:"username",searchValue:e.searchValue,serverItemsLength:e.serverItemsLength,serverOptions:e.serverOptions,onUpdate:a.updateUsers},{actions:d(({item:g})=>[t("div",ls,[o(C,{data:g},null,8,["data"]),o(f,{data:g,onUpdate:a.init},null,8,["data","onUpdate"]),o(_,{data:g,onUpdate:a.init},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","searchValue","serverItemsLength","serverOptions","onUpdate"])])}const Us=R(Zt,[["render",as]]);export{Us as default};

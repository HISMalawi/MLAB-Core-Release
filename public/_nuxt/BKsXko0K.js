import{_ as Z}from"./DeHqjJH7.js";import{S as $,p as I,Y as V,G as j,V as S,q as F,a as R,l as P,m as E,u as C,E as q,s as M,x as n,b,e as T,g as o,f as t,y as s,j as k,_ as U,t as X,d as ee,r as B,c as O,o as te,h as w,H as K,D as z,A as oe}from"./BLMYYBub.js";import{_ as N}from"./Dz4s_-UK.js";import{r as ae}from"./CnGMDaSy.js";import{r as ne}from"./DnJ5gH3O.js";import{r as G}from"./B77w2j_x.js";import{r as se}from"./ClTnEHmM.js";import{_ as ie}from"./B6_2qwyC.js";import{r as le}from"./CFxj9TAl.js";import{r as H}from"./Cy4dTOpp.js";import{_ as A}from"./Cl1Pa16j.js";import{r as re}from"./Rq-tLeC0.js";import{r as ce}from"./DedXg-G0.js";import{_ as de}from"./CJcSPQ8s.js";import{P as me}from"./CM4UxiDe.js";import{u as ue}from"./CfmpkH2n.js";import{u as pe}from"./BpQJvBFf.js";import"./sNlKP72R.js";import"./DliR-cc7.js";const fe={components:{TransitionRoot:$,TransitionChild:I,Dialog:V,DialogPanel:j,DialogTitle:S,XMarkIcon:F,UserIcon:ae},data(){return{open:!1,addIcon:ne,saveIcon:G,clearIcon:se,name:"",description:"",loading:!1,cookie:R("token")}},methods:{async submitForm(){this.loading=!0;const y={route:P.departments,method:"POST",token:`${this.cookie}`,body:{name:this.name}},{pending:e,error:l,data:r}=await E(y);this.loading=e,r.value&&(this.adjustVisibility(),C().$toast.success(`${this.name} laboratory section created successfully!`),this.name="",this.loading=!1,this.$emit("update",!0)),l.value&&(this.adjustVisibility(),console.log(l.value),C().$toast.error(q),this.loading=!1)},adjustVisibility(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},_e={class:"fixed inset-0 overflow-y-auto"},he={class:"flex min-h-full items-center justify-center p-4 text-center"},ve={class:"border-b px-3 py-3 flex items-center justify-between"},ye={class:"mt-2 space-y-3"},xe={class:"w-full flex items-center px-5"},ge={class:"w-full flex flex-col space-y-2"},be={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ke(y,e,l,r,a,i){const m=U,d=n("TransitionChild"),x=n("DialogTitle"),g=n("XMarkIcon"),_=n("FormKit"),h=N,v=n("DialogPanel"),c=n("Dialog"),u=n("TransitionRoot");return b(),T("div",null,[o("div",null,[t(m,{text:"New lab section",color:"primary",icon:a.addIcon,click:i.adjustVisibility},null,8,["icon","click"])]),t(u,{appear:"",show:a.open,as:"template"},{default:s(()=>[t(c,{as:"div",onClose:i.adjustVisibility,class:"relative z-10"},{default:s(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>e[2]||(e[2]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",_e,[o("div",he,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[t(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[o("div",ve,[t(x,{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:s(()=>e[3]||(e[3]=[k(" Add new lab section ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...p)=>i.adjustVisibility&&i.adjustVisibility(...p))},[t(g,{class:"w-5 h-5"})])]),t(_,{type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1,id:"submitForm"},{default:s(({value:p})=>[o("div",ye,[o("div",xe,[o("div",ge,[t(_,{type:"text",label:"Name",validation:"required",modelValue:a.name,"onUpdate:modelValue":e[1]||(e[1]=f=>a.name=f)},null,8,["modelValue"])])])]),o("div",be,[t(h,{text:"Clear form",type:"button",click:()=>{i.clearForm()}},null,8,["click"]),t(m,{loading:a.loading,type:"submit",click:()=>{},color:"success",icon:a.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const we=M(fe,[["render",ke]]),Ce={components:{TransitionRoot:$,TransitionChild:I,Dialog:V,DialogPanel:j,DialogTitle:S,XMarkIcon:F},data(){return{viewIcon:le,show:!1,editIcon:H}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},De={class:"fixed inset-0 overflow-y-auto"},Te={class:"flex min-h-full items-center justify-center p-4 text-center"},$e={class:"border-b px-3 py-3 flex items-center justify-between"},Ie={class:"space-y-3 px-5 py-5"},Ve={class:"w-full flex flex-col space-y-1"},je={class:"underline"};function Se(y,e,l,r,a,i){const m=U,d=n("TransitionChild"),x=n("DialogTitle"),g=n("XMarkIcon"),_=n("DialogPanel"),h=n("Dialog"),v=n("TransitionRoot");return b(),T("div",null,[t(m,{click:i.handleClick,color:"primary",text:"View",icon:a.viewIcon},null,8,["click","icon"]),t(v,{appear:"",show:a.show,as:"template"},{default:s(()=>[t(h,{as:"div",class:"relative z-10"},{default:s(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>e[1]||(e[1]=[o("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25"},null,-1)])),_:1}),o("div",De,[o("div",Te,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[o("div",$e,[t(x,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>e[2]||(e[2]=[o("img",{src:A,class:"w-8 h-8 mr-2",alt:"hospital-icon"},null,-1),k(" View Laboratory Section ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...c)=>i.handleClick&&i.handleClick(...c))},[t(g,{class:"w-5 h-5"})])]),o("div",Ie,[o("div",Ve,[e[3]||(e[3]=o("label",{class:"font-semibold text-lg"},"Name",-1)),o("p",je,X(l.data.name),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Fe=M(Ce,[["render",Se]]),Re={components:{TransitionRoot:$,TransitionChild:I,Dialog:V,DialogPanel:j,DialogTitle:S,XMarkIcon:F},data(){return{editIcon:H,show:!1,saveIcon:G,loading:!1,cookie:R("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const y={route:`${P.departments}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:{name:this.data.name}},{data:e,error:l,pending:r}=await E(y);this.loading=r,e.value&&(this.handleClick(),C().$toast.success("Laboratory section updated successfully!"),this.loading=!1,this.$emit("update",!0)),l.value&&(this.handleClick(),C().$toast.error(q),console.error(l.value),this.loading=!1)},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("submitForm")}}},Pe={class:"fixed inset-0 overflow-y-auto"},Ee={class:"flex min-h-full items-center justify-center p-4 text-center"},Me={class:"border-b px-3 py-3 flex items-center justify-between"},Ue={class:"mt-2 space-y-3"},Le={class:"w-full flex items-center px-5"},Be={class:"w-full flex flex-col space-y-2"},qe={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Xe(y,e,l,r,a,i){const m=U,d=n("TransitionChild"),x=n("DialogTitle"),g=n("XMarkIcon"),_=n("FormKit"),h=N,v=n("DialogPanel"),c=n("Dialog"),u=n("TransitionRoot");return b(),T("div",null,[t(m,{click:i.handleClick,text:"Edit",color:"success",icon:a.editIcon},null,8,["click","icon"]),t(u,{appear:"",show:a.show,as:"template"},{default:s(()=>[t(c,{as:"div",class:"relative z-10"},{default:s(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>e[2]||(e[2]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",Pe,[o("div",Ee,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[t(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[o("div",Me,[t(x,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>e[3]||(e[3]=[o("img",{src:A,class:"w-8 h-8 mr-2",alt:"hospital-icon"},null,-1),k(" Edit Laboratory Department ")])),_:1}),o("button",{onClick:e[0]||(e[0]=(...p)=>i.handleClick&&i.handleClick(...p))},[t(g,{class:"w-5 h-5"})])]),t(_,{id:"submitForm",type:"form","submit-label":"Update",onSubmit:i.submitForm,actions:!1},{default:s(({value:p})=>[o("div",Ue,[o("div",Le,[o("div",Be,[t(_,{type:"text",label:"Name",validation:"required",modelValue:l.data.name,"onUpdate:modelValue":e[1]||(e[1]=f=>l.data.name=f)},null,8,["modelValue"])])])]),o("div",qe,[t(h,{text:"Clear form",type:"button",click:()=>{i.clearForm()}},null,8,["click"]),t(m,{loading:a.loading,type:"submit",click:()=>{},color:"success",icon:a.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Ne=M(Re,[["render",Xe]]),Ae={components:{TransitionRoot:$,TransitionChild:I,Dialog:V,DialogPanel:j,DialogTitle:S,XMarkIcon:F,ExclamationTriangleIcon:re},data(){return{show:!1,deleteIcon:ce,loading:!1,reason:"",cookie:R("token")}},props:{data:{type:Object,required:!0}},methods:{async deleteData(y){this.loading=!0;const e={route:`${P.departments}/${y}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}};let{data:l,error:r,pending:a}=await E(e);this.loading=a,l.value&&(this.handleClick(),C().$toast.success("Laboratory section deleted successfully!"),this.$emit("update",!0)),r.value&&(C().$toast.error(q),this.handleClick(),console.error(r.value))},handleClick(){this.show=!this.show}}},Oe={class:"fixed inset-0 overflow-y-auto"},Ke={class:"flex min-h-full items-center justify-center p-4 text-center"},ze={class:"border-b px-3 py-3 flex items-center justify-between"},Ge={class:"mt-2 space-y-3 px-5"},He={class:"rounded px-2 py-2"},Ye={class:"font-semibold text-red-500"},Je={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function Qe(y,e,l,r,a,i){const m=U,d=n("TransitionChild"),x=n("ExclamationTriangleIcon"),g=n("DialogTitle"),_=n("XMarkIcon"),h=n("FormKit"),v=N,c=n("DialogPanel"),u=n("Dialog"),p=n("TransitionRoot");return b(),T("div",null,[t(m,{click:i.handleClick,color:"error",text:"Delete",icon:a.deleteIcon},null,8,["click","icon"]),t(p,{appear:"",show:a.show,as:"template"},{default:s(()=>[t(u,{as:"div",class:"relative z-10"},{default:s(()=>[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>e[3]||(e[3]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",Oe,[o("div",Ke,[t(d,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:s(()=>[t(c,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:s(()=>[o("div",ze,[t(g,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:s(()=>[t(x,{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=k(" Confirm delete "))]),_:1}),o("button",{onClick:e[0]||(e[0]=(...f)=>i.handleClick&&i.handleClick(...f))},[t(_,{class:"w-5 h-5"})])]),t(h,{type:"form","submit-label":"Update",onSubmit:e[2]||(e[2]=f=>i.deleteData(l.data.id)),actions:!1},{default:s(({value:f})=>[o("div",Ge,[o("div",He,[e[5]||(e[5]=k(" Do you really want to delete ")),o("span",Ye,X(l.data.name),1),e[6]||(e[6]=k("? Note that once this action is completed, it can not be undone "))]),t(h,{type:"textarea",label:"Reason",validation:"required",modelValue:a.reason,"onUpdate:modelValue":e[1]||(e[1]=L=>a.reason=L)},null,8,["modelValue"])]),o("div",Je,[t(v,{type:"button",click:()=>{i.handleClick()},text:"Cancel"},null,8,["click"]),t(m,{loading:a.loading,type:"submit",click:()=>{},color:"error",icon:a.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const We=M(Ae,[["render",Qe]]),Ze={class:"py-5 px-5"},et={class:"flex items-center justify-between py-5"},tt={class:"flex items-center space-x-3"},ot={class:"flex justify-end w-full px-2 py-2 mb-2"},at={class:"py-2 flex items-center space-x-2"},nt="Laboratory Sections",Ct=ee({__name:"lab-sections",setup(y){ue({title:`${me.name.toUpperCase()} - Laboratory Sections`});const e=B([]),l=[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],r=B(!1),a=B(""),i=R("token"),m=[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"actions",value:"actions",sortable:!1}],{can:d}=pe(),x=O(()=>d.manage("test_catalog")),g=c=>{a.value=c},_=O(()=>a.value?e.value.filter(c=>c.name.toLowerCase().includes(a.value.toLowerCase())):e.value),h=async()=>{r.value=!0;const c={route:P.departments,method:"GET",token:i.value},{pending:u,error:p,data:f}=await E(c);r.value=u,f.value&&(e.value=f.value,r.value=!1),p.value&&(console.error(p.value),r.value=!1)},v=async c=>{c&&await h()};return te(h),(c,u)=>{const p=Z,f=we,L=ie,Y=Fe,J=Ne,Q=We,W=de;return b(),T("div",Ze,[t(p,{pages:l}),o("div",et,[o("div",{class:"text-2xl font-semibold flex items-center uppercase"},[u[1]||(u[1]=o("img",{src:A,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1)),k(" "+X(nt))]),o("div",tt,[w(x)?(b(),K(f,{key:0,onUpdate:v})):z("",!0)])]),o("div",ot,[t(L,{search:w(a),"onUpdate:search":u[0]||(u[0]=D=>oe(a)?a.value=D:null),onUpdate:g},null,8,["search"])]),w(x)?(b(),K(W,{key:0,headers:m,data:w(_),loading:w(r),"search-value":w(a),"search-field":"name"},{actions:s(({item:D})=>[o("div",at,[t(Y,{data:D},null,8,["data"]),t(J,{data:D,onUpdate:v},null,8,["data"]),t(Q,{data:D,onUpdate:v},null,8,["data"])])]),_:1},8,["data","loading","search-value"])):z("",!0)])}}});export{Ct as default};

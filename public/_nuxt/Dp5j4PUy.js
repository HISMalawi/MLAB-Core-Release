import{S as I,p as S,Y as D,G as T,V as R,q,a as N,u as C,E as X,s as V,x as n,b as M,e as O,f as t,y as i,g as o,j as c,t as j,_ as B}from"./DbJ6VTtH.js";import{_ as E}from"./D8VEAQZN.js";import{S as L}from"./CoMOcBeO.js";import{r as P}from"./mn5DLNYF.js";import{r as f}from"./CUBkPlre.js";const A={components:{TransitionRoot:I,TransitionChild:S,Dialog:D,DialogPanel:T,DialogTitle:R,XMarkIcon:q,ExclamationTriangleIcon:P,NoSymbolIcon:f},data(){return{show:!1,rejectIcon:f,loading:!1,reason:"",cookie:N("token")}},props:{orderId:{type:String,required:!0},stockId:{type:String,required:!0}},methods:{async rejectOrder(){this.loading=!0;const u=new L,{data:e,error:l,pending:d}=await u.rejectStockOrder(`${this.cookie}`,{stock_order_id:this.stockId,stock_status_reason:this.reason});this.loading=d,e.value&&(this.handleClick(),C().$toast.success("Stock order rejected successfully!"),this.loading=!1,this.reason="",this.$router.push("/stock-management/orders")),l.value&&(this.handleClick(),console.error(l.value),C().$toast.error(X),this.loading=!1)},handleClick(){this.show=!this.show}}},F={class:"fixed inset-0 overflow-y-auto"},K={class:"flex min-h-full items-center justify-center p-4 text-center"},U={class:"border-b px-3 py-3 flex items-center justify-between"},$={class:"mt-2 space-y-3 px-5"},G={class:"rounded px-2 py-2"},z={class:"font-semibold text-red-500"},Y={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function H(u,e,l,d,s,a){const m=B,p=n("TransitionChild"),h=n("NoSymbolIcon"),y=n("DialogTitle"),g=n("XMarkIcon"),_=n("FormKit"),x=E,k=n("DialogPanel"),v=n("Dialog"),b=n("TransitionRoot");return M(),O("div",null,[t(m,{click:a.handleClick,color:"error",text:"Reject Order",icon:s.rejectIcon},null,8,["click","icon"]),t(b,{appear:"",show:s.show,as:"template"},{default:i(()=>[t(v,{as:"div",class:"relative z-10"},{default:i(()=>[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>e[3]||(e[3]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",F,[o("div",K,[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[t(k,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[o("div",U,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[t(h,{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=c(" Confirm rejection "))]),_:1}),o("button",{onClick:e[0]||(e[0]=(...r)=>a.handleClick&&a.handleClick(...r))},[t(g,{class:"w-5 h-5"})])]),t(_,{type:"form","submit-label":"Update",onSubmit:e[2]||(e[2]=r=>a.rejectOrder()),actions:!1},{default:i(({value:r})=>[o("div",$,[o("div",G,[e[5]||(e[5]=c(" Do you really want to reject order ")),o("span",z,j(l.orderId),1),e[6]||(e[6]=c("? Note that once this action is completed, it can not be undone "))]),t(_,{type:"textarea",label:"Reason",validation:"required",modelValue:s.reason,"onUpdate:modelValue":e[1]||(e[1]=w=>s.reason=w)},null,8,["modelValue"])]),o("div",Y,[t(x,{click:()=>{a.handleClick()},type:"button",text:"Cancel"},null,8,["click"]),t(m,{loading:s.loading,type:"submit",click:()=>{},color:"error",icon:s.rejectIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const de=V(A,[["render",H]]),J={components:{TransitionRoot:I,TransitionChild:S,Dialog:D,DialogPanel:T,DialogTitle:R,XMarkIcon:q,NoSymbolIcon:f,ExclamationTriangleIcon:P},data(){return{show:!1,rejectIcon:f,loading:!1,statusLoading:!1,reason:"",cookie:N("token")}},props:{data:{type:Object,required:!0},orderId:{type:String,required:!0}},methods:{async rejectRequisition(){this.statusLoading=!0;const u=new L,e={route:"reject_requisition",stock_requisition_id:this.data.id,stock_status_reason:this.reason},{data:l,error:d,pending:s}=await u.updateStockOrderStatus(`${this.cookie}`,e);this.statusLoading=s,l.value&&(this.$emit("update",!0),this.statusLoading=!1,this.reason="",this.handleClick(),C().$toast.success("Stock order requisition rejected successfully!")),d.value&&(console.error(d.value),this.statusLoading=!1)},handleClick(){this.show=!this.show}}},Q={class:"fixed inset-0 overflow-y-auto"},W={class:"flex min-h-full items-center justify-center p-4 text-center"},Z={class:"border-b px-3 py-3 flex items-center justify-between"},ee={class:"mt-2 space-y-3 px-5"},te={class:"rounded px-2 py-2"},oe={class:"font-semibold text-red-500"},ne={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function se(u,e,l,d,s,a){const m=B,p=n("TransitionChild"),h=n("NoSymbolIcon"),y=n("DialogTitle"),g=n("XMarkIcon"),_=n("FormKit"),x=E,k=n("DialogPanel"),v=n("Dialog"),b=n("TransitionRoot");return M(),O("div",null,[t(m,{click:a.handleClick,color:"error",text:"Reject",icon:s.rejectIcon},null,8,["click","icon"]),t(b,{appear:"",show:s.show,as:"template"},{default:i(()=>[t(v,{as:"div",class:"relative z-10"},{default:i(()=>[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>e[3]||(e[3]=[o("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),o("div",Q,[o("div",W,[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[t(k,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[o("div",Z,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[t(h,{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=c(" Confirm rejection "))]),_:1}),o("button",{onClick:e[0]||(e[0]=(...r)=>a.handleClick&&a.handleClick(...r))},[t(g,{class:"w-5 h-5"})])]),t(_,{type:"form","submit-label":"Update",onSubmit:e[2]||(e[2]=r=>a.rejectRequisition()),actions:!1},{default:i(({value:r})=>[o("div",ee,[o("div",te,[e[5]||(e[5]=c(" Do you really want to reject requisition for ")),o("span",oe,j(l.data.item.name),1),e[6]||(e[6]=c(" from the Order ")),o("strong",null,j(l.orderId),1),e[7]||(e[7]=c("? Note that once this action is completed, it can not be undone "))]),t(_,{type:"textarea",label:"Reason",validation:"required",modelValue:s.reason,"onUpdate:modelValue":e[1]||(e[1]=w=>s.reason=w)},null,8,["modelValue"])]),o("div",ne,[t(x,{click:()=>{a.handleClick()},type:"button",text:"Cancel"},null,8,["click"]),t(m,{loading:s.statusLoading,type:"submit",click:()=>{},color:"error",icon:s.rejectIcon,text:"Reject"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ue=V(J,[["render",se]]);export{de as _,ue as a};

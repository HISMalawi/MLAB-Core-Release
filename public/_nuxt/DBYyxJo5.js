import{_ as ge}from"./CdrT672K.js";import{b as B,e as P,g as t,d as X,u as Z,r as s,a as Y,x as R,f as o,h as e,y as r,Y as J,p as K,G as W,V as le,j as N,q as ae,A as D,H as ce,D as ne,S as ee,E as ie,C as fe,_ as se,n as ve,ah as me,K as ke,t as A,F as be,k as we,s as he,o as $e,z as Ce,L as Se}from"./BbkUq3pP.js";import{_ as _e}from"./CGQhUj9Z.js";import{_ as ye}from"./hcyw4BxI.js";import{_ as re}from"./Chqi5ygk.js";import{_ as de}from"./PHlxz6BT.js";import{S as E}from"./DrAKmsfg.js";import{r as pe}from"./DC48ZIun.js";import{r as xe}from"./aOGwGJoO.js";import{r as ue}from"./DQOpZ8rn.js";import{a as Ve,_ as Me}from"./DbpKqcAU.js";import{_ as Ue}from"./BFpTpfkK.js";import{r as De}from"./C7SUZWvt.js";import{r as Ie}from"./DxY9coLf.js";import{r as Fe}from"./BDtoEpty.js";import{_ as Be}from"./NdHSzRU-.js";import{P as je}from"./Cno8v37U.js";import{u as Le}from"./BZTj5M85.js";import"./CfIHGZVq.js";import"./GKXdb3Iz.js";import"./DDyamxLR.js";import"./CF9TYKcD.js";import"./CLuuOqS6.js";import"./pkSlw8mP.js";import"./BC5bLOnc.js";import"./E3GA-zZE.js";import"./BIuVjvou.js";function Te(O,p){return B(),P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z","clip-rule":"evenodd"})])}const Pe={class:"fixed inset-0 overflow-y-auto"},qe={class:"flex min-h-full items-center justify-center p-4 text-center"},Ae={class:"border-b px-3 py-3 flex items-center justify-between"},Ee={class:"mt-2 space-y-3 px-5"},Oe={class:"flex items-center"},ze={class:"flex items-center space-x-2 pt-8 ml-3"},Re={class:"bg-white"},Ke={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"},He=X({__name:"index",emits:["update"],setup(O,{emit:p}){const f=p,{$toast:y}=Z(),u=s(!1),v=s(!1),d=s(""),C=s(""),_=s(""),g=Y("token"),n=s([]),S=s([]),w=s(""),b=s(0),j=s([]),T=s([]),V=s([]),h=s({name:"-- selected location --",id:0}),M=s(""),L=s(""),q=s(0),te=async()=>{const $=new E,{data:a,error:m}=await $.getStockCategory(`${g.value}`);a.value&&(n.value=a.value,S.value=a.value.map(l=>l.name)),m.value&&console.error(m.value)},H=async()=>{const $=new E,{data:a,error:m}=await $.getStockUnit(`${g.value}`);a.value&&(j.value=a.value,T.value=a.value.map(l=>l.name)),m.value&&console.error(m.value)},oe=async()=>{const $=new E,{data:a,error:m}=await $.getStockLocation(`${g.value}`);a.value&&(V.value=a.value),m.value&&console.error(m.value)},k=async()=>{await te(),await H(),await oe(),I()},c=async()=>{v.value=!0;const $=new E,a={name:d.value,product_ccode:C.value,description:_.value,stock_location_id:h.value.id,stock_category_id:n.value.filter(x=>x.name===w.value)[0].id,measurement_unit:j.value.filter(x=>x.name===M.value)[0].id,quantity_unit:b.value,strength:L.value,minimum_order_level:q.value},{pending:m,error:l,data:i}=await $.createStockItem(`${g.value}`,a);v.value=m,i.value&&(I(),y.success(`${d.value} stock item created successfully!`),v.value=!1,_.value="",d.value="",b.value=0,f("update",!0)),l.value&&(I(),console.error(l.value),y.error(ie),v.value=!1)},I=()=>{u.value=!u.value},z=()=>{fe("submitForm")};return($,a)=>{const m=se,l=R("FormKit"),i=_e,x=ye,G=re;return B(),P("div",null,[t("div",null,[o(m,{text:"Create stock item",color:"primary",icon:e(pe),click:k},null,8,["icon"])]),o(e(ee),{appear:"",show:e(u),as:"template"},{default:r(()=>[o(e(J),{as:"div",onClose:I,class:"relative z-10"},{default:r(()=>[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>a[9]||(a[9]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",Pe,[t("div",qe,[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(e(W),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",Ae,[o(e(le),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>a[10]||(a[10]=[t("img",{src:de,class:"w-8 h-8 mr-2",alt:"stock-item-svg"},null,-1),N(" Create Stock Item ")])),_:1}),t("button",{onClick:I},[o(e(ae),{class:"w-5 h-5"})])]),o(l,{ref:"formkit",type:"form","submit-label":"Update",onSubmit:c,actions:!1,id:"submitForm"},{default:r(({value:Q})=>[t("div",Ee,[o(l,{type:"text",label:"Name",validation:"required",modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=U=>D(d)?d.value=U:null)},null,8,["modelValue"]),o(l,{type:"text",label:"Product code",modelValue:e(C),"onUpdate:modelValue":a[1]||(a[1]=U=>D(C)?C.value=U:null)},null,8,["modelValue"]),o(l,{type:"textarea",label:"Description",validation:"required",modelValue:e(_),"onUpdate:modelValue":a[2]||(a[2]=U=>D(_)?_.value=U:null)},null,8,["modelValue"]),t("div",Oe,[o(i,{mode:"single","items-selected":e(M),"onUpdate:itemsSelected":a[3]||(a[3]=U=>D(M)?M.value=U:null),label:"Measurement Unit",items:e(T)},null,8,["items-selected","items"]),t("div",ze,[e(M)==""?(B(),ce(m,{key:0,icon:e(pe),color:"primary",text:"Add",click:()=>{$.$router.push("/stock-management/metrics")}},null,8,["icon","click"])):ne("",!0),e(M)!=""?(B(),ce(m,{key:1,icon:e(xe),color:"success",text:"Edit",click:()=>{$.$router.push("/stock-management/metrics")}},null,8,["icon","click"])):ne("",!0)])]),o(l,{type:"number",label:"Quantity of measurement",validation:"required",modelValue:e(b),"onUpdate:modelValue":a[4]||(a[4]=U=>D(b)?b.value=U:null)},null,8,["modelValue"]),t("div",Re,[o(i,{mode:"single",label:"Category",items:e(S),"items-selected":e(w),"onUpdate:itemsSelected":a[5]||(a[5]=U=>D(w)?w.value=U:null)},null,8,["items","items-selected"])]),t("div",null,[a[11]||(a[11]=t("label",{class:"font-medium mb-2.5 text-lg"},"Location",-1)),o(x,{items:e(V),modelValue:e(h),"onUpdate:modelValue":a[6]||(a[6]=U=>D(h)?h.value=U:null)},null,8,["items","modelValue"])]),o(l,{type:"text",label:"Strength",modelValue:e(L),"onUpdate:modelValue":a[7]||(a[7]=U=>D(L)?L.value=U:null)},null,8,["modelValue"]),o(l,{type:"number",label:"Minimum order level",validation:"required",modelValue:e(q),"onUpdate:modelValue":a[8]||(a[8]=U=>D(q)?q.value=U:null)},null,8,["modelValue"])]),t("div",Ke,[o(G,{type:"button",click:()=>{z()},text:"Clear form"},null,8,["click"]),o(m,{loading:e(v),type:"submit",click:()=>{},color:"success",icon:e(ue),text:"Save changes"},null,8,["loading","icon"])])]),_:1},512)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),Ne={class:"fixed inset-0 overflow-y-auto top-0"},Ge={class:"flex min-h-full items-start justify-end top-0 p-4 text-center"},Qe={class:"flex items-center space-x-2"},Ze=X({__name:"ImportingDialog",setup(O,{expose:p}){const f=s(!1);function y(){f.value=!1}function u(){f.value=!0}return p({openModal:u,closeModal:y}),(v,d)=>{const C=ve;return B(),ce(e(ee),{appear:"",show:e(f),as:"template"},{default:r(()=>[o(e(J),{as:"div",onClose:y,class:"relative z-10"},{default:r(()=>[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>d[0]||(d[0]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-50"},null,-1)])),_:1}),t("div",Ne,[t("div",Ge,[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(e(W),{class:"w-full max-w-md transform overflow-hidden rounded bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",Qe,[o(C),d[1]||(d[1]=t("div",null,[t("h3",{class:"text-xl font-semibold"},"Importing"),t("p",{class:"text-gray-500"}," Please wait patiently, it may take 1-4 minutes to successfully import all the products ")],-1))])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}}),Xe={class:"fixed inset-0 overflow-y-auto"},Ye={class:"flex min-h-full items-center justify-center p-4 text-center"},Je={class:"border-b px-3 py-3 flex items-center justify-between"},We={class:"w-full px-5 py-5"},et={class:""},tt={class:"mb-2"},ot={key:0,class:"mt-4"},lt={class:"list-disc pl-5 text-sky-500"},at={key:1,class:"mt-4 flex items-start text-red-500 bg-red-50 rounded p-4"},st={class:"text-base"},nt={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"},it=X({__name:"index",emits:["update"],setup(O,{emit:p}){const f=p,y=s(!1),u=s(!1),v=s(!1),d=s([]),C=new E,{$toast:_}=Z(),g=s(null),n=s(null),S=Y("token"),w=["productCode","name","description","categoryDescription","packRoundingThreshold","packSize","roundToZero","dispensable","program","dosesPerPatient","active","category","fullSupply","displayOrder","pricePerPack"],b=k=>{v.value=!0},j=k=>{v.value=!1},T=k=>{v.value=!1;const c=k.dataTransfer.files;h(c)},V=k=>{const c=k.target;if(c.files){const I=c.files;h(I)}},h=k=>{if(k.length>0){const c=k[0];c.type==="text/csv"?(d.value=[c],L(c)):_.error("Please select a CSV file")}},M=k=>{if(k===0)return"0 Bytes";const c=1024,I=["Bytes","KB","MB","GB","TB"],z=Math.floor(Math.log(k)/Math.log(c));return parseFloat((k/Math.pow(c,z)).toFixed(2))+" "+I[z]},L=k=>{const c=new FileReader;c.onload=I=>{var l;const $=((l=I.target)==null?void 0:l.result).split(`
`)[0].split(",").map(i=>i.trim()),a=w.filter(i=>!$.includes(i)),m=$.filter(i=>!w.includes(i));if(a.length>0||m.length>0){let i=`CSV headers do not match the expected format.
`;a.length>0&&(i+=`Missing headers: ${a.join(", ")}
`),i+="Please check your file and ensure it matches the required format.",n.value=i}else n.value=null},c.readAsText(k)},q=()=>{d.value=[],n.value=null},te=()=>{q()},H=()=>{y.value=!y.value},oe=async()=>{var $,a,m;u.value=!0,($=g.value)==null||$.openModal();const k=new FormData;k.append("file",d.value[0]);const{data:c,error:I,pending:z}=await C.importStockItems(String(S.value),k);u.value=z,c.value&&(u.value=!1,(a=g.value)==null||a.closeModal(),_.success("Products imported as stock items successfully"),f("update",!0)),I.value&&(console.error(I.value),u.value=!1,(m=g.value)==null||m.closeModal(),_.error(ie)),H()};return(k,c)=>{const I=Ze,z=Me,$=re,a=se,m=R("FormKit");return B(),P("div",null,[t("div",null,[o(I,{ref_key:"importDialog",ref:g},null,512),o(z,{onClick:H,text:"Import OpenMLMIS Products"})]),o(e(ee),{appear:"",show:e(y),as:"template"},{default:r(()=>[o(e(J),{as:"div",onClose:H,class:"relative z-10"},{default:r(()=>[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>c[6]||(c[6]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",Xe,[t("div",Ye,[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(e(W),{class:"w-full max-w-2xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",Je,[o(e(le),{as:"h3",class:"text-xl text-black flex items-center font-medium leading-6"},{default:r(()=>c[7]||(c[7]=[t("img",{src:Ve,class:"w-6 h-6 mr-2",alt:"excel-icon"},null,-1),N(" Import OpenMLMIS Products ")])),_:1}),t("button",{onClick:H},[o(e(ae),{class:"w-5 h-5"})])]),o(m,{type:"form","submit-label":"Update",actions:!1,onSubmit:c[5]||(c[5]=l=>oe()),id:"submitForm"},{default:r(({value:l})=>[t("div",We,[t("div",et,[t("div",{onDragover:c[2]||(c[2]=me(i=>b(i),["prevent"])),onDragleave:c[3]||(c[3]=i=>j(i)),onDrop:c[4]||(c[4]=me(i=>T(i),["prevent"])),class:ke(["border-2 border-dashed p-8 text-center cursor-pointer",e(v)?"border-sky-500 bg-sky-50":"border-gray-300"])},[t("input",{type:"file",ref:"fileInput",onChange:c[0]||(c[0]=i=>V(i)),class:"hidden",multiple:!1},null,544),t("p",tt,A(e(v)?"Drop files here":"Drag and drop csv file here"),1),t("button",{onClick:c[1]||(c[1]=i=>k.$refs.fileInput.click()),type:"button",class:"bg-sky-500 hover:bg-sky-600 rounded text-white font-normal py-1 px-4 border border-sky-500 hover:border-transparent"}," Select a CSV file ")],34),e(d).length>0?(B(),P("div",ot,[c[8]||(c[8]=t("h3",{class:"font-semibold mb-2"},"Selected File:",-1)),t("ul",lt,[(B(!0),P(be,null,we(e(d),i=>(B(),P("li",{key:i.name},A(i.name)+" ("+A(M(i.size))+") ",1))),128))])])):ne("",!0),e(n)?(B(),P("div",at,[o(e(Te),{class:"w-6 h-6 flex-shrink-0 text-red-500 mr-2"}),t("p",st,A(e(n)),1)])):ne("",!0)])]),t("div",nt,[o($,{type:"button",click:()=>{te()},text:"Clear form"},null,8,["click"]),o(a,{disabled:e(n)!==null,loading:e(u),type:"submit",click:()=>{},color:"success",icon:e(ue),text:"Save changes"},null,8,["disabled","loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),rt={class:"fixed inset-0 overflow-y-auto"},ct={class:"flex min-h-full items-center justify-center p-4 text-center"},dt={class:"border-b px-3 py-3 flex items-center justify-between"},ut={key:0,class:"flex flex-col space-y-2 items-center justify-center mx-auto my-20"},mt={key:1,class:"space-y-3 px-5 py-5"},pt={class:"w-full flex flex-col space-y-1"},ft={class:"w-full flex flex-col space-y-1"},vt={class:"w-full flex flex-col space-y-1"},_t={class:"w-full flex flex-col space-y-1"},yt={class:"w-full flex flex-col space-y-1"},xt={class:"w-full flex flex-col space-y-1"},gt=X({__name:"index",props:{data:{type:Object,required:!0}},setup(O){const p=O,f=Y("token"),y=s(!1),u=s(),v=new E,d=s(!1),C=async()=>{y.value=!0;const{data:g,error:n,pending:S}=await v.readStockItem(String(f.value),{id:p.data.id});y.value=S,g.value&&(u.value=g.value,y.value=!1),n.value&&(console.error(n.value),y.value=!1)},_=()=>{d.value=!d.value,d.value&&C()};return(g,n)=>{const S=se,w=ve;return B(),P("div",null,[o(S,{click:()=>{_()},color:"primary",text:"View",icon:e(De)},null,8,["click","icon"]),o(e(ee),{appear:"",show:e(d),as:"template"},{default:r(()=>[o(e(J),{as:"div",class:"relative z-10"},{default:r(()=>[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>n[0]||(n[0]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",rt,[t("div",ct,[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(e(W),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>{var b,j,T,V,h,M;return[t("div",dt,[o(e(le),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>n[1]||(n[1]=[t("img",{src:de,class:"w-8 h-8 mr-2"},null,-1),N(" View Stock Item ")])),_:1}),t("button",{onClick:_},[o(e(ae),{class:"w-5 h-5"})])]),e(y)?(B(),P("div",ut,[o(w,{loading:e(y)},null,8,["loading"]),n[2]||(n[2]=t("p",null,[N("Loading please wait "),t("span",{class:"animate-pulse"},"...")],-1))])):(B(),P("div",mt,[t("div",pt,[n[3]||(n[3]=t("label",{class:"font-semibold text-lg"},"Name",-1)),t("p",null,A((b=e(u))==null?void 0:b.name),1)]),t("div",ft,[n[4]||(n[4]=t("label",{class:"font-semibold text-lg"},"Description",-1)),t("p",null,A((j=e(u))==null?void 0:j.description),1)]),t("div",vt,[n[5]||(n[5]=t("label",{class:"font-semibold text-lg"},"OpenMLMIS Product Code",-1)),t("p",null,A((T=e(u))==null?void 0:T.product_code),1)]),t("div",_t,[n[6]||(n[6]=t("label",{class:"font-semibold text-lg"},"Measurement Unit",-1)),t("p",null,A((V=e(u))==null?void 0:V.stock_unit),1)]),t("div",yt,[n[7]||(n[7]=t("label",{class:"font-semibold text-lg"},"Category",-1)),t("p",null,A((h=e(u))==null?void 0:h.stock_category),1)]),t("div",xt,[n[8]||(n[8]=t("label",{class:"font-semibold text-lg"},"Location",-1)),t("p",null,A((M=e(u))==null?void 0:M.stock_location),1)])]))]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),kt={class:"fixed inset-0 overflow-y-auto"},bt={class:"flex min-h-full items-center justify-center p-4 text-center"},wt={class:"border-b px-3 py-3 flex items-center justify-between"},ht={class:"mt-2 space-y-3 px-5"},$t={class:"flex items-center"},Ct={class:"bg-white"},St={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"},Vt=X({__name:"index",props:{data:{}},emits:["update"],setup(O,{emit:p}){const f=O,y=p,u=s(!1),v=s(!1),d=s(""),C=s(""),_=s(""),g=Y("token"),n=s([]),S=s([]),w=s(""),b=s(0),j=s([]),T=s([]),V=s(""),h=s(""),M=s(0),L=s([]),q=s({name:"-- selected location --",id:0}),te=xe,H=ue,oe=async()=>{const m=new E,{data:l,error:i}=await m.getStockLocation(`${g.value}`);l.value&&(L.value=l.value,q.value=l.value.filter(x=>x.id==f.data.stock_location_id)[0]),i.value&&console.error(i.value)},k=async()=>{const m=new E,{data:l,error:i}=await m.getStockCategory(`${g.value}`);l.value&&(n.value=l.value,S.value=l.value.map(x=>x.name),w.value=n.value.filter(x=>x.id==f.data.stock_category_id)[0].name),i.value&&console.error(i.value)},c=async()=>{const m=new E,{data:l,error:i}=await m.getStockUnit(`${g.value}`);l.value&&(j.value=l.value,T.value=l.value.map(x=>x.name),V.value=j.value.filter(x=>x.id==f.data.measurement_unit)[0].name),i.value&&console.error(i.value)},I=async()=>{await k(),await c(),await oe(),a(),d.value=f.data.name,_.value=f.data.description,h.value=f.data.strength,M.value=f.data.minimum_order_level},z=async()=>{v.value=!0;const m=new E,l={id:f.data.id,name:d.value,description:_.value,stock_location_id:q.value.id,stock_category_id:n.value.filter(Q=>Q.name===w.value)[0].id,measurement_unit:j.value.filter(Q=>Q.name===V.value)[0].id,quantity_unit:b.value,strength:h.value,minimum_order_level:M.value},{data:i,error:x,pending:G}=await m.updateStockItem(`${g.value}`,l);v.value=G,i.value&&(a(),Z().$toast.success(`${d.value} stock item updated successfully!`),v.value=!1,_.value="",d.value="",y("update",!0)),x.value&&(a(),console.error(x.value),Z().$toast.error(ie),v.value=!1)},$=()=>{fe("editForm")},a=()=>{u.value=!u.value};return(m,l)=>{const i=se,x=R("FormKit"),G=_e,Q=ye,U=re;return B(),P("div",null,[o(i,{click:()=>{I()},text:"Edit",color:"success",icon:e(te)},null,8,["click","icon"]),o(e(ee),{appear:"",show:e(u),as:"template"},{default:r(()=>[o(e(J),{as:"div",class:"relative z-10"},{default:r(()=>[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>l[9]||(l[9]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",kt,[t("div",bt,[o(e(K),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(e(W),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",wt,[o(e(le),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>l[10]||(l[10]=[t("img",{src:de,class:"w-8 h-8 mr-2",alt:"stock-item-svg"},null,-1),N(" Edit Stock Item ")])),_:1}),t("button",{onClick:a},[o(e(ae),{class:"w-5 h-5"})])]),o(x,{type:"form",id:"editForm","submit-label":"Update",onSubmit:z,actions:!1},{default:r(({value:Ht})=>[t("div",ht,[o(x,{type:"text",label:"Name",validation:"required",modelValue:e(d),"onUpdate:modelValue":l[0]||(l[0]=F=>D(d)?d.value=F:null)},null,8,["modelValue"]),o(x,{type:"text",label:"Product code",modelValue:e(C),"onUpdate:modelValue":l[1]||(l[1]=F=>D(C)?C.value=F:null)},null,8,["modelValue"]),o(x,{type:"textarea",label:"Description",validation:"required",modelValue:e(_),"onUpdate:modelValue":l[2]||(l[2]=F=>D(_)?_.value=F:null)},null,8,["modelValue"]),t("div",$t,[o(G,{mode:"single","items-selected":e(V),"onUpdate:itemsSelected":l[3]||(l[3]=F=>D(V)?V.value=F:null),label:"Measurement Unit",items:e(T)},null,8,["items-selected","items"])]),o(x,{type:"number",label:"Quantity of measurement",validation:"required",modelValue:e(b),"onUpdate:modelValue":l[4]||(l[4]=F=>D(b)?b.value=F:null)},null,8,["modelValue"]),t("div",Ct,[o(G,{mode:"single",label:"Category",items:e(S),"items-selected":e(w),"onUpdate:itemsSelected":l[5]||(l[5]=F=>D(w)?w.value=F:null)},null,8,["items","items-selected"])]),t("div",null,[l[11]||(l[11]=t("label",{class:"font-medium mb-2.5 text-lg"},"Location",-1)),o(Q,{items:e(L),modelValue:e(q),"onUpdate:modelValue":l[6]||(l[6]=F=>D(q)?q.value=F:null)},null,8,["items","modelValue"])]),o(x,{type:"text",label:"Strength",modelValue:e(h),"onUpdate:modelValue":l[7]||(l[7]=F=>D(h)?h.value=F:null)},null,8,["modelValue"]),o(x,{type:"number",label:"Minimum order level",validation:"required",modelValue:e(M),"onUpdate:modelValue":l[8]||(l[8]=F=>D(M)?M.value=F:null)},null,8,["modelValue"])]),t("div",St,[o(U,{type:"button",click:()=>{$()},text:"Clear form"},null,8,["click"]),o(i,{loading:e(v),type:"submit",click:()=>{},color:"success",icon:e(H),text:"Save changes"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),Mt={components:{TransitionRoot:ee,TransitionChild:K,Dialog:J,DialogPanel:W,DialogTitle:le,XMarkIcon:ae,ExclamationTriangleIcon:Ie},data(){return{show:!1,deleteIcon:Fe,loading:!1,reason:"",cookie:Y("token")}},props:{data:{type:Object,required:!0}},methods:{async voidStockSupplier(O){this.loading=!0;const p=new E,{data:f,error:y,pending:u}=await p.voidStockItem(`${this.cookie}`,{reason:this.reason,id:O});this.loading=u,f.value&&(this.handleClick(),Z().$toast.success("Stock item deleted successfully!"),this.loading=!1,this.reason="",this.$emit("update",!0)),y.value&&(console.error(y.value),Z().$toast.error(ie),this.loading=!1)},handleClick(){this.show=!this.show}}},Ut={class:"fixed inset-0 overflow-y-auto"},Dt={class:"flex min-h-full items-center justify-center p-4 text-center"},It={class:"border-b px-3 py-3 flex items-center justify-between"},Ft={class:"mt-2 space-y-3 px-5"},Bt={class:"rounded px-2 py-2"},jt={class:"font-semibold text-red-500"},Lt={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Tt(O,p,f,y,u,v){const d=se,C=R("TransitionChild"),_=R("ExclamationTriangleIcon"),g=R("DialogTitle"),n=R("XMarkIcon"),S=R("FormKit"),w=re,b=R("DialogPanel"),j=R("Dialog"),T=R("TransitionRoot");return B(),P("div",null,[o(d,{click:v.handleClick,color:"error",text:"Delete",icon:u.deleteIcon},null,8,["click","icon"]),o(T,{appear:"",show:u.show,as:"template"},{default:r(()=>[o(j,{as:"div",class:"relative z-10"},{default:r(()=>[o(C,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>p[3]||(p[3]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",Ut,[t("div",Dt,[o(C,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(b,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[t("div",It,[o(g,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[o(_,{class:"h-5 w-5 mr-2"}),p[4]||(p[4]=N(" Confirm delete "))]),_:1}),t("button",{onClick:p[0]||(p[0]=(...V)=>v.handleClick&&v.handleClick(...V))},[o(n,{class:"w-5 h-5"})])]),o(S,{type:"form","submit-label":"Update",onSubmit:p[2]||(p[2]=V=>v.voidStockSupplier(f.data.id)),actions:!1},{default:r(({value:V})=>[t("div",Ft,[t("div",Bt,[p[5]||(p[5]=N(" Do you really want to delete ")),t("span",jt,A(f.data.name),1),p[6]||(p[6]=N("? Note that once this action is completed, it can not be undone "))]),o(S,{type:"textarea",label:"Reason",validation:"required",modelValue:u.reason,"onUpdate:modelValue":p[1]||(p[1]=h=>u.reason=h)},null,8,["modelValue"])]),t("div",Lt,[o(w,{click:()=>{v.handleClick()},type:"button",text:"Cancel"},null,8,["click"]),o(d,{loading:u.loading,type:"submit",click:()=>{},color:"error",icon:u.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Pt=he(Mt,[["render",Tt]]),qt={class:"px-5 py-5"},At={class:"flex items-center justify-between py-5"},Et={class:"text-2xl font-semibold uppercase"},Ot={class:"flex items-center space-x-3"},zt={class:"flex items-center justify-end mt-3"},Rt={class:"mt-10"},Kt={class:"py-2 flex items-center space-x-2"},ko=X({__name:"stock-items",setup(O){Le({title:`${je.name.toUpperCase()} - Stock Items`});const p=s("Stock Items"),f=s(!1),y=s(""),u=Y("token"),v=s([]),d=s([{name:"Home",link:"/home"},{name:"Stock Management",link:"#"}]),C=[{text:"name",value:"name",sortable:!0},{text:"description",value:"description"},{text:"date modified",value:"updated_date"},{text:"actions",value:"actions"}];async function _(){f.value=!0;const g=new E,{data:n,error:S,pending:w}=await g.getStockItem(`${u.value}`);f.value=w,n.value&&(v.value=n.value.map(b=>({...b,updated_date:Ce(b.updated_date).format(Se)})),f.value=!1),S.value&&(console.error(S.value),f.value=!1)}return $e(()=>{_()}),(g,n)=>{const S=ge,w=He,b=it,j=Ue,T=gt,V=Vt,h=Pt,M=Be;return B(),P("div",qt,[o(S,{pages:e(d)},null,8,["pages"]),t("div",At,[t("h3",Et,A(e(p)),1),t("div",Ot,[o(w,{onUpdate:_}),o(b,{onUpdate:_})])]),t("div",zt,[o(j,{search:e(y),"onUpdate:search":n[0]||(n[0]=L=>D(y)?y.value=L:null)},null,8,["search"])]),t("div",Rt,[o(M,{"search-field":"name","search-value":e(y),headers:C,data:e(v),loading:e(f)},{actions:r(({item:L})=>[t("div",Kt,[o(T,{data:L,onUpdate:_},null,8,["data"]),o(V,{data:L,onUpdate:_},null,8,["data"]),o(h,{data:L,onUpdate:_},null,8,["data"])])]),_:1},8,["search-value","data","loading"])])])}}});export{ko as default};

import{_ as z}from"./Breadcrumb.vue.c66aa30f.js";import{a as S,b as k,_ as $,g as n,o as b,c as w,e as t,d as e,h as i,i as T,f as U,C as H,D as J,t as V,F as Q,r as W,u as Y}from"./entry.7a85215a.js";import{_ as A}from"./OutlinedButton.7579a73a.js";import{r as X,e as C,f as D,i as O,a as Z}from"./fetch.b3533157.js";import{e as F}from"./constants.8b327ee6.js";import{r as P}from"./XMarkIcon.3f6360b6.js";import{r as ee}from"./UserIcon.04a71ca4.js";import{r as te}from"./WrenchScrewdriverIcon.dca683a0.js";import{r as G}from"./ArrowDownTrayIcon.abb6941e.js";import{r as oe}from"./ArrowUturnLeftIcon.e73f0aa7.js";import{S as q,h as j,U as R,G as E,V as M}from"./transition.aeb06950.js";import{_ as se}from"./SearchBar.2dc7b017.js";import{r as ne,a as K}from"./PencilSquareIcon.c3173494.js";import{r as L}from"./TrashIcon.9f4697ed.js";import{_ as ie}from"./Datatable.61063d00.js";import{P as ae}from"./package.c07b7a49.js";import{r as le}from"./MagnifyingGlassIcon.cb45cf45.js";import{r as ce}from"./ArrowUpOnSquareIcon.e3cc313f.js";import"./nuxt-link.a46a2f01.js";import"./HomeIcon.d83c3686.js";import"./PrinterIcon.be882207.js";import"./hidden.38d3ab8c.js";import"./Loader.17edb7c2.js";const re={components:{TransitionRoot:q,TransitionChild:j,Dialog:R,DialogPanel:E,DialogTitle:M,XMarkIcon:P,UserIcon:ee},data(){return{open:!1,driverIcon:te,addIcon:X,saveIcon:G,clearIcon:oe,name:"",description:"",loading:!1,cookie:S("token"),sections:new Array,selectedSection:new Array}},created(){this.loadSections()},methods:{async loadSections(){const c={route:`${C.sections}`,method:"GET",token:`${this.cookie}`},{data:s,error:l}=await D(c);s.value&&(this.sections=s.value.data),l.value&&console.error(l.value)},async submitForm(){this.loading=!0;let c=O(this.sections,this.selectedSection);const s={route:`${C.visitTypes}`,method:"POST",token:`${this.cookie}`,body:{name:this.name,description:this.description,facility_sections:c}},{data:l,error:r,pending:o}=await D(s);l.value&&(k().$toast.success("Visit type created succcessfully!"),this.$emit("update",!0),this.handleClick()),r.value&&(console.error(r.value.data),k().$toast.error(`${F}`),this.handleClick())},handleClick(){this.open=!this.open},resetForm(){this.$formkit.reset("visitTypeForm")}}},B=""+new URL("outpatient.26f69398.svg",import.meta.url).href;const N=c=>(H("data-v-ef9e22d5"),c=c(),J(),c),de=N(()=>t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)),ue={class:"fixed inset-0 overflow-y-auto"},me={class:"flex min-h-full items-center justify-center p-4 text-center"},pe={class:"border-b px-3 py-3 flex items-center justify-between"},_e=N(()=>t("img",{src:B,class:"w-8 h-8 mr-2"},null,-1)),fe={class:""},he={class:"mt-2 space-y-3 px-5 py-5"},ye={class:"w-full flex flex-col space-y-2"},ve=N(()=>t("label",{class:"font-medium"},"Facility Sections",-1)),ge={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function xe(c,s,l,r,o,a){const _=U,u=n("TransitionChild"),h=n("DialogTitle"),y=n("XMarkIcon"),m=n("FormKit"),f=n("multi-select"),v=A,p=n("DialogPanel"),x=n("Dialog"),I=n("TransitionRoot");return b(),w("div",null,[t("div",null,[e(_,{click:a.handleClick,text:"New visit type",color:"primary",icon:o.addIcon},null,8,["click","icon"])]),e(I,{appear:"",show:o.open,as:"template"},{default:i(()=>[e(x,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:i(()=>[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[de]),_:1}),t("div",ue,[t("div",me,[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[t("div",pe,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[_e,T(" New visit type ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...g)=>a.handleClick&&a.handleClick(...g))},[e(y,{class:"w-5 h-5"})])]),t("div",fe,[e(m,{type:"form",id:"visitTypeForm","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:i(({value:g})=>[t("div",he,[e(m,{type:"text",label:"Name",modelValue:o.name,"onUpdate:modelValue":s[1]||(s[1]=d=>o.name=d),validation:"required|text"},null,8,["modelValue"]),e(m,{type:"textarea",label:"Description",modelValue:o.description,"onUpdate:modelValue":s[2]||(s[2]=d=>o.description=d),validation:"required|text"},null,8,["modelValue"]),t("div",ye,[ve,e(f,{style:{"--ms-max-height":"none !important"},modelValue:o.selectedSection,"onUpdate:modelValue":s[3]||(s[3]=d=>o.selectedSection=d),options:o.sections.map(d=>d.name),mode:"tags",searchable:!0,required:!0,clear:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",ge,[e(v,{type:"button",text:"Clear form",click:()=>{a.resetForm()}},null,8,["click"]),e(_,{click:()=>{},icon:o.saveIcon,text:"Save changes",color:"success",type:"submit",loading:o.loading},null,8,["icon","loading"])])]),_:1},8,["onSubmit"])])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const be=$(re,[["render",xe],["__scopeId","data-v-ef9e22d5"]]),we={components:{TransitionRoot:q,TransitionChild:j,Dialog:R,DialogPanel:E,DialogTitle:M,XMarkIcon:P},data(){return{viewIcon:ne,show:!1,editIcon:K}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},ke=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Te={class:"fixed inset-0 overflow-y-auto"},Ce={class:"flex min-h-full items-center justify-center p-4 text-center"},De={class:"border-b px-3 py-3 flex items-center justify-between"},Ie=t("img",{src:B,class:"w-8 h-8 mr-2"},null,-1),Ve={class:"mt-2 space-y-3 px-5 py-5"},$e={class:"w-full flex flex-col space-y-2"},Se=t("label",{class:"font-medium text-lg"},"Name",-1),Ue={class:"underline"},Fe={class:"w-full flex flex-col space-y-2"},Pe=t("label",{class:"font-medium text-lg"},"Description",-1),qe={class:"underline"},je={class:"w-full flex flex-col space-y-2"},Re=t("label",{class:"font-medium text-lg"},"Facility sections",-1);function Ee(c,s,l,r,o,a){const _=U,u=n("TransitionChild"),h=n("DialogTitle"),y=n("XMarkIcon"),m=n("DialogPanel"),f=n("Dialog"),v=n("TransitionRoot");return b(),w("div",null,[e(_,{click:a.handleClick,color:"primary",text:"View",icon:o.viewIcon},null,8,["click","icon"]),e(v,{appear:"",show:o.show,as:"template"},{default:i(()=>[e(f,{as:"div",class:"relative z-10"},{default:i(()=>[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[ke]),_:1}),t("div",Te,[t("div",Ce,[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[e(m,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[t("div",De,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[Ie,T(" View visit type ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...p)=>a.handleClick&&a.handleClick(...p))},[e(y,{class:"w-5 h-5"})])]),t("div",Ve,[t("div",$e,[Se,t("p",Ue,V(l.data.name),1)]),t("div",Fe,[Pe,t("p",qe,V(l.data.description),1)]),t("div",je,[Re,(b(!0),w(Q,null,W(l.data.facility_sections,(p,x)=>(b(),w("p",{class:"underline",key:x},V(p.name),1))),128))])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Me=$(we,[["render",Ee]]),Ae={components:{TransitionRoot:q,TransitionChild:j,Dialog:R,DialogPanel:E,DialogTitle:M,XMarkIcon:P},data(){return{editIcon:K,show:!1,saveIcon:G,cookie:S("token"),loading:!1,sections:new Array,selectedSection:new Array}},props:{data:{type:Object,required:!0}},methods:{async loadSections(){this.handleClick(),this.selectedSection=this.data.facility_sections.map(r=>r.name);const c={route:`${C.sections}`,method:"GET",token:`${this.cookie}`},{data:s,error:l}=await D(c);s.value&&(this.sections=s.value.data),l.value&&console.error(l.value)},async submitForm(){this.loading=!0;let c=O(this.sections,this.selectedSection);const s={route:`${C.visitTypes}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:{name:this.data.name,description:this.data.description,facility_sections:c}},{data:l,error:r,pending:o}=await D(s);this.loading=o,l.value&&(k().$toast.success("Visit type updated succcessfully!"),this.$emit("update",!0),this.handleClick(),this.loading=!1),r.value&&(console.error(r.value.data),k().$toast.error(`${F}`),this.handleClick(),this.loading=!1)},handleClick(){this.show=!this.show}}},Be=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ne={class:"fixed inset-0 overflow-y-auto"},Xe={class:"flex min-h-full items-center justify-center p-4 text-center"},Oe={class:"border-b px-3 py-3 flex items-center justify-between"},Ge=t("img",{src:B,class:"w-8 h-8 mr-2"},null,-1),Ke={class:"mt-2 space-y-3 px-5 py-5"},Le={class:"w-full flex flex-col space-y-2"},ze=t("label",{class:"font-medium"},"Facility Sections",-1),He={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Je(c,s,l,r,o,a){const _=U,u=n("TransitionChild"),h=n("DialogTitle"),y=n("XMarkIcon"),m=n("FormKit"),f=n("multi-select"),v=A,p=n("DialogPanel"),x=n("Dialog"),I=n("TransitionRoot");return b(),w("div",null,[e(_,{click:a.loadSections,text:"Edit",icon:o.editIcon,color:"success"},null,8,["click","icon"]),e(I,{appear:"",show:o.show,as:"template"},{default:i(()=>[e(x,{as:"div",class:"relative z-10"},{default:i(()=>[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[Be]),_:1}),t("div",Ne,[t("div",Xe,[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[t("div",Oe,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[Ge,T(" Edit visit type ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...g)=>a.handleClick&&a.handleClick(...g))},[e(y,{class:"w-5 h-5"})])]),e(m,{type:"form",id:"editForm","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:i(({value:g})=>[t("div",Ke,[e(m,{type:"text",label:"Name",modelValue:l.data.name,"onUpdate:modelValue":s[1]||(s[1]=d=>l.data.name=d),validation:"required|text"},null,8,["modelValue"]),e(m,{type:"textarea",label:"Description",modelValue:l.data.description,"onUpdate:modelValue":s[2]||(s[2]=d=>l.data.description=d),validation:"required|text"},null,8,["modelValue"]),t("div",Le,[ze,e(f,{style:{"--ms-max-height":"none !important"},modelValue:o.selectedSection,"onUpdate:modelValue":s[3]||(s[3]=d=>o.selectedSection=d),options:o.sections.map(d=>d.name),mode:"tags",searchable:!0,required:!0,clear:"",class:"focus:ring-none fcus:border-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),t("div",He,[e(v,{text:"Clear form"}),e(_,{click:()=>{},icon:o.saveIcon,text:"Save changes",color:"success",type:"submit",loading:o.loading},null,8,["icon","loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Qe=$(Ae,[["render",Je]]),We={components:{TransitionRoot:q,TransitionChild:j,Dialog:R,DialogPanel:E,DialogTitle:M,XMarkIcon:P,ExclamationTriangleIcon:Z},data(){return{show:!1,deleteIcon:L,loading:!1,cookie:S("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(c){this.loading=!0;let s={route:`${C.visitTypes}/${c}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}};const{pending:l,error:r,data:o}=await D(s);o.value&&(this.handleClick(),k().$toast.success("Visit type deleted successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(console.error(r.value),k().$toast.error(F),this.loading=!1)},handleClick(){this.show=!this.show}}},Ye=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ze={class:"fixed inset-0 overflow-y-auto"},et={class:"flex min-h-full items-center justify-center p-4 text-center"},tt={class:"border-b px-3 py-3 flex items-center justify-between"},ot={class:"mt-2 space-y-3 px-5"},st={class:"rounded px-2 py-2"},nt={class:"font-semibold text-red-500"},it={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function at(c,s,l,r,o,a){const _=U,u=n("TransitionChild"),h=n("ExclamationTriangleIcon"),y=n("DialogTitle"),m=n("XMarkIcon"),f=n("FormKit"),v=A,p=n("DialogPanel"),x=n("Dialog"),I=n("TransitionRoot");return b(),w("div",null,[e(_,{click:a.handleClick,color:"error",text:"Delete",icon:o.deleteIcon},null,8,["click","icon"]),e(I,{appear:"",show:o.show,as:"template"},{default:i(()=>[e(x,{as:"div",class:"relative z-10"},{default:i(()=>[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[Ye]),_:1}),t("div",Ze,[t("div",et,[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[t("div",tt,[e(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:i(()=>[e(h,{class:"h-5 w-5 mr-2"}),T(" Confirm delete ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...g)=>a.handleClick&&a.handleClick(...g))},[e(m,{class:"w-5 h-5"})])]),e(f,{id:"deleteForm",type:"form","submit-label":"Update",onSubmit:s[2]||(s[2]=g=>a.deleteData(l.data.id)),actions:!1},{default:i(({value:g})=>[t("div",ot,[t("div",st,[T(" Do you really want to delete "),t("span",nt,V(l.data.name),1),T("? Note that once this action is completed, it can not be undone ")]),e(f,{type:"textarea",label:"Reason",validation:"required",modelValue:o.reason,"onUpdate:modelValue":s[1]||(s[1]=d=>o.reason=d)},null,8,["modelValue"])]),t("div",it,[e(v,{click:()=>{},type:"button",text:"Clear form"}),e(_,{loading:o.loading,type:"submit",click:()=>{},color:"success",icon:o.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const lt=$(We,[["render",at]]),ct={components:{MagnifyingGlassIcon:le},setup(){Y({title:`${ae.name.toUpperCase()} - Visit Types`})},data(){return{header:"Visit Types",pages:[{name:"Home",link:"/home"},{name:"Lab Configuration",link:"#"}],addIcon:X,deleteIcon:L,viewIcon:ce,headers:[{text:"ID",value:"id",sortable:!0},{text:"NAME",value:"name",sortable:!0},{text:"DESCRIPTION",value:"description",sortable:!0},{text:"ACTIONS",value:"actions"}],visitTypes:new Array,loading:!1,cookie:S("token"),serverItemsLength:0,serverOptions:{page:1,rowsPerPage:10,sortBy:"name"},searchField:"name",search:"",searchValue:""}},created(){this.init()},methods:{async init(){this.loading=!0;const{page:c,rowsPerPage:s}=this.serverOptions,l={route:`${C.visitTypes}?page=${c}&per_page=${s}&search=${this.search}`,method:"GET",token:`${this.cookie}`};let{data:r,error:o,pending:a}=await D(l);this.loading=a,r.value&&(this.visitTypes=r.value.data,this.serverItemsLength=r.value.meta.total_count),o.value&&(console.log(o.value.data),k().$toast.error(`${F}`))},updateSearch(c){this.searchValue=c,this.search=c},updateVisitTypes(c){c&&this.init()}}},rt={class:"py-5 px-5"},dt={class:"flex items-center justify-between py-5"},ut={class:"text-2xl font-semibold"},mt={class:"flex justify-end w-full px-2 py-2 mb-2"},pt={class:"py-2 flex items-center space-x-2"};function _t(c,s,l,r,o,a){const _=z,u=be,h=se,y=Me,m=Qe,f=lt,v=ie;return b(),w("div",rt,[e(_,{pages:o.pages},null,8,["pages"]),t("div",dt,[t("h3",ut,V(o.header),1),e(u,{onUpdate:a.updateVisitTypes},null,8,["onUpdate"])]),t("div",mt,[e(h,{search:o.search,onUpdate:a.updateSearch},null,8,["search","onUpdate"])]),e(v,{headers:o.headers,data:o.visitTypes,loading:o.loading,"search-field":o.searchField,"search-value":o.searchValue},{actions:i(({item:p})=>[t("div",pt,[e(y,{data:p},null,8,["data"]),e(m,{data:p,onUpdate:a.updateVisitTypes},null,8,["data","onUpdate"]),e(f,{data:p,onUpdate:a.updateVisitTypes},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-field","search-value"])])}const Mt=$(ct,[["render",_t]]);export{Mt as default};

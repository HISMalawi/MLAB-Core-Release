import{_ as ae}from"./DV1Zihh-.js";import{_ as ce}from"./zByIrxYi.js";import{d as ie,aC as ue,r as v,a as de,$ as le,I as pe,u as me,w as ye,z as C,c as be,o as J,x as _e,b as f,e as k,f as m,h as o,g as e,j,A as he,y as xe,t as a,D as G,F as ve,k as fe,l as U,m as z,aD as ke,E as ge,_ as $e,n as Ce}from"./Bz6dDDnm.js";import{_ as Re}from"./BJnLWEDZ.js";import{_ as we,a as je}from"./D9FmbqHg.js";import{_ as De}from"./BD0uniIa.js";import{_ as Qe}from"./BAX8diHQ.js";import{u as Ne}from"./DJ7dCo8l.js";import{P as Te}from"./Vq2kRzrb.js";import{u as Ye}from"./CYvY0-Vn.js";import{r as Ae}from"./BBJp7UAL.js";import{r as Ee}from"./B_nqcZFa.js";import"./CJmHsYwL.js";import"./sX7iQee9.js";import"./DMLPgDkT.js";import"./Dlff4vsN.js";import"./CegF9o4i.js";import"./BeaCO2_9.js";import"./DJbIHcqx.js";import"./Q3CcE72d.js";import"./IJlsxbkx.js";const Me={class:"px-5 py-5"},Be={class:"w-full flex justify-between py-5"},Oe={class:"flex items-center space-x-3"},Se={class:"bg-gray-100 pl-2.5 rounded flex items-center text-zinc-500"},qe={class:"w-36 ml-2 bg-white"},Fe={class:"border rounded"},Ie={class:"rounded-tr rounded-tl border-b px-5 py-5 flex items-center justify-between"},Le={class:"px-4 py-2.5 font-medium"},He={class:"font-normal"},Pe={class:"overflow-x-auto rounded border-t relative"},Ve={key:0,class:"w-full bg-black bg-opacity-5 absolute flex space-y-2 justify-center py-20 mx-auto h-full"},Je={class:"flex flex-col items-center space-y-"},Ge={class:"overflow-x-auto"},Ue={class:"px-4 py-2 text-center border-r border-b"},ze=["onClick"],Ke=["onClick"],We=["onClick"],Xe={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},Ze=["onClick"],et=["onClick"],tt=["onClick"],ot={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},rt=["onClick"],st=["onClick"],nt=["onClick"],at={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},ct=["onClick"],it=["onClick"],ut=["onClick"],dt={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"},lt={class:"px-4 py-2 text-center bg-green-600 border text-white border-green-400"},pt={key:1,class:"w-full flex flex-col items-center justify-center space-y-2 py-10"},Mt=ie({__name:"biochemistry",setup(mt){Ye({title:`${Te.name.toUpperCase()} - Biochemistry Report`});const K=Ee,W=ue([{name:"Home",link:"/home"},{name:"Reports",link:"#"},{name:"MoH Diagnistic Reports",link:"#"}]),b=v([]),s=v({name:"select year"}),D=v([]),Q=de("token"),p=v(!1),_=le(),h=pe(),{$toast:x}=me(),R=Ne(),N=v([]),d=(i,r,c,l)=>{if(c!==0&&l!==""){const y=C(r).format("MMMM-YYYY");_.push(`/reports/${l}?origin=moh&type=biochemistry-report&dateRange=${y}&test=${i} - ${y}&department=Biochemistry&count=${c}`)}else x.warning("No data found for this month")},X=async()=>{p.value=!0;const i={route:`${U.reportIndicators}?department=Biochemistry`,method:"GET",token:`${Q.value}`},{data:r,error:c}=await z(i);r.value&&(b.value=r.value.map(l=>({indicator:l,jan:{count:"!",associated_ids:""},feb:{count:"!",associated_ids:""},mar:{count:"!",associated_ids:""},totalQ1:"!",apr:{count:"!",associated_ids:""},may:{count:"!",associated_ids:""},june:{count:"!",associated_ids:""},totalQ2:"!",jul:{count:"!",associated_ids:""},aug:{count:"!",associated_ids:""},sept:{count:"!",associated_ids:""},totalQ3:"!",oct:{count:"!",associated_ids:""},nov:{count:"!",associated_ids:""},dec:{count:"!",associated_ids:""},totalQ4:"!",total:"!"})),p.value=!1),c.value&&(console.error(c.value),p.value=!1,x.error(ke))},Z=async()=>{s.value.name==="select year"?x.warning("Please select a year"):T()},ee=()=>{let i="";if(s.value.name!=="select year"&&(i=`&year=${s.value.name}`),h.query.period){const r=`1/${String(h.query.period)}`;i=`&year=${C(r).format("YYYY")}`,s.value={name:C(r).format("YYYY")}}return i},T=async()=>{p.value=!0;const i=h.query.report_id??"",r={route:`${U.mohReport}biochemistry?report_id=${i}${ee()}`,method:"GET",token:`${Q.value}`},{data:c,error:l,pending:y}=await z(r);if(p.value=y,c.value){const g=b.value.map(n=>{const w=["january","february","march","april","may","june","july","august","september","october","november","december"].map(ne=>c.value[ne][n.indicator]),[t,$,u,A,E,M,B,O,S,q,F,I]=w,L=t.count+$.count+u.count,H=A.count+E.count+M.count,P=B.count+O.count+S.count,V=q.count+F.count+I.count,se=L+H+P+V;return{indicator:n.indicator,jan:t,feb:$,mar:u,totalQ1:L,apr:A,may:E,june:M,totalQ2:H,jul:B,aug:O,sept:S,totalQ3:P,oct:q,nov:F,dec:I,totalQ4:V,total:se}});b.value=g,N.value=g.map(n=>({"Laboratory Service":n.indicator,January:n.jan.count,February:n.feb.count,March:n.mar.count,"Total Q1":n.totalQ1,April:n.apr.count,May:n.may.count,June:n.june.count,"Total Q2":n.totalQ2,July:n.jul.count,August:n.aug.count,September:n.sept.count,"Total Q3":n.totalQ3,October:n.oct.count,November:n.nov.count,December:n.dec.count,"Total Q4":n.totalQ4,Total:n.total})),p.value=!1,te(c.value.report_id),x.success("Report data generated successfully!")}l.value&&(p.value=!1,console.error(l.value),x.error(ge))},te=i=>{const c={..._.currentRoute.value.query,report_id:i};_.replace({query:c}).catch(l=>{console.error("Failed to replace route:",l)})},oe=()=>{const i=new Date().getFullYear();D.value=Array.from({length:i-1999},(r,c)=>({name:(i-c).toString(),id:i-c}))};ye(s,()=>{if(s){const r={..._.currentRoute.value.query,period:C(s.value.name).format("M/yyyy"),report_id:""};_.replace({query:r}).catch(c=>{console.error("Failed to replace route:",c)})}},{deep:!0});const re=be(()=>h.query.period!==void 0&&h.query.period!=="");return J(()=>{re.value&&T()}),J(()=>{oe(),X()}),(i,r)=>{const c=ae,l=ce,y=$e,g=Re,n=_e("excel"),Y=je,w=Ce;return f(),k("div",Me,[m(c,{pages:o(W)},null,8,["pages"]),r[6]||(r[6]=e("div",{class:"py-5"},[e("div",{class:"text-2xl font-semibold flex items-center uppercase"},[e("img",{src:De,alt:"report-icon",class:"w-8 h-8 mr-2"}),j(" Biochemistry Report ")])],-1)),e("div",Be,[e("div",Oe,[e("div",Se,[m(o(Ae),{class:"w-5 h-5 mr-2"}),r[1]||(r[1]=j(" Filter By Year ")),e("div",qe,[m(l,{items:o(D),modelValue:o(s),"onUpdate:modelValue":r[0]||(r[0]=t=>he(s)?s.value=t:null)},null,8,["items","modelValue"])])]),m(y,{loading:o(p),click:()=>{Z()},color:"primary",icon:o(K),text:"Generate report"},null,8,["loading","click","icon"])]),e("div",null,[m(n,{class:"btn btn-default",header:[`BIOCHEMISTRY MoH LABORATORY REPORT ${o(s).name}`,o(R).details.name,o(R).details.address,o(R).details.phone],data:o(N),worksheet:"report-work-sheet",name:`moh_biochemistry_report_${o(s).name}.xls`},{default:xe(()=>[m(g,{text:"Export Excel"})]),_:1},8,["header","data","name"])])]),e("div",Fe,[e("div",Ie,[r[2]||(r[2]=e("div",{class:"flex flex-col space-y-2"},[e("img",{src:Qe,alt:"app-logo",class:"w-24 h-24 object-cover"}),e("h3",{class:"text-xl font-semibold"}," BIOCHEMISTRY MoH LABORATORY REPORT ")],-1)),m(Y)]),e("div",null,[e("h3",Le,[r[3]||(r[3]=j("Data for the year: ")),e("span",He,a(o(s).name=="select year"?"-:-":o(s).name),1)])]),e("div",Pe,[o(p)?(f(),k("div",Ve,[e("div",Je,[m(w,{width:100,height:100})])])):G("",!0),e("table",Ge,[r[4]||(r[4]=e("thead",{class:"border-b"},[e("tr",{class:"w-full bg-gray-50"},[e("th",{class:"px-4 py-2 uppercase border-r"},"Laboratory Service"),e("th",{class:"px-4 py-2 uppercase border-r"},"Jan"),e("th",{class:"px-4 py-2 uppercase border-r"},"Feb"),e("th",{class:"px-4 py-2 uppercase"},"March"),e("th",{class:"px-4 py-2 uppercase bg-sky-50 text-sky-500 border border-sky-100"},"Total Q1"),e("th",{class:"px-4 py-2 uppercase border-r"},"Apr"),e("th",{class:"px-4 py-2 uppercase border-r"},"May"),e("th",{class:"px-4 py-2 uppercase"},"Jun"),e("th",{class:"px-4 py-2 uppercase bg-sky-50 text-sky-500 border border-sky-100"},"Total Q2"),e("th",{class:"px-4 py-2 uppercase border-r"},"Jul"),e("th",{class:"px-4 py-2 uppercase border-r"},"Aug"),e("th",{class:"px-4 py-2 uppercase"},"Sep"),e("th",{class:"px-4 py-2 uppercase bg-sky-50 text-sky-500 border border-sky-100"},"Total Q3"),e("th",{class:"px-4 py-2 uppercase border-r"},"Oct"),e("th",{class:"px-4 py-2 uppercase border-r"},"Nov"),e("th",{class:"px-4 py-2 uppercase"},"Dec"),e("th",{class:"px-4 py-2 uppercase bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"}," Total Q4 "),e("th",{class:"px-4 py-2 uppercase bg-green-600 text-white border border-green-400"},"Total")])],-1)),e("tbody",null,[(f(!0),k(ve,null,fe(o(b),(t,$)=>(f(),k("tr",{class:"px-2",key:$},[e("td",Ue,a(t.indicator),1),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`01-01-${o(s).name}`,Number(t.jan.count),t.jan.associated_ids)},a(t.jan.count),9,ze),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`02-01-${o(s).name}`,Number(t.feb.count),t.feb.associated_ids)},a(t.feb.count),9,Ke),e("td",{class:"px-4 py-2 text-center border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`03-01-${o(s).name}`,Number(t.mar.count),t.mar.associated_ids)},a(t.mar.count),9,We),e("td",Xe,a(t.totalQ1),1),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`04-01-${o(s).name}`,Number(t.apr.count),t.apr.associated_ids)},a(t.apr.count),9,Ze),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`05-01-${o(s).name}`,Number(t.may.count),t.may.associated_ids)},a(t.may.count),9,et),e("td",{class:"px-4 py-2 text-center border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`06-01-${o(s).name}`,Number(t.june.count),t.june.associated_ids)},a(t.june.count),9,tt),e("td",ot,a(t.totalQ2),1),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`07-01-${o(s).name}`,Number(t.jul.count),t.jul.associated_ids)},a(t.jul.count),9,rt),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`08-08-${o(s).name}`,Number(t.aug.count),t.aug.associated_ids)},a(t.aug.count),9,st),e("td",{class:"px-4 py-2 text-center border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`09-9-${o(s).name}`,Number(t.sept.count),t.sept.associated_ids)},a(t.sept.count),9,nt),e("td",at,a(t.totalQ3),1),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`10-10-${o(s).name}`,Number(t.oct.count),t.oct.associated_ids)},a(t.oct.count),9,ct),e("td",{class:"px-4 py-2 text-center border-r border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`11-11-${o(s).name}`,Number(t.nov.count),t.nov.associated_ids)},a(t.nov.count),9,it),e("td",{class:"px-4 py-2 text-center border-b hover:font-medium cursor-pointer hover:text-sky-500 hover:underline transition duration-150",onClick:u=>d(t.indicator,`12-12-${o(s).name}`,Number(t.dec.count),t.dec.associated_ids)},a(t.dec.count),9,ut),e("td",dt,a(t.totalQ4),1),e("td",lt,a(t.total),1)]))),128))])]),o(b).length==0&&!o(p)?(f(),k("div",pt,r[5]||(r[5]=[e("img",{src:we,alt:"page-icon",class:"object-cover w-20 h-20"},null,-1),e("p",{class:"text-base"},"Could not load data, please try again",-1)]))):G("",!0)])])])}}});export{Mt as default};

import{_ as z}from"./Bo9Y6Pu_.js";import{_ as I}from"./CQqertM8.js";import{d as A,r as o,a as N,u as D,y as M,b as w,e as G,f as n,h as e,B as F,z as f,Y as K,p as T,g as s,G as H,V as Y,k as O,q as J,i as Q,t as $,v as W,S as X,l as C,m as P,E as R,_ as Z,o as ee,w as B,L as U,H as se,K as V,a1 as te}from"./B6Tj7v0x.js";import{_ as ae}from"./DUGoDEYW.js";import{_ as j}from"./DAoM-dCf.js";import{r as ne}from"./LlNZ35XP.js";import{_ as oe}from"./DV7heDwp.js";import{u as ie}from"./4RFeoWEd.js";import{u as q}from"./CNoZcmv_.js";import{P as le}from"./D0dD8Pjq.js";import"./BbLbM4kr.js";import"./Ch3yEbHE.js";import"./BU27LF7R.js";import"./DbZAM_j6.js";import"./CFG611di.js";const ce=s("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),re={class:"fixed inset-0 overflow-y-auto"},pe={class:"flex min-h-full items-center justify-center p-4 text-center"},me={class:"border-b px-3 py-3 flex items-center justify-between"},ue=s("img",{src:j,class:"w-8 h-8 mr-2",alt:"test-tube-icon"},null,-1),de={class:"mt-2 space-y-3 px-5 py-5"},_e={class:"w-full flex flex-col space-y-1"},fe=s("label",{class:"font-semibold text-lg"},$("Specimen Name"),-1),ve={class:"text-base text-gray-600"},he={class:"w-full flex flex-col space-y-1"},ye=s("label",{class:"font-semibold text-lg"},$("Test Type"),-1),xe={class:"text-base text-gray-600"},ge={class:"mt-2 space-y-3 px-5 relative pb-20"},be={class:"mt-10 justify-end flex items-center space-x-3 px-3 py-2 border-t"},$e=A({__name:"index",props:{id:{}},emits:["action-completed"],setup(E,{emit:k}){const v=k,g=E,h=o(!1),c=o(!1),u=N("token"),{$toast:d}=D(),r=o({life_span:"",life_span_units:""}),y=o({specimen_name:"",test_type_name:"",life_span:"",life_span_units:""}),x=o([{name:"mins",value:"mins"},{name:"hours",value:"hours"},{name:"days",value:"days"},{name:"months",value:"months"}]),S=async()=>{c.value=!0;const p={route:`${C.specimensLifespan.edit}/${g.id}`,method:"GET",token:`${u.value}`},a=await P(p);if(a.data.value){const t=a.data.value;r.value.life_span=t.life_span,r.value.life_span_units=t.life_span_units,y.value.specimen_name=t.specimen.name,y.value.test_type_name=t.test_type.name,h.value=!0}c.value=!1,a.error.value&&(c.value=!1,d.error(`${R}`))},L=async()=>{c.value=!0;const p={route:`${C.specimensLifespan.update}/${g.id}`,method:"PUT",token:`${u.value}`,body:r.value},{data:a,error:t,pending:_}=await P(p);c.value=_,a.value&&(i(),v("action-completed",!0),d.success("Specimen lifespan updated successfully!")),t.value&&(d.success("An error occurred, please try again!"),i())},i=()=>{h.value=!h.value,c.value=!1};return(p,a)=>{const t=Z,_=M("FormKit"),b=ae;return w(),G("div",null,[n(t,{click:S,color:"success",text:"Edit",icon:e(F)},null,8,["icon"]),n(e(X),{appear:"",show:e(h),as:"template"},{default:f(()=>[n(e(K),{as:"div",class:"relative z-10"},{default:f(()=>[n(e(T),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:f(()=>[ce]),_:1}),s("div",re,[s("div",pe,[n(e(T),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:f(()=>[n(e(H),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:f(()=>[s("div",me,[n(e(Y),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:f(()=>[ue,O(" Edit Specimen Lifespan ")]),_:1}),s("button",{onClick:i},[n(e(J),{class:"w-5 h-5"})])]),Q(s("div",de,[s("div",_e,[fe,s("p",ve,$(e(y).specimen_name),1)]),s("div",he,[ye,s("p",xe,$(e(y).test_type_name),1)])],512),[[W,!e(c)]]),n(_,{type:"form","submit-label":"Update",onSubmit:L,actions:!1},{default:f(({})=>[s("div",ge,[n(_,{class:"w-full",type:"number",label:"Lifespan",validation:"required",modelValue:e(r).life_span,"onUpdate:modelValue":a[0]||(a[0]=l=>e(r).life_span=l)},null,8,["modelValue"]),n(b,{label:"Duration",mode:"single",items:e(x).map(l=>l.value),"items-selected":e(r).life_span_units,"onUpdate:itemsSelected":a[1]||(a[1]=l=>e(r).life_span_units=l),class:"z-10"},null,8,["items","items-selected"])]),s("div",be,[n(t,{type:"submit",click:()=>{},color:"success",loading:e(c),icon:e(ne),text:"Save changes"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),ke={class:"px-5 py-5"},we={class:"text-2xl font-semibold flex items-center uppercase py-5"},Se=s("img",{src:j,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),Le={class:"flex justify-end w-full px-2 py-2 mb-2"},Ce={class:"py-2 flex items-center space-x-2"},Ie=A({__name:"specimen-lifespan",setup(E){ie({title:`${le.name.toUpperCase()} - Specimen Lifespan`});const k=o(0),v=o(!1),g=o([]),h=N("token"),c=o("Specimen Lifespan"),u=o(""),d=o({page:1,rowsPerPage:10,sortBy:"name"}),r=o([{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}]),y=o([{text:"Specimen Type",value:"specimen_name",sortable:!0},{text:"Test Type",value:"test_type_name"},{text:"Lifesapn",value:"specimen_life_span"},{text:"Actions",value:"actions"}]),x=async()=>{v.value=!0;const{page:i,rowsPerPage:p}=d.value,a={route:te(C.specimensLifespan.index,{page:i,per_page:p,search:u.value}),method:"GET",token:`${h.value}`},{data:t,error:_,pending:b}=await P(a);if(v.value=b,t.value){const l=t.value.data;g.value=l?l.map(m=>({id:m.id,specimen_name:m.specimen_name,test_type_name:m.test_type_name,specimen_life_span:m.life_span&&m.life_span_units?`${m.life_span} ${m.life_span_units}`:"--",life_span:m.life_span,life_span_unit:m.life_span_units})):[],k.value=t.value.meta.total_count??0,v.value=!1}_.value&&(v.value=!1,D().$toast.error(`${R}`))},S=i=>d.value=i;ee(()=>{x()}),B(d,()=>x()),B(u,()=>x());const L=async()=>{x()};return(i,p)=>{const a=z,t=I,_=$e,b=oe;return w(),G("div",ke,[n(a,{pages:e(r)},null,8,["pages"]),s("div",we,[Se,O(" "+$(e(c)),1)]),s("div",Le,[("usePermissions"in i?i.usePermissions:e(q))().can.manage("test_catalog")?(w(),U(t,{key:0,search:e(u),"onUpdate:search":p[0]||(p[0]=l=>se(u)?u.value=l:null)},null,8,["search"])):V("",!0)]),("usePermissions"in i?i.usePermissions:e(q))().can.manage("test_catalog")?(w(),U(b,{key:0,headers:e(y),data:e(g),serverOptions:e(d),loading:e(v),serverItemsLength:e(k),onUpdate:S},{actions:f(({item:l})=>[s("div",Ce,[n(_,{onActionCompleted:L,id:l.id},null,8,["id"])])]),_:1},8,["headers","data","serverOptions","loading","serverItemsLength"])):V("",!0)])}}});export{Ie as default};

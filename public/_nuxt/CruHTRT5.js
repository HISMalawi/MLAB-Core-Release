import{_ as X}from"./ucPVlGIa.js";import{_ as K}from"./CwU7nz4Y.js";import{_ as G}from"./BvHVvoZk.js";import{S,p as R,Y as U,G as j,V as B,q as F,B as z,a as E,l as A,m as I,u as k,E as H,x as P,y as i,b as h,e as V,f as e,z as l,g as t,k as v,_ as q,D as L,t as Y,C as J,O as Q,bj as W,h as w,L as C,K as T}from"./CnHVHtNb.js";import{_ as M}from"./B_Awot1K.js";import{r as Z}from"./DXtvsuug.js";import{_ as N}from"./BSArxRWJ.js";import{r as ee}from"./DJDBc3LR.js";import{_ as te}from"./D79OLBMa.js";import{u as $}from"./ijQJjDmU.js";import{u as oe}from"./Bnl9n6mh.js";import{P as se}from"./O-3ebvIT.js";import"./BZb3bzVo.js";import"./n6mkMIpm.js";import"./CRaEjCo-.js";import"./DCavMtdm.js";const ae={components:{TransitionRoot:S,TransitionChild:R,Dialog:U,DialogPanel:j,DialogTitle:B,XMarkIcon:F},data(){return{editIcon:z,show:!1,saveIcon:Z,name:this.data.name,description:this.data.description,drugSelected:new Array,drugs:new Array,rawDrugs:new Array,loading:!1,cookie:E("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const o={route:`${A.disease.edit}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:s,error:r,data:c}=await I(o);this.loading=s,c.value&&(this.show=!1,k().$toast.success("Disease updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(this.show=!1,console.error(r.value),this.loading=!1,k().$toast.error(H))},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("editForm")}}},ne=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25"},null,-1),ie={class:"fixed inset-0 overflow-y-auto"},le={class:"flex min-h-full items-center justify-center p-4 text-center"},re={class:"border-b px-3 py-3 flex items-center justify-between"},ce=t("img",{src:N,class:"w-8 h-8 mr-2"},null,-1),de={class:"mt-2 space-y-3"},ue={class:"w-full flex items-center px-5"},me={class:"w-full flex flex-col space-y-2"},_e={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function pe(o,s,r,c,a,n){const d=q,u=i("TransitionChild"),f=i("DialogTitle"),g=i("XMarkIcon"),m=i("FormKit"),_=M,p=i("DialogPanel"),D=i("Dialog"),b=i("TransitionRoot");return h(),V("div",null,[e(d,{click:n.handleClick,text:"Edit",color:"success",icon:a.editIcon},null,8,["click","icon"]),e(b,{appear:"",show:a.show,as:"template"},{default:l(()=>[e(D,{as:"div",class:"relative z-10"},{default:l(()=>[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[ne]),_:1}),t("div",ie,[t("div",le,[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[e(p,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[t("div",re,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[ce,v(" Edit Disease ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...y)=>n.handleClick&&n.handleClick(...y))},[e(g,{class:"w-5 h-5"})])]),e(m,{id:"editForm",type:"form","submit-label":"Update",onSubmit:n.submitForm,actions:!1},{default:l(({value:y})=>[t("div",de,[t("div",ue,[t("div",me,[e(m,{type:"text",label:"Name",validation:"required",modelValue:r.data.name,"onUpdate:modelValue":s[1]||(s[1]=x=>r.data.name=x)},null,8,["modelValue"])])])]),t("div",_e,[e(_,{text:"Clear form",type:"button",click:()=>{n.clearForm()}},null,8,["click"]),e(d,{loading:a.loading,type:"submit",click:()=>{},color:"success",icon:a.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const he=P(ae,[["render",pe]]),fe={components:{TransitionRoot:S,TransitionChild:R,Dialog:U,DialogPanel:j,DialogTitle:B,XMarkIcon:F,ExclamationTriangleIcon:L},data(){return{show:!1,deleteIcon:ee,loading:!1,cookie:E("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(o){this.loading=!0;const s={route:`${A.disease.delete}/${o}`,method:"DELETE",token:`${this.cookie}`,body:{voided_reason:this.reason}},{pending:r,error:c,data:a}=await I(s);this.loading=r,a.value&&(this.handleClick(),k().$toast.success("Disease deleted successfully!"),this.reason="",this.loading=!1,this.$emit("update",!0)),c.value&&(console.log(c.value),k().$toast.error("An error occurred, please try again!"),this.loading=!1)},handleClick(){this.show=!this.show}}},ge=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),xe={class:"fixed inset-0 overflow-y-auto"},ve={class:"flex min-h-full items-center justify-center p-4 text-center"},ye={class:"border-b px-3 py-3 flex items-center justify-between"},ke={class:"mt-2 space-y-3 px-5"},De={class:"rounded px-2 py-2"},be={class:"font-semibold text-red-500"},we={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ce(o,s,r,c,a,n){const d=q,u=i("TransitionChild"),f=i("ExclamationTriangleIcon"),g=i("DialogTitle"),m=i("XMarkIcon"),_=i("FormKit"),p=M,D=i("DialogPanel"),b=i("Dialog"),y=i("TransitionRoot");return h(),V("div",null,[e(d,{click:n.handleClick,color:"error",text:"Delete",icon:a.deleteIcon},null,8,["click","icon"]),e(y,{appear:"",show:a.show,as:"template"},{default:l(()=>[e(b,{as:"div",class:"relative z-10"},{default:l(()=>[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[ge]),_:1}),t("div",xe,[t("div",ve,[e(u,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[e(D,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[t("div",ye,[e(g,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[e(f,{class:"h-5 w-5 mr-2"}),v(" Confirm delete ")]),_:1}),t("button",{onClick:s[0]||(s[0]=(...x)=>n.handleClick&&n.handleClick(...x))},[e(m,{class:"w-5 h-5"})])]),e(_,{type:"form","submit-label":"Update",onSubmit:s[2]||(s[2]=x=>n.deleteData(r.data.id)),actions:!1},{default:l(({value:x})=>[t("div",ke,[t("div",De,[v(" Do you really want to delete "),t("span",be,Y(r.data.name),1),v("? Note that once this action is completed, it can not be undone ")]),e(_,{type:"textarea",label:"Reason",validation:"required",modelValue:a.reason,"onUpdate:modelValue":s[1]||(s[1]=O=>a.reason=O)},null,8,["modelValue"])]),t("div",we,[e(p,{click:()=>{},type:"button",text:"Cancel"}),e(d,{loading:a.loading,type:"submit",click:()=>{},color:"error",icon:a.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Te=P(fe,[["render",Ce]]),$e={setup(){oe({title:`${se.name.toUpperCase()} - Diseases`})},data(){return{header:"Diseases",pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],headers:[{text:"ID",value:"id",sortable:!0},{text:"NAME",value:"name",sortable:!0},{text:"DATE CREATED",value:"created_date"},{text:"Actions",value:"actions"}],diseases:new Array,cookie:E("token"),search:"",searchValue:"",loading:!1}},created(){this.init()},computed:{filteredDiseases(){return this.diseases.map(o=>({...o,created_date:J(o.created_date).format(Q)}))}},methods:{async init(){this.loading=!0;const o={route:A.disease.index,method:"GET",token:`${this.cookie}`},{data:s,error:r,pending:c}=await I(o);this.loading=c,s.value&&(this.diseases=s.value,this.loading=!1),r.value&&(console.log(r.value),this.loading=!1)},updateSearch(o){W&&(this.searchValue=o,this.search=o)},updateDiseases(o){this.init()}}},Ee={class:"px-5 py-5"},Ae={class:"flex items-center justify-between py-5"},Ie=t("div",{class:"text-2xl font-semibold flex items-center uppercase"},[t("img",{src:N,alt:"report-icon",class:"w-8 h-8 mr-2"}),v(" Diseases ")],-1),Pe={class:"flex items-center space-x-3"},Ve={class:"flex justify-end w-full px-2 py-2 mb-2"},Se={class:"py-2 flex items-center space-x-2"};function Re(o,s,r,c,a,n){const d=X,u=K,f=G,g=he,m=Te,_=te;return h(),V("div",Ee,[e(d,{pages:a.pages},null,8,["pages"]),t("div",Ae,[Ie,t("div",Pe,[("usePermissions"in o?o.usePermissions:w($))().can.manage("test_catalog")?(h(),C(u,{key:0,onActionCompleted:n.updateDiseases},null,8,["onActionCompleted"])):T("",!0)])]),t("div",Ve,[("usePermissions"in o?o.usePermissions:w($))().can.manage("test_catalog")?(h(),C(f,{key:0,search:a.search,onUpdate:n.updateSearch},null,8,["search","onUpdate"])):T("",!0)]),("usePermissions"in o?o.usePermissions:w($))().can.manage("test_catalog")?(h(),C(_,{key:0,headers:a.headers,data:n.filteredDiseases,loading:a.loading,"search-value":a.searchValue,"search-field":"name"},{actions:l(({item:p})=>[t("div",Se,[e(g,{data:p,onUpdate:n.updateDiseases},null,8,["data","onUpdate"]),e(m,{data:p,onUpdate:n.updateDiseases},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])):T("",!0)])}const Qe=P($e,[["render",Re]]);export{Qe as default};

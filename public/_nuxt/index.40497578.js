import{_ as h}from"./Breadcrumb.fceb39b7.js";import{_ as u}from"./SearchBar.a918a5ce.js";import{u as _,a as f,_ as g,o as v,c as x,b as a,d as o,g as b,e as y}from"./entry.8d1887e0.js";import{_ as k}from"./Datatable.cca64e33.js";import{u as P}from"./vue.f36acd1f.90da7972.js";import{j as w,h as I,e as V,f as B}from"./fetch.1b1fb40d.js";import{d as C,e as O}from"./constants.6559c015.js";import{P as R}from"./package.d411c004.js";import{r as $}from"./MagnifyingGlassIcon.659a43f2.js";import{r as F}from"./PencilSquareIcon.21ca2aeb.js";import"./nuxt-link.8f68ed8a.js";import"./HomeIcon.a70aee08.js";import"./XMarkIcon.dad50e8c.js";import"./Loader.14568b8d.js";import"./transition.166bd9ac.js";import"./hidden.4fcf3718.js";import"./PrinterIcon.1c7de3dc.js";const L={setup(){P({title:`${R.name.toUpperCase()} - Patient Report`})},components:{MagnifyingGlassIcon:$},data(){return{headers:[{text:"name",value:"name",sortable:!0},{text:"sex",value:"sex",sortable:!0},{text:"patient national id",value:"npid",sortable:!0},{text:"date of birth",value:"date_of_birth",sortable:!0},{text:"physical address",value:"physical_address",sortable:!0},{text:"actions",value:"actions"}],patients:new Array,pages:[{name:"Home",link:"/home"},{name:"Reports",link:"#"}],search:"",loading:!1,viewIcon:F,cookie:_("token"),serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"},searchField:"name",searchValue:""}},created(){this.init()},computed:{filteredPatients(){return this.patients.map(e=>({...e,name:w(`${e.first_name} ${e.middle_name} ${e.last_name}`),date_of_birth:I(e.date_of_birth).format(C)}))}},methods:{updateSearch(e){this.searchValue=e,this.search=e,this.updatePatients(!0)},updatePatients(e){typeof e=="object"&&(this.serverOptions=e),this.init()},async init(){this.loading=!0;const{page:e,rowsPerPage:n}=this.serverOptions,i={route:`${V.clients}?page=${e}&per_page=${n}&search=${this.search}`,method:"GET",token:`${this.cookie}`,body:{}};let{data:r,error:t,pending:s}=await B(i);this.loading=s,r.value&&(this.patients=r.value.clients,this.serverItemsLength=r.value.meta.total_count),t.value&&(console.log(t.value.data),f().$toast.error(`${O}`))},async viewReport(e){this.$router.push(`/reports/daily/patient-report/${e.client_id}`)}}},U={class:"px-5 py-5"},j=o("div",{class:"flex items-center justify-between py-5"},[o("h3",{class:"text-2xl font-semibold"},"Patient reports")],-1),A={class:"flex justify-end w-full px-2 py-2 mb-2"},N={class:"py-2 flex items-center space-x-2"};function S(e,n,i,r,t,s){const c=h,p=u,l=y,m=k;return v(),x("div",U,[a(c,{pages:t.pages},null,8,["pages"]),j,o("div",A,[a(p,{search:t.search,onUpdate:s.updateSearch},null,8,["search","onUpdate"])]),a(m,{headers:t.headers,data:s.filteredPatients,loading:t.loading,searchField:t.searchField,searchValue:t.searchValue,serverItemsLength:t.serverItemsLength,serverOptions:t.serverOptions,onUpdate:s.updatePatients},{actions:b(({item:d})=>[o("div",N,[a(l,{click:()=>s.viewReport(d),color:"primary",text:"View Report",icon:t.viewIcon},null,8,["click","icon"])])]),_:1},8,["headers","data","loading","searchField","searchValue","serverItemsLength","serverOptions","onUpdate"])])}const se=g(L,[["render",S]]);export{se as default};

import{_ as C}from"./CUC3bBKZ.js";import{b as l,e as r,g as e,a as I,l as w,m as k,u as p,B as q,x as B,y as _,f as a,t as n,F as h,k as v,N as T,L as S,K as f,j as N,z as g,_ as Z}from"./BomcfpdA.js";import{u as b}from"./h2jo2Mhj.js";import{P as F}from"./WDQKvhhq.js";import{u as H}from"./BjPGKtCZ.js";import{r as j}from"./D94jxSfK.js";import{_ as M}from"./DU319XGE.js";import"./C0NBKdgm.js";import"./D6yT9IfA.js";import"./CRSxM5WR.js";function O(c,s){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z","clip-rule":"evenodd"})])}const A={name:"settings",setup(){H({title:`${F.name.toUpperCase()} - Settings`})},data(){return{saveIcon:j,pages:[{name:"Home",link:"/home"}],tabs:["Personal Information","Credentials"],activeTab:0,loading:!1,updating:!1,cookie:I("token"),oldPassword:"",newPassword:"",username:"",authStore:b()}},methods:{async changePassword(){this.loading=!0;const c={route:`${w.users}/change_password/${this.authStore.user.id}`,method:"PUT",token:`${this.cookie}`,body:{user:{old_password:this.oldPassword,password:this.newPassword}}},{data:s,error:i,pending:m}=await k(c);if(this.loading=m,s.value){const{logUserOut:t}=b();this.loading=!1,p().$toast.success("Password changed successfully!"),t(),this.$router.push("/")}i.value&&(this.loading=!1,p().$toast.error(`${i.value.data.error}`),console.error(i.value))},async changeUsername(){this.updating=!0;const c={route:`${w.users}/change_username/${this.authStore.user.id}`,method:"PUT",token:`${this.cookie}`,body:{user:{username:this.username}}},{data:s,error:i,pending:m}=await k(c);if(this.updating=m,s.value){const{logUserOut:t}=b();this.updating=!1,p().$toast.success("Username changed successfully!"),t(),this.$router.push("/")}i.value&&(this.updating=!1,p().$toast.error(`${i.value.data.error}`),console.error(i.value))}},components:{IdentificationIcon:O,PencilSquareIcon:q}},D={class:"px-5 py-5"},K={class:"mt-5 flex items-center space-x-3"},L={class:"space-y-0.5"},z={class:"text-lg font-semibold uppercase"},R={class:"font-normal"},E={class:"py-5"},G={class:"w-full flex items-center border-b"},J=["onClick"],Q={key:0},W={class:"py-3 space-y-2.5"},X={class:"grid grid-cols-3 gap-2"},Y={class:"w-full flex flex-col space-y-1"},$={class:"underline"},ee={class:"w-full flex flex-col space-y-1"},se={class:"underline"},te={class:"w-full flex flex-col space-y-1"},oe={class:"underline"},le={class:"w-full flex flex-col space-y-1"},ae={class:"underline"},ne={class:"w-full flex flex-col space-y-1"},re={class:"underline"},ie={class:"w-full flex flex-col space-y-1"},de={class:"flex flex-wrap gap-2"},ue={class:"w-full flex flex-col space-y-1"},ce={class:"flex flex-wrap gap-2"},me={key:1},pe={class:"border-b pb-2"},fe={class:"flex items-center justify-end space-x-2 mt-5"},_e={class:"py-3 space-y-2.5"},he={class:"flex items-center justify-end space-x-2 mt-5"};function ve(c,s,i,m,t,x){const P=C,U=_("IdentificationIcon"),V=_("PencilSquareIcon"),d=_("FormKit"),y=Z;return l(),r("div",D,[a(P,{pages:t.pages},null,8,["pages"]),e("div",K,[s[3]||(s[3]=e("div",null,[e("img",{src:M,class:"w-16 h-16 mr-2 object-cover rounded-full",alt:"user-icon"})],-1)),e("div",L,[e("h3",z,n(t.authStore.user.username),1),e("p",R,n(`${t.authStore.user.first_name} ${t.authStore.user.last_name}`),1)])]),e("div",E,[e("div",G,[(l(!0),r(h,null,v(t.tabs,(u,o)=>(l(),r("button",{key:o,onClick:ge=>t.activeTab=o,class:T(t.activeTab==o?"flex items-center px-1.5 py-2 text-white border-b-2 border-sky-600 bg-sky-500 font-medium":"px-2 py-2 hover:bg-sky-200 font-medium hover:text-sky-500 transition duration-150 flex items-center")},[o==0?(l(),S(U,{key:0,class:"w-5 h-5 mr-2"})):f("",!0),o==1?(l(),S(V,{key:1,class:"w-5 h-5 mr-2"})):f("",!0),N(" "+n(u),1)],10,J))),128))]),t.activeTab===0?(l(),r("div",Q,[e("div",W,[e("div",X,[e("div",Y,[s[4]||(s[4]=e("label",{class:"font-semibold text-lg"},"Username",-1)),e("p",$,n(t.authStore.user.username),1)]),e("div",ee,[s[5]||(s[5]=e("label",{class:"font-semibold text-lg"},"First name",-1)),e("p",se,n(t.authStore.user.first_name),1)]),e("div",te,[s[6]||(s[6]=e("label",{class:"font-semibold text-lg"},"Middle name",-1)),e("p",oe,n(t.authStore.user.middle_name),1)]),e("div",le,[s[7]||(s[7]=e("label",{class:"font-semibold text-lg"},"Last name",-1)),e("p",ae,n(t.authStore.user.last_name),1)]),e("div",ne,[s[8]||(s[8]=e("label",{class:"font-semibold text-lg"},"Date Of Birth",-1)),e("p",re,n(t.authStore.user.date_of_birth),1)])]),e("div",ie,[s[9]||(s[9]=e("label",{class:"font-semibold text-lg"},"Roles",-1)),e("div",de,[(l(!0),r(h,null,v(t.authStore.user.roles,(u,o)=>(l(),r("div",{key:o,class:"border rounded px-3 py-1.5"},n(u.role_name),1))),128))])]),e("div",ue,[s[10]||(s[10]=e("label",{class:"font-semibold text-lg"},"Departments",-1)),e("div",ce,[(l(!0),r(h,null,v(t.authStore.user.departments,(u,o)=>(l(),r("div",{key:o,class:"border rounded px-3 py-1.5"},n(u.name),1))),128))])])])])):f("",!0),t.activeTab===1?(l(),r("div",me,[e("div",pe,[s[11]||(s[11]=e("div",{class:"py-3"},[e("h3",{class:"text-xl font-semibold"},"Username"),e("p",null,"Please enter your desired username below and save changes. ")],-1)),a(d,{type:"form","submit-label":"Update",onSubmit:x.changeUsername,actions:!1},{default:g(({value:u})=>[a(d,{type:"text",name:"username",label:"Username",validation:"required",modelValue:t.username,"onUpdate:modelValue":s[0]||(s[0]=o=>t.username=o)},null,8,["modelValue"]),e("div",fe,[a(y,{type:"submit",icon:t.saveIcon,text:"Save changes",color:"success",click:()=>{},loading:t.updating},null,8,["icon","loading"])])]),_:1},8,["onSubmit"])]),s[12]||(s[12]=e("div",{class:"py-3"},[e("h3",{class:"text-xl font-semibold"},"Password"),e("p",null,"Please enter your current password to change your password")],-1)),a(d,{type:"form","submit-label":"Update",onSubmit:x.changePassword,actions:!1},{default:g(({value:u})=>[e("div",_e,[a(d,{type:"password",label:"Old password",validation:"required",modelValue:t.oldPassword,"onUpdate:modelValue":s[1]||(s[1]=o=>t.oldPassword=o)},null,8,["modelValue"]),a(d,{type:"group"},{default:g(()=>[a(d,{type:"password",name:"password",label:"Password",validation:"required",modelValue:t.newPassword,"onUpdate:modelValue":s[2]||(s[2]=o=>t.newPassword=o),"validation-visibility":"live"},null,8,["modelValue"]),a(d,{type:"password",label:"Confirm new password",name:"password_confirm",validation:"required|confirm","validation-label":"Password confirmation","validation-visibility":"live"})]),_:1})]),e("div",he,[a(y,{type:"submit",icon:t.saveIcon,text:"Save changes",color:"success",click:()=>{},loading:t.loading},null,8,["icon","loading"])])]),_:1},8,["onSubmit"])])):f("",!0)])])}const Ie=B(A,[["render",ve]]);export{Ie as default};

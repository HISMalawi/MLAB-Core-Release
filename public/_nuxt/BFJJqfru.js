import{m as y,a as w,u as v,E as b,bA as j,d as p,c as L,b as g,e as C,f as r,y as u,h as l,Y as k,p as f,g as c,G as $,V as B,j as R,t as x,q as E,S,_ as N,r as U,bC as D,a7 as G,bD as O}from"./CiGEWrP1.js";import{r as V}from"./Cf4tEyQ9.js";function _(i,e){return j(e)?i:i+"?"+Object.entries(e).map(([o,t])=>`${o}=${t}`).join("&")}const Y=new class{getJson(e,o={}){var t;return y({route:_(e,o),method:"GET",token:((t=w("token"))==null?void 0:t.value)||"",body:{}}).then(({data:a,error:s})=>{if(s.value)throw s.value.data;if(a.value)return a.value}).catch(a=>{console.error(a),v().$toast.error(`${b}`)})}postJson(e,o,t={}){var a;return y({route:_(e,t),method:"POST",token:((a=w("token"))==null?void 0:a.value)||"",body:o}).then(({data:s,error:m})=>{if(m.value)throw m.value.data;if(s.value)return s.value}).catch(s=>{console.error(s),v().$toast.error(`${b}`)})}},z={class:"fixed inset-0 overflow-y-auto"},M={class:"flex min-h-full items-center justify-center p-4 text-center"},T={class:"border-b px-3 py-3 flex items-center justify-between"},J={class:"px-4 py-6"},q={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"},I=p({__name:"ConfirmationDialog",props:{title:{},message:{},show:{type:Boolean},color:{},useYesNoBtns:{type:Boolean}},emits:["cancel","confirm"],setup(i){const e=i,o=L(()=>e.useYesNoBtns===!0?{confirm:"Yes",cancel:"No"}:{confirm:"Confirm",cancel:"Cancel"});return(t,a)=>{const s=N;return g(),C("div",null,[r(l(S),{appear:"",show:t.show,as:"template"},{default:u(()=>[r(l(k),{as:"div",class:"relative z-10"},{default:u(()=>[r(l(f),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>a[1]||(a[1]=[c("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),c("div",z,[c("div",M,[r(l(f),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:u(()=>[r(l($),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:u(()=>[c("div",T,[r(l(B),{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:u(()=>[r(l(V),{class:"h-5 w-5 mr-2"}),R(" "+x(t.title||"Confirmation"),1)]),_:1}),c("button",{onClick:a[0]||(a[0]=()=>t.$emit("cancel"))},[r(l(E),{class:"w-5 h-5"})])]),c("div",J,x(t.message),1),c("div",q,[r(s,{click:()=>t.$emit("cancel"),text:l(o).cancel,color:"primary"},null,8,["click","text"]),r(s,{click:()=>t.$emit("confirm"),text:l(o).confirm,color:"success"},null,8,["click","text"])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),W=""+new URL("zebra-label-printer.DIIWoAGn.jpeg",import.meta.url).href,F={class:"fixed inset-0 overflow-y-auto"},H={class:"flex min-h-full items-center justify-center p-4 text-center"},K=p({__name:"PrintingStatus",props:{show:{type:Boolean}},setup(i){return(e,o)=>(g(),C("div",null,[r(l(S),{appear:"",show:e.show,as:"template"},{default:u(()=>[r(l(k),{as:"div",class:"relative z-10"},{default:u(()=>[r(l(f),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>o[0]||(o[0]=[c("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),c("div",F,[c("div",H,[r(l(f),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:u(()=>[r(l($),{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all py-20"},{default:u(()=>o[1]||(o[1]=[c("img",{src:W,class:"w-36 object-cover mx-auto"},null,-1),c("h1",{class:"text-center my-5 mx-auto text-2xl"},"Printing...",-1)])),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}});function Q(){const i=U(!1),e=(n,d)=>D(n).mount(d),o=n=>document.body.removeChild(n),t=()=>{const n=document.createElement("div");return n.id="modal-wrapper-div",document.body.appendChild(n),n},a=(n,d)=>({render:()=>G(n,{...d,show:i.value})});return{alertConfirmation:async n=>{const d=t(),P=await new Promise(h=>{const A=p({extends:a(I,{onConfirm:()=>h(!0),onCancel:()=>h(!1),...n})});e(A,d),i.value=!0});return i.value=!1,o(d),P},showPrinterStatus:async()=>{const n=t(),d=p({extends:a(K)});return e(d,n),i.value=!0,n},hidePrinterStatus:n=>{i.value=!1,document.body.removeChild(n)}}}const{showPrinterStatus:X,hidePrinterStatus:Z}=Q(),ne=new class{async writeLbl(e,o,t=`${Date.now()}.lbl`){const a=await X();try{const s=await Y.getJson(e,o);e=URL.createObjectURL(s);const m=document.createElement("a");m.setAttribute("href",e),m.setAttribute("download",t),m.click(),URL.revokeObjectURL(e),await O(2e3)}catch(s){console.error(s),v().$toast.error("Unable to print the label")}Z(a)}printSpecimenLabel(e){return this.writeLbl("printout/accession_number",{accession_number:e},`${e}.lbl`)}printTrackingNumber(e){return this.writeLbl("printout/tracking_number",{tracking_number:e},`${e}.lbl`)}};export{Y as A,ne as P,Q as u};

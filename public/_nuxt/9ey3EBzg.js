import{_ as V}from"./DeHqjJH7.js";import{_ as j}from"./B6_2qwyC.js";import{s as R,S as E,p as q,Y as L,G as N,V as U,q as F,z as P,x as f,b as $,e as M,f as o,y as d,g as e,j as X,t as _,h as s,L as A,_ as B,d as z,r as i,c as G,o as H,w as Y,A as I}from"./BLMYYBub.js";import{r as Q}from"./CFxj9TAl.js";import{r as O}from"./Cy4dTOpp.js";import{_ as J}from"./CJcSPQ8s.js";import{S as K}from"./DPmaYSTO.js";import{P as W}from"./CM4UxiDe.js";import{u as Z}from"./CfmpkH2n.js";import{r as ee}from"./DedXg-G0.js";import"./sNlKP72R.js";import"./DliR-cc7.js";const te={components:{TransitionRoot:E,TransitionChild:q,Dialog:L,DialogPanel:N,DialogTitle:U,XMarkIcon:F},data(){return{viewIcon:Q,show:!1,editIcon:O,moment:P}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},oe={class:"fixed inset-0 overflow-y-auto"},se={class:"flex min-h-full items-center justify-center p-4 text-center"},ae={class:"border-b px-3 py-3 flex items-center justify-between"},ne={class:"mt-2 space-y-3 px-5"},le={class:"w-full flex flex-col space-y-1"},ie={class:"w-full flex flex-col space-y-1"},ce={class:"w-full flex flex-col space-y-1"},re={class:"w-full flex flex-col space-y-1"},de={class:"w-full flex flex-col space-y-1"},me={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function ue(g,t,c,S,m,a){const h=B,l=f("TransitionChild"),k=f("DialogTitle"),y=f("XMarkIcon"),v=f("DialogPanel"),b=f("Dialog"),x=f("TransitionRoot");return $(),M("div",null,[o(h,{click:a.handleClick,color:"primary",text:"View",icon:m.viewIcon},null,8,["click","icon"]),o(x,{appear:"",show:m.show,as:"template"},{default:d(()=>[o(b,{as:"div",class:"relative z-10"},{default:d(()=>[o(l,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>t[1]||(t[1]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),e("div",oe,[e("div",se,[o(l,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[o(v,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:d(()=>[e("div",ae,[o(k,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:d(()=>t[2]||(t[2]=[X(" View Stock ")])),_:1}),e("button",{onClick:t[0]||(t[0]=(...n)=>a.handleClick&&a.handleClick(...n))},[o(y,{class:"w-5 h-5"})])]),e("div",ne,[e("div",le,[t[3]||(t[3]=e("label",{class:"font-semibold text-lg"},"Name",-1)),e("p",null,_(c.data.stock_item.name),1)]),e("div",ie,[t[4]||(t[4]=e("label",{class:"font-semibold text-lg"},"Description",-1)),e("p",null,_(c.data.stock_item.description),1)]),e("div",ce,[t[5]||(t[5]=e("label",{class:"font-semibold text-lg"},"Location",-1)),e("p",null,_(c.data.stock_location.name),1)]),e("div",re,[t[6]||(t[6]=e("label",{class:"font-semibold text-lg"},"Quantity",-1)),e("p",null,_(c.data.quantity),1)]),e("div",de,[t[7]||(t[7]=e("label",{class:"font-semibold text-lg"},"Date modified",-1)),e("p",null,_(m.moment(c.data.updated_date).format("DATE_FORMAT"in g?g.DATE_FORMAT:s(A))),1)])]),e("div",me,[o(h,{click:()=>{g.$router.push("/stock-management/stock-items")},icon:m.editIcon,text:"Edit",color:"success"},null,8,["click","icon"])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const pe=R(te,[["render",ue]]),fe={class:"px-5 py-5"},_e={class:"flex items-center justify-between py-5"},ve={class:"text-2xl font-semibold"},xe={class:"flex items-center justify-end py-5"},ge={class:"py-2 flex items-center space-x-2"},Me=z({__name:"stock",setup(g){Z({title:`${W.name.toUpperCase()} - Stock`});const t=i("Stock"),c=ee,S=O,m=i([{name:"Home",link:"/home"},{name:"Stock Management",link:"#"}]),a=i(""),h=i([{text:"name",value:"stock_item.name",sortable:!0},{text:"description",value:"stock_item.description",sortable:!1},{text:"quantity",value:"quantity",sortable:!1},{text:"date modified",value:"updated_date",sortable:!1},{text:"actions",value:"actions",sortable:!1}]),l=i(!1),k=i(0),y=i([]),v=i({page:1,rowsPerPage:25,sortBy:"name"}),b=G(()=>y.value.map(n=>({...n,updated_date:P(n.updated_date).format(A)}))),x=async(n={page:1,rowsPerPage:25})=>{l.value=!0;const u=new K,{page:D,rowsPerPage:C}=n;let T=`?page=${D}&per_page=${C}&search=${a.value}`;const{data:p,error:w,pending:r}=await u.getStock("",T);l.value=r,p.value&&(l.value=!1,y.value=p.value.data,k.value=p.value.meta.total_count),w.value&&(l.value=!1,console.error(w.value))};return H(()=>{x()}),Y(a,()=>{x()}),(n,u)=>{const D=V,C=j,T=pe,p=B,w=J;return $(),M("div",fe,[o(D,{pages:s(m)},null,8,["pages"]),e("div",_e,[e("h3",ve,_(s(t)),1)]),e("div",xe,[o(C,{search:s(a),"onUpdate:search":u[0]||(u[0]=r=>I(a)?a.value=r:null)},null,8,["search"])]),e("div",null,[o(w,{headers:s(h),data:s(b),loading:s(l),"search-field":"name","search-value":s(a),serverItemsLength:s(k),serverOptions:s(v),"onUpdate:serverOptions":u[1]||(u[1]=r=>I(v)?v.value=r:null),onUpdate:x},{actions:d(({item:r})=>[e("div",ge,[o(T,{data:r},null,8,["data"]),o(p,{click:()=>{n.$router.push("/stock-management/stock-items")},text:"Edit",color:"success",icon:s(S)},null,8,["click","icon"]),o(p,{click:()=>{n.$router.push("/stock-management/stock-items")},text:"Delete",color:"error",icon:s(c)},null,8,["click","icon"])])]),_:1},8,["headers","data","loading","search-value","serverItemsLength","serverOptions"])])])}}});export{Me as default};

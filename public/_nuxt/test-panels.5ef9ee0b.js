import{_ as O}from"./Breadcrumb.vue.3c01488e.js";import{u as I,a as D,_ as $,f as i,o as b,c as k,d as e,b as t,g as r,h as C,e as S,w as R,v as B,t as P,F as K,r as z}from"./entry.7e81e2ca.js";import{_ as L}from"./Multiselect.a4ec4dc9.js";import{_ as N}from"./OutlinedButton.55dc31f8.js";import{e as X}from"./constants.8fe380de.js";import{r as H,e as T,f as w,a as J}from"./fetch.427bbcb1.js";import{r as U}from"./XMarkIcon.15fe0042.js";import{r as M}from"./UserIcon.701f7b65.js";import{r as G}from"./ArrowDownTrayIcon.c51503c0.js";import{S as q,h as j,U as A,G as E,V as F}from"./transition.660ab1a3.js";import{_ as Q}from"./SearchBar.fa881672.js";import{_ as W}from"./Loader.838569bf.js";import{r as Y,a as Z}from"./PencilSquareIcon.8b16903b.js";import{_ as ee}from"./emergency_post.c4fecfc7.js";import{r as te}from"./TrashIcon.9b49456f.js";import{_ as oe}from"./Datatable.c801c015.js";import{u as se}from"./vue.f36acd1f.2b94810c.js";import{P as ne}from"./package.76b7fbad.js";import{r as ae}from"./MagnifyingGlassIcon.f15a8f02.js";import{_ as le}from"./ui_folder.60f37cc3.js";import"./nuxt-link.44b5dc18.js";import"./HomeIcon.fe112e23.js";import"./PrinterIcon.5601ce24.js";import"./hidden.1662b01e.js";const ie={components:{TransitionRoot:q,TransitionChild:j,Dialog:A,DialogPanel:E,DialogTitle:F,XMarkIcon:U,UserIcon:M},data(){return{open:!1,addIcon:H,saveIcon:G,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:I("token")}},created(){this.init()},methods:{async init(){const l={route:T.testTypes,method:"GET",token:`${this.cookie}`},{data:o,error:n}=await w(l);o.value&&(this.rawTestTypes=o.value.test_types,o.value.test_types.map(c=>{this.testTypes.push(c.name)})),n.value&&console.error(n.value)},async submitForm(){this.loading=!0;let l=[];this.testTypesSelected.forEach(a=>{this.rawTestTypes.forEach(d=>{a===d.name&&l.push(d.id)})});const o={route:T.testPanels,method:"POST",token:`${this.cookie}`,body:{name:this.name,short_name:this.shortName,description:this.description,test_types:l}},{data:n,error:c,pending:s}=await w(o);this.loading=s,n.value&&(this.handleClick(),D().$toast.success("Test panel created successfully!"),this.$emit("update",!0)),c.value&&(D().$toast.error(X),console.error(c.value),this.handleClick())},updateTestType(l){console.log(l),this.testTypesSelected=l},handleClick(){this.open=!this.open}}},re=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ce={class:"fixed inset-0 overflow-y-auto"},de={class:"flex min-h-full items-center justify-center p-4 text-center"},ue={class:"border-b px-3 py-3 flex items-center justify-between"},me={class:"mt-2 space-y-3 px-5"},pe={class:"w-full flex"},_e={class:"w-full flex"},fe={class:"w-full"},he={class:"w-full flex"},ye={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ve(l,o,n,c,s,a){const d=S,p=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=i("FormKit"),f=L,x=N,_=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return b(),k("div",null,[e("div",null,[t(d,{click:a.handleClick,text:"Create test panel",color:"primary",icon:s.addIcon},null,8,["click","icon"])]),t(V,{appear:"",show:s.open,as:"template"},{default:r(()=>[t(h,{as:"div",onClose:a.handleClick,class:"relative z-20"},{default:r(()=>[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[re]),_:1}),e("div",ce,[e("div",de,[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",ue,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[C(" Create Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...g)=>a.handleClick&&a.handleClick(...g))},[t(v,{class:"w-5 h-5"})])]),t(u,{type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1},{default:r(({value:g})=>[e("div",me,[e("div",pe,[t(u,{type:"text",label:"Name",validation:"required",modelValue:s.name,"onUpdate:modelValue":o[1]||(o[1]=m=>s.name=m)},null,8,["modelValue"])]),e("div",_e,[t(u,{type:"text",label:"Short Name",validation:"required",modelValue:s.shortName,"onUpdate:modelValue":o[2]||(o[2]=m=>s.shortName=m)},null,8,["modelValue"])]),e("div",fe,[t(f,{onUpdate:a.updateTestType,label:"Select Test Types",items:s.testTypes,"items-selected":s.testTypesSelected,mode:"tags"},null,8,["onUpdate","items","items-selected"])]),e("div",he,[t(u,{type:"textarea",label:"Description",validation:"required",modelValue:s.description,"onUpdate:modelValue":o[3]||(o[3]=m=>s.description=m)},null,8,["modelValue"])])]),e("div",ye,[t(x,{text:"Dismiss",type:"button",click:a.handleClick},null,8,["click"]),t(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const xe=$(ie,[["render",ve]]),ge={components:{TransitionRoot:q,TransitionChild:j,Dialog:A,DialogPanel:E,DialogTitle:F,XMarkIcon:U,UserIcon:M},data(){return{open:!1,viewIcon:Y,loading:!1,details:{},cookie:I("token")}},props:{data:{required:!0,type:Object}},methods:{async init(){this.open=!0,this.loading=!0;const{pending:l,error:o,data:n}=await w({route:`${T.testPanels}/${this.data.id}`,method:"GET",token:`${this.cookie}`});this.loading=l,n.value&&(this.details=n.value,this.loading=!1),o.value&&(console.error(o.value),this.loading=!1,D().$toast.error("An error occurred, please try again!"))},handleClick(){this.open=!this.open}}},Te=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),we={class:"fixed inset-0 overflow-y-auto"},be={class:"flex min-h-full items-center justify-center p-4 text-center"},ke={class:"border-b px-3 py-3 flex items-center justify-between"},Ce=e("img",{src:ee,class:"w-8 h-8 mr-2"},null,-1),De={class:"flex items-center justify-center mx-auto my-20"},Pe={class:"space-y-3 px-5 py-5"},Ve={class:"w-full flex flex-col space-y-1"},Ie=e("label",{class:"font-semibold text-lg"},"Name",-1),$e={class:"underline"},Se={class:"w-full flex flex-col space-y-1"},Ue=e("label",{class:"font-semibold text-lg"},"Short Name",-1),qe={class:"underline"},je={class:"w-full flex flex-col space-y-1"},Ae=e("label",{class:"font-semibold text-lg"},"Description",-1),Ee={class:"underline"},Fe={class:"w-full flex flex-col space-y-1"},Ne=e("label",{class:"font-semibold list text-lg"},"Test Types",-1);function Me(l,o,n,c,s,a){const d=S,p=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=W,f=i("DialogPanel"),x=i("Dialog"),_=i("TransitionRoot");return b(),k("div",null,[e("div",null,[t(d,{click:a.init,text:"View",color:"primary",icon:s.viewIcon},null,8,["click","icon"])]),t(_,{appear:"",show:s.open,as:"template"},{default:r(()=>[t(x,{as:"div",onClose:()=>{},class:"relative z-10"},{default:r(()=>[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[Te]),_:1}),e("div",we,[e("div",be,[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[t(f,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",ke,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[Ce,C(" View Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...h)=>a.handleClick&&a.handleClick(...h))},[t(v,{class:"w-5 h-5"})])]),R(e("div",De,[t(u,{loading:s.loading},null,8,["loading"])],512),[[B,s.loading]]),R(e("div",Pe,[e("div",Ve,[Ie,e("p",$e,P(s.details.name),1)]),e("div",Se,[Ue,e("p",qe,P(s.details.short_name),1)]),e("div",je,[Ae,e("p",Ee,P(s.details.description),1)]),e("div",Fe,[Ne,(b(!0),k(K,null,z(s.details.test_types,h=>(b(),k("div",{key:h.id,class:"flex flex-wrap underline"},P(h.name),1))),128))])],512),[[B,!s.loading]])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Re=$(ge,[["render",Me]]),Be={components:{TransitionRoot:q,TransitionChild:j,Dialog:A,DialogPanel:E,DialogTitle:F,XMarkIcon:U,UserIcon:M},props:{data:{required:!0,type:Object}},data(){return{open:!1,editIcon:Z,saveIcon:G,name:"",shortName:"",description:"",testTypes:new Array,testTypesSelected:new Array,rawTestTypes:new Array,loading:!1,cookie:I("token")}},methods:{async loadTestTypes(){const l={route:T.testTypes,method:"GET",token:`${this.cookie}`},{data:o,error:n}=await w(l);o.value&&(this.rawTestTypes=o.value.test_types,o.value.test_types.map(c=>{this.testTypes.push(c.name)})),n.value&&console.error(n.value)},async init(){this.open=!0,await this.loadTestTypes(),this.testTypesSelected=new Array;const l={route:`${T.testPanels}/${this.data.id}`,method:"GET",token:`${this.cookie}`},{data:o,error:n}=await w(l);o.value&&o.value.test_types.map(c=>{this.testTypesSelected.push(c.name)}),n.value&&console.error(n.value)},async submitForm(){this.loading=!0;let l=new Array;this.testTypesSelected.map(a=>{this.rawTestTypes.filter(d=>{a==d.name&&l.push(d.id)})}),this.data.test_types=l;const o={route:`${T.testPanels}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{data:n,error:c,pending:s}=await w(o);this.loading=s,n.value&&(this.open=!1,D().$toast.success("Test panel updated successfully!"),this.$emit("update",!0)),c.value&&(console.error(c.value),D().$toast.error(X))},handleClick(){this.open=!this.open},clearForm(){this.$formkit.reset("submitForm")}}},Xe=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ge={class:"fixed inset-0 overflow-y-auto"},Oe={class:"flex min-h-full items-center justify-center p-4 text-center"},Ke={class:"border-b px-3 py-3 flex items-center justify-between"},ze={class:"mt-2 space-y-3 px-5"},Le={class:"w-full flex"},He={class:"w-full flex"},Je={class:"w-full flex"},Qe={class:"h-72 w-full flex flex-col space-y-2"},We=e("label",{class:"font-medium"},"Select Test Types",-1),Ye={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function Ze(l,o,n,c,s,a){const d=S,p=i("TransitionChild"),y=i("DialogTitle"),v=i("XMarkIcon"),u=i("FormKit"),f=i("multi-select"),x=N,_=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return b(),k("div",null,[e("div",null,[t(d,{click:a.init,text:"Edit",color:"success",icon:s.editIcon},null,8,["click","icon"])]),t(V,{appear:"",show:s.open,as:"template"},{default:r(()=>[t(h,{as:"div",onClose:a.handleClick,class:"relative z-10"},{default:r(()=>[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[Xe]),_:1}),e("div",Ge,[e("div",Oe,[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",Ke,[t(y,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[C(" Edit Test Panel ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...g)=>a.handleClick&&a.handleClick(...g))},[t(v,{class:"w-5 h-5"})])]),t(u,{type:"form","submit-label":"Update",onSubmit:a.submitForm,actions:!1,id:"submitForm"},{default:r(({value:g})=>[e("div",ze,[e("div",Le,[t(u,{type:"text",label:"Name",validation:"required",modelValue:n.data.name,"onUpdate:modelValue":o[1]||(o[1]=m=>n.data.name=m)},null,8,["modelValue"])]),e("div",He,[t(u,{type:"text",label:"Short Name",validation:"required",modelValue:n.data.short_name,"onUpdate:modelValue":o[2]||(o[2]=m=>n.data.short_name=m)},null,8,["modelValue"])]),e("div",Je,[t(u,{type:"textarea",label:"Description",validation:"required",modelValue:n.data.description,"onUpdate:modelValue":o[3]||(o[3]=m=>n.data.description=m)},null,8,["modelValue"])]),e("div",Qe,[We,t(f,{style:{"--ms-max-height":"none !important"},modelValue:s.testTypesSelected,"onUpdate:modelValue":o[4]||(o[4]=m=>s.testTypesSelected=m),options:s.testTypes,mode:"tags",clear:"",searchable:!0,required:!0,class:"outline-none focus:outline-none multiselect-green"},null,8,["modelValue","options"])])]),e("div",Ye,[t(x,{text:"Clear form",type:"button",click:()=>{a.clearForm()}},null,8,["click"]),t(d,{type:"submit",click:()=>{},loading:s.loading,icon:s.saveIcon,text:"Save changes",color:"success"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])])}const et=$(Be,[["render",Ze]]),tt={components:{TransitionRoot:q,TransitionChild:j,Dialog:A,DialogPanel:E,DialogTitle:F,XMarkIcon:U,ExclamationTriangleIcon:J},data(){return{show:!1,deleteIcon:te,loading:!1,reason:"",cookie:I("token")}},props:{data:{type:Object,required:!0}},methods:{async deleteData(l){this.loading=!0;const o={route:`${T.testPanels}/${l}`,method:"DELETE",token:`${this.cookie}`,body:{retired_reason:this.reason}},{pending:n,error:c,data:s}=await w(o);this.loading=n,s.value&&(this.handleClick(),D().$toast.success("Test panel deleted successfully!"),this.loading=!1,this.$emit("update",!0)),c.value&&(D().$toast.error("An error occurred, please try again!"),console.error(c.value),this.loading=!1)},handleClick(){this.show=!this.show}}},ot=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),st={class:"fixed inset-0 overflow-y-auto"},nt={class:"flex min-h-full items-center justify-center p-4 text-center"},at={class:"border-b px-3 py-3 flex items-center justify-between"},lt={class:"mt-2 space-y-3 px-5"},it={class:"rounded px-2 py-2"},rt={class:"font-semibold text-red-500"},ct={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t bg-gray-50"};function dt(l,o,n,c,s,a){const d=S,p=i("TransitionChild"),y=i("ExclamationTriangleIcon"),v=i("DialogTitle"),u=i("XMarkIcon"),f=i("FormKit"),x=N,_=i("DialogPanel"),h=i("Dialog"),V=i("TransitionRoot");return b(),k("div",null,[t(d,{click:a.handleClick,color:"error",text:"Delete",icon:s.deleteIcon},null,8,["click","icon"]),t(V,{appear:"",show:s.show,as:"template"},{default:r(()=>[t(h,{as:"div",class:"relative z-10"},{default:r(()=>[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[ot]),_:1}),e("div",st,[e("div",nt,[t(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[t(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[e("div",at,[t(v,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:r(()=>[t(y,{class:"h-5 w-5 mr-2"}),C(" Confirm delete ")]),_:1}),e("button",{onClick:o[0]||(o[0]=(...g)=>a.handleClick&&a.handleClick(...g))},[t(u,{class:"w-5 h-5"})])]),t(f,{type:"form","submit-label":"Update",onSubmit:o[2]||(o[2]=g=>a.deleteData(n.data.id)),actions:!1},{default:r(({value:g})=>[e("div",lt,[e("div",it,[C(" Do you really want to delete "),e("span",rt,P(n.data.name),1),C("? Note that once this action is completed, it can not be undone ")]),t(f,{type:"textarea",label:"Reason",validation:"required",modelValue:s.reason,"onUpdate:modelValue":o[1]||(o[1]=m=>s.reason=m)},null,8,["modelValue"])]),e("div",ct,[t(x,{type:"button",click:()=>{a.handleClick()},text:"Cancel"},null,8,["click"]),t(d,{loading:s.loading,type:"submit",click:()=>{},color:"error",icon:s.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ut=$(tt,[["render",dt]]),mt={setup(){se({title:`${ne.name.toUpperCase()} - Test Panels`})},components:{MagnifyingGlassIcon:ae},data(){return{header:"Test Panels",testPanels:new Array,loading:!1,pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],search:"",searchValue:"",cookie:I("token"),headers:[{text:"id",value:"id",sortable:!0},{text:"name",value:"name",sortable:!0},{text:"short name",value:"short_name"},{text:"description",value:"description",sortable:!0},{text:"actions",value:"actions"}]}},created(){this.init()},methods:{updateSearch(l){this.searchValue=l,this.search=l},async init(){this.loading=!0;const l={route:T.testPanels,method:"GET",token:`${this.cookie}`},{data:o,error:n,pending:c}=await w(l);this.loading=c,o.value&&(this.testPanels=o.value,this.loading=!1),n.value&&(console.error(n.value),this.loading=!1)},updateTestPanels(l){l&&this.init()}}},pt={class:"py-5 px-5"},_t={class:"flex items-center justify-between py-5"},ft={class:"text-2xl font-semibold flex items-center uppercase"},ht=e("img",{src:le,alt:"report-icon",class:"w-8 h-8 mr-2"},null,-1),yt={class:"flex items-center space-x-3"},vt={class:"flex justify-end w-full px-2 py-2 mb-2"},xt={class:"py-2 flex items-center space-x-2"};function gt(l,o,n,c,s,a){const d=O,p=xe,y=Q,v=Re,u=et,f=ut,x=oe;return b(),k("div",pt,[t(d,{pages:s.pages},null,8,["pages"]),e("div",_t,[e("div",ft,[ht,C(" "+P(s.header),1)]),e("div",yt,[t(p,{onUpdate:a.updateTestPanels},null,8,["onUpdate"])])]),e("div",vt,[t(y,{search:s.search,"onUpdate:search":o[0]||(o[0]=_=>s.search=_),onUpdate:a.updateSearch},null,8,["search","onUpdate"])]),t(x,{headers:s.headers,data:s.testPanels,loading:s.loading,"search-value":s.searchValue,"search-field":"name"},{actions:r(({item:_})=>[e("div",xt,[t(v,{data:_},null,8,["data"]),t(u,{data:_,onUpdate:a.updateTestPanels},null,8,["data","onUpdate"]),t(f,{data:_,onUpdate:a.updateTestPanels},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const Kt=$(mt,[["render",gt]]);export{Kt as default};

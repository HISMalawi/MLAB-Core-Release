import{_ as O}from"./Breadcrumb.vue.7f5c1701.js";import{_ as F}from"./Dropdown.07437792.js";import{u as I,a as A,_ as L,f as B,o as Q,c as R,b as c,d as e,h as j,g as C,t as s,F as E,r as M,e as N}from"./entry.d8806b4d.js";import{_ as J}from"./ExportButton.vue.d61d3a5b.js";import{_ as V}from"./Address.vue.d5226877.js";import{u as Y}from"./vue.f36acd1f.6a8c9096.js";import{e as $}from"./constants.6be6ca46.js";import{e as T,f as S}from"./fetch.a5dd36ac.js";import{u as H}from"./facility.bd699e9f.js";import{P}from"./package.2c43f7b3.js";import{r as q}from"./ArrowPathIcon.4ac53103.js";import{r as G}from"./ArrowUpTrayIcon.94b1981c.js";import{r as K}from"./FunnelIcon.9b72a07a.js";import{_ as U}from"./report.e689ee74.js";import{_ as z}from"./logo.7f84c5d6.js";import"./nuxt-link.ac17f1f4.js";import"./HomeIcon.2ec025f1.js";import"./listbox.fd66c15f.js";import"./hidden.492e3e8e.js";import"./use-text-value.bf1f0859.js";import"./CheckIcon.b53b2000.js";import"./CheckCircleIcon.7a1e5e88.js";import"./MagnifyingGlassIcon.f7cd7505.js";import"./transition.47325ebf.js";import"./XMarkIcon.c6ea15dc.js";import"./PencilSquareIcon.7a888707.js";import"./PrinterIcon.907e547a.js";const W={setup(){Y({title:`${P.name.toUpperCase()} - Blood Bank Report`})},data(){return{viewIcon:q,exportIcon:G,date:"",pages:[{name:"Home",link:"/home"},{name:"Reports",link:"#"},{name:"MoH Diagnistic Reports",link:"#"}],indicators:new Array,items:new Array,data:new Array,yearSelected:{name:"select year"},years:new Array,cookie:I("token"),viewing:!1,facility:H(),json_fields:{fieldLabel:"indicator",anotherFieldLabel:{field:["indicator"],callback:n=>`formatted value ${n}`}},reportData:new Array}},created(){this.getYears(),this.getReportIndicators()},methods:{async getReportIndicators(){const n={route:`${T.reportIndicators}?department=blood bank`,method:"GET",token:`${this.cookie}`},{data:o,error:l,pending:k}=await S(n);o.value&&o.value.map(r=>{this.items.push({indicator:r,jan:"!",feb:"!",mar:"!",totalQ1:"!",apr:"!",may:"!",june:"!",totalQ2:"!",jul:"!",aug:"!",sept:"!",totalQ3:"!",oct:"!",nov:"!",dec:"!",totalQ4:"!",total:"!"})}),l.value&&console.error(l.value)},async getReportData(){if(this.yearSelected.name=="select year")A().$toast.warning("Please select a year");else{this.viewing=!0;const n={route:`${T.mohReport}blood_bank?year=${this.yearSelected.name}`,method:"GET",token:`${this.cookie}`},{data:o,error:l,pending:k}=await S(n);if(this.viewing=k,o.value){let r=new Array;this.items.map(a=>{let d=o.value.january[a.indicator],i=o.value.february[a.indicator],p=o.value.march[a.indicator],m=o.value.april[a.indicator],b=o.value.may[a.indicator],y=o.value.june[a.indicator],_=o.value.july[a.indicator],t=o.value.august[a.indicator],u=o.value.september[a.indicator],v=o.value.october[a.indicator],w=o.value.november[a.indicator],D=o.value.december[a.indicator],x=d+i+p,h=m+b+y,f=_+t+u,g=v+w+D;r.push({indicator:a.indicator,jan:d,feb:i,mar:p,totalQ1:x,apr:m,may:b,june:y,totalQ2:h,jul:_,aug:t,sept:u,totalQ3:f,oct:v,nov:w,dec:D,totalQ4:g,total:x+h+f+g}),this.reportData.push({"Laboratory Service":a.indicator,January:d,February:i,March:p,"Total Q1":x,April:m,May:b,June:y,"Total Q2":h,July:_,August:t,September:u,"Total Q3":f,October:v,November:w,December:D,"Total Q4":g,Total:x+h+f+g})}),this.items=new Array,this.items.push(...r),this.viewing=!1,A().$toast.success("Report data generated successfully!")}l.value&&(this.viewing=!1,console.error(l.value),A().$toast.error($))}},getYears(){for(let n=new Date().getFullYear();n>=2e3;n--)this.years.push({name:n.toString(),id:n})}},components:{FunnelIcon:K}},X={class:"px-5 py-5"},Z=e("div",{class:"py-5"},[e("div",{class:"text-2xl font-semibold flex items-center uppercase"},[e("img",{src:U,alt:"report-icon",class:"w-8 h-8 mr-2"}),j(" Blood Bank Report ")])],-1),ee={class:"w-full flex justify-between py-5"},te={class:"flex items-center space-x-3"},re={class:"bg-gray-100 pl-2.5 rounded flex items-center text-zinc-500"},oe={class:"w-36 ml-2 bg-white"},se={class:"border rounded"},ae={class:"rounded-tr rounded-tl border-b px-5 py-5 flex items-center justify-between"},ne=e("div",{class:"flex flex-col space-y-2"},[e("img",{src:z,alt:"app-logo",class:"w-24 h-24 object-cover"}),e("h3",{class:"text-xl font-semibold"}," BLOOD BANK MoH LABORATORY REPORT ")],-1),ce={class:"px-4 py-2.5 font-medium"},le={class:"font-normal"},de={class:"overflow-x-auto rounded border-t"},ie={class:"overflow-x-auto"},pe=e("thead",{class:"w-full border-b"},[e("tr",{class:"w-full bg-gray-50"},[e("th",{class:"px-4 py-2 border-r"},"Laboratory Service"),e("th",{class:"px-4 py-2 border-r"},"Jan"),e("th",{class:"px-4 py-2 border-r"},"Feb"),e("th",{class:"px-4 py-2"},"March"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q1"),e("th",{class:"px-4 py-2 border-r"},"Apr"),e("th",{class:"px-4 py-2 border-r"},"May"),e("th",{class:"px-4 py-2"},"Jun"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q2"),e("th",{class:"px-4 py-2 border-r"},"Jul"),e("th",{class:"px-4 py-2 border-r"},"Aug"),e("th",{class:"px-4 py-2"},"Sep"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border border-sky-100"},"Total Q3"),e("th",{class:"px-4 py-2 border-r"},"Oct"),e("th",{class:"px-4 py-2 border-r"},"Nov"),e("th",{class:"px-4 py-2"},"Dev"),e("th",{class:"px-4 py-2 bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"},"Total Q4 "),e("th",{class:"px-4 py-2 bg-green-600 text-white border border-green-400"},"Total")])],-1),me={class:"px-4 py-2 text-left border-r border-b"},be={class:"px-4 py-2 text-center border-r border-b"},ye={class:"px-4 py-2 text-center border-r border-b"},_e={class:"px-4 py-2 text-center border-b"},ue={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},xe={class:"px-4 py-2 text-center border-r border-b"},he={class:"px-4 py-2 text-center border-r border-b"},fe={class:"px-4 py-2 text-center border-b"},ge={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},ke={class:"px-4 py-2 text-center border-r border-b"},ve={class:"px-4 py-2 text-center border-r border-b"},we={class:"px-4 py-2 text-center border-b"},De={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border border-sky-100"},Ae={class:"px-4 py-2 text-center border-r border-b"},Qe={class:"px-4 py-2 text-center border-r border-b"},Re={class:"px-4 py-2 text-center border-b"},je={class:"px-4 py-2 text-center bg-sky-50 text-sky-500 border-t border-l border-b border-sky-100"},Be={class:"px-4 py-2 text-center bg-green-600 border text-white border-green-400"};function Te(n,o,l,k,r,a){const d=O,i=B("FunnelIcon"),p=F,m=N,b=J,y=B("excel"),_=V;return Q(),R("div",X,[c(d,{pages:r.pages},null,8,["pages"]),Z,e("div",ee,[e("div",te,[e("div",re,[c(i,{class:"w-5 h-5 mr-2"}),j(" Filter By Year "),e("div",oe,[c(p,{items:r.years,modelValue:r.yearSelected,"onUpdate:modelValue":o[0]||(o[0]=t=>r.yearSelected=t)},null,8,["items","modelValue"])])]),c(m,{class:"mt-1",loading:r.viewing,click:()=>{a.getReportData()},color:"primary",icon:r.viewIcon,text:"Generate report"},null,8,["loading","click","icon"])]),e("div",null,[c(y,{class:"btn btn-default",header:[`BLOOD BANK MoH LABORATORY REPORT ${r.yearSelected.name}`,r.facility.details.name,r.facility.details.address,r.facility.details.phone],data:r.reportData,worksheet:"report-work-sheet",name:`moh_blood_bank_report_${r.yearSelected.name}.xls`},{default:C(()=>[c(b,{text:"Export Excel"})]),_:1},8,["header","data","name"])])]),e("div",se,[e("div",ae,[ne,c(_)]),e("div",null,[e("h3",ce,[j("Data for the year: "),e("span",le,s(r.yearSelected.name=="select year"?"-:-":r.yearSelected.name),1)])]),e("div",de,[e("table",ie,[pe,e("tbody",null,[(Q(!0),R(E,null,M(r.items,(t,u)=>(Q(),R("tr",{class:"px-2",key:u},[e("td",me,s(t.indicator),1),e("td",be,s(t.jan),1),e("td",ye,s(t.feb),1),e("td",_e,s(t.mar),1),e("td",ue,s(t.totalQ1),1),e("td",xe,s(t.apr),1),e("td",he,s(t.may),1),e("td",fe,s(t.june),1),e("td",ge,s(t.totalQ2),1),e("td",ke,s(t.jul),1),e("td",ve,s(t.aug),1),e("td",we,s(t.sept),1),e("td",De,s(t.totalQ3),1),e("td",Ae,s(t.oct),1),e("td",Qe,s(t.nov),1),e("td",Re,s(t.dec),1),e("td",je,s(t.totalQ4),1),e("td",Be,s(t.total),1)]))),128))])])])])])}const st=L(W,[["render",Te]]);export{st as default};

import{_ as D}from"./CJvkj-tn.js";import{S as I,p as S,Y as B,G as P,V,q as L,A as v,B as A,x as y,y as d,b,e as w,f as l,z as c,g as e,j as M,t as o,_ as k,a as O,C as g,P as h}from"./DnTf3NWd.js";import{_ as R}from"./BNCMyFHp.js";import{_ as j}from"./BM3s60a1.js";import{_ as U}from"./L81lbQ0F.js";import{S as q}from"./CbHCP5KW.js";import{P as N}from"./BoMgRSy8.js";import{u as E}from"./mHvkefY9.js";import"./BhIICg8V.js";import"./DfD7FrAn.js";import"./h7knjDhA.js";const X={components:{TransitionRoot:I,TransitionChild:S,Dialog:B,DialogPanel:P,DialogTitle:V,XMarkIcon:L},data(){return{viewIcon:v,show:!1,editIcon:A}},props:{data:{type:Object,required:!0}},methods:{handleClick(){this.show=!this.show}}},z={class:"fixed inset-0 overflow-y-auto"},F={class:"flex min-h-full items-center justify-center p-4 text-center"},G={class:"border-b px-3 py-3 flex items-center justify-between"},H={class:"py-5 space-y-3 px-5"},Y={class:"w-full flex flex-col space-y-1"},Q={class:"w-full flex flex-col space-y-1"},J={class:"w-full flex flex-col space-y-1"},K={class:"w-full flex flex-col space-y-1"},W={class:"w-full flex flex-col space-y-1"},Z={class:"w-full flex flex-col space-y-1"},$={class:"w-full flex flex-col space-y-1"},ee={class:"w-full flex flex-col space-y-1"},te={class:"w-full flex flex-col space-y-1"},se={class:"w-full flex flex-col space-y-1"},ae={class:"w-full flex flex-col space-y-1"},oe={class:"w-full flex flex-col space-y-1"},le={class:"w-full flex flex-col space-y-1"};function ne(n,t,s,m,a,i){const f=k,r=d("TransitionChild"),p=d("DialogTitle"),_=d("XMarkIcon"),x=d("DialogPanel"),u=d("Dialog"),T=d("TransitionRoot");return b(),w("div",null,[l(f,{click:i.handleClick,color:"primary",text:"View",icon:a.viewIcon},null,8,["click","icon"]),l(T,{appear:"",show:a.show,as:"template"},{default:c(()=>[l(u,{as:"div",class:"relative z-10"},{default:c(()=>[l(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>t[1]||(t[1]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),e("div",z,[e("div",F,[l(r,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[l(x,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:c(()=>[e("div",G,[l(p,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:c(()=>t[2]||(t[2]=[e("img",{src:j,class:"w-8 h-8 mr-2"},null,-1),M(" View Stock Transaction ")])),_:1}),e("button",{onClick:t[0]||(t[0]=(...C)=>i.handleClick&&i.handleClick(...C))},[l(_,{class:"w-5 h-5"})])]),e("div",H,[e("div",Y,[t[3]||(t[3]=e("label",{class:"font-semibold text-lg"},"Name",-1)),e("p",null,o(s.data.name),1)]),e("div",Q,[t[4]||(t[4]=e("label",{class:"font-semibold text-lg"},"Description",-1)),e("p",null,o(s.data.description),1)]),e("div",J,[t[5]||(t[5]=e("label",{class:"font-semibold text-lg"},"Location",-1)),e("p",null,o(s.data.stock_location),1)]),e("div",K,[t[6]||(t[6]=e("label",{class:"font-semibold text-lg"},"Transaction Type",-1)),e("p",null,o(s.data.transaction_type),1)]),e("div",W,[t[7]||(t[7]=e("label",{class:"font-semibold text-lg"},"Sender",-1)),e("p",null,o(s.data.sending_to),1)]),e("div",Z,[t[8]||(t[8]=e("label",{class:"font-semibold text-lg"},"Receiver",-1)),e("p",null,o(s.data.receiving_from),1)]),e("div",$,[t[9]||(t[9]=e("label",{class:"font-semibold text-lg"},"Batch",-1)),e("p",null,o(s.data.batch),1)]),e("div",ee,[t[10]||(t[10]=e("label",{class:"font-semibold text-lg"},"Lot",-1)),e("p",null,o(s.data.lot),1)]),e("div",te,[t[11]||(t[11]=e("label",{class:"font-semibold text-lg"},"Quantity",-1)),e("p",null,o(s.data.transacted_quantity),1)]),e("div",se,[t[12]||(t[12]=e("label",{class:"font-semibold text-lg"},"Available Balance",-1)),e("p",null,o(s.data.consolidated_available_balance),1)]),e("div",ae,[t[13]||(t[13]=e("label",{class:"font-semibold text-lg"},"Remaining Balance After Transaction",-1)),e("p",null,o(s.data.after_transaction_remaining_balance),1)]),e("div",oe,[t[14]||(t[14]=e("label",{class:"font-semibold text-lg"},"Expirty Date",-1)),e("p",null,o(s.data.expiry_date),1)]),e("div",le,[t[15]||(t[15]=e("label",{class:"font-semibold text-lg"},"Transaction Date",-1)),e("p",null,o(s.data.transaction_date),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const ie=y(X,[["render",ne]]),re={setup(){E({title:`${N.name.toUpperCase()} - Stock Transactions`})},data(){return{header:"Stock Transactions",search:"",loading:!1,transferIcon:v,viewIcon:v,pages:[{name:"Home",link:"/home"},{name:"Stock Management",link:"#"}],headers:[{text:"item",value:"name",sortable:!0},{text:"type",value:"transaction_type"},{text:"sender",value:"receiving_from"},{text:"receiver",value:"sending_to"},{text:"batch",value:"batch"},{text:"lot",value:"lot"},{text:"expiry date",value:"expiry_date",sortable:!0},{text:"quantity",value:"transacted_quantity",sortable:!0},{text:"transaction date",value:"transaction_date",sortable:!0},{text:"actions",value:"actions"}],transactions:new Array,cookie:O("token"),serverItemsLength:0,serverOptions:{page:1,rowsPerPage:25,sortBy:"name"}}},created(){this.init(this.search)},computed:{filteredTransactions(){return this.transactions.map(n=>({...n,expiry_date:g(n.expiry_date).format(h),transaction_date:g(n.transaction_date).format(h),sending_to:n.sending_to==null?"Laboratory Store":n.sending_to,receiving_from:n.receiving_from==null?"Laboratory Store":n.receiving_from}))}},methods:{async init(n){this.loading=!0;const t=new q,{page:s,rowsPerPage:m}=this.serverOptions,a=`search=${n}&page=${s}&per_page=${m}`,{data:i,pending:f,error:r}=await t.getStockTransactions(`${this.cookie}`,a);this.loading=f,i.value&&(this.transactions=i.value.data,this.loading=!1,this.serverItemsLength=i.value.meta.total_count),r.value&&(console.error(r.value),this.loading=!1)}}},ce={class:"px-5 py-5"},de={class:"flex items-center justify-between py-5"},fe={class:"text-2xl font-semibold"},ue={class:"flex items-center space-x-3"},me={class:"flex items-center justify-end py-5"},pe={class:"py-2 flex items-center space-x-2"};function _e(n,t,s,m,a,i){const f=D,r=k,p=R,_=ie,x=U;return b(),w("div",ce,[l(f,{pages:a.pages},null,8,["pages"]),e("div",de,[e("h3",fe,o(a.header),1),e("div",ue,[l(r,{text:"Receive stock",type:"button",color:"warning",icon:a.transferIcon,click:()=>n.$router.push("/stock-management/transactions/receive-stock")},null,8,["icon","click"]),l(r,{text:"Transfer stock",type:"button",color:"success",icon:a.transferIcon,click:()=>n.$router.push("/stock-management/transactions/transfer-stock")},null,8,["icon","click"])])]),e("div",me,[l(p,{search:a.search,"onUpdate:search":t[0]||(t[0]=u=>a.search=u),onUpdate:i.init},null,8,["search","onUpdate"])]),e("div",null,[l(x,{headers:a.headers,data:i.filteredTransactions,loading:a.loading,searchField:"name",searchValue:a.search,serverItemsLength:a.serverItemsLength,serverOptions:a.serverOptions,onUpdate:i.init},{actions:c(({item:u})=>[e("div",pe,[l(_,{data:u},null,8,["data"])])]),_:1},8,["headers","data","loading","searchValue","serverItemsLength","serverOptions","onUpdate"])])])}const Ie=y(re,[["render",_e]]);export{Ie as default};

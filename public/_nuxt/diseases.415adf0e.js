import{_ as q}from"./Breadcrumb.vue.ad824e0f.js";import{_ as M}from"./index.b7e22692.js";import{_ as N}from"./SearchBar.9c2cf220.js";import{a as w,b as y,_ as b,g as i,o as C,c as T,d as e,h as l,e as t,i as x,f as A,t as X,u as K,ak as O}from"./entry.3e997e44.js";import{_ as E}from"./OutlinedButton.318868b2.js";import{e as G,d as z}from"./constants.be4260bc.js";import{e as $,f as I,a as H,h as L}from"./fetch.d43a083b.js";import{r as U}from"./XMarkIcon.737949c3.js";import{a as J}from"./PencilSquareIcon.b3862558.js";import{r as Q}from"./ArrowDownTrayIcon.3855d60d.js";import{S as V,h as S,U as F,G as j,V as B}from"./transition.82a1c525.js";import{_ as P}from"./virus.f231b4ac.js";import{r as W}from"./TrashIcon.054fc78a.js";import{_ as Y}from"./Datatable.2caac364.js";import{P as Z}from"./package.2b319c9a.js";import"./nuxt-link.4d6d5112.js";import"./HomeIcon.5803e93b.js";import"./network.bc619a46.js";import"./PrinterIcon.b5dff05e.js";import"./hidden.eaac968f.js";import"./Loader.bbacf5da.js";const ee={components:{TransitionRoot:V,TransitionChild:S,Dialog:F,DialogPanel:j,DialogTitle:B,XMarkIcon:U},data(){return{editIcon:J,show:!1,saveIcon:Q,name:this.data.name,description:this.data.description,drugSelected:new Array,drugs:new Array,rawDrugs:new Array,loading:!1,cookie:w("token")}},props:{data:{type:Object,required:!0}},methods:{async submitForm(){this.loading=!0;const n={route:`${$.disease.edit}/${this.data.id}`,method:"PUT",token:`${this.cookie}`,body:this.data},{pending:o,error:r,data:c}=await I(n);this.loading=o,c.value&&(this.show=!1,y().$toast.success("Disease updated successfully!"),this.loading=!1,this.$emit("update",!0)),r.value&&(this.show=!1,console.error(r.value),this.loading=!1,y().$toast.error(G))},handleClick(){this.show=!this.show},clearForm(){this.$formkit.reset("editForm")}}},te=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-25"},null,-1),oe={class:"fixed inset-0 overflow-y-auto"},ae={class:"flex min-h-full items-center justify-center p-4 text-center"},se={class:"border-b px-3 py-3 flex items-center justify-between"},ne=t("img",{src:P,class:"w-8 h-8 mr-2"},null,-1),ie={class:"mt-2 space-y-3"},le={class:"w-full flex items-center px-5"},re={class:"w-full flex flex-col space-y-2"},ce={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function de(n,o,r,c,a,s){const d=A,m=i("TransitionChild"),h=i("DialogTitle"),f=i("XMarkIcon"),u=i("FormKit"),p=E,_=i("DialogPanel"),k=i("Dialog"),D=i("TransitionRoot");return C(),T("div",null,[e(d,{click:s.handleClick,text:"Edit",color:"success",icon:a.editIcon},null,8,["click","icon"]),e(D,{appear:"",show:a.show,as:"template"},{default:l(()=>[e(k,{as:"div",class:"relative z-10"},{default:l(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[te]),_:1}),t("div",oe,[t("div",ae,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[e(_,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[t("div",se,[e(h,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[ne,x(" Edit Disease ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...v)=>s.handleClick&&s.handleClick(...v))},[e(f,{class:"w-5 h-5"})])]),e(u,{id:"editForm",type:"form","submit-label":"Update",onSubmit:s.submitForm,actions:!1},{default:l(({value:v})=>[t("div",ie,[t("div",le,[t("div",re,[e(u,{type:"text",label:"Name",validation:"required",modelValue:r.data.name,"onUpdate:modelValue":o[1]||(o[1]=g=>r.data.name=g)},null,8,["modelValue"])])])]),t("div",ce,[e(p,{text:"Clear form",type:"button",click:()=>{s.clearForm()}},null,8,["click"]),e(d,{loading:a.loading,type:"submit",click:()=>{},color:"success",icon:a.saveIcon,text:"Save changes"},null,8,["loading","icon"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const me=b(ee,[["render",de]]),ue={components:{TransitionRoot:V,TransitionChild:S,Dialog:F,DialogPanel:j,DialogTitle:B,XMarkIcon:U,ExclamationTriangleIcon:H},data(){return{show:!1,deleteIcon:W,loading:!1,cookie:w("token"),reason:""}},props:{data:{type:Object,required:!0}},methods:{async deleteData(n){this.loading=!0;const o={route:`${$.disease.delete}/${n}`,method:"DELETE",token:`${this.cookie}`,body:{voided_reason:this.reason}},{pending:r,error:c,data:a}=await I(o);this.loading=r,a.value&&(this.handleClick(),y().$toast.success("Disease deleted successfully!"),this.reason="",this.loading=!1,this.$emit("update",!0)),c.value&&(console.log(c.value),y().$toast.error("An error occurred, please try again!"),this.loading=!1)},handleClick(){this.show=!this.show}}},pe=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),_e={class:"fixed inset-0 overflow-y-auto"},he={class:"flex min-h-full items-center justify-center p-4 text-center"},fe={class:"border-b px-3 py-3 flex items-center justify-between"},ge={class:"mt-2 space-y-3 px-5"},xe={class:"rounded px-2 py-2"},ve={class:"font-semibold text-red-500"},ye={class:"mt-4 justify-end flex items-center space-x-3 px-3 py-2 border-t"};function ke(n,o,r,c,a,s){const d=A,m=i("TransitionChild"),h=i("ExclamationTriangleIcon"),f=i("DialogTitle"),u=i("XMarkIcon"),p=i("FormKit"),_=E,k=i("DialogPanel"),D=i("Dialog"),v=i("TransitionRoot");return C(),T("div",null,[e(d,{click:s.handleClick,color:"error",text:"Delete",icon:a.deleteIcon},null,8,["click","icon"]),e(v,{appear:"",show:a.show,as:"template"},{default:l(()=>[e(D,{as:"div",class:"relative z-10"},{default:l(()=>[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[pe]),_:1}),t("div",_e,[t("div",he,[e(m,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[e(k,{class:"w-full max-w-3xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[t("div",fe,[e(f,{as:"h3",class:"text-lg flex items-center font-medium leading-6"},{default:l(()=>[e(h,{class:"h-5 w-5 mr-2"}),x(" Confirm delete ")]),_:1}),t("button",{onClick:o[0]||(o[0]=(...g)=>s.handleClick&&s.handleClick(...g))},[e(u,{class:"w-5 h-5"})])]),e(p,{type:"form","submit-label":"Update",onSubmit:o[2]||(o[2]=g=>s.deleteData(r.data.id)),actions:!1},{default:l(({value:g})=>[t("div",ge,[t("div",xe,[x(" Do you really want to delete "),t("span",ve,X(r.data.name),1),x("? Note that once this action is completed, it can not be undone ")]),e(p,{type:"textarea",label:"Reason",validation:"required",modelValue:a.reason,"onUpdate:modelValue":o[1]||(o[1]=R=>a.reason=R)},null,8,["modelValue"])]),t("div",ye,[e(_,{click:()=>{},type:"button",text:"Cancel"}),e(d,{loading:a.loading,type:"submit",click:()=>{},color:"error",icon:a.deleteIcon,text:"Delete"},null,8,["loading","icon"])])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const De=b(ue,[["render",ke]]),we={setup(){K({title:`${Z.name.toUpperCase()} - Diseases`})},data(){return{header:"Diseases",pages:[{name:"Home",link:"/home"},{name:"Test Catalog",link:"#"}],headers:[{text:"ID",value:"id",sortable:!0},{text:"NAME",value:"name",sortable:!0},{text:"DATE CREATED",value:"created_date"},{text:"Actions",value:"actions"}],diseases:new Array,cookie:w("token"),search:"",searchValue:"",loading:!1}},created(){this.init()},computed:{filteredDiseases(){return this.diseases.map(n=>({...n,created_date:L(n.created_date).format(z)}))}},methods:{async init(){this.loading=!0;const n={route:$.disease.index,method:"GET",token:`${this.cookie}`},{data:o,error:r,pending:c}=await I(n);this.loading=c,o.value&&(this.diseases=o.value,this.loading=!1),r.value&&(console.log(r.value),this.loading=!1)},updateSearch(n){O&&(this.searchValue=n,this.search=n)},updateDiseases(n){this.init()}}},be={class:"px-5 py-5"},Ce={class:"flex items-center justify-between py-5"},Te=t("div",{class:"text-2xl font-semibold flex items-center uppercase"},[t("img",{src:P,alt:"report-icon",class:"w-8 h-8 mr-2"}),x(" Diseases ")],-1),$e={class:"flex items-center space-x-3"},Ie={class:"flex justify-end w-full px-2 py-2 mb-2"},Ae={class:"py-2 flex items-center space-x-2"};function Ee(n,o,r,c,a,s){const d=q,m=M,h=N,f=me,u=De,p=Y;return C(),T("div",be,[e(d,{pages:a.pages},null,8,["pages"]),t("div",Ce,[Te,t("div",$e,[e(m,{onActionCompleted:s.updateDiseases},null,8,["onActionCompleted"])])]),t("div",Ie,[e(h,{search:a.search,onUpdate:s.updateSearch},null,8,["search","onUpdate"])]),e(p,{headers:a.headers,data:s.filteredDiseases,loading:a.loading,"search-value":a.searchValue,"search-field":"name"},{actions:l(({item:_})=>[t("div",Ae,[e(f,{data:_,onUpdate:s.updateDiseases},null,8,["data","onUpdate"]),e(u,{data:_,onUpdate:s.updateDiseases},null,8,["data","onUpdate"])])]),_:1},8,["headers","data","loading","search-value"])])}const Ye=b(we,[["render",Ee]]);export{Ye as default};

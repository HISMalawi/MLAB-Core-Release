import{_ as V}from"./Breadcrumb.vue.5ee97787.js";import{a as O,b as f,_ as j,g as h,o as a,c as d,d as l,e,t as k,i as C,F as v,r as g,w as y,v as x,q as R,k as q,f as B}from"./entry.97d0b54e.js";import{_ as N,a as U}from"./index.6f7f9c86.js";import{S as m}from"./stock.51d32fa9.js";import{r as F}from"./TicketIcon.1c606a8b.js";import{r as M}from"./CheckIcon.bd552bd1.js";import{r as T}from"./DocumentCheckIcon.93bfb3b3.js";import{r as A}from"./NoSymbolIcon.430003e0.js";import{r as D}from"./TrashIcon.962b5abb.js";import"./nuxt-link.68cca64c.js";import"./HomeIcon.68cf51b5.js";import"./OutlinedButton.825857bb.js";import"./constants.0c4e4d21.js";import"./XMarkIcon.14e83439.js";import"./fetch.e0862392.js";import"./transition.24037afa.js";import"./hidden.a4deafd9.js";import"./PencilSquareIcon.5fdb3ab6.js";import"./PrinterIcon.068c8bcd.js";const L={components:{TicketIcon:F},data(){return{header:"Verify Stock Order",checkIcon:M,allIcon:T,rejectIcon:A,pages:[{name:"Home",link:"/home"},{name:"Stock Orders",link:"/stock-management/orders"}],cookie:O("token"),deleteicon:D,loading:!1,verifying:!1,requisitions:new Array,voidReason:""}},created(){this.init()},methods:{async init(){this.loading=!0;const o=new m,{data:r,error:i,pending:n}=await o.getStockOrder(`${this.cookie}`,`${this.$route.query.order_id}`);this.loading=n,r.value&&(this.requisitions=r.value.stock_requisitions,this.loading=!1),i.value&&(console.error(i.value),this.loading=!1)},async verifyStockRequisition(o){this.loading=!0;const r=new m,i={stock_order_id:`${this.$route.query.order_id}`,stock_requisition_id:o.id},{data:n,error:t,pending:c}=await r.verifyStockOrderRequisition(`${this.cookie}`,i);this.loading=c,n.value&&(f().$toast.success("Stock order requisition verified successfully!"),this.init(),this.loading=!1),t.value&&(console.error(t.value),this.loading=!1)},async verifyStockOrder(){this.verifying=!0;const o=new m,r={stock_order_id:`${this.$route.query.order_id}`,stock_requisition_ids:this.requisitions.map(c=>c.id)},{data:i,error:n,pending:t}=await o.verifyStockOrder(`${this.cookie}`,r);this.verifying=t,i.value&&(f().$toast.success("Stock order verified successfully!"),this.$router.push("/stock-management/orders"),this.verifying=!1),n.value&&(console.error(n.value),this.verifying=!1)},deleteStockItem(o){o>=0&&o<this.requisitions.length&&this.requisitions.splice(o,1)}}},K={class:"px-5 py-5"},E={class:"py-5 flex items-center justify-between"},H={class:"text-2xl font-semibold"},Q={class:"px-4 py-2 bg-gray-50 flex items-center justify-between"},z={class:"flex items-center space-x-2"},G={class:"flex items-center space-x-3 justify-end"},J={key:0,class:"grid grid-cols-4 gap-4 mt-5"},P={class:"flex flex-col space-y-2"},W={key:0,class:"mt-8 flex space-x-2.5 items-center"},X=e("div",{class:"w-1/4 bg-gray-100 rounded animate-pulse h-10 mt"},null,-1),Y=e("div",{class:"w-1/4 bg-gray-100 rounded animate-pulse h-10"},null,-1),Z=e("div",{class:"w-1/4 bg-gray-100 rounded animate-pulse h-10"},null,-1),ee=e("div",{class:"w-1/4 bg-gray-100 rounded animate-pulse h-10"},null,-1),oe=[X,Y,Z,ee];function te(o,r,i,n,t,c){const w=V,I=h("TicketIcon"),_=B,S=N,p=h("FormKit"),$=U;return a(),d("div",K,[l(w,{pages:t.pages},null,8,["pages"]),e("div",E,[e("h3",H,k(t.header),1)]),e("div",Q,[e("div",z,[l(I,{class:"h-5 w-5"}),e("p",null,[C("Voucher Number: "),e("strong",null,k(o.$route.params.voucherId),1)])]),e("div",G,[l(_,{loading:t.verifying,icon:t.allIcon,text:"Verify all",color:"success",click:c.verifyStockOrder},null,8,["loading","icon","click"]),l(S,{stockId:`${o.$route.query.order_id}`,orderId:`${o.$route.params.voucherId}`},null,8,["stockId","orderId"])])]),e("div",null,[(a(!0),d(v,null,g(t.requisitions,(s,b)=>y((a(),d("div",{class:"flex flex-col space-y-3",key:b},[s.requisition_status.toLowerCase()!=="rejected"?(a(),d("div",J,[e("div",P,[l(p,{label:"Stock item",disabled:!0,modelValue:s.item.name,"onUpdate:modelValue":u=>s.item.name=u},null,8,["modelValue","onUpdate:modelValue"])]),l(p,{label:"Quantity requested",type:"number",validation:"required",modelValue:s.quantity_requested,"onUpdate:modelValue":u=>s.quantity_requested=u},null,8,["modelValue","onUpdate:modelValue"]),s.requisition_status.toLowerCase()!=="requested"?(a(),d("div",W,[(a(),R(_,{key:s.id,icon:t.checkIcon,text:"Verify",color:"success",click:()=>{c.verifyStockRequisition(s)}},null,8,["icon","click"])),l($,{onUpdate:c.init,data:s,orderId:`${o.$route.params.voucherId}`},null,8,["onUpdate","data","orderId"])])):q("",!0)])):q("",!0)])),[[x,!t.loading]])),128)),y(e("div",null,[(a(),d(v,null,g(5,s=>e("div",{class:"flex items-center space-x-3 mb-3",key:s},oe)),64))],512),[[x,t.loading]])])])}const qe=j(L,[["render",te]]);export{qe as default};

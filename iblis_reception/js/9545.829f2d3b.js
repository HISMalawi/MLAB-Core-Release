"use strict";(globalThis["webpackChunkIBLISReception"]=globalThis["webpackChunkIBLISReception"]||[]).push([[9545],{80027:(e,t,l)=>{l.d(t,{D:()=>n});const n="DD/MM/YYYY"},49545:(e,t,l)=>{l.r(t),l.d(t,{default:()=>z});l(44114),l(27495),l(25440),l(98992),l(72577),l(81454);var n=l(20641),u=l(50953),i=l(90033),a=l(73235),d=l(35480),o=l(741),s=l(75220),r=l(95093),f=l.n(r),_=l(80027),v=l(85901),b=l(46079),k=l(82077);const R={key:0},h={key:1},F={key:0},y={key:0},c={key:0},p=(0,n.pM)({__name:"NlimsOrder",setup(e){const t=(0,s.lq)(),l=(0,u.KR)(null),r=(0,u.KR)(!1),p=(0,n.EW)((()=>{var e;const t=null===(e=l.value)||void 0===e?void 0:e.patient;return t?`${t.first_name} ${t.middle_name} ${t.last_name}`:""})),g=(0,n.EW)((()=>{var e;const t=null===(e=l.value)||void 0===e?void 0:e.patient;if(t){const e=f()(),l=f()(t.date_of_birth),n=e.diff(l,"years");l.add(n,"years");const u=e.diff(l,"months");return`${n} years ${u} months`}return""})),z=(0,n.EW)((()=>{var e;const t=null===(e=l.value)||void 0===e?void 0:e.created_date;return t?f()(t).format(_.D):""})),m=async e=>{const t=(0,o.Kj)();r.value=!0;try{const n=await t.getJson("orders/search_order_from_nlims_by_tracking_number",{tracking_number:e.replace(/\$$/,"")});null!==n&&void 0!==n&&n.ok?l.value=n.data:((0,v.L_)("Request not found"==(null===n||void 0===n?void 0:n.error)?"Order not available in NLIMS":null===n||void 0===n?void 0:n.error),setTimeout((()=>{b.A.back()}),1e3))}catch(n){console.error("error occurred while searching for order in nlims: ",n),(0,v.L_)("error occurred while searching for order in nlims")}finally{r.value=!1}},W=async()=>{var e;const t=(0,o.Kj)(),{getLocation:n,token:u}=t,i=null===(e=u.value)||void 0===e||null===(e=e.authorization)||void 0===e?void 0:e.user,a=null===i||void 0===i?void 0:i.lab_locations.find((e=>e.name===n())),d=await t.postJson("orders/merge_order_from_nlims",{...l.value,lab_location:null===a||void 0===a?void 0:a.id});null!==d&&void 0!==d&&d.ok&&(l.value=d.data,(0,v.tP)("Order merged successfully"),b.A.push("/tests")),null!==d&&void 0!==d&&d.ok||(0,v.L_)("An error occurred while merging order")},x=()=>{var e;const t=new k.A,n=String(null===(e=l.value)||void 0===e?void 0:e.tracking_number);t.writeLbl("printout/tracking_number",{tracking_number:n},`${n}.lbl`)};return(0,n.sV)((()=>{const e=t.query["tracking-number"];"string"===typeof e&&m(e)})),(e,t)=>((0,n.uX)(),(0,n.Wv)((0,u.R1)(a.AO),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.eU),{translucent:!0},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ai),{style:{padding:"10px"}},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.BC),{style:{"text-transform":"uppercase"},class:"his-lg-text"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("NLIMS Order")]))),_:1})])),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.W9),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.lO),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ln),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.hU),{size:"6"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.b_),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ai),{color:"primary"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.BC),null,{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("Order Details")]))),_:1})])),_:1}),r.value?((0,n.uX)(),(0,n.CE)("div",R,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(9,(e=>(0,n.bF)((0,u.R1)(a.uz),{key:e},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ds),{animated:!0,style:{width:"40%",height:"20px"}})])),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ds),{animated:!0,style:{width:"60%",height:"20px"}})])),_:1})])),_:2},1024))),64))])):((0,n.uX)(),(0,n.CE)("div",h,[(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("Test Type")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.tests.map((e=>e.test_type)).join(", ")),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("Date Ordered")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(z.value),1)])),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("Priority")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.priority),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("Test Status")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.tests.map((e=>e.test_status)).join(", ")),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("Request Origin")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.sending_facility),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.eW)("Requesting Ward/Location")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.facility_section),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[9]||(t[9]=[(0,n.eW)("Receiving Facility")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.receiving_facility),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[10]||(t[10]=[(0,n.eW)("Requesting Physician")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.requested_by),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[11]||(t[11]=[(0,n.eW)("Registered By")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.collected_by),1)]})),_:1})])),_:1})]))])),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.hU),{size:"6"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.b_),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ai),{color:"primary"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.BC),null,{default:(0,n.k6)((()=>t[12]||(t[12]=[(0,n.eW)(" Patient Details ")]))),_:1})])),_:1}),r.value?((0,n.uX)(),(0,n.CE)("div",F,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(e=>(0,n.bF)((0,u.R1)(a.uz),{key:e},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ds),{animated:!0,style:{width:"40%",height:"20px"}})])),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ds),{animated:!0,style:{width:"60%",height:"20px"}})])),_:1})])),_:2},1024))),64))])):((0,n.uX)(),(0,n.Wv)((0,u.R1)(a.nf),{key:1},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[13]||(t[13]=[(0,n.eW)("NPID")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e||null===(e=e.patient_identifiers)||void 0===e?void 0:e.npid),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[14]||(t[14]=[(0,n.eW)("ART Regimen")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e||null===(e=e.patient_identifiers)||void 0===e?void 0:e.art_regimen),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[15]||(t[15]=[(0,n.eW)("ARV Number")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e||null===(e=e.patient_identifiers)||void 0===e?void 0:e.arv_number),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[16]||(t[16]=[(0,n.eW)("Patient Name")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(p.value),1)])),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[17]||(t[17]=[(0,n.eW)("Age")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(g.value),1)])),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[18]||(t[18]=[(0,n.eW)("Sex")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e||null===(e=e.patient)||void 0===e?void 0:e.sex),1)]})),_:1})])),_:1})])),_:1}))])),_:1}),(0,n.bF)((0,u.R1)(a.b_),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ai),{color:"primary"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.BC),null,{default:(0,n.k6)((()=>t[19]||(t[19]=[(0,n.eW)(" Specimen Details ")]))),_:1})])),_:1}),r.value?((0,n.uX)(),(0,n.CE)("div",y,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(3,(e=>(0,n.bF)((0,u.R1)(a.uz),{key:e},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ds),{animated:!0,style:{width:"40%",height:"20px"}})])),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ds),{animated:!0,style:{width:"60%",height:"20px"}})])),_:1})])),_:2},1024))),64))])):((0,n.uX)(),(0,n.Wv)((0,u.R1)(a.nf),{key:1},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[20]||(t[20]=[(0,n.eW)("Type")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.specimen),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[21]||(t[21]=[(0,n.eW)("Tracking Number")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.tracking_number),1)]})),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.uz),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>t[22]||(t[22]=[(0,n.eW)("Status")]))),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>{var e;return[(0,n.eW)((0,i.v_)(null===(e=l.value)||void 0===e?void 0:e.order_status),1)]})),_:1})])),_:1})])),_:1}))])),_:1}),(0,n.bF)((0,u.R1)(a.b_),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ai),{color:"primary"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.BC),null,{default:(0,n.k6)((()=>t[23]||(t[23]=[(0,n.eW)(" Results ")]))),_:1})])),_:1}),r.value?((0,n.uX)(),(0,n.CE)("div",c,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(4,(e=>(0,n.bF)((0,u.R1)(a.uz),{key:e},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ds),{animated:!0,style:{width:"40%",height:"20px"}})])),_:1}),(0,n.bF)((0,u.R1)(a.he),{slot:"end"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ds),{animated:!0,style:{width:"60%",height:"20px"}})])),_:1})])),_:2},1024))),64))])):((0,n.uX)(),(0,n.Wv)((0,u.R1)(a.nf),{key:1,inset:!1},{default:(0,n.k6)((()=>{var e;return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(null===(e=l.value)||void 0===e?void 0:e.results,(e=>((0,n.uX)(),(0,n.Wv)((0,u.R1)(a.uz),{key:e},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.he),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(Object.keys(e)[0]),1)])),_:2},1024),(0,n.bF)((0,u.R1)(a.he),{slot:"end",style:{"font-size":"18px"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(Object.values(e)[0]),1)])),_:2},1024)])),_:2},1024)))),128))]})),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.bF)((0,u.R1)(a.M0),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.ai),{style:{padding:"10px"}},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.Jm),{onClick:t[0]||(t[0]=e=>(0,u.R1)(b.A).back()),size:"large",color:"success",slot:"start"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.iq),{icon:(0,u.R1)(d.$$C),slot:"icon-only",style:{"margin-right":"5px"}},null,8,["icon"]),t[24]||(t[24]=(0,n.eW)(" Back "))])),_:1}),(0,n.bF)((0,u.R1)(a.Jm),{onClick:W,size:"large",slot:"end",color:"success"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.iq),{icon:(0,u.R1)(d.WQq),slot:"icon-only",style:{"margin-right":"5px"}},null,8,["icon"]),t[25]||(t[25]=(0,n.eW)(" Merge "))])),_:1}),(0,n.bF)((0,u.R1)(a.Jm),{onClick:x,size:"large",slot:"end"},{default:(0,n.k6)((()=>[(0,n.bF)((0,u.R1)(a.iq),{icon:(0,u.R1)(d.yyV),slot:"icon-only",style:{"margin-right":"5px"}},null,8,["icon"]),t[26]||(t[26]=(0,n.eW)(" Print Tracking Number "))])),_:1})])),_:1})])),_:1})])),_:1}))}}),g=p,z=g}}]);
//# sourceMappingURL=9545.829f2d3b.js.map
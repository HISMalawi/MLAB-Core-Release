"use strict";(globalThis["webpackChunkIBLISReception"]=globalThis["webpackChunkIBLISReception"]||[]).push([[2360],{7045:(e,t,l)=>{var a=l(6339),n=l(3070);e.exports=function(e,t,l){return l.get&&a(l.get,t,{getter:!0}),l.set&&a(l.set,t,{setter:!0}),n.f(e,t,l)}},8053:e=>{var t=TypeError;e.exports=function(e,l){if(e<l)throw t("Not enough arguments");return e}},6229:(e,t,l)=>{var a=l(8052),n=l(1702),o=l(1340),i=l(8053),s=URLSearchParams,r=s.prototype,u=n(r.append),d=n(r["delete"]),c=n(r.forEach),p=n([].push),m=new s("a=1&a=2&b=3");m["delete"]("a",1),m["delete"]("b",void 0),m+""!=="a=2"&&a(r,"delete",(function(e){var t=arguments.length,l=t<2?void 0:arguments[1];if(t&&void 0===l)return d(this,e);var a=[];c(this,(function(e,t){p(a,{key:t,value:e})})),i(t,1);var n,s=o(e),r=o(l),m=0,v=0,b=!1,f=a.length;while(m<f)n=a[m++],b||n.key===s?(b=!0,d(this,n.key)):v++;while(v<f)n=a[v++],n.key===s&&n.value===r||u(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},7330:(e,t,l)=>{var a=l(8052),n=l(1702),o=l(1340),i=l(8053),s=URLSearchParams,r=s.prototype,u=n(r.getAll),d=n(r.has),c=new s("a=1");!c.has("a",2)&&c.has("a",void 0)||a(r,"has",(function(e){var t=arguments.length,l=t<2?void 0:arguments[1];if(t&&void 0===l)return d(this,e);var a=u(this,e);i(t,1);var n=o(l),s=0;while(s<a.length)if(a[s++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},2062:(e,t,l)=>{var a=l(9781),n=l(1702),o=l(7045),i=URLSearchParams.prototype,s=n(i.forEach);a&&!("size"in i)&&o(i,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})},9834:(e,t,l)=>{l.d(t,{Z:()=>o});l(6229),l(7330),l(2062);var a=l(4542),n=l(6188);class o{async writeLbl(e,t,l=`${Date.now()}.lbl`){const o=(0,a.KU)();try{const a=await o.getText(e,t),i=new Blob([null===a||void 0===a?void 0:a.data],{type:"text/plain"});e=URL.createObjectURL(i);const s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download",l),s.click(),URL.revokeObjectURL(e),(0,n.x9)("Accession number printed!")}catch(i){console.error(i)}}}},2618:(e,t,l)=>{l.d(t,{rM:()=>f,ZP:()=>w,lo:()=>h});var a=l(2797),n=l(6252),o=l(3577);function i(e,t,l,a,i,s){const r=(0,n.up)("ion-title"),u=(0,n.up)("ion-toolbar"),d=(0,n.up)("ion-header"),c=(0,n.up)("ion-content"),p=(0,n.up)("ion-button"),m=(0,n.up)("ion-footer"),v=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{class:"his-lg-text ion-text-center"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.currentField.helpText),1)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,40,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{color:"light"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Close ")])),_:1},8,["disabled","onClick"]),(0,n.Wm)(p,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Clear ")])),_:1},8,["disabled","onClick"]),(0,n.Wm)(p,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Done ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})}var s=l(6188),r=l(9652);function u(){const e={};return r.q.forEach((t=>{e[t]=(0,n.RC)((()=>l(7751)(`./${t}.vue`)))})),e}const d=(0,n.aZ)({name:"SingleFieldTouchForm",components:{IonPage:a._i,IonContent:a.W2,IonFooter:a.fr,IonToolbar:a.sr,IonButton:a.YG,IonHeader:a.Gu,IonTitle:a.wd,...u()},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),methods:{onClose(){"modal"===this.dismissType?a.Fy.dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e},onDone(){if(this.disableBtn=!0,this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return(0,s.L6)(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(e){(0,s.N$)(`${e}`),console.error(e)}this.onClose(),this.disableBtn=!1}}});var c=l(3744);const p=(0,c.Z)(d,[["render",i]]),m=p;var v=l(516),b=l(5289);async function f(e,t,l){(await a.Fy.create({component:v.Z,backdropDismiss:!1,cssClass:"full-modal",componentProps:{onFinish:t,fields:e,skipSummary:!0,disableAutoModalDismiss:!0,cancelAction:()=>{"function"===typeof l&&l(),a.Fy.dismiss()}}})).present()}async function h(e,t={}){const l="boolean"!==typeof(null===t||void 0===t?void 0:t.strictNumbers)||(null===t||void 0===t?void 0:t.strictNumbers),n=await a.Fy.create({component:b.Z,backdropDismiss:!1,cssClass:"keypad-modal custom-modal-backdrop",componentProps:{title:(null===t||void 0===t?void 0:t.title)||"",preset:(null===t||void 0===t?void 0:t.preset)||"",toggleButton:null===t||void 0===t?void 0:t.toggleButton,strictNumbers:l,customKeyboard:null===t||void 0===t?void 0:t.customKeyboard,noFloat:"boolean"===typeof(null===t||void 0===t?void 0:t.noFloat)&&t.noFloat,onKeyPress(t,a){e(l?parseInt(t):t,a)}}});n.present()}async function w(e,t){(await a.Fy.create({component:m,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}},7415:(e,t,l)=>{l.r(t),l.d(t,{default:()=>y});l(7658),l(6699);var a=l(6252),n=l(2262),o=l(3577),i=l(2797),s=l(2201),r=l(7284),u=l(2618),d=l(9652),c=l(9013),p=l(4542),m=l(6188),v=l(9905),b=l(3231),f=l(9834);const h=(0,a.aZ)({__name:"IdentifierResult",setup(e){const t=(0,p.KU)(),l=(0,s.yj)(),{searchResult:h}=(0,r.Z)(),w=(0,n.iH)(""),y=(0,n.iH)(""),g=(0,n.iH)([{label:"Order Id",value:"-"},{label:"Tracking Number",value:"-"},{label:"Accession Number",value:"-"},{label:"Patient Name",value:"-"},{label:"Specimen Type",value:"-"},{label:"Test(s) Ordered",value:"-"},{label:"Specimen Status",value:"-"}]),_=`${l.params.identifier||"Unknown ID"}`,k=(0,a.Fl)((()=>!!Object.keys(h.value).length));function F(){(0,r.Z)().searchbyID(_)}async function U(e){const l=await t.putJson(`order_statuses/${e}`,{order_id:g.value[0].value});null!==l&&void 0!==l&&l.ok&&((0,m.x9)(`Specimen ${e} successfully!`),b.Z.push("/tests"))}function S(){(0,u.rM)([{id:"test_types",helpText:"Select test types",type:d.f.TT_MULTIPLE_SELECT,config:{showKeyboard:!0},computedValue:(e,t)=>{var l;return{order_id:(null===(l=h.value)||void 0===l?void 0:l.order_id)||0,tests:e.map((e=>({specimen:e.value,test_type:e.label})))}},options:async()=>{var e;const[l]=(null===(e=h.value)||void 0===e?void 0:e.tests)||[];if(!l)return[];const a=await t.getJson("specimen/test_types",{specimen_id:l.specimen_id});return null!==a&&void 0!==a&&a.ok?a.data.filter((e=>!h.value.tests.map((e=>e.test_type)).includes(e))).map((e=>({label:e,value:l.specimen_id}))):[]},validation:e=>c.Z.required(e)}],(async(e,l)=>{const a=await t.postJson("orders/add_test_to_order",l.test_types);if(!a.ok)return(0,m.L6)(a.error);v.Fy.getTop().then((e=>e&&v.Fy.dismiss())),F()}),null)}(0,a.YP)(h,(async e=>{if(Object.keys(e).length){const l=await t.getJson(`orders/${e.order_id}`);y.value=null===l||void 0===l?void 0:l.data.order_status,w.value=e.client_id;const[a]=e.tests;g.value=[{label:"Order Id",value:e.order_id},{label:"Tracking Number",value:e.tracking_number},{label:"Accession Number",value:e.accession_number},{label:"Patient Name",value:`${e.first_name} ${e.last_name}`},{label:"Specimen Type",value:a.specimen},{label:"Test(s) Ordered",value:e.tests.map((e=>e.test_type)).join(", ")}]}}),{deep:!0,immediate:!0});const C=()=>{const e=new f.Z,{value:t="-"}=g.value.find((e=>"Accession Number"===e.label))||{};e.writeLbl("printout/accession_number",{accession_number:t},`${t}.lbl`)};return(0,a.bv)((()=>{k.value||F()})),(e,t)=>((0,a.wg)(),(0,a.j4)((0,n.SU)(i._i),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(i.Gu),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(i.sr),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(i.wd),{class:"his-lg-text"},{default:(0,a.w5)((()=>[(0,a._)("b",null,(0,o.zw)(_))])),_:1})])),_:1})])),_:1}),(0,a.Wm)((0,n.SU)(i.W2),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(i.q_),null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.value,((e,t)=>((0,a.wg)(),(0,a.j4)((0,n.SU)(i.Ie),{class:"his-md-text",key:t},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(i.Q$),null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.label),1)])),_:2},1024),(0,a.Wm)((0,n.SU)(i.Q$),{slot:"end"},{default:(0,a.w5)((()=>[(0,a._)("b",null,(0,o.zw)(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.Wm)((0,n.SU)(i.fr),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(i.sr),{color:"default",style:{padding:"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(i.YG),{"router-link":"/home",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Cancel ")])),_:1}),(0,a.Wm)((0,n.SU)(i.YG),{size:"large",slot:"end",onClick:C},{default:(0,a.w5)((()=>[(0,a.Uk)(" Print Accession Number ")])),_:1}),(0,a.Wm)((0,n.SU)(i.YG),{onClick:S,disabled:!k.value,slot:"end",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Add test ")])),_:1},8,["disabled"]),"specimen-accepted"!==y.value&&"specimen-rejected"!==y.value?((0,a.wg)(),(0,a.j4)((0,n.SU)(i.YG),{key:0,onClick:t[0]||(t[0]=e=>U("accepted")),disabled:!k.value,slot:"end",size:"large",color:"success"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Accept ")])),_:1},8,["disabled"])):(0,a.kq)("",!0),"specimen-accepted"!==y.value&&"specimen-rejected"!==y.value?((0,a.wg)(),(0,a.j4)((0,n.SU)(i.YG),{key:1,onClick:t[1]||(t[1]=e=>U("rejected")),disabled:!k.value,slot:"end",size:"large",color:"danger"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Reject ")])),_:1},8,["disabled"])):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1}))}}),w=h,y=w}}]);
//# sourceMappingURL=2360.3ed75d5a.js.map
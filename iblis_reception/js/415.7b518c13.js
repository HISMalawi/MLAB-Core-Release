"use strict";(globalThis["webpackChunkIBLISReception"]=globalThis["webpackChunkIBLISReception"]||[]).push([[415],{80415:(e,l,t)=>{t.r(l),t.d(l,{default:()=>R});t(74423),t(44114),t(98992),t(54520),t(72577),t(81454);var a=t(20641),s=t(50953),u=t(90033),n=t(73235),i=t(75220),d=t(94355),c=t(27311),r=t(77270),o=t(1590),b=t(741),v=t(85901),p=t(72256),_=t(46079),m=t(82077);const k=(0,a.pM)({__name:"IdentifierResult",setup(e){const l=(0,b.Kj)(),t=(0,i.lq)(),{searchResult:k}=(0,d.A)(),f=(0,s.KR)(""),R=(0,s.KR)(""),y=(0,s.KR)([{label:"Order Id",value:"-"},{label:"Tracking Number",value:"-"},{label:"Accession Number",value:"-"},{label:"Patient Name",value:"-"},{label:"Specimen Type",value:"-"},{label:"Test(s) Ordered",value:"-"},{label:"Specimen Status",value:"-"}]),g=`${t.params.identifier||"Unknown ID"}`,h=(0,a.EW)((()=>!!Object.keys(k.value).length));function T(){(0,d.A)().searchbyID(g)}async function F(e){const t=await l.putJson(`order_statuses/${e}`,{order_id:y.value[0].value});null!==t&&void 0!==t&&t.ok&&((0,v.tP)(`Specimen ${e} successfully!`),_.A.push("/tests"))}function A(){(0,c.u0)([{id:"test_types",helpText:"Select test types",type:r.P.TT_MULTIPLE_SELECT,config:{showKeyboard:!0},computedValue:(e,l)=>{var t;return{order_id:(null===(t=k.value)||void 0===t?void 0:t.order_id)||0,tests:e.map((e=>({specimen:e.value,test_type:e.label})))}},options:async()=>{var e;const[t]=(null===(e=k.value)||void 0===e?void 0:e.tests)||[];if(!t)return[];const a=await l.getJson("specimen/test_types",{specimen_id:t.specimen_id});return null!==a&&void 0!==a&&a.ok?a.data.filter((e=>!k.value.tests.map((e=>e.test_type)).includes(e))).map((e=>({label:e,value:t.specimen_id}))):[]},validation:e=>o.A.required(e)}],(async(e,t)=>{const a=await l.postJson("orders/add_test_to_order",t.test_types);if(!a.ok)return(0,v._O)(a.error);p.OZ.getTop().then((e=>e&&p.OZ.dismiss())),T()}),null)}(0,a.wB)(k,(async e=>{if(Object.keys(e).length){const t=await l.getJson(`orders/${e.order_id}`);R.value=null===t||void 0===t?void 0:t.data.order_status,f.value=e.client_id;const[a]=e.tests;y.value=[{label:"Order Id",value:e.order_id},{label:"Tracking Number",value:e.tracking_number},{label:"Accession Number",value:e.accession_number},{label:"Patient Name",value:`${e.first_name} ${e.last_name}`},{label:"Specimen Type",value:a.specimen},{label:"Test(s) Ordered",value:e.tests.map((e=>e.test_type)).join(", ")}]}}),{deep:!0,immediate:!0});const W=()=>{const e=new m.A,{value:l="-"}=y.value.find((e=>"Accession Number"===e.label))||{};e.writeLbl("printout/accession_number",{accession_number:l},`${l}.lbl`)};return(0,a.sV)((()=>{h.value||T()})),(e,l)=>((0,a.uX)(),(0,a.Wv)((0,s.R1)(n.AO),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,s.R1)(n.eU),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,s.R1)(n.ai),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,s.R1)(n.BC),{class:"his-lg-text"},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,u.v_)(g))])),_:1})])),_:1})])),_:1}),(0,a.bF)((0,s.R1)(n.W9),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,s.R1)(n.nf),null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(y.value,((e,l)=>((0,a.uX)(),(0,a.Wv)((0,s.R1)(n.uz),{class:"his-md-text",key:l},{default:(0,a.k6)((()=>[(0,a.bF)((0,s.R1)(n.he),null,{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e.label),1)])),_:2},1024),(0,a.bF)((0,s.R1)(n.he),{slot:"end"},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,u.v_)(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.bF)((0,s.R1)(n.M0),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,s.R1)(n.ai),{color:"default",style:{padding:"5px"}},{default:(0,a.k6)((()=>[(0,a.bF)((0,s.R1)(n.Jm),{"router-link":"/home",size:"large"},{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)(" Cancel ")]))),_:1}),(0,a.bF)((0,s.R1)(n.Jm),{size:"large",slot:"end",onClick:W},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)(" Print Accession Number ")]))),_:1}),(0,a.bF)((0,s.R1)(n.Jm),{onClick:A,disabled:!h.value,slot:"end",size:"large"},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)(" Add test ")]))),_:1},8,["disabled"]),"specimen-accepted"!==R.value&&"specimen-rejected"!==R.value?((0,a.uX)(),(0,a.Wv)((0,s.R1)(n.Jm),{key:0,onClick:l[0]||(l[0]=e=>F("accepted")),disabled:!h.value,slot:"end",size:"large",color:"success"},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)(" Accept ")]))),_:1},8,["disabled"])):(0,a.Q3)("",!0),"specimen-accepted"!==R.value&&"specimen-rejected"!==R.value?((0,a.uX)(),(0,a.Wv)((0,s.R1)(n.Jm),{key:1,onClick:l[1]||(l[1]=e=>F("rejected")),disabled:!h.value,slot:"end",size:"large",color:"danger"},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)(" Reject ")]))),_:1},8,["disabled"])):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1}))}}),f=k,R=f}}]);
//# sourceMappingURL=415.7b518c13.js.map
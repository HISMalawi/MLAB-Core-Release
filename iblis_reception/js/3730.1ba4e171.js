"use strict";(globalThis["webpackChunkIBLISReception"]=globalThis["webpackChunkIBLISReception"]||[]).push([[3730],{2618:(e,t,l)=>{l.d(t,{rM:()=>w,ZP:()=>g,lo:()=>_});var n=l(2797),o=l(6252),a=l(3577);function i(e,t,l,n,i,r){const s=(0,o.up)("ion-title"),u=(0,o.up)("ion-toolbar"),d=(0,o.up)("ion-header"),c=(0,o.up)("ion-content"),p=(0,o.up)("ion-button"),m=(0,o.up)("ion-footer"),f=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"his-lg-text ion-text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.currentField.helpText),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,40,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Close ")])),_:1},8,["disabled","onClick"]),(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Clear ")])),_:1},8,["disabled","onClick"]),(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Done ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})}var r=l(6188),s=l(9652);function u(){const e={};return s.q.forEach((t=>{e[t]=(0,o.RC)((()=>l(7751)(`./${t}.vue`)))})),e}const d=(0,o.aZ)({name:"SingleFieldTouchForm",components:{IonPage:n._i,IonContent:n.W2,IonFooter:n.fr,IonToolbar:n.sr,IonButton:n.YG,IonHeader:n.Gu,IonTitle:n.wd,...u()},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),methods:{onClose(){"modal"===this.dismissType?n.Fy.dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e},onDone(){if(this.disableBtn=!0,this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return(0,r.L6)(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(e){(0,r.N$)(`${e}`),console.error(e)}this.onClose(),this.disableBtn=!1}}});var c=l(3744);const p=(0,c.Z)(d,[["render",i]]),m=p;var f=l(516),v=l(5289);async function w(e,t,l){(await n.Fy.create({component:f.Z,backdropDismiss:!1,cssClass:"full-modal",componentProps:{onFinish:t,fields:e,skipSummary:!0,disableAutoModalDismiss:!0,cancelAction:()=>{"function"===typeof l&&l(),n.Fy.dismiss()}}})).present()}async function _(e,t={}){const l="boolean"!==typeof(null===t||void 0===t?void 0:t.strictNumbers)||(null===t||void 0===t?void 0:t.strictNumbers),o=await n.Fy.create({component:v.Z,backdropDismiss:!1,cssClass:"keypad-modal custom-modal-backdrop",componentProps:{title:(null===t||void 0===t?void 0:t.title)||"",preset:(null===t||void 0===t?void 0:t.preset)||"",toggleButton:null===t||void 0===t?void 0:t.toggleButton,strictNumbers:l,customKeyboard:null===t||void 0===t?void 0:t.customKeyboard,noFloat:"boolean"===typeof(null===t||void 0===t?void 0:t.noFloat)&&t.noFloat,onKeyPress(t,n){e(l?parseInt(t):t,n)}}});o.present()}async function g(e,t){(await n.Fy.create({component:m,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}},6105:(e,t,l)=>{l.d(t,{r:()=>_});var n=l(6252),o=l(2262),a=l(3577),i=l(4542),r=l(2797),s=l(8903),u=l(6188);const d=(0,n._)("b",null,"Person Talked To: ",-1),c=(0,n._)("b",null,"Rejection Reason: ",-1),p=(0,n.aZ)({__name:"RejectDialog",props:{order:{required:!0,type:Object},show:{required:!0,default:!1,type:Boolean}},emits:["updated"],setup(e,{emit:t}){const l=e,p=(0,o.iH)(!0),m=(0,o.iH)(""),f=(0,o.iH)([]),v=(0,o.iH)(""),w=(0,i.KU)(),_=()=>{p.value=!1},g=async()=>{const e=await w.getJson("status_reasons");f.value=null===e||void 0===e?void 0:e.data},h=(0,n.Fl)((()=>m.value&&v.value)),y=async()=>{const e=f.value.filter((e=>e.description==v.value)),n=await w.putJson(`test_statuses/${l.order.id}/rejected?status_reason_id=${e[0].id}&person_talked_to=${m.value}`,{});(0,u.x9)("Test Rejected Successfully"),null!==n&&void 0!==n&&n.data&&(p.value=!1),t("updated",!0)};return(0,n.bv)((()=>{g()})),console.log(v.value),(t,l)=>((0,n.wg)(),(0,n.j4)((0,o.SU)(r._i),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.W2),{class:"ion-padding"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.ki),{"is-open":p.value},{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.Gu),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.sr),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.wd),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Reject Test")])),_:1}),(0,n.Wm)((0,o.SU)(r.Sm),{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.YG),{strong:!0,onClick:_},{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.gu),{size:"large",icon:(0,o.SU)(s.xvD)},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)((0,o.SU)(r.W2),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.q_),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.Ie),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.Q$),{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Test Type")])),_:1}),(0,n.Wm)((0,o.SU)(r.Q$),{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.order.test_type_name),1)])),_:1})])),_:1}),(0,n.Wm)((0,o.SU)(r.Ie),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.Q$),{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Specimen")])),_:1}),(0,n.Wm)((0,o.SU)(r.Q$),{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.order.specimen_type),1)])),_:1})])),_:1}),(0,n.Wm)((0,o.SU)(r.Ie),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.Q$),{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Accession Number")])),_:1}),(0,n.Wm)((0,o.SU)(r.Q$),{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.order.accession_number),1)])),_:1})])),_:1}),(0,n.Wm)((0,o.SU)(r.Ie),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.Q$),null,{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Wm)((0,o.SU)(r.pK),{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),required:"",placeholder:"Enter full name"},null,8,["modelValue"])])),_:1}),(0,n.Wm)((0,o.SU)(r.Ie),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.Q$),null,{default:(0,n.w5)((()=>[c])),_:1}),(0,n.Wm)((0,o.SU)(r.t9),{required:"",modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(f.value,(e=>((0,n.wg)(),(0,n.j4)((0,o.SU)(r.n0),{key:e.description,value:e.description},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.description),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)((0,o.SU)(r.fr),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.sr),{color:"light",style:{padding:"5px"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(r.YG),{slot:"start",size:"large",color:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cancel ")])),_:1}),(0,n.Wm)((0,o.SU)(r.YG),{slot:"end",disabled:!h.value,size:"large",color:"success",onClick:y},{default:(0,n.w5)((()=>[(0,n.Uk)(" Reject ")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1})])),_:1}))}}),m=p,f=m;var v=l(9963);let w;function _(e,t){const l=document.getElementById("rootContainer");w&&w.unmount(),w=(0,v.ri)(f,{show:e,order:t}),w.mount(l,!1)}},8047:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ee});l(7658);var n=l(6252),o=(l(4916),l(3577));const a=e=>((0,n.dD)("data-v-74206364"),e=e(),(0,n.Cn)(),e),i=a((()=>(0,n._)("div",{id:"rootContainer"},null,-1))),r={key:0},s={class:"his-sm-text"},u={class:"art-report-theme"},d={class:"stick-report-header"},c=["colspan","rowspan","onClick"],p={style:{"font-size":"19px"}},m=["onClick"],f={class:"his-sm-text"};function v(e,t,l,a,v,w){const _=(0,n.up)("ion-title"),g=(0,n.up)("ion-icon"),h=(0,n.up)("ion-button"),y=(0,n.up)("ion-label"),k=(0,n.up)("ion-chip"),b=(0,n.up)("ion-buttons"),W=(0,n.up)("ion-toolbar"),U=(0,n.up)("ion-header"),C=(0,n.up)("ion-item"),S=(0,n.up)("ion-content"),I=(0,n.up)("ion-footer"),T=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(T,null,{default:(0,n.w5)((()=>[i,(0,n.Wm)(U,null,{default:(0,n.w5)((()=>[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{class:"his-md-text"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.title)+" ",1),e.subtitle?((0,n.wg)(),(0,n.iD)("br",r)):(0,n.kq)("",!0),(0,n._)("span",s,(0,o.zw)(e.subtitle),1)])),_:1}),(0,n.Wm)(b,{slot:"end"},{default:(0,n.w5)((()=>["function"===typeof e.onConfigure?((0,n.wg)(),(0,n.j4)(h,{key:0,onClick:t[0]||(t[0]=()=>e.onConfigure&&e.onConfigure())},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{size:"large",icon:e.document},null,8,["icon"])])),_:1})):(0,n.kq)("",!0),e.searchTerm?((0,n.wg)(),(0,n.j4)(k,{key:1,onClick:t[1]||(t[1]=t=>e.searchTerm=""),class:"his-md-text",color:"warning"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.searchTerm),1)])),_:1}),(0,n.Wm)(g,{icon:e.close},null,8,["icon"])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(h,{onClick:e.searchTable,size:"large"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{size:"large",icon:e.search},null,8,["icon"])])),_:1},8,["onClick"]),"function"===typeof e.onRefresh?((0,n.wg)(),(0,n.j4)(h,{key:2,onClick:t[2]||(t[2]=()=>e.onRefresh&&e.onRefresh()),color:"success",size:"large"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{size:"large",icon:e.sync},null,8,["icon"])])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(S,{"scroll-y":"","scroll-x":""},{default:(0,n.w5)((()=>[(0,n._)("table",u,[(0,n._)("thead",d,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.columns,((t,l)=>((0,n.wg)(),(0,n.iD)("tr",{key:l},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t,((t,l)=>{var a,i;return(0,n.wg)(),(0,n.iD)("th",{key:l,colspan:(null===t||void 0===t||null===(a=t.span)||void 0===a?void 0:a.thColspan)||1,rowspan:(null===t||void 0===t||null===(i=t.span)||void 0===i?void 0:i.thRowspan)||1,onClick:l=>e.sortColumn(t.ref)},[(0,n.Wm)(C,{lines:"none"},{default:(0,n.w5)((()=>[e.columnSorted&&e.columnSorted===t.ref?((0,n.wg)(),(0,n.j4)(g,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):(0,n.kq)("",!0),(0,n.Wm)(y,{class:"ion-text-center uppercase"},{default:(0,n.w5)((()=>[(0,n._)("b",p,(0,o.zw)(t.label),1)])),_:2},1024)])),_:2},1024)],8,c)})),128))])))),128))]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.page,((t,l)=>((0,n.wg)(),(0,n.iD)("tr",{key:l},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.row,((l,a)=>{var i;return(0,n.wg)(),(0,n.iD)("td",{key:a,onClick:()=>e.onClickTablecell(t),class:(0,o.C_)({"clickable-cell":null===l||void 0===l||null===(i=l.column)||void 0===i?void 0:i.tdClick})},[(0,n._)("span",f,(0,o.zw)(0==a?e.moment(l.value).format("DD/MMMM/YYYY HH:mm"):l.value),1)],10,m)})),128))])))),128))])])])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)(W,{color:"light"},{default:(0,n.w5)((()=>[e.totalPages>1?((0,n.wg)(),(0,n.j4)(h,{key:0,onClick:e.first,disabled:0===e.currentPage||e.totalPages<=2,size:"large",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)(" First ")])),_:1},8,["onClick","disabled"])):(0,n.kq)("",!0),e.totalPages>1?((0,n.wg)(),(0,n.j4)(h,{key:1,onClick:e.prev,disabled:!e.canPrev,color:"light",size:"large",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Prev ")])),_:1},8,["onClick","disabled"])):(0,n.kq)("",!0),e.totalPages>1?((0,n.wg)(),(0,n.j4)(h,{key:2,onClick:e.selectPage,size:"large",slot:"end",color:"light"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.currentPage)+" / "+(0,o.zw)(e.totalPages-1),1)])),_:1},8,["onClick"])):(0,n.kq)("",!0),e.totalPages>1?((0,n.wg)(),(0,n.j4)(h,{key:3,onClick:e.next,disabled:!e.canNext,color:"light",size:"large",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Next ")])),_:1},8,["onClick","disabled"])):(0,n.kq)("",!0),e.totalPages>1?((0,n.wg)(),(0,n.j4)(h,{key:4,onClick:e.last,disabled:e.currentPage+1>=e.totalPages||e.totalPages<=2,size:"large",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Last ")])),_:1},8,["onClick","disabled"])):(0,n.kq)("",!0),(0,n.Wm)(h,{onClick:e.finish,color:"success",size:"large",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Finish ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}l(5827);var w=l(381),_=l.n(w),g=l(2797),h=l(8903),y=l(2262),k=l(2618),b=l(6486),W=function(e){return function(t,l,n){return e(t,l,n)*n}},U=function(e,t){if(e)throw Error("Invalid sort config: "+t)},C=function(e){var t=e||{},l=t.asc,n=t.desc,o=l?1:-1,a=l||n;U(!a,"Expected `asc` or `desc` property"),U(l&&n,"Ambiguous object with `asc` and `desc` config properties");var i=e.comparer&&W(e.comparer);return{order:o,sortBy:a,comparer:i}},S=function(e){return function t(l,n,o,a,i,r,s){var u,d;if("string"===typeof l)u=r[l],d=s[l];else{if("function"!==typeof l){var c=C(l);return t(c.sortBy,n,o,c.order,c.comparer||e,r,s)}u=l(r),d=l(s)}var p=i(u,d,a);return(0===p||null==u&&null==d)&&n.length>o?t(n[o],n,o+1,a,i,r,s):p}};function I(e,t,l){if(void 0===e||!0===e)return function(e,n){return t(e,n,l)};if("string"===typeof e)return U(e.includes("."),"String syntax not allowed for nested properties."),function(n,o){return t(n[e],o[e],l)};if("function"===typeof e)return function(n,o){return t(e(n),e(o),l)};if(Array.isArray(e)){var n=S(t);return function(o,a){return n(e[0],e,1,l,t,o,a)}}var o=C(e);return I(o.sortBy,o.comparer||t,o.order)}var T=function(e,t,l,n){var o;return Array.isArray(t)?(Array.isArray(l)&&l.length<2&&(o=l,l=o[0]),t.sort(I(l,n,e))):t};function F(e){var t=W(e.comparer);return function(l){var n=Array.isArray(l)&&!e.inPlaceSorting?l.slice():l;return{asc:function(e){return T(1,n,e,t)},desc:function(e){return T(-1,n,e,t)},by:function(e){return T(1,n,e,t)}}}}var z=function(e,t,l){return null==e?l:null==t?-l:typeof e!==typeof t?typeof e<typeof t?-1:1:e<t?-1:e>t?1:0},P=F({comparer:z}),D=(F({comparer:z,inPlaceSorting:!0}),l(9652)),x=l(4221),j=l(2201),q=l(9963);function $(e,t,l,a,i,r){const s=(0,n.up)("ion-title"),u=(0,n.up)("IonIcon"),d=(0,n.up)("ion-button"),c=(0,n.up)("ion-buttons"),p=(0,n.up)("ion-toolbar"),m=(0,n.up)("ion-header"),f=(0,n.up)("ion-label"),v=(0,n.up)("ion-item"),w=(0,n.up)("ion-list"),_=(0,n.up)("ion-content"),g=(0,n.up)("ion-footer"),h=(0,n.up)("ion-modal"),y=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{class:"ion-padding"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{"is-open":e.open},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(s,{style:{"font-size":"20px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Test Details")])),_:1}),(0,n.Wm)(c,{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{strong:!0,onClick:e.handleDialog},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"large",icon:e.close},null,8,["icon"])])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Tracking Number")])),_:1}),(0,n.Wm)(f,{slot:"end"},{default:(0,n.w5)((()=>{var t;return[(0,n.Uk)((0,o.zw)(null===(t=e.details)||void 0===t?void 0:t.tracking_number),1)]})),_:1})])),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Accession Number")])),_:1}),(0,n.Wm)(f,{slot:"end"},{default:(0,n.w5)((()=>{var t;return[(0,n.Uk)((0,o.zw)(null===(t=e.details)||void 0===t?void 0:t.accession_number),1)]})),_:1})])),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Patient Name")])),_:1}),(0,n.Wm)(f,{slot:"end"},{default:(0,n.w5)((()=>{var t,l,a,i;return[(0,n.Uk)((0,o.zw)(`${null===(t=e.details)||void 0===t?void 0:t.client.first_name} ${null!==(null===(l=e.details)||void 0===l?void 0:l.client.middle_name)?null===(a=e.details)||void 0===a?void 0:a.client.middle_name:""}\n                ${null===(i=e.details)||void 0===i?void 0:i.client.last_name}`),1)]})),_:1})])),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Specimen Type")])),_:1}),(0,n.Wm)(f,{slot:"end"},{default:(0,n.w5)((()=>{var t;return[(0,n.Uk)((0,o.zw)(null===(t=e.details)||void 0===t?void 0:t.specimen_type),1)]})),_:1})])),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Test(s) Ordered")])),_:1}),(0,n.Wm)(f,{slot:"end"},{default:(0,n.w5)((()=>{var t;return[(0,n.Uk)((0,o.zw)(null===(t=e.details)||void 0===t?void 0:t.test_type_name),1)]})),_:1})])),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Specimen Status")])),_:1}),(0,n.Wm)(f,{slot:"end"},{default:(0,n.w5)((()=>{var t,l;return[(0,n.Uk)((0,o.zw)("specimen-not-collected"==(null===(t=e.details)||void 0===t?void 0:t.order_status)?"Specimen not collected":null===(l=e.details)||void 0===l?void 0:l.order_status),1)]})),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{color:"light",style:{padding:"5px"}},{default:(0,n.w5)((()=>{var l,o,a,i,r;return[(0,n.Wm)(d,{slot:"end",size:"large",color:"primary",onClick:e.viewTestDetails},{default:(0,n.w5)((()=>[(0,n.Uk)(" View ")])),_:1},8,["onClick"]),"specimen-accepted"!==(null===(l=e.details)||void 0===l?void 0:l.order_status)&&"specimen-rejected"!==(null===(o=e.details)||void 0===o?void 0:o.order_status)?((0,n.wg)(),(0,n.j4)(d,{key:0,onClick:t[0]||(t[0]=t=>e.changeSpecimenStatus("accepted")),slot:"end",size:"large",color:"success"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Accept ")])),_:1})):(0,n.kq)("",!0),"specimen-accepted"!==(null===(a=e.details)||void 0===a?void 0:a.order_status)&&"specimen-rejected"!==(null===(i=e.details)||void 0===i?void 0:i.order_status)?((0,n.wg)(),(0,n.j4)(d,{key:1,onClick:e.rejectOrder,slot:"end",size:"large",color:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Reject ")])),_:1},8,["onClick"])):(0,n.kq)("",!0),"specimen-rejected"!==(null===(r=e.details)||void 0===r?void 0:r.order_status)?((0,n.wg)(),(0,n.j4)(d,{key:2,onClick:e.addTest,slot:"end",size:"large",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Add Test ")])),_:1},8,["onClick"])):(0,n.kq)("",!0)]})),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1})])),_:1})}var V=l(4542),B=l(3231),A=l(6188),R=l(7284),H=l(9013),Z=l(6105);const N=(0,n.aZ)({components:{IonButtons:g.Sm,IonButton:g.YG,IonIcon:g.gu,IonModal:g.ki,IonHeader:g.Gu,IonContent:g.W2,IonToolbar:g.sr,IonTitle:g.wd,IonFooter:g.fr,IonItem:g.Ie,IonLabel:g.Q$,IonList:g.q_,IonPage:g._i},data(){return{open:this.show,details:{client:{date_of_birth:"",first_name:"",id:"",last_name:"",middle_name:"",sex:""}},close:h.xvD,options:[{label:"Order Id",value:"-"},{label:"Tracking Number",value:"-"},{label:"Accession Number",value:"-"},{label:"Patient Name",value:"-"},{label:"Specimen Type",value:"-"},{label:"Test(s) Ordered",value:"-"},{label:"Specimen Status",value:"-"}]}},props:{test:{required:!0,type:Object},show:{required:!0,default:!1,type:Boolean}},async created(){const e=(0,V.KU)(),t=await e.getJson(`tests/${this.test.id}`);null!==t&&void 0!==t&&t.ok&&(this.details=null===t||void 0===t?void 0:t.data)},methods:{viewTestDetails(){this.handleDialog(),B.Z.push(`test/details?test_id=${this.test.id}`)},rejectOrder(){this.open=!1,console.log(this.open),0==this.open&&setTimeout((()=>{(0,Z.r)(!0,this.details)}),500)},handleDialog(){this.open=!1},async changeSpecimenStatus(e){const t=(0,V.KU)(),l=await t.putJson(`order_statuses/${e}`,{order_id:this.details.order_id});null!==l&&void 0!==l&&l.ok&&((0,A.x9)(`Specimen ${e} successfully!`),B.Z.go(0),this.handleDialog())},loadOrder(){(0,R.Z)().searchbyID(this.details.accession_number)},async addTest(){this.handleDialog();const e=(0,V.KU)();(0,k.rM)([{id:"test_types",helpText:"Select test types",type:D.f.TT_MULTIPLE_SELECT,config:{showKeyboard:!0},computedValue:(e,t)=>({order_id:this.details.order_id,tests:e.map((e=>({specimen:e.value,test_type:e.label})))}),options:async()=>{const t=await e.getJson("specimen/test_types",{specimen_id:this.details.specimen_id});return console.log(t),null!==t&&void 0!==t&&t.ok?t.data.map((e=>({label:e,value:this.details.specimen_id}))):[]},validation:e=>H.Z.required(e)}],(async(t,l)=>{console.log(l.test_types);const n=await e.postJson("orders/add_test_to_order",l.test_types);if(null===n||void 0===n||!n.ok)return(0,A.L6)(null===n||void 0===n?void 0:n.error);g.Fy.getTop().then((e=>e&&g.Fy.dismiss())),this.loadOrder()}),null)}}});var O=l(3744);const Y=(0,O.Z)(N,[["render",$]]),K=Y;function L(e,t){const l=document.getElementById("rootContainer"),n=(0,q.ri)(K,{show:e,test:t});n.mount(l,!1)}const E=(0,n.aZ)({components:{IonPage:g._i,IonToolbar:g.sr,IonItem:g.Ie,IonIcon:g.gu,IonLabel:g.Q$,IonTitle:g.wd,IonHeader:g.Gu,IonButton:g.YG,IonFooter:g.fr,IonContent:g.W2,IonButtons:g.Sm,IonChip:g.hM},props:{title:{type:String,default:"Report"},subtitle:{type:String},columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},enablePagination:{type:Boolean,default:!0},rowsPerPage:{type:Number,default:10},onFinish:{type:Function},onRefresh:{type:Function},onConfigure:{type:Function},csvQuarter:{type:String},searchValue:{type:String}},data(){return{moment:_()}},setup(e){const t=(0,j.tv)(),l=(0,y.iH)([]),o=(0,y.iH)(0),a=(0,y.iH)(""),i=(0,y.iH)(""),r=(0,y.iH)("desc"),s=(0,n.Fl)((()=>{const t=P(l.value)[r.value]((e=>e.data[i.value]));let n="";var o;""==a.value&&(n=""!==(null===(o=e.searchValue)||void 0===o?void 0:o.toString())?`${e.searchValue}`:"");if(n){const l=new x.Z(t,{threshold:.3,keys:["searchIndex"],useExtendedSearch:!0});return l.search(n,{limit:e.rowsPerPage}).map((e=>e.item))}return t})),u=(0,n.Fl)((()=>(0,b.chunk)(s.value,e.rowsPerPage).length)),d=(0,n.Fl)((()=>o.value+2<=u.value)),c=(0,n.Fl)((()=>o.value>0)),p=(0,n.Fl)((()=>{const t=(0,b.chunk)(s.value,e.rowsPerPage);return t[o.value]})),m=e=>{i.value=e,r.value="asc"===r.value?"desc":"asc"},f=()=>(0,k.lo)((e=>{const t=parseInt(e);parseInt(e)<=u.value&&(o.value=t)}),{title:"Select page"}),v=()=>{(0,k.ZP)({id:"search",helpText:"Find",type:D.f.TT_TEXT},(e=>{setTimeout((()=>{a.value=e?e.value:"",o.value=0}),3)}))},w=()=>o.value=0,_=()=>o.value=u.value-1||0,g=()=>o.value+=1,W=()=>o.value-=1,U=()=>{"function"===typeof e.onFinish?e.onFinish():t.push("/")},C=e=>{L(!0,e.data);try{var t,l;if("function"===typeof(null===(t=e.column)||void 0===t?void 0:t.tdClick))null===(l=e.column)||void 0===l||l.tdClick(e);return}catch(n){console.error(n)}},S=()=>e.columns.reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.value||e.ref)),I=e=>{e.forEach((e=>{const t=S().map((t=>{let l="";try{l=(0,b.isEmpty)(e)?"...":"function"===typeof t.value?t.value(e):e[t.ref]||""}catch(n){l="_ERROR_",console.error(n)}return{column:t,data:e,value:l,[t.ref||"nada"]:l}}));l.value.push({row:t,data:e,searchIndex:t.map((e=>`${e.value}`))})}))};return(0,n.YP)((()=>e.columnData),(t=>{if(l.value=[],!Array.isArray(t)||!t.length)return o.value=0,a.value="",i.value="",void I(Array.from({length:e.rowsPerPage}).map((()=>({}))));I(t)}),{immediate:!0,deep:!0}),{first:w,last:_,next:g,prev:W,selectPage:f,sortColumn:m,searchTable:v,onClickTablecell:C,finish:U,sync:h.Z_X,search:h.yC4,close:h.xvD,arrowUp:h.zJj,arrowDown:h.DIG,document:h.tjo,page:p,canNext:d,searchTerm:a,totalPages:u,sortOrder:r,canPrev:c,currentPage:o,columnSorted:i}}}),G=(0,O.Z)(E,[["render",v],["__scopeId","data-v-74206364"]]),Q=G,M=(0,n._)("div",{id:"rootContainer"},null,-1),J=(0,n.aZ)({__name:"TestsPage",setup(e){const t=[[{label:"Date ordered",ref:"created_date"},{label:"Patient No",value:e=>{var t;return(null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.id)||"-"}},{label:"Patient Name",value:e=>{var t,l;return`${null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.first_name} ${null===e||void 0===e||null===(l=e.client)||void 0===l?void 0:l.last_name}`}},{label:"Accession No",ref:"accession_number"},{label:"Test type",ref:"test_type_name"},{label:"Test Location",ref:"requesting_ward"},{label:"Test status",ref:"status"}]],l=(0,y.iH)([]),o=(0,V.KU)(),a=(0,y.iH)(`${void 0!==B.Z.currentRoute.value.query.patient_id?B.Z.currentRoute.value.query.patient_id:""}`);function i(){B.Z.push("/")}function r(){o.getJson("tests").then((e=>{if(!e.ok)return(0,A.L6)(e.error);l.value=e.data.data.reverse()}))}return(0,n.bv)((()=>r())),(e,o)=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(Q,{searchValue:a.value,title:"All Tests",columns:t,columnData:l.value,finish:i,onRefresh:r},null,8,["searchValue","columnData"]),M]))}}),X=J,ee=X}}]);
//# sourceMappingURL=3730.1ba4e171.js.map
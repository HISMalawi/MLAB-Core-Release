"use strict";(globalThis["webpackChunkIBLISReception"]=globalThis["webpackChunkIBLISReception"]||[]).push([[989],{7045:(e,t,n)=>{var l=n(6339),o=n(3070);e.exports=function(e,t,n){return n.get&&l(n.get,t,{getter:!0}),n.set&&l(n.set,t,{setter:!0}),o.f(e,t,n)}},8053:e=>{var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},6229:(e,t,n)=>{var l=n(8052),o=n(1702),a=n(1340),i=n(8053),s=URLSearchParams,r=s.prototype,d=o(r.append),u=o(r["delete"]),c=o(r.forEach),p=o([].push),m=new s("a=1&a=2&b=3");m["delete"]("a",1),m["delete"]("b",void 0),m+""!=="a=2"&&l(r,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var l=[];c(this,(function(e,t){p(l,{key:t,value:e})})),i(t,1);var o,s=a(e),r=a(n),m=0,f=0,_=!1,v=l.length;while(m<v)o=l[m++],_||o.key===s?(_=!0,u(this,o.key)):f++;while(f<v)o=l[f++],o.key===s&&o.value===r||d(this,o.key,o.value)}),{enumerable:!0,unsafe:!0})},7330:(e,t,n)=>{var l=n(8052),o=n(1702),a=n(1340),i=n(8053),s=URLSearchParams,r=s.prototype,d=o(r.getAll),u=o(r.has),c=new s("a=1");!c.has("a",2)&&c.has("a",void 0)||l(r,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var l=d(this,e);i(t,1);var o=a(n),s=0;while(s<l.length)if(l[s++]===o)return!0;return!1}),{enumerable:!0,unsafe:!0})},2062:(e,t,n)=>{var l=n(9781),o=n(1702),a=n(7045),i=URLSearchParams.prototype,s=o(i.forEach);l&&!("size"in i)&&a(i,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})},9834:(e,t,n)=>{n.d(t,{Z:()=>a});n(6229),n(7330),n(2062);var l=n(4542),o=n(6188);class a{async writeLbl(e,t,n=`${Date.now()}.lbl`){const a=(0,l.KU)();try{const l=await a.getText(e,t),i=new Blob([null===l||void 0===l?void 0:l.data],{type:"text/plain"});e=URL.createObjectURL(i);const s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download",n),s.click(),URL.revokeObjectURL(e),(0,o.x9)("Accession number printed!")}catch(i){console.error(i)}}}},8688:(e,t,n)=>{n.d(t,{C:()=>l});n(5827);function l(e,t){const n=Object.values(Object.values(e)),l=n.filter((e=>!!e[t])).reduce(((e,n)=>(Array.isArray(n[t])?e[t]=n[t]:e[t]={...e[t],...n[t]},e)),{});return l}},2618:(e,t,n)=>{n.d(t,{rM:()=>v,ZP:()=>y,lo:()=>w});var l=n(2797),o=n(6252),a=n(3577);function i(e,t,n,l,i,s){const r=(0,o.up)("ion-title"),d=(0,o.up)("ion-toolbar"),u=(0,o.up)("ion-header"),c=(0,o.up)("ion-content"),p=(0,o.up)("ion-button"),m=(0,o.up)("ion-footer"),f=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"his-lg-text ion-text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.currentField.helpText),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,40,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Close ")])),_:1},8,["disabled","onClick"]),(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Clear ")])),_:1},8,["disabled","onClick"]),(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Done ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})}var s=n(6188),r=n(9652);function d(){const e={};return r.q.forEach((t=>{e[t]=(0,o.RC)((()=>n(7751)(`./${t}.vue`)))})),e}const u=(0,o.aZ)({name:"SingleFieldTouchForm",components:{IonPage:l._i,IonContent:l.W2,IonFooter:l.fr,IonToolbar:l.sr,IonButton:l.YG,IonHeader:l.Gu,IonTitle:l.wd,...d()},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),methods:{onClose(){"modal"===this.dismissType?l.Fy.dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e},onDone(){if(this.disableBtn=!0,this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return(0,s.L6)(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(e){(0,s.N$)(`${e}`),console.error(e)}this.onClose(),this.disableBtn=!1}}});var c=n(3744);const p=(0,c.Z)(u,[["render",i]]),m=p;var f=n(516),_=n(5289);async function v(e,t,n){(await l.Fy.create({component:f.Z,backdropDismiss:!1,cssClass:"full-modal",componentProps:{onFinish:t,fields:e,skipSummary:!0,disableAutoModalDismiss:!0,cancelAction:()=>{"function"===typeof n&&n(),l.Fy.dismiss()}}})).present()}async function w(e,t={}){const n="boolean"!==typeof(null===t||void 0===t?void 0:t.strictNumbers)||(null===t||void 0===t?void 0:t.strictNumbers),o=await l.Fy.create({component:_.Z,backdropDismiss:!1,cssClass:"keypad-modal custom-modal-backdrop",componentProps:{title:(null===t||void 0===t?void 0:t.title)||"",preset:(null===t||void 0===t?void 0:t.preset)||"",toggleButton:null===t||void 0===t?void 0:t.toggleButton,strictNumbers:n,customKeyboard:null===t||void 0===t?void 0:t.customKeyboard,noFloat:"boolean"===typeof(null===t||void 0===t?void 0:t.noFloat)&&t.noFloat,onKeyPress(t,l){e(n?parseInt(t):t,l)}}});o.present()}async function y(e,t){(await l.Fy.create({component:m,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}},6105:(e,t,n)=>{n.d(t,{r:()=>w});var l=n(6252),o=n(2262),a=n(3577),i=n(4542),s=n(2797),r=n(8903),d=n(6188);const u=(0,l._)("b",null,"Person Talked To: ",-1),c=(0,l._)("b",null,"Rejection Reason: ",-1),p=(0,l.aZ)({__name:"RejectDialog",props:{order:{required:!0,type:Object},show:{required:!0,default:!1,type:Boolean}},emits:["updated"],setup(e,{emit:t}){const n=e,p=(0,o.iH)(!0),m=(0,o.iH)(""),f=(0,o.iH)([]),_=(0,o.iH)(""),v=(0,i.KU)(),w=()=>{p.value=!1},y=async()=>{const e=await v.getJson("status_reasons");f.value=null===e||void 0===e?void 0:e.data},h=(0,l.Fl)((()=>m.value&&_.value)),g=async()=>{const e=f.value.filter((e=>e.description==_.value)),l=await v.putJson(`test_statuses/${n.order.id}/rejected?status_reason_id=${e[0].id}&person_talked_to=${m.value}`,{});(0,d.x9)("Test Rejected Successfully"),null!==l&&void 0!==l&&l.data&&(p.value=!1),t("updated",!0)};return(0,l.bv)((()=>{y()})),console.log(_.value),(t,n)=>((0,l.wg)(),(0,l.j4)((0,o.SU)(s._i),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.W2),{class:"ion-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.ki),{"is-open":p.value},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.Gu),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.sr),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.wd),{style:{"font-size":"20px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Reject Test")])),_:1}),(0,l.Wm)((0,o.SU)(s.Sm),{slot:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.YG),{strong:!0,onClick:w},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.gu),{size:"large",icon:(0,o.SU)(r.xvD)},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)((0,o.SU)(s.W2),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.q_),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.Ie),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.Q$),{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Test Type")])),_:1}),(0,l.Wm)((0,o.SU)(s.Q$),{slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.order.test_type_name),1)])),_:1})])),_:1}),(0,l.Wm)((0,o.SU)(s.Ie),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.Q$),{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Specimen")])),_:1}),(0,l.Wm)((0,o.SU)(s.Q$),{slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.order.specimen_type),1)])),_:1})])),_:1}),(0,l.Wm)((0,o.SU)(s.Ie),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.Q$),{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Accession Number")])),_:1}),(0,l.Wm)((0,o.SU)(s.Q$),{slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.order.accession_number),1)])),_:1})])),_:1}),(0,l.Wm)((0,o.SU)(s.Ie),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.Q$),null,{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)((0,o.SU)(s.pK),{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=e=>m.value=e),required:"",placeholder:"Enter full name"},null,8,["modelValue"])])),_:1}),(0,l.Wm)((0,o.SU)(s.Ie),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.Q$),null,{default:(0,l.w5)((()=>[c])),_:1}),(0,l.Wm)((0,o.SU)(s.t9),{required:"",modelValue:_.value,"onUpdate:modelValue":n[1]||(n[1]=e=>_.value=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.value,(e=>((0,l.wg)(),(0,l.j4)((0,o.SU)(s.n0),{key:e.description,value:e.description},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.description),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,l.Wm)((0,o.SU)(s.fr),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.sr),{color:"light",style:{padding:"5px"}},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(s.YG),{slot:"start",size:"large",color:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancel ")])),_:1}),(0,l.Wm)((0,o.SU)(s.YG),{slot:"end",disabled:!h.value,size:"large",color:"success",onClick:g},{default:(0,l.w5)((()=>[(0,l.Uk)(" Reject ")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1})])),_:1}))}}),m=p,f=m;var _=n(9963);let v;function w(e,t){const n=document.getElementById("rootContainer");v&&v.unmount(),v=(0,_.ri)(f,{show:e,order:t}),v.mount(n,!1)}},3588:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});n(7658);var l=n(6252),o=n(9013),a=n(516),i=n(9652),s=n(4542),r=n(8688),d=n(2201),u=n(6188),c=n(9834),p=n(2262),m=n(3577);function f(e,t,n,o,a,i){const s=(0,l.up)("ion-title"),r=(0,l.up)("IonIcon"),d=(0,l.up)("ion-button"),u=(0,l.up)("ion-buttons"),c=(0,l.up)("ion-toolbar"),p=(0,l.up)("ion-header"),f=(0,l.up)("ion-label"),_=(0,l.up)("ion-item"),v=(0,l.up)("ion-list"),w=(0,l.up)("ion-content"),y=(0,l.up)("ion-footer"),h=(0,l.up)("ion-modal"),g=(0,l.up)("ion-page");return(0,l.wg)(),(0,l.j4)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"ion-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{"is-open":e.open},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{style:{"font-size":"20px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Patient order")])),_:1}),(0,l.Wm)(u,{slot:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{strong:!0,onClick:t[0]||(t[0]=t=>e.handleDialog())},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{size:"large",icon:e.close},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Tracking Number")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,m.zw)(null===(t=e.order)||void 0===t?void 0:t.tracking_number),1)]})),_:1})])),_:1}),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Accession Number")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,m.zw)(null===(t=e.order)||void 0===t?void 0:t.accession_number),1)]})),_:1})])),_:1}),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Patient Name")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t,n,o,a;return[(0,l.Uk)((0,m.zw)(`${null===(t=e.order)||void 0===t?void 0:t.client.first_name} ${null!=(null===(n=e.order)||void 0===n?void 0:n.client.middle_name)?null===(o=e.order)||void 0===o?void 0:o.client.middle_name:""} ${null===(a=e.order)||void 0===a?void 0:a.client.last_name}`),1)]})),_:1})])),_:1}),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Specimen Type")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,m.zw)(null===(t=e.order)||void 0===t?void 0:t.specimen),1)]})),_:1})])),_:1}),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Test(s) Ordered")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,m.zw)(e.extractedTests(null===(t=e.order)||void 0===t?void 0:t.tests)),1)]})),_:1})])),_:1}),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Specimen Status")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t,n;return[(0,l.Uk)((0,m.zw)("specimen-not-collected"==(null===(t=e.order)||void 0===t?void 0:t.order_status)?"Specimen not collected":null===(n=e.order)||void 0===n?void 0:n.order_status),1)]})),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{color:"light",style:{padding:"5px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{onClick:t[1]||(t[1]=t=>e.changeSpecimenStatus("accepted")),slot:"end",size:"large",color:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Accept ")])),_:1}),(0,l.Wm)(d,{onClick:e.rejectOrder,slot:"end",size:"large",color:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Reject ")])),_:1},8,["onClick"]),(0,l.Wm)(d,{onClick:e.addTest,slot:"end",size:"large",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Add Test ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1})])),_:1})}var _=n(3231),v=n(2618),w=n(2797),y=n(8903),h=n(7284),g=n(6105);const b=(0,l.aZ)({components:{IonPage:w._i,IonButtons:w.Sm,IonButton:w.YG,IonIcon:w.gu,IonModal:w.ki,IonHeader:w.Gu,IonContent:w.W2,IonToolbar:w.sr,IonTitle:w.wd,IonFooter:w.fr,IonItem:w.Ie,IonLabel:w.Q$,IonList:w.q_},data(){return{open:!0,close:y.xvD,details:{client:{date_of_birth:"",first_name:"",id:"",last_name:"",middle_name:"",sex:""}}}},props:{order:{required:!0,type:Object},show:{required:!0,default:!1,type:Boolean}},async created(){const e=(0,s.KU)(),t=await e.getJson(`tests/${this.order.tests[0].id}`);null!==t&&void 0!==t&&t.ok&&(this.details=null===t||void 0===t?void 0:t.data)},methods:{extractedTests(e){return e.map((e=>e.test_type_name)).join(", ")},handleDialog(){this.open=!1},async changeSpecimenStatus(e){const t=(0,s.KU)(),n=await t.putJson(`order_statuses/${e}`,{order_id:this.details.id});null!==n&&void 0!==n&&n.ok&&((0,u.x9)(`Specimen ${e} successfully!`),this.open=!1,_.Z.push(`/test/details?test_id=${this.details.id}`))},async rejectOrder(){this.open=!1,setTimeout((()=>{(0,g.r)(!0,this.details)}),500)},loadOrder(){(0,h.Z)().searchbyID(this.details.accession_number)},async addTest(){this.handleDialog();const e=(0,s.KU)();(0,v.rM)([{id:"test_types",helpText:"Select test types",type:i.f.TT_MULTIPLE_SELECT,config:{showKeyboard:!0},computedValue:(e,t)=>({order_id:this.details.order_id,tests:e.map((e=>({specimen:e.value,test_type:e.label})))}),options:async()=>{const t=await e.getJson("specimen/test_types",{specimen_id:this.details.specimen_id});return console.log(t),null!==t&&void 0!==t&&t.ok?t.data.map((e=>({label:e,value:this.details.specimen_id}))):[]},validation:e=>o.Z.required(e)}],(async(t,n)=>{const l=await e.postJson("orders/add_test_to_order",n.test_types);if(null===l||void 0===l||!l.ok)return(0,u.L6)(null===l||void 0===l?void 0:l.error);w.Fy.getTop().then((e=>e&&w.Fy.dismiss())),this.loadOrder()}),null)}}});var U=n(3744);const k=(0,U.Z)(b,[["render",f]]),W=k;var T=n(9963);let S;function C(e,t){const n=document.getElementById("rootContainer");S&&S.unmount(),S=(0,T.ri)(W,{show:e,order:t}),S.mount(n,!1)}const I=(0,l._)("div",{id:"rootContainer"},null,-1),F=(0,l.aZ)({__name:"NewOrder",setup(e){const t=(0,p.iH)(),n=(0,p.iH)(!1),m=()=>{n.value=!0,C(n.value,t.value)},f=(0,d.yj)(),v=(0,s.KU)(),w=()=>{const e=[];return{id:"visit_type",helpText:"Visit type",type:i.f.TT_SELECT,validation:e=>o.Z.required(e),computedValue:e=>({encounter:{encounter_type:e.value}}),init:async()=>{var t;const n=await v.getJson("encounter_types");return!(null===n||void 0===n||!n.ok)&&(null===(t=n.data)||void 0===t||t.data.forEach((t=>{e.push({label:t.name,value:t.id})})),!0)},options:()=>e}},y=()=>({id:"clinician",helpText:"Requesting Clinician",type:i.f.TT_TEXT,computedValue:e=>({order:{requested_by:e.value}}),validation:e=>o.Z.required(e)}),h=()=>({id:"collector",helpText:"Sample collected by (Optional)",type:i.f.TT_TEXT,computedValue:e=>({order:{collected_by:(null===e||void 0===e?void 0:e.value)||""}})}),g=()=>{let e=null;return{id:"ward",helpText:"Requesting ward/location",type:i.f.TT_SELECT,init:async()=>{const t=await v.getJson("global");return t.ok&&(e=t.data.id),!0},computedValue:t=>({encounter:{facility_section:t.value,sending_facility:e||-1}}),validation:e=>o.Z.required(e),options:async e=>{const t=await v.getJson("encounter_type_facility_section_mappings/facility_sections",{encounter_type_id:e.visit_type.value});return(t.data||[]).map((e=>({label:e.name,value:e.id})))}}},b=()=>({id:"date",helpText:"Date",type:i.f.TT_DATE_PICKER,validation:e=>o.Z.required(e)}),U=()=>{let e=[];return{id:"specimen_type",helpText:"Specimen type",type:i.f.TT_SELECT,init:async()=>{const t=await v.getJson("specimen");return!(null===t||void 0===t||!t.ok)&&(e=t.data.map((e=>({label:e.name,value:e.id}))),!0)},options:()=>e,validation:e=>o.Z.required(e)}},k=()=>{let e=[];return{id:"priority",helpText:"Specify priority",type:i.f.TT_SELECT,computedValue:e=>({order:{priority:e.value}}),validation:e=>o.Z.required(e),init:async()=>{const t=await v.getJson("priorities");return!(null===t||void 0===t||!t.ok)&&(e=t.data.map((e=>({label:e.name,value:e.id}))),!0)},options:()=>e}},W=()=>{let e=[],t=null;return{id:"test_types",helpText:"Select test types",type:i.f.TT_MULTIPLE_SELECT,config:{showKeyboard:!0},computedValue:(e,t)=>({tests:e.map((e=>({specimen:t.specimen_type.value,test_type:e.value})))}),options:async n=>{if(n.specimen_type.value!=t){e=[],t=n.specimen_type.value;const l=await v.getJson("specimen/test_types",{specimen_id:t});if(null===l||void 0===l||!l.ok)return[];e=l.data.map((e=>({label:e,value:e})))}return e},validation:e=>o.Z.required(e)}},T=()=>({id:"time_sample_collected",helpText:"Time Sample Collected",type:i.f.TT_TIME,computedValue:(e,t)=>({order:{sample_collected_time:`${t.date} ${e.value}`}}),validation:e=>o.Z.required(e)}),S=[w(),g(),y(),h(),U(),W(),b(),T(),k()],F=async(e,l)=>{const o=new c.Z,a={client:{id:parseInt(`${f.params.client_id}`)},...(0,r.C)(l,"encounter"),...(0,r.C)(l,"order"),...(0,r.C)(l,"tests")};v.postJson("orders",a).then((e=>{t.value=e.data;const l=e.data.accession_number;if(!e.ok)return(0,u.L6)(e.error);o.writeLbl("printout/accession_number",{accession_number:l},`${l}.lbl`),n.value=!0;try{_.Z.push("/tests")}catch(a){console.log(a)}(0,u.x9)("Order as been created!"),m()})).catch((()=>(0,u.N$)(s.XF.GENERAL_ERROR)))};return(e,t)=>((0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(a.Z,{fields:S,onFinish:F,skipSummary:!0,cancelDestinationPath:"/home"}),I]))}}),x=F,z=x}}]);
//# sourceMappingURL=989.305c4ccf.js.map
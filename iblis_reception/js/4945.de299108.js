"use strict";(globalThis["webpackChunkIBLISReception"]=globalThis["webpackChunkIBLISReception"]||[]).push([[4945],{2618:(e,t,n)=>{n.d(t,{rM:()=>g,ZP:()=>h,lo:()=>w});var l=n(9126),o=n(6252),a=n(3577);function i(e,t,n,l,i,r){const s=(0,o.up)("ion-title"),u=(0,o.up)("ion-toolbar"),d=(0,o.up)("ion-header"),c=(0,o.up)("ion-content"),p=(0,o.up)("ion-button"),m=(0,o.up)("ion-footer"),f=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"his-lg-text ion-text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.currentField.helpText),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,40,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{color:"light"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Close ")])),_:1},8,["disabled","onClick"]),(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Clear ")])),_:1},8,["disabled","onClick"]),(0,o.Wm)(p,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Done ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})}var r=n(6188),s=n(9652);function u(){const e={};return s.q.forEach((t=>{e[t]=(0,o.RC)((()=>n(7751)(`./${t}.vue`)))})),e}const d=(0,o.aZ)({name:"SingleFieldTouchForm",components:{IonPage:l._i,IonContent:l.W2,IonFooter:l.fr,IonToolbar:l.sr,IonButton:l.YG,IonHeader:l.Gu,IonTitle:l.wd,...u()},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),methods:{onClose(){"modal"===this.dismissType?l.Fy.dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e},onDone(){if(this.disableBtn=!0,this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return(0,r.L6)(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(e){(0,r.N$)(`${e}`),console.error(e)}this.onClose(),this.disableBtn=!1}}});var c=n(3744);const p=(0,c.Z)(d,[["render",i]]),m=p;var f=n(516),v=n(5289);async function g(e,t,n){(await l.Fy.create({component:f.Z,backdropDismiss:!1,cssClass:"full-modal",componentProps:{onFinish:t,fields:e,skipSummary:!0,disableAutoModalDismiss:!0,cancelAction:()=>{"function"===typeof n&&n(),l.Fy.dismiss()}}})).present()}async function w(e,t={}){const n="boolean"!==typeof(null===t||void 0===t?void 0:t.strictNumbers)||(null===t||void 0===t?void 0:t.strictNumbers),o=await l.Fy.create({component:v.Z,backdropDismiss:!1,cssClass:"keypad-modal custom-modal-backdrop",componentProps:{title:(null===t||void 0===t?void 0:t.title)||"",preset:(null===t||void 0===t?void 0:t.preset)||"",toggleButton:null===t||void 0===t?void 0:t.toggleButton,strictNumbers:n,customKeyboard:null===t||void 0===t?void 0:t.customKeyboard,noFloat:"boolean"===typeof(null===t||void 0===t?void 0:t.noFloat)&&t.noFloat,onKeyPress(t,l){e(n?parseInt(t):t,l)}}});o.present()}async function h(e,t){(await l.Fy.create({component:m,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}},1350:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q});n(560);var l=n(6252),o=(n(4043),n(3577));const a=e=>((0,l.dD)("data-v-63d359d3"),e=e(),(0,l.Cn)(),e),i=a((()=>(0,l._)("div",{id:"rootContainer"},null,-1))),r={key:0},s={class:"his-sm-text"},u={class:"art-report-theme"},d={class:"stick-report-header"},c=["colspan","rowspan","onClick"],p=["onClick"],m={class:"his-sm-text"};function f(e,t,n,a,f,v){const g=(0,l.up)("ion-title"),w=(0,l.up)("ion-icon"),h=(0,l.up)("ion-button"),_=(0,l.up)("ion-label"),y=(0,l.up)("ion-chip"),k=(0,l.up)("ion-buttons"),b=(0,l.up)("ion-toolbar"),C=(0,l.up)("ion-header"),W=(0,l.up)("ion-item"),I=(0,l.up)("ion-content"),F=(0,l.up)("ion-footer"),T=(0,l.up)("ion-page");return(0,l.wg)(),(0,l.j4)(T,null,{default:(0,l.w5)((()=>[i,(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"his-md-text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.title)+" ",1),e.subtitle?((0,l.wg)(),(0,l.iD)("br",r)):(0,l.kq)("",!0),(0,l._)("span",s,(0,o.zw)(e.subtitle),1)])),_:1}),(0,l.Wm)(k,{slot:"end"},{default:(0,l.w5)((()=>["function"===typeof e.onConfigure?((0,l.wg)(),(0,l.j4)(h,{key:0,onClick:t[0]||(t[0]=()=>e.onConfigure&&e.onConfigure())},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{size:"large",icon:e.document},null,8,["icon"])])),_:1})):(0,l.kq)("",!0),e.searchTerm?((0,l.wg)(),(0,l.j4)(y,{key:1,onClick:t[1]||(t[1]=t=>e.searchTerm=""),class:"his-md-text",color:"warning"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.searchTerm),1)])),_:1}),(0,l.Wm)(w,{icon:e.close},null,8,["icon"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(h,{onClick:e.searchTable,size:"large"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{size:"large",icon:e.search},null,8,["icon"])])),_:1},8,["onClick"]),"function"===typeof e.onRefresh?((0,l.wg)(),(0,l.j4)(h,{key:2,onClick:t[2]||(t[2]=()=>e.onRefresh&&e.onRefresh()),color:"success",size:"large"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{size:"large",icon:e.sync},null,8,["icon"])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(I,{"scroll-y":"","scroll-x":""},{default:(0,l.w5)((()=>[(0,l._)("table",u,[(0,l._)("thead",d,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columns,((t,n)=>((0,l.wg)(),(0,l.iD)("tr",{key:n},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t,((t,n)=>{var a,i;return(0,l.wg)(),(0,l.iD)("th",{key:n,colspan:(null===t||void 0===t||null===(a=t.span)||void 0===a?void 0:a.thColspan)||1,rowspan:(null===t||void 0===t||null===(i=t.span)||void 0===i?void 0:i.thRowspan)||1,onClick:n=>e.sortColumn(t.ref)},[(0,l.Wm)(W,{lines:"none"},{default:(0,l.w5)((()=>[e.columnSorted&&e.columnSorted===t.ref?((0,l.wg)(),(0,l.j4)(w,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):(0,l.kq)("",!0),(0,l.Wm)(_,{class:"ion-text-center"},{default:(0,l.w5)((()=>[(0,l._)("b",null,(0,o.zw)(t.label),1)])),_:2},1024)])),_:2},1024)],8,c)})),128))])))),128))]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.page,((t,n)=>((0,l.wg)(),(0,l.iD)("tr",{key:n},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.row,((n,a)=>{var i;return(0,l.wg)(),(0,l.iD)("td",{key:a,onClick:()=>e.onClickTablecell(t),class:(0,o.C_)({"clickable-cell":null===n||void 0===n||null===(i=n.column)||void 0===i?void 0:i.tdClick})},[(0,l._)("span",m,(0,o.zw)(0==a?e.moment(n.value).format("DD/MMMM/YYYY HH:mm"):n.value),1)],10,p)})),128))])))),128))])])])),_:1}),(0,l.Wm)(F,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{color:"light"},{default:(0,l.w5)((()=>[e.totalPages>1?((0,l.wg)(),(0,l.j4)(h,{key:0,onClick:e.first,disabled:0===e.currentPage||e.totalPages<=2,size:"large",slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)(" First ")])),_:1},8,["onClick","disabled"])):(0,l.kq)("",!0),e.totalPages>1?((0,l.wg)(),(0,l.j4)(h,{key:1,onClick:e.prev,disabled:!e.canPrev,color:"light",size:"large",slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Prev ")])),_:1},8,["onClick","disabled"])):(0,l.kq)("",!0),e.totalPages>1?((0,l.wg)(),(0,l.j4)(h,{key:2,onClick:e.selectPage,size:"large",slot:"end",color:"light"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.currentPage)+" / "+(0,o.zw)(e.totalPages-1),1)])),_:1},8,["onClick"])):(0,l.kq)("",!0),e.totalPages>1?((0,l.wg)(),(0,l.j4)(h,{key:3,onClick:e.next,disabled:!e.canNext,color:"light",size:"large",slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Next ")])),_:1},8,["onClick","disabled"])):(0,l.kq)("",!0),e.totalPages>1?((0,l.wg)(),(0,l.j4)(h,{key:4,onClick:e.last,disabled:e.currentPage+1>=e.totalPages||e.totalPages<=2,size:"large",slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Last ")])),_:1},8,["onClick","disabled"])):(0,l.kq)("",!0),(0,l.Wm)(h,{onClick:e.finish,color:"success",size:"large",slot:"end"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Finish ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}n(278);var v=n(381),g=n.n(v),w=n(9126),h=n(8903),_=n(2262),y=n(2618),k=n(6486),b=function(e){return function(t,n,l){return e(t,n,l)*l}},C=function(e,t){if(e)throw Error("Invalid sort config: "+t)},W=function(e){var t=e||{},n=t.asc,l=t.desc,o=n?1:-1,a=n||l;C(!a,"Expected `asc` or `desc` property"),C(n&&l,"Ambiguous object with `asc` and `desc` config properties");var i=e.comparer&&b(e.comparer);return{order:o,sortBy:a,comparer:i}},I=function(e){return function t(n,l,o,a,i,r,s){var u,d;if("string"===typeof n)u=r[n],d=s[n];else{if("function"!==typeof n){var c=W(n);return t(c.sortBy,l,o,c.order,c.comparer||e,r,s)}u=n(r),d=n(s)}var p=i(u,d,a);return(0===p||null==u&&null==d)&&l.length>o?t(l[o],l,o+1,a,i,r,s):p}};function F(e,t,n){if(void 0===e||!0===e)return function(e,l){return t(e,l,n)};if("string"===typeof e)return C(e.includes("."),"String syntax not allowed for nested properties."),function(l,o){return t(l[e],o[e],n)};if("function"===typeof e)return function(l,o){return t(e(l),e(o),n)};if(Array.isArray(e)){var l=I(t);return function(o,a){return l(e[0],e,1,n,t,o,a)}}var o=W(e);return F(o.sortBy,o.comparer||t,o.order)}var T=function(e,t,n,l){var o;return Array.isArray(t)?(Array.isArray(n)&&n.length<2&&(o=n,n=o[0]),t.sort(F(n,l,e))):t};function P(e){var t=b(e.comparer);return function(n){var l=Array.isArray(n)&&!e.inPlaceSorting?n.slice():n;return{asc:function(e){return T(1,l,e,t)},desc:function(e){return T(-1,l,e,t)},by:function(e){return T(1,l,e,t)}}}}var D=function(e,t,n){return null==e?n:null==t?-n:typeof e!==typeof t?typeof e<typeof t?-1:1:e<t?-1:e>t?1:0},z=P({comparer:D}),U=(P({comparer:D,inPlaceSorting:!0}),n(9652)),S=n(4221),x=n(2201),j=n(9963);function q(e,t,n,a,i,r){const s=(0,l.up)("ion-title"),u=(0,l.up)("IonIcon"),d=(0,l.up)("ion-button"),c=(0,l.up)("ion-buttons"),p=(0,l.up)("ion-toolbar"),m=(0,l.up)("ion-header"),f=(0,l.up)("ion-label"),v=(0,l.up)("ion-item"),g=(0,l.up)("ion-list"),w=(0,l.up)("ion-content"),h=(0,l.up)("ion-footer"),_=(0,l.up)("ion-modal"),y=(0,l.up)("ion-page");return(0,l.wg)(),(0,l.j4)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"ion-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{"is-open":e.open},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{style:{"font-size":"20px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Test Details")])),_:1}),(0,l.Wm)(c,{slot:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{strong:!0,onClick:t[0]||(t[0]=t=>e.handleDialog())},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{size:"large",icon:e.close},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Tracking Number")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,o.zw)(null===(t=e.details)||void 0===t?void 0:t.tracking_number),1)]})),_:1})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Accession Number")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,o.zw)(null===(t=e.details)||void 0===t?void 0:t.accession_number),1)]})),_:1})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Patient Name")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t,n,a;return[(0,l.Uk)((0,o.zw)(`${null===(t=e.details)||void 0===t?void 0:t.client.first_name} ${null===(n=e.details)||void 0===n?void 0:n.client.middle_name}\n                                                            ${null===(a=e.details)||void 0===a?void 0:a.client.last_name}`),1)]})),_:1})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Specimen Type")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,o.zw)(null===(t=e.details)||void 0===t?void 0:t.specimen_type),1)]})),_:1})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Test(s) Ordered")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,o.zw)(null===(t=e.details)||void 0===t?void 0:t.test_type_name),1)]})),_:1})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"font-size":"18px","font-weight":"600"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Specimen Status")])),_:1}),(0,l.Wm)(f,{slot:"end"},{default:(0,l.w5)((()=>{var t,n;return[(0,l.Uk)((0,o.zw)("specimen-not-collected"==(null===(t=e.details)||void 0===t?void 0:t.order_status)?"Specimen not collected":null===(n=e.details)||void 0===n?void 0:n.order_status),1)]})),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{color:"light",style:{padding:"5px"}},{default:(0,l.w5)((()=>{var n,o,a,i,r;return[(0,l.Wm)(d,{slot:"end",size:"large",color:"primary",onClick:e.viewTestDetails},{default:(0,l.w5)((()=>[(0,l.Uk)(" View ")])),_:1},8,["onClick"]),"specimen-accepted"!==(null===(n=e.details)||void 0===n?void 0:n.order_status)&&"specimen-rejected"!==(null===(o=e.details)||void 0===o?void 0:o.order_status)?((0,l.wg)(),(0,l.j4)(d,{key:0,onClick:t[1]||(t[1]=t=>e.changeSpecimenStatus("accepted")),slot:"end",size:"large",color:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Accept ")])),_:1})):(0,l.kq)("",!0),"specimen-accepted"!==(null===(a=e.details)||void 0===a?void 0:a.order_status)&&"specimen-rejected"!==(null===(i=e.details)||void 0===i?void 0:i.order_status)?((0,l.wg)(),(0,l.j4)(d,{key:1,onClick:t[2]||(t[2]=t=>e.changeSpecimenStatus("rejected")),slot:"end",size:"large",color:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Reject ")])),_:1})):(0,l.kq)("",!0),"specimen-rejected"!==(null===(r=e.details)||void 0===r?void 0:r.order_status)?((0,l.wg)(),(0,l.j4)(d,{key:2,onClick:e.addTest,slot:"end",size:"large",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Add Test ")])),_:1},8,["onClick"])):(0,l.kq)("",!0)]})),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1})])),_:1})}var B=n(4542),A=n(3231),V=n(6188),Z=n(7284),$=n(9013);const N=(0,l.aZ)({components:{IonButtons:w.Sm,IonButton:w.YG,IonIcon:w.gu,IonModal:w.ki,IonHeader:w.Gu,IonContent:w.W2,IonToolbar:w.sr,IonTitle:w.wd,IonFooter:w.fr,IonItem:w.Ie,IonLabel:w.Q$,IonList:w.q_,IonPage:w._i},data(){return{open:!0,details:{client:{date_of_birth:"",first_name:"",id:"",last_name:"",middle_name:"",sex:""}},close:h.xvD,options:[{label:"Order Id",value:"-"},{label:"Tracking Number",value:"-"},{label:"Accession Number",value:"-"},{label:"Patient Name",value:"-"},{label:"Specimen Type",value:"-"},{label:"Test(s) Ordered",value:"-"},{label:"Specimen Status",value:"-"}]}},props:{test:{required:!0,type:Object},show:{required:!0,default:!1,type:Boolean}},async created(){const e=(0,B.KU)(),t=await e.getJson(`tests/${this.test.id}`);null!==t&&void 0!==t&&t.ok&&(this.details=null===t||void 0===t?void 0:t.data)},methods:{viewTestDetails(){this.handleDialog(),A.Z.push(`test/details?test_id=${this.test.id}`)},handleDialog(){this.open=!1},async changeSpecimenStatus(e){const t=(0,B.KU)(),n=await t.putJson(`order_statuses/${e}`,{order_id:this.details.order_id});null!==n&&void 0!==n&&n.ok&&((0,V.x9)(`Specimen ${e} successfully!`),A.Z.go(0),this.handleDialog())},loadOrder(){(0,Z.Z)().searchbyID(this.details.accession_number)},async addTest(){this.handleDialog();const e=(0,B.KU)();(0,y.rM)([{id:"test_types",helpText:"Select test types",type:U.f.TT_MULTIPLE_SELECT,config:{showKeyboard:!0},computedValue:(e,t)=>({order_id:this.details.order_id,tests:e.map((e=>({specimen:e.value,test_type:e.label})))}),options:async()=>{const t=await e.getJson("specimen/test_types",{specimen_id:this.details.specimen_id});return console.log(t),null!==t&&void 0!==t&&t.ok?t.data.map((e=>({label:e,value:this.details.specimen_id}))):[]},validation:e=>$.Z.required(e)}],(async(t,n)=>{console.log(n.test_types);const l=await e.postJson("orders/add_test_to_order",n.test_types);if(null===l||void 0===l||!l.ok)return(0,V.L6)(null===l||void 0===l?void 0:l.error);w.Fy.getTop().then((e=>e&&w.Fy.dismiss())),this.loadOrder()}),null)}}});var H=n(3744);const R=(0,H.Z)(N,[["render",q]]),L=R;function O(e,t){const n=document.getElementById("rootContainer"),l=(0,j.ri)(L,{show:e,test:t});l.mount(n,!1)}const E=(0,l.aZ)({components:{IonPage:w._i,IonToolbar:w.sr,IonItem:w.Ie,IonIcon:w.gu,IonLabel:w.Q$,IonTitle:w.wd,IonHeader:w.Gu,IonButton:w.YG,IonFooter:w.fr,IonContent:w.W2,IonButtons:w.Sm,IonChip:w.hM},props:{title:{type:String,default:"Report"},subtitle:{type:String},columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},enablePagination:{type:Boolean,default:!0},rowsPerPage:{type:Number,default:10},onFinish:{type:Function},onRefresh:{type:Function},onConfigure:{type:Function},csvQuarter:{type:String},searchValue:{type:String}},data(){return{moment:g()}},setup(e){const t=(0,x.tv)(),n=(0,_.iH)([]),o=(0,_.iH)(0),a=(0,_.iH)(""),i=(0,_.iH)(""),r=(0,_.iH)("desc"),s=(0,l.Fl)((()=>{const t=z(n.value)[r.value]((e=>e.data[i.value]));let l="";var o;""==a.value&&(l=""!==(null===(o=e.searchValue)||void 0===o?void 0:o.toString())?`${e.searchValue}`:"");if(l){const n=new S.Z(t,{threshold:.3,keys:["searchIndex"],useExtendedSearch:!0});return n.search(l,{limit:e.rowsPerPage}).map((e=>e.item))}return t})),u=(0,l.Fl)((()=>(0,k.chunk)(s.value,e.rowsPerPage).length)),d=(0,l.Fl)((()=>o.value+2<=u.value)),c=(0,l.Fl)((()=>o.value>0)),p=(0,l.Fl)((()=>{const t=(0,k.chunk)(s.value,e.rowsPerPage);return t[o.value]})),m=e=>{i.value=e,r.value="asc"===r.value?"desc":"asc"},f=()=>(0,y.lo)((e=>{const t=parseInt(e);parseInt(e)<=u.value&&(o.value=t)}),{title:"Select page"}),v=()=>{(0,y.ZP)({id:"search",helpText:"Find",type:U.f.TT_TEXT},(e=>{setTimeout((()=>{a.value=e?e.value:"",o.value=0}),3)}))},g=()=>o.value=0,w=()=>o.value=u.value-1||0,b=()=>o.value+=1,C=()=>o.value-=1,W=()=>{"function"===typeof e.onFinish?e.onFinish():t.push("/")},I=e=>{O(!0,e.data);try{var t,n;if("function"===typeof(null===(t=e.column)||void 0===t?void 0:t.tdClick))null===(n=e.column)||void 0===n||n.tdClick(e);return}catch(l){console.error(l)}},F=()=>e.columns.reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.value||e.ref)),T=e=>{e.forEach((e=>{const t=F().map((t=>{let n="";try{n=(0,k.isEmpty)(e)?"...":"function"===typeof t.value?t.value(e):e[t.ref]||""}catch(l){n="_ERROR_",console.error(l)}return{column:t,data:e,value:n,[t.ref||"nada"]:n}}));n.value.push({row:t,data:e,searchIndex:t.map((e=>`${e.value}`))})}))};return(0,l.YP)((()=>e.columnData),(t=>{if(n.value=[],!Array.isArray(t)||!t.length)return o.value=0,a.value="",i.value="",void T(Array.from({length:e.rowsPerPage}).map((()=>({}))));T(t)}),{immediate:!0,deep:!0}),{first:g,last:w,next:b,prev:C,selectPage:f,sortColumn:m,searchTable:v,onClickTablecell:I,finish:W,sync:h.Z_X,search:h.yC4,close:h.xvD,arrowUp:h.zJj,arrowDown:h.DIG,document:h.tjo,page:p,canNext:d,searchTerm:a,totalPages:u,sortOrder:r,canPrev:c,currentPage:o,columnSorted:i}}}),K=(0,H.Z)(E,[["render",f],["__scopeId","data-v-63d359d3"]]),Y=K,M=(0,l._)("div",{id:"rootContainer"},null,-1),G=(0,l.aZ)({__name:"TestsPage",setup(e){const t=[[{label:"Date ordered",ref:"created_date"},{label:"Patient No",value:e=>{var t;return(null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.id)||"-"}},{label:"Patient Name",value:e=>{var t,n;return`${null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.first_name} ${null===e||void 0===e||null===(n=e.client)||void 0===n?void 0:n.last_name}`}},{label:"Accession No",ref:"accession_number"},{label:"Test type",ref:"test_type_name"},{label:"Test Location",ref:"requesting_ward"},{label:"Test status",ref:"status"}]],n=(0,_.iH)([]),o=(0,B.KU)(),a=(0,_.iH)(`${void 0!==A.Z.currentRoute.value.query.patient_id?A.Z.currentRoute.value.query.patient_id:""}`);function i(){A.Z.push("/")}function r(){o.getJson("tests").then((e=>{if(!e.ok)return(0,V.L6)(e.error);n.value=e.data.data}))}return(0,l.bv)((()=>r())),(e,o)=>((0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(Y,{searchValue:a.value,title:"All tests",columns:t,columnData:n.value,finish:i,onRefresh:r},null,8,["searchValue","columnData"]),M]))}}),J=G,Q=J}}]);
//# sourceMappingURL=4945.de299108.js.map
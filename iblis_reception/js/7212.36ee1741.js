"use strict";(globalThis["webpackChunkIBLISReception"]=globalThis["webpackChunkIBLISReception"]||[]).push([[7212],{82077:(e,t,l)=>{l.d(t,{A:()=>o});l(14603),l(47566),l(98721);var a=l(741),n=l(85901);class o{async writeLbl(e,t,l=`${Date.now()}.lbl`){const o=(0,a.Kj)();try{const a=await o.getText(e,t),i=new Blob([null===a||void 0===a?void 0:a.data],{type:"text/plain"});e=URL.createObjectURL(i);const s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download",l),s.click(),URL.revokeObjectURL(e),(0,n.tP)("Accession number printed!")}catch(i){console.error(i)}}}},27311:(e,t,l)=>{l.d(t,{u0:()=>f,Ay:()=>k,Qf:()=>h});var a=l(73235),n=l(20641),o=l(90033);function i(e,t,l,a,i,s){const r=(0,n.g2)("ion-title"),u=(0,n.g2)("ion-toolbar"),d=(0,n.g2)("ion-header"),c=(0,n.g2)("ion-content"),v=(0,n.g2)("ion-button"),p=(0,n.g2)("ion-footer"),b=(0,n.g2)("ion-page");return(0,n.uX)(),(0,n.Wv)(b,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"his-lg-text ion-text-center"},{default:(0,n.k6)((()=>[(0,n.eW)((0,o.v_)(e.currentField.helpText),1)])),_:1})])),_:1})])),_:1}),(0,n.bF)(c,null,{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)(n.PR,null,[((0,n.uX)(),(0,n.Wv)((0,n.$y)(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,40,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))])),_:1}),(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{color:"light"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.eW)(" Close ")]))),_:1},8,["disabled","onClick"]),(0,n.bF)(v,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)(" Clear ")]))),_:1},8,["disabled","onClick"]),(0,n.bF)(v,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)(" Done ")]))),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})}l(98992),l(3949);var s=l(85901),r=l(77270);function u(){const e={};return r.N.forEach((t=>{e[t]=(0,n.$V)((()=>l(33274)(`./${t}.vue`)))})),e}const d=(0,n.pM)({name:"SingleFieldTouchForm",components:{IonPage:a.AO,IonContent:a.W9,IonFooter:a.M0,IonToolbar:a.ai,IonButton:a.Jm,IonHeader:a.eU,IonTitle:a.BC,...u()},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),methods:{onClose(){"modal"===this.dismissType?a.OZ.dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e},onDone(){if(this.disableBtn=!0,this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return(0,s._O)(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(e){(0,s.L_)(`${e}`),console.error(e)}this.onClose(),this.disableBtn=!1}}});var c=l(66262);const v=(0,c.A)(d,[["render",i]]),p=v;var b=l(25310),m=l(6336);async function f(e,t,l){(await a.OZ.create({component:b.A,backdropDismiss:!1,cssClass:"full-modal",componentProps:{onFinish:t,fields:e,skipSummary:!0,disableAutoModalDismiss:!0,cancelAction:()=>{"function"===typeof l&&l(),a.OZ.dismiss()}}})).present()}async function h(e,t={}){const l="boolean"!==typeof(null===t||void 0===t?void 0:t.strictNumbers)||(null===t||void 0===t?void 0:t.strictNumbers),n=await a.OZ.create({component:m.A,backdropDismiss:!1,cssClass:"keypad-modal custom-modal-backdrop",componentProps:{title:(null===t||void 0===t?void 0:t.title)||"",preset:(null===t||void 0===t?void 0:t.preset)||"",toggleButton:null===t||void 0===t?void 0:t.toggleButton,strictNumbers:l,customKeyboard:null===t||void 0===t?void 0:t.customKeyboard,noFloat:"boolean"===typeof(null===t||void 0===t?void 0:t.noFloat)&&t.noFloat,onKeyPress(t,a){e(l?parseInt(t):t,a)}}});n.present()}async function k(e,t){(await a.OZ.create({component:p,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}},80415:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});l(74423),l(44114),l(98992),l(54520),l(72577),l(81454);var a=l(20641),n=l(50953),o=l(90033),i=l(73235),s=l(75220),r=l(94355),u=l(27311),d=l(77270),c=l(1590),v=l(741),p=l(85901),b=l(72256),m=l(46079),f=l(82077);const h=(0,a.pM)({__name:"IdentifierResult",setup(e){const t=(0,v.Kj)(),l=(0,s.lq)(),{searchResult:h}=(0,r.A)(),k=(0,n.KR)(""),_=(0,n.KR)(""),g=(0,n.KR)([{label:"Order Id",value:"-"},{label:"Tracking Number",value:"-"},{label:"Accession Number",value:"-"},{label:"Patient Name",value:"-"},{label:"Specimen Type",value:"-"},{label:"Test(s) Ordered",value:"-"},{label:"Specimen Status",value:"-"}]),y=`${l.params.identifier||"Unknown ID"}`,F=(0,a.EW)((()=>!!Object.keys(h.value).length));function R(){(0,r.A)().searchbyID(y)}async function C(e){const l=await t.putJson(`order_statuses/${e}`,{order_id:g.value[0].value});null!==l&&void 0!==l&&l.ok&&((0,p.tP)(`Specimen ${e} successfully!`),m.A.push("/tests"))}function w(){(0,u.u0)([{id:"test_types",helpText:"Select test types",type:d.P.TT_MULTIPLE_SELECT,config:{showKeyboard:!0},computedValue:(e,t)=>{var l;return{order_id:(null===(l=h.value)||void 0===l?void 0:l.order_id)||0,tests:e.map((e=>({specimen:e.value,test_type:e.label})))}},options:async()=>{var e;const[l]=(null===(e=h.value)||void 0===e?void 0:e.tests)||[];if(!l)return[];const a=await t.getJson("specimen/test_types",{specimen_id:l.specimen_id});return null!==a&&void 0!==a&&a.ok?a.data.filter((e=>!h.value.tests.map((e=>e.test_type)).includes(e))).map((e=>({label:e,value:l.specimen_id}))):[]},validation:e=>c.A.required(e)}],(async(e,l)=>{const a=await t.postJson("orders/add_test_to_order",l.test_types);if(!a.ok)return(0,p._O)(a.error);b.OZ.getTop().then((e=>e&&b.OZ.dismiss())),R()}),null)}(0,a.wB)(h,(async e=>{if(Object.keys(e).length){const l=await t.getJson(`orders/${e.order_id}`);_.value=null===l||void 0===l?void 0:l.data.order_status,k.value=e.client_id;const[a]=e.tests;g.value=[{label:"Order Id",value:e.order_id},{label:"Tracking Number",value:e.tracking_number},{label:"Accession Number",value:e.accession_number},{label:"Patient Name",value:`${e.first_name} ${e.last_name}`},{label:"Specimen Type",value:a.specimen},{label:"Test(s) Ordered",value:e.tests.map((e=>e.test_type)).join(", ")}]}}),{deep:!0,immediate:!0});const I=()=>{const e=new f.A,{value:t="-"}=g.value.find((e=>"Accession Number"===e.label))||{};e.writeLbl("printout/accession_number",{accession_number:t},`${t}.lbl`)};return(0,a.sV)((()=>{F.value||R()})),(e,t)=>((0,a.uX)(),(0,a.Wv)((0,n.R1)(i.AO),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(i.eU),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(i.ai),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(i.BC),{class:"his-lg-text"},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,o.v_)(y))])),_:1})])),_:1})])),_:1}),(0,a.bF)((0,n.R1)(i.W9),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(i.nf),null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.value,((e,t)=>((0,a.uX)(),(0,a.Wv)((0,n.R1)(i.uz),{class:"his-md-text",key:t},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(i.he),null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.label),1)])),_:2},1024),(0,a.bF)((0,n.R1)(i.he),{slot:"end"},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,o.v_)(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.bF)((0,n.R1)(i.M0),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(i.ai),{color:"default",style:{padding:"5px"}},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(i.Jm),{"router-link":"/home",size:"large"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)(" Cancel ")]))),_:1}),(0,a.bF)((0,n.R1)(i.Jm),{size:"large",slot:"end",onClick:I},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)(" Print Accession Number ")]))),_:1}),(0,a.bF)((0,n.R1)(i.Jm),{onClick:w,disabled:!F.value,slot:"end",size:"large"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)(" Add test ")]))),_:1},8,["disabled"]),"specimen-accepted"!==_.value&&"specimen-rejected"!==_.value?((0,a.uX)(),(0,a.Wv)((0,n.R1)(i.Jm),{key:0,onClick:t[0]||(t[0]=e=>C("accepted")),disabled:!F.value,slot:"end",size:"large",color:"success"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)(" Accept ")]))),_:1},8,["disabled"])):(0,a.Q3)("",!0),"specimen-accepted"!==_.value&&"specimen-rejected"!==_.value?((0,a.uX)(),(0,a.Wv)((0,n.R1)(i.Jm),{key:1,onClick:t[1]||(t[1]=e=>C("rejected")),disabled:!F.value,slot:"end",size:"large",color:"danger"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)(" Reject ")]))),_:1},8,["disabled"])):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1}))}}),k=h,_=k},22812:e=>{var t=TypeError;e.exports=function(e,l){if(e<l)throw new t("Not enough arguments");return e}},20116:(e,t,l)=>{var a=l(46518),n=l(72652),o=l(79306),i=l(28551),s=l(1767);a({target:"Iterator",proto:!0,real:!0},{find:function(e){i(this),o(e);var t=s(this),l=0;return n(t,(function(t,a){if(e(t,l++))return a(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},72577:(e,t,l)=>{l(20116)},14603:(e,t,l)=>{var a=l(36840),n=l(79504),o=l(655),i=l(22812),s=URLSearchParams,r=s.prototype,u=n(r.append),d=n(r["delete"]),c=n(r.forEach),v=n([].push),p=new s("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&a(r,"delete",(function(e){var t=arguments.length,l=t<2?void 0:arguments[1];if(t&&void 0===l)return d(this,e);var a=[];c(this,(function(e,t){v(a,{key:t,value:e})})),i(t,1);var n,s=o(e),r=o(l),p=0,b=0,m=!1,f=a.length;while(p<f)n=a[p++],m||n.key===s?(m=!0,d(this,n.key)):b++;while(b<f)n=a[b++],n.key===s&&n.value===r||u(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},47566:(e,t,l)=>{var a=l(36840),n=l(79504),o=l(655),i=l(22812),s=URLSearchParams,r=s.prototype,u=n(r.getAll),d=n(r.has),c=new s("a=1");!c.has("a",2)&&c.has("a",void 0)||a(r,"has",(function(e){var t=arguments.length,l=t<2?void 0:arguments[1];if(t&&void 0===l)return d(this,e);var a=u(this,e);i(t,1);var n=o(l),s=0;while(s<a.length)if(a[s++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},98721:(e,t,l)=>{var a=l(43724),n=l(79504),o=l(62106),i=URLSearchParams.prototype,s=n(i.forEach);a&&!("size"in i)&&o(i,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=7212.36ee1741.js.map
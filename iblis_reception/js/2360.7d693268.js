"use strict";(globalThis["webpackChunkIBLISReception"]=globalThis["webpackChunkIBLISReception"]||[]).push([[2360],{2618:(e,l,t)=>{t.d(l,{rM:()=>f,ZP:()=>w,lo:()=>_});var a=t(9126),n=t(6252),o=t(3577);function s(e,l,t,a,s,i){const d=(0,n.up)("ion-title"),u=(0,n.up)("ion-toolbar"),r=(0,n.up)("ion-header"),c=(0,n.up)("ion-content"),p=(0,n.up)("ion-button"),m=(0,n.up)("ion-footer"),v=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"his-lg-text ion-text-center"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.currentField.helpText),1)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,40,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{color:"light"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Close ")])),_:1},8,["disabled","onClick"]),(0,n.Wm)(p,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Clear ")])),_:1},8,["disabled","onClick"]),(0,n.Wm)(p,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Done ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})}var i=t(6188),d=t(9652);function u(){const e={};return d.q.forEach((l=>{e[l]=(0,n.RC)((()=>t(7751)(`./${l}.vue`)))})),e}const r=(0,n.aZ)({name:"SingleFieldTouchForm",components:{IonPage:a._i,IonContent:a.W2,IonFooter:a.fr,IonToolbar:a.sr,IonButton:a.YG,IonHeader:a.Gu,IonTitle:a.wd,...u()},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),methods:{onClose(){"modal"===this.dismissType?a.Fy.dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e},onDone(){if(this.disableBtn=!0,this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return(0,i.L6)(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(e){(0,i.N$)(`${e}`),console.error(e)}this.onClose(),this.disableBtn=!1}}});var c=t(3744);const p=(0,c.Z)(r,[["render",s]]),m=p;var v=t(516),b=t(5289);async function f(e,l,t){(await a.Fy.create({component:v.Z,backdropDismiss:!1,cssClass:"full-modal",componentProps:{onFinish:l,fields:e,skipSummary:!0,disableAutoModalDismiss:!0,cancelAction:()=>{"function"===typeof t&&t(),a.Fy.dismiss()}}})).present()}async function _(e,l={}){const t="boolean"!==typeof(null===l||void 0===l?void 0:l.strictNumbers)||(null===l||void 0===l?void 0:l.strictNumbers),n=await a.Fy.create({component:b.Z,backdropDismiss:!1,cssClass:"keypad-modal custom-modal-backdrop",componentProps:{title:(null===l||void 0===l?void 0:l.title)||"",preset:(null===l||void 0===l?void 0:l.preset)||"",toggleButton:null===l||void 0===l?void 0:l.toggleButton,strictNumbers:t,customKeyboard:null===l||void 0===l?void 0:l.customKeyboard,noFloat:"boolean"===typeof(null===l||void 0===l?void 0:l.noFloat)&&l.noFloat,onKeyPress(l,a){e(t?parseInt(l):l,a)}}});n.present()}async function w(e,l){(await a.Fy.create({component:m,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:l}})).present()}},7415:(e,l,t)=>{t.r(l),t.d(l,{default:()=>w});t(560),t(6801);var a=t(6252),n=t(2262),o=t(3577),s=t(9126),i=t(2201),d=t(7284),u=t(2618),r=t(9652),c=t(9013),p=t(4542),m=t(6188),v=t(9905),b=t(3231);const f=(0,a.aZ)({__name:"IdentifierResult",setup(e){const l=(0,p.KU)(),t=(0,i.yj)(),{searchResult:f}=(0,d.Z)(),_=(0,n.iH)(""),w=(0,n.iH)(""),y=(0,n.iH)([{label:"Order Id",value:"-"},{label:"Tracking Number",value:"-"},{label:"Accession Number",value:"-"},{label:"Patient Name",value:"-"},{label:"Specimen Type",value:"-"},{label:"Test(s) Ordered",value:"-"},{label:"Specimen Status",value:"-"}]),g=`${t.params.identifier||"Unknown ID"}`,k=(0,a.Fl)((()=>!!Object.keys(f.value).length));function h(){(0,d.Z)().searchbyID(g)}async function F(e){const t=await l.putJson(`order_statuses/${e}`,{order_id:y.value[0].value});null!==t&&void 0!==t&&t.ok&&((0,m.x9)(`Specimen ${e} successfully!`),b.Z.push("/home"))}function U(){(0,u.rM)([{id:"test_types",helpText:"Select test types",type:r.f.TT_MULTIPLE_SELECT,config:{showKeyboard:!0},computedValue:(e,l)=>{var t;return{order_id:(null===(t=f.value)||void 0===t?void 0:t.order_id)||0,tests:e.map((e=>({specimen:e.value,test_type:e.label})))}},options:async()=>{var e;const[t]=(null===(e=f.value)||void 0===e?void 0:e.tests)||[];if(!t)return[];const a=await l.getJson("specimen/test_types",{specimen_id:t.specimen_id});return null!==a&&void 0!==a&&a.ok?a.data.filter((e=>!f.value.tests.map((e=>e.test_type)).includes(e))).map((e=>({label:e,value:t.specimen_id}))):[]},validation:e=>c.Z.required(e)}],(async(e,t)=>{const a=await l.postJson("orders/add_test_to_order",t.test_types);if(!a.ok)return(0,m.L6)(a.error);v.Fy.getTop().then((e=>e&&v.Fy.dismiss())),h()}),null)}return(0,a.YP)(f,(async e=>{if(Object.keys(e).length){console.log(e);const t=await l.getJson(`orders/${e.order_id}`);w.value=null===t||void 0===t?void 0:t.data.order_status,_.value=e.client_id;const[a]=e.tests;y.value=[{label:"Order Id",value:e.order_id},{label:"Tracking Number",value:e.tracking_number},{label:"Accession Number",value:e.accession_number},{label:"Patient Name",value:`${e.first_name} ${e.last_name}`},{label:"Specimen Type",value:a.specimen},{label:"Test(s) Ordered",value:e.tests.map((e=>e.test_type)).join(", ")}]}}),{deep:!0,immediate:!0}),(0,a.bv)((()=>{k.value||h()})),(e,l)=>((0,a.wg)(),(0,a.j4)((0,n.SU)(s._i),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(s.Gu),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(s.sr),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(s.wd),{class:"his-lg-text"},{default:(0,a.w5)((()=>[(0,a._)("b",null,(0,o.zw)(g))])),_:1})])),_:1})])),_:1}),(0,a.Wm)((0,n.SU)(s.W2),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(s.q_),null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.value,((e,l)=>((0,a.wg)(),(0,a.j4)((0,n.SU)(s.Ie),{class:"his-md-text",key:l},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(s.Q$),null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.label),1)])),_:2},1024),(0,a.Wm)((0,n.SU)(s.Q$),{slot:"end"},{default:(0,a.w5)((()=>[(0,a._)("b",null,(0,o.zw)(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.Wm)((0,n.SU)(s.fr),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(s.sr),{color:"default",style:{padding:"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(s.YG),{"router-link":"/home",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Cancel ")])),_:1}),(0,a.Wm)((0,n.SU)(s.YG),{onClick:U,disabled:!k.value,slot:"end",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Add test ")])),_:1},8,["disabled"]),"specimen-accepted"!==w.value&&"specimen-rejected"!==w.value?((0,a.wg)(),(0,a.j4)((0,n.SU)(s.YG),{key:0,onClick:l[0]||(l[0]=e=>F("accepted")),disabled:!k.value,slot:"end",size:"large",color:"success"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Accept ")])),_:1},8,["disabled"])):(0,a.kq)("",!0),"specimen-accepted"!==w.value&&"specimen-rejected"!==w.value?((0,a.wg)(),(0,a.j4)((0,n.SU)(s.YG),{key:1,onClick:l[1]||(l[1]=e=>F("rejected")),disabled:!k.value,slot:"end",size:"large",color:"danger"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Reject ")])),_:1},8,["disabled"])):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1}))}}),_=f,w=_}}]);
//# sourceMappingURL=2360.7d693268.js.map